!function(e){var t={};function n(i){if(t[i])return t[i].exports;var o=t[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:i})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=302)}({302:function(e,t,n){e.exports=n(303)},303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(304),o=(n.n(i),n(305)),a=(n.n(o),n(306)),l=(n.n(a),n(307)),r=(n.n(l),n(308)),s=(n.n(r),n(309));n.n(s)},304:function(e,t){CKEDITOR.plugins.add("normalizeonchange",{init:function(e){CKEDITOR.on("instanceReady",function(e){e.editor.on("change",function(t){var n=e.editor.getSelection();if(n){var i=n.getStartElement();i&&i.$&&n.getStartElement().$.normalize()}})})}})},305:function(e,t){CKEDITOR.plugins.add("concrete5inline",{init:function(e){e.elementMode==CKEDITOR.ELEMENT_MODE_INLINE&&(e.addCommand("c5save",{exec:function(e){$("#"+e.element.$.id+"_content").val(e.getData()),ConcreteEvent.fire("EditModeBlockSaveInline"),e.destroy()}}),e.addCommand("c5cancel",{exec:function(e){ConcreteEvent.fire("EditModeExitInline"),e.destroy()}}),e.ui.addButton&&(e.ui.addButton("concrete_save",{label:e.lang.common.ok,command:"c5save",toolbar:"document,0"}),e.ui.addButton("concrete_cancel",{label:e.lang.common.cancel,command:"c5cancel",toolbar:"document,1"})))}})},306:function(e,t){CKEDITOR.plugins.add("concrete5link",{requires:"link",init:function(e){CKEDITOR.on("dialogDefinition",function(t){var n=t.data.name,i=t.data.definition,o=e.lang.common,a=(e.lang.link,function(e){return function(e,t){t[e]||(t[e]={}),t[e][this.id]=this.getValue()||""}.call(this,"target",e)}),l=function(){return CKEDITOR.plugins.link.getSelectedLink(t.editor)};if("link"==n){var r=i.getContents("info");null===r.get("sitemapBrowse")&&t.editor.config.sitemap&&r.add({type:"button",id:"sitemapBrowse",label:"Sitemap",title:"Sitemap",onClick:function(){jQuery.fn.dialog.open({width:"90%",height:"70%",modal:!1,title:ccmi18n_sitemap.choosePage,href:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/page/sitemap_selector"}),ConcreteEvent.unsubscribe("SitemapSelectPage"),ConcreteEvent.subscribe("SitemapSelectPage",function(e,t){jQuery.fn.dialog.closeTop();var n=i.dialog.getContentElement("info","url");n&&n.setValue(CCM_APPLICATION_URL+"/index.php?cID="+t.cID)})}},"browse");var s=i.getContents("target");if(null!==s.get("linkTargetType")){var c=s.get("linkTargetType");"lightbox"!=c.items[3][1]&&(c.items.splice(3,0,["<lightbox>","lightbox"]),c.items.join()),null===s.get("lightboxFeatures")&&s.elements.push({type:"vbox",width:"100%",align:"center",padding:2,id:"lightboxFeatures",children:[{type:"fieldset",label:"Lightbox Features",children:[{type:"hbox",children:[{type:"checkbox",id:"imageLightbox",label:"Linking to an image",setup:function(e){var t=l();null!==t&&void 0!==e.target&&("lightbox"==e.target.name&&"image"==t.data("concrete5-link-lightbox")?this.setValue(1):this.setValue(0))},commit:a,onChange:function(e){this.getValue()?this.getDialog().getContentElement("target","lightboxDimensions").getElement().hide():this.getDialog().getContentElement("target","lightboxDimensions").getElement().show()}}]},{type:"hbox",id:"lightboxDimensions",children:[{type:"text",widths:["50%","50%"],labelLayout:"horizontal",label:o.width,id:"lightboxWidth",setup:function(e){var t=l();null!==t&&void 0!==e.target&&("lightbox"==e.target.name&&t.hasAttribute("data-concrete5-link-lightbox-width")?this.setValue(t.data("concrete5-link-lightbox-width")):this.setValue(null))},commit:a},{type:"text",labelLayout:"horizontal",widths:["50%","50%"],label:o.height,id:"lightboxHeight",setup:function(e){var t=l();null!==t&&void 0!==e.target&&("lightbox"==e.target.name&&t.hasAttribute("data-concrete5-link-lightbox-height")?this.setValue(t.data("concrete5-link-lightbox-height")):this.setValue(null))},commit:a}],setup:function(){this.getDialog().getContentElement("target","imageLightbox").getValue()?this.getElement().hide():this.getElement().show()}}]}],setup:function(){this.getDialog().getContentElement("info","linkType")||this.getElement().hide(),"lightbox"!=this.getDialog().getContentElement("target","linkTargetType").getValue()&&this.getElement().hide()}}),c.onChange=CKEDITOR.tools.override(c.onChange,function(e){return function(){var t=this.getDialog().getContentElement("target","lightboxFeatures").getElement();"lightbox"!=this.getValue()||this._.selectedElement?t.hide():t.show(),e.call(this)}}),c.setup=function(e){e.target&&("lightbox"==e.target.name&&(e.target.type=e.target.name),this.setValue(e.target.type||"notSet")),this.onChange.call(this)},c.commit=function(e){e.target||(e.target={}),e.target.type=this.getValue()},i.onOk=CKEDITOR.tools.override(i.onOk,function(e){return function(){var t={},n={};this.commitContent(t),e.call(this);var i=l();null!==i&&("lightbox"==t.target.type?t.target.imageLightbox?(i.data("concrete5-link-lightbox","image"),n={"data-concrete5-link-lightbox-width":1,"data-concrete5-link-lightbox-height":1}):(i.data("concrete5-link-lightbox","iframe"),t.target.lightboxWidth&&t.target.lightboxHeight?(i.data("concrete5-link-lightbox-width",t.target.lightboxWidth),i.data("concrete5-link-lightbox-height",t.target.lightboxHeight)):n={"data-concrete5-link-lightbox-width":1,"data-concrete5-link-lightbox-height":1}):n={"data-concrete5-link-lightbox":1,"data-concrete5-link-lightbox-width":1,"data-concrete5-link-lightbox-height":1},i.removeAttributes(n))}})}}})}})},307:function(e,t){CKEDITOR.plugins.add("concrete5filemanager",{requires:"filebrowser",init:function(){CKEDITOR.on("dialogDefinition",function(e){for(var t=e.editor,n=e.data.definition,i=n.contents.length,o=0;o<i;o++){var a=n.contents[o].get("browse");null!==a&&(a.hidden=!1,a.onClick=function(){t._.filebrowserSe=this;var e=this.getDialog();ConcreteFileManager.launchDialog(function(n){jQuery.fn.dialog.showLoader(),ConcreteFileManager.getFileDetails(n.fID,function(n){jQuery.fn.dialog.hideLoader();var i=n.files[0];"image"!=e.getName()&&"image2"!=e.getName()||"info"!=e._.currentTabId?CKEDITOR.tools.callFunction(t._.filebrowserFn,i.urlDownload):CKEDITOR.tools.callFunction(t._.filebrowserFn,i.urlInline,function(){var t;e.dontResetSize=!0,(t=e.getContentElement("info","txtWidth"))&&t.setValue(""),(t=e.getContentElement("info","width"))&&t.setValue(""),(t=e.getContentElement("info","txtHeight"))&&t.setValue(""),(t=e.getContentElement("info","height"))&&t.setValue(""),(t=e.getContentElement("info","txtAlt"))&&t.setValue(i.title),(t=e.getContentElement("info","alt"))&&t.setValue(i.title)})})})})}})}})},308:function(e,t){CKEDITOR.plugins.add("concrete5styles",{requires:["widget","stylescombo","menubutton"],init:function(e){},afterInit:function(e){var t=this;function n(e){return{exec:function(t){var n=e.html,i=t.getSelection(),o=i&&i.getSelectedText();if(-1!=n.indexOf("> </")&&o){var a,l=["address","article","aside","audio","blockquote","canvas","dd","div","dl","fieldset","figcaption","figure","figcaption","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","noscript","ol","output","p","pre","section","span","table","tfoot","ul","video"],r=i.getRanges(),s=new CKEDITOR.dom.element("div");for(a=0,len=r.length;a<len;++a){var c=r[a],g=c.createBookmark2();s.append(c.cloneContents()),c.moveToBookmark(g),c.select()}var d=s.getHtml();for(a=0;a<l.length;a++){var h=new RegExp("(<"+l[a]+"[^>]*>|</"+l[a]+">)","gi");d=d.replace(h,"")}n=n.replace("> </",">"+d+"</")}t.insertHtml(n)}}}var i={name:"snippets",icon:"snippet.png",title:"Snippets",items:[]};if(e.config.snippets&&($.each(e.config.snippets,function(t,n){e.widgets.add(n.scsHandle,{template:n.scsName});var o={};o.name=n.scsHandle,o.icon="snippet.png",o.title=n.scsName,o.html='<span class="ccm-content-editor-snippet" contenteditable="false" data-scsHandle="'+n.scsHandle+'">'+n.scsName+"</span>",i.items.push(o)}),function(i){for(var o=i.items,a={},l=0;l<o.length;l++){var r=o[l],s=r.name;e.addCommand(s,n(r)),a[s]={label:r.title,command:s,group:i.name,role:"menuitem"}}e.addMenuGroup(i.name,1),e.addMenuItems(a),e.ui.add(i.name,CKEDITOR.UI_MENUBUTTON,{label:i.title,icon:t.path+"/icons/"+i.icon,toolbar:i.toolbar||"insert",onMenu:function(){var e={};for(var t in a)e[t]=CKEDITOR.TRISTATE_OFF;return e}})}(i,i.name)),e.config.classes){var o=[];$.each(e.config.classes,function(){var e={};e.name=this.title,void 0!==this.element?e.element=this.element:void 0!==this.forceBlock&&1==this.forceBlock?e.element=["h1","h2","h3","h4","h5","h6","p"]:e.element="span",void 0!==this.spanClass&&(e.attributes={class:this.spanClass}),void 0!==this.attributes&&(e.attributes=this.attributes),void 0!==this.styles&&(e.styles=this.styles),"widget"===this.type&&void 0!==this.widget&&(e.type="widget",e.widget=this.widget),o.push(e)}),e.fire("stylesSet",{styles:o})}}})},309:function(e,t){CKEDITOR.plugins.add("concrete5uploadimage",{requires:"uploadimage",init:function(e){e.on("fileUploadRequest",function(e){var t=e.data.fileLoader,n=t.xhr,i=new FormData;i.append("ccm_token",CCM_SECURITY_TOKEN),i.append("files[]",t.file,t.fileName),n.send(i),e.stop()}),e.on("fileUploadResponse",function(e){e.stop();var t=e.data,n=t.fileLoader.xhr;if(200==n.status){var i=jQuery.parseJSON(n.responseText);i.length>0&&(t.url=i[0].urlInline)}else t.message=n.responseText,e.cancel()})}})}});