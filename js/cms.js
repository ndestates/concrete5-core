!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i(i.s=297)}([,function(e,t){e.exports=jQuery},function(e,t){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(i=window)}e.exports=i},function(e,t,i){var n,o,s,r;r=function(e){return e.ui=e.ui||{},e.ui.version="1.12.1"},o=[i(1)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){(function(e,i){var n;!function(){var o="object"==typeof self&&self.self===self&&self||"object"==typeof e&&e.global===e&&e||this||{},s=o._,r=Array.prototype,a=Object.prototype,l="undefined"!=typeof Symbol?Symbol.prototype:null,c=r.push,u=r.slice,d=a.toString,h=a.hasOwnProperty,p=Array.isArray,f=Object.keys,m=Object.create,g=function(){},v=function(e){return e instanceof v?e:this instanceof v?void(this._wrapped=e):new v(e)};void 0===t||t.nodeType?o._=v:(void 0!==i&&!i.nodeType&&i.exports&&(t=i.exports=v),t._=v),v.VERSION="1.9.1";var y,b=function(e,t,i){if(void 0===t)return e;switch(null==i?3:i){case 1:return function(i){return e.call(t,i)};case 3:return function(i,n,o){return e.call(t,i,n,o)};case 4:return function(i,n,o,s){return e.call(t,i,n,o,s)}}return function(){return e.apply(t,arguments)}},C=function(e,t,i){return v.iteratee!==y?v.iteratee(e,t):null==e?v.identity:v.isFunction(e)?b(e,t,i):v.isObject(e)&&!v.isArray(e)?v.matcher(e):v.property(e)};v.iteratee=y=function(e,t){return C(e,t,1/0)};var _=function(e,t){return t=null==t?e.length-1:+t,function(){for(var i=Math.max(arguments.length-t,0),n=Array(i),o=0;o<i;o++)n[o]=arguments[o+t];switch(t){case 0:return e.call(this,n);case 1:return e.call(this,arguments[0],n);case 2:return e.call(this,arguments[0],arguments[1],n)}var s=Array(t+1);for(o=0;o<t;o++)s[o]=arguments[o];return s[t]=n,e.apply(this,s)}},D=function(e){if(!v.isObject(e))return{};if(m)return m(e);g.prototype=e;var t=new g;return g.prototype=null,t},w=function(e){return function(t){return null==t?void 0:t[e]}},x=function(e,t){return null!=e&&h.call(e,t)},k=function(e,t){for(var i=t.length,n=0;n<i;n++){if(null==e)return;e=e[t[n]]}return i?e:void 0},E=Math.pow(2,53)-1,S=w("length"),A=function(e){var t=S(e);return"number"==typeof t&&t>=0&&t<=E};v.each=v.forEach=function(e,t,i){var n,o;if(t=b(t,i),A(e))for(n=0,o=e.length;n<o;n++)t(e[n],n,e);else{var s=v.keys(e);for(n=0,o=s.length;n<o;n++)t(e[s[n]],s[n],e)}return e},v.map=v.collect=function(e,t,i){t=C(t,i);for(var n=!A(e)&&v.keys(e),o=(n||e).length,s=Array(o),r=0;r<o;r++){var a=n?n[r]:r;s[r]=t(e[a],a,e)}return s};var T=function(e){return function(t,i,n,o){var s=arguments.length>=3;return function(t,i,n,o){var s=!A(t)&&v.keys(t),r=(s||t).length,a=e>0?0:r-1;for(o||(n=t[s?s[a]:a],a+=e);a>=0&&a<r;a+=e){var l=s?s[a]:a;n=i(n,t[l],l,t)}return n}(t,b(i,o,4),n,s)}};v.reduce=v.foldl=v.inject=T(1),v.reduceRight=v.foldr=T(-1),v.find=v.detect=function(e,t,i){var n=(A(e)?v.findIndex:v.findKey)(e,t,i);if(void 0!==n&&-1!==n)return e[n]},v.filter=v.select=function(e,t,i){var n=[];return t=C(t,i),v.each(e,function(e,i,o){t(e,i,o)&&n.push(e)}),n},v.reject=function(e,t,i){return v.filter(e,v.negate(C(t)),i)},v.every=v.all=function(e,t,i){t=C(t,i);for(var n=!A(e)&&v.keys(e),o=(n||e).length,s=0;s<o;s++){var r=n?n[s]:s;if(!t(e[r],r,e))return!1}return!0},v.some=v.any=function(e,t,i){t=C(t,i);for(var n=!A(e)&&v.keys(e),o=(n||e).length,s=0;s<o;s++){var r=n?n[s]:s;if(t(e[r],r,e))return!0}return!1},v.contains=v.includes=v.include=function(e,t,i,n){return A(e)||(e=v.values(e)),("number"!=typeof i||n)&&(i=0),v.indexOf(e,t,i)>=0},v.invoke=_(function(e,t,i){var n,o;return v.isFunction(t)?o=t:v.isArray(t)&&(n=t.slice(0,-1),t=t[t.length-1]),v.map(e,function(e){var s=o;if(!s){if(n&&n.length&&(e=k(e,n)),null==e)return;s=e[t]}return null==s?s:s.apply(e,i)})}),v.pluck=function(e,t){return v.map(e,v.property(t))},v.where=function(e,t){return v.filter(e,v.matcher(t))},v.findWhere=function(e,t){return v.find(e,v.matcher(t))},v.max=function(e,t,i){var n,o,s=-1/0,r=-1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=A(e)?e:v.values(e)).length;a<l;a++)null!=(n=e[a])&&n>s&&(s=n);else t=C(t,i),v.each(e,function(e,i,n){((o=t(e,i,n))>r||o===-1/0&&s===-1/0)&&(s=e,r=o)});return s},v.min=function(e,t,i){var n,o,s=1/0,r=1/0;if(null==t||"number"==typeof t&&"object"!=typeof e[0]&&null!=e)for(var a=0,l=(e=A(e)?e:v.values(e)).length;a<l;a++)null!=(n=e[a])&&n<s&&(s=n);else t=C(t,i),v.each(e,function(e,i,n){((o=t(e,i,n))<r||o===1/0&&s===1/0)&&(s=e,r=o)});return s},v.shuffle=function(e){return v.sample(e,1/0)},v.sample=function(e,t,i){if(null==t||i)return A(e)||(e=v.values(e)),e[v.random(e.length-1)];var n=A(e)?v.clone(e):v.values(e),o=S(n);t=Math.max(Math.min(t,o),0);for(var s=o-1,r=0;r<t;r++){var a=v.random(r,s),l=n[r];n[r]=n[a],n[a]=l}return n.slice(0,t)},v.sortBy=function(e,t,i){var n=0;return t=C(t,i),v.pluck(v.map(e,function(e,i,o){return{value:e,index:n++,criteria:t(e,i,o)}}).sort(function(e,t){var i=e.criteria,n=t.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return e.index-t.index}),"value")};var F=function(e,t){return function(i,n,o){var s=t?[[],[]]:{};return n=C(n,o),v.each(i,function(t,o){var r=n(t,o,i);e(s,t,r)}),s}};v.groupBy=F(function(e,t,i){x(e,i)?e[i].push(t):e[i]=[t]}),v.indexBy=F(function(e,t,i){e[i]=t}),v.countBy=F(function(e,t,i){x(e,i)?e[i]++:e[i]=1});var I=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;v.toArray=function(e){return e?v.isArray(e)?u.call(e):v.isString(e)?e.match(I):A(e)?v.map(e,v.identity):v.values(e):[]},v.size=function(e){return null==e?0:A(e)?e.length:v.keys(e).length},v.partition=F(function(e,t,i){e[i?0:1].push(t)},!0),v.first=v.head=v.take=function(e,t,i){return null==e||e.length<1?null==t?void 0:[]:null==t||i?e[0]:v.initial(e,e.length-t)},v.initial=function(e,t,i){return u.call(e,0,Math.max(0,e.length-(null==t||i?1:t)))},v.last=function(e,t,i){return null==e||e.length<1?null==t?void 0:[]:null==t||i?e[e.length-1]:v.rest(e,Math.max(0,e.length-t))},v.rest=v.tail=v.drop=function(e,t,i){return u.call(e,null==t||i?1:t)},v.compact=function(e){return v.filter(e,Boolean)};var P=function(e,t,i,n){for(var o=(n=n||[]).length,s=0,r=S(e);s<r;s++){var a=e[s];if(A(a)&&(v.isArray(a)||v.isArguments(a)))if(t)for(var l=0,c=a.length;l<c;)n[o++]=a[l++];else P(a,t,i,n),o=n.length;else i||(n[o++]=a)}return n};v.flatten=function(e,t){return P(e,t,!1)},v.without=_(function(e,t){return v.difference(e,t)}),v.uniq=v.unique=function(e,t,i,n){v.isBoolean(t)||(n=i,i=t,t=!1),null!=i&&(i=C(i,n));for(var o=[],s=[],r=0,a=S(e);r<a;r++){var l=e[r],c=i?i(l,r,e):l;t&&!i?(r&&s===c||o.push(l),s=c):i?v.contains(s,c)||(s.push(c),o.push(l)):v.contains(o,l)||o.push(l)}return o},v.union=_(function(e){return v.uniq(P(e,!0,!0))}),v.intersection=function(e){for(var t=[],i=arguments.length,n=0,o=S(e);n<o;n++){var s=e[n];if(!v.contains(t,s)){var r;for(r=1;r<i&&v.contains(arguments[r],s);r++);r===i&&t.push(s)}}return t},v.difference=_(function(e,t){return t=P(t,!0,!0),v.filter(e,function(e){return!v.contains(t,e)})}),v.unzip=function(e){for(var t=e&&v.max(e,S).length||0,i=Array(t),n=0;n<t;n++)i[n]=v.pluck(e,n);return i},v.zip=_(v.unzip),v.object=function(e,t){for(var i={},n=0,o=S(e);n<o;n++)t?i[e[n]]=t[n]:i[e[n][0]]=e[n][1];return i};var M=function(e){return function(t,i,n){i=C(i,n);for(var o=S(t),s=e>0?0:o-1;s>=0&&s<o;s+=e)if(i(t[s],s,t))return s;return-1}};v.findIndex=M(1),v.findLastIndex=M(-1),v.sortedIndex=function(e,t,i,n){for(var o=(i=C(i,n,1))(t),s=0,r=S(e);s<r;){var a=Math.floor((s+r)/2);i(e[a])<o?s=a+1:r=a}return s};var $=function(e,t,i){return function(n,o,s){var r=0,a=S(n);if("number"==typeof s)e>0?r=s>=0?s:Math.max(s+a,r):a=s>=0?Math.min(s+1,a):s+a+1;else if(i&&s&&a)return n[s=i(n,o)]===o?s:-1;if(o!=o)return(s=t(u.call(n,r,a),v.isNaN))>=0?s+r:-1;for(s=e>0?r:a-1;s>=0&&s<a;s+=e)if(n[s]===o)return s;return-1}};v.indexOf=$(1,v.findIndex,v.sortedIndex),v.lastIndexOf=$(-1,v.findLastIndex),v.range=function(e,t,i){null==t&&(t=e||0,e=0),i||(i=t<e?-1:1);for(var n=Math.max(Math.ceil((t-e)/i),0),o=Array(n),s=0;s<n;s++,e+=i)o[s]=e;return o},v.chunk=function(e,t){if(null==t||t<1)return[];for(var i=[],n=0,o=e.length;n<o;)i.push(u.call(e,n,n+=t));return i};var N=function(e,t,i,n,o){if(!(n instanceof t))return e.apply(i,o);var s=D(e.prototype),r=e.apply(s,o);return v.isObject(r)?r:s};v.bind=_(function(e,t,i){if(!v.isFunction(e))throw new TypeError("Bind must be called on a function");var n=_(function(o){return N(e,n,t,this,i.concat(o))});return n}),v.partial=_(function(e,t){var i=v.partial.placeholder,n=function(){for(var o=0,s=t.length,r=Array(s),a=0;a<s;a++)r[a]=t[a]===i?arguments[o++]:t[a];for(;o<arguments.length;)r.push(arguments[o++]);return N(e,n,this,this,r)};return n}),v.partial.placeholder=v,v.bindAll=_(function(e,t){var i=(t=P(t,!1,!1)).length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var n=t[i];e[n]=v.bind(e[n],e)}}),v.memoize=function(e,t){var i=function(n){var o=i.cache,s=""+(t?t.apply(this,arguments):n);return x(o,s)||(o[s]=e.apply(this,arguments)),o[s]};return i.cache={},i},v.delay=_(function(e,t,i){return setTimeout(function(){return e.apply(null,i)},t)}),v.defer=v.partial(v.delay,v,1),v.throttle=function(e,t,i){var n,o,s,r,a=0;i||(i={});var l=function(){a=!1===i.leading?0:v.now(),n=null,r=e.apply(o,s),n||(o=s=null)},c=function(){var c=v.now();a||!1!==i.leading||(a=c);var u=t-(c-a);return o=this,s=arguments,u<=0||u>t?(n&&(clearTimeout(n),n=null),a=c,r=e.apply(o,s),n||(o=s=null)):n||!1===i.trailing||(n=setTimeout(l,u)),r};return c.cancel=function(){clearTimeout(n),a=0,n=o=s=null},c},v.debounce=function(e,t,i){var n,o,s=function(t,i){n=null,i&&(o=e.apply(t,i))},r=_(function(r){if(n&&clearTimeout(n),i){var a=!n;n=setTimeout(s,t),a&&(o=e.apply(this,r))}else n=v.delay(s,t,this,r);return o});return r.cancel=function(){clearTimeout(n),n=null},r},v.wrap=function(e,t){return v.partial(t,e)},v.negate=function(e){return function(){return!e.apply(this,arguments)}},v.compose=function(){var e=arguments,t=e.length-1;return function(){for(var i=t,n=e[t].apply(this,arguments);i--;)n=e[i].call(this,n);return n}},v.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},v.before=function(e,t){var i;return function(){return--e>0&&(i=t.apply(this,arguments)),e<=1&&(t=null),i}},v.once=v.partial(v.before,2),v.restArguments=_;var O=!{toString:null}.propertyIsEnumerable("toString"),B=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],L=function(e,t){var i=B.length,n=e.constructor,o=v.isFunction(n)&&n.prototype||a,s="constructor";for(x(e,s)&&!v.contains(t,s)&&t.push(s);i--;)(s=B[i])in e&&e[s]!==o[s]&&!v.contains(t,s)&&t.push(s)};v.keys=function(e){if(!v.isObject(e))return[];if(f)return f(e);var t=[];for(var i in e)x(e,i)&&t.push(i);return O&&L(e,t),t},v.allKeys=function(e){if(!v.isObject(e))return[];var t=[];for(var i in e)t.push(i);return O&&L(e,t),t},v.values=function(e){for(var t=v.keys(e),i=t.length,n=Array(i),o=0;o<i;o++)n[o]=e[t[o]];return n},v.mapObject=function(e,t,i){t=C(t,i);for(var n=v.keys(e),o=n.length,s={},r=0;r<o;r++){var a=n[r];s[a]=t(e[a],a,e)}return s},v.pairs=function(e){for(var t=v.keys(e),i=t.length,n=Array(i),o=0;o<i;o++)n[o]=[t[o],e[t[o]]];return n},v.invert=function(e){for(var t={},i=v.keys(e),n=0,o=i.length;n<o;n++)t[e[i[n]]]=i[n];return t},v.functions=v.methods=function(e){var t=[];for(var i in e)v.isFunction(e[i])&&t.push(i);return t.sort()};var z=function(e,t){return function(i){var n=arguments.length;if(t&&(i=Object(i)),n<2||null==i)return i;for(var o=1;o<n;o++)for(var s=arguments[o],r=e(s),a=r.length,l=0;l<a;l++){var c=r[l];t&&void 0!==i[c]||(i[c]=s[c])}return i}};v.extend=z(v.allKeys),v.extendOwn=v.assign=z(v.keys),v.findKey=function(e,t,i){t=C(t,i);for(var n,o=v.keys(e),s=0,r=o.length;s<r;s++)if(t(e[n=o[s]],n,e))return n};var H,R,j=function(e,t,i){return t in i};v.pick=_(function(e,t){var i={},n=t[0];if(null==e)return i;v.isFunction(n)?(t.length>1&&(n=b(n,t[1])),t=v.allKeys(e)):(n=j,t=P(t,!1,!1),e=Object(e));for(var o=0,s=t.length;o<s;o++){var r=t[o],a=e[r];n(a,r,e)&&(i[r]=a)}return i}),v.omit=_(function(e,t){var i,n=t[0];return v.isFunction(n)?(n=v.negate(n),t.length>1&&(i=t[1])):(t=v.map(P(t,!1,!1),String),n=function(e,i){return!v.contains(t,i)}),v.pick(e,n,i)}),v.defaults=z(v.allKeys,!0),v.create=function(e,t){var i=D(e);return t&&v.extendOwn(i,t),i},v.clone=function(e){return v.isObject(e)?v.isArray(e)?e.slice():v.extend({},e):e},v.tap=function(e,t){return t(e),e},v.isMatch=function(e,t){var i=v.keys(t),n=i.length;if(null==e)return!n;for(var o=Object(e),s=0;s<n;s++){var r=i[s];if(t[r]!==o[r]||!(r in o))return!1}return!0},H=function(e,t,i,n){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;return("function"===o||"object"===o||"object"==typeof t)&&R(e,t,i,n)},R=function(e,t,i,n){e instanceof v&&(e=e._wrapped),t instanceof v&&(t=t._wrapped);var o=d.call(e);if(o!==d.call(t))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return l.valueOf.call(e)===l.valueOf.call(t)}var s="[object Array]"===o;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var r=e.constructor,a=t.constructor;if(r!==a&&!(v.isFunction(r)&&r instanceof r&&v.isFunction(a)&&a instanceof a)&&"constructor"in e&&"constructor"in t)return!1}i=i||[],n=n||[];for(var c=i.length;c--;)if(i[c]===e)return n[c]===t;if(i.push(e),n.push(t),s){if((c=e.length)!==t.length)return!1;for(;c--;)if(!H(e[c],t[c],i,n))return!1}else{var u,h=v.keys(e);if(c=h.length,v.keys(t).length!==c)return!1;for(;c--;)if(u=h[c],!x(t,u)||!H(e[u],t[u],i,n))return!1}return i.pop(),n.pop(),!0},v.isEqual=function(e,t){return H(e,t)},v.isEmpty=function(e){return null==e||(A(e)&&(v.isArray(e)||v.isString(e)||v.isArguments(e))?0===e.length:0===v.keys(e).length)},v.isElement=function(e){return!(!e||1!==e.nodeType)},v.isArray=p||function(e){return"[object Array]"===d.call(e)},v.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},v.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(e){v["is"+e]=function(t){return d.call(t)==="[object "+e+"]"}}),v.isArguments(arguments)||(v.isArguments=function(e){return x(e,"callee")});var W=o.document&&o.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof W&&(v.isFunction=function(e){return"function"==typeof e||!1}),v.isFinite=function(e){return!v.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},v.isNaN=function(e){return v.isNumber(e)&&isNaN(e)},v.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===d.call(e)},v.isNull=function(e){return null===e},v.isUndefined=function(e){return void 0===e},v.has=function(e,t){if(!v.isArray(t))return x(e,t);for(var i=t.length,n=0;n<i;n++){var o=t[n];if(null==e||!h.call(e,o))return!1;e=e[o]}return!!i},v.noConflict=function(){return o._=s,this},v.identity=function(e){return e},v.constant=function(e){return function(){return e}},v.noop=function(){},v.property=function(e){return v.isArray(e)?function(t){return k(t,e)}:w(e)},v.propertyOf=function(e){return null==e?function(){}:function(t){return v.isArray(t)?k(e,t):e[t]}},v.matcher=v.matches=function(e){return e=v.extendOwn({},e),function(t){return v.isMatch(t,e)}},v.times=function(e,t,i){var n=Array(Math.max(0,e));t=b(t,i,1);for(var o=0;o<e;o++)n[o]=t(o);return n},v.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},v.now=Date.now||function(){return(new Date).getTime()};var U={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},q=v.invert(U),V=function(e){var t=function(t){return e[t]},i="(?:"+v.keys(e).join("|")+")",n=RegExp(i),o=RegExp(i,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,t):e}};v.escape=V(U),v.unescape=V(q),v.result=function(e,t,i){v.isArray(t)||(t=[t]);var n=t.length;if(!n)return v.isFunction(i)?i.call(e):i;for(var o=0;o<n;o++){var s=null==e?void 0:e[t[o]];void 0===s&&(s=i,o=n),e=v.isFunction(s)?s.call(e):s}return e};var K=0;v.uniqueId=function(e){var t=++K+"";return e?e+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Y=/(.)^/,Q={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},G=/\\|'|\r|\n|\u2028|\u2029/g,X=function(e){return"\\"+Q[e]};v.template=function(e,t,i){!t&&i&&(t=i),t=v.defaults({},t,v.templateSettings);var n,o=RegExp([(t.escape||Y).source,(t.interpolate||Y).source,(t.evaluate||Y).source].join("|")+"|$","g"),s=0,r="__p+='";e.replace(o,function(t,i,n,o,a){return r+=e.slice(s,a).replace(G,X),s=a+t.length,i?r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(r+="';\n"+o+"\n__p+='"),t}),r+="';\n",t.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";try{n=new Function(t.variable||"obj","_",r)}catch(e){throw e.source=r,e}var a=function(e){return n.call(this,e,v)},l=t.variable||"obj";return a.source="function("+l+"){\n"+r+"}",a},v.chain=function(e){var t=v(e);return t._chain=!0,t};var J=function(e,t){return e._chain?v(t).chain():t};v.mixin=function(e){return v.each(v.functions(e),function(t){var i=v[t]=e[t];v.prototype[t]=function(){var e=[this._wrapped];return c.apply(e,arguments),J(this,i.apply(v,e))}}),v},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];v.prototype[e]=function(){var i=this._wrapped;return t.apply(i,arguments),"shift"!==e&&"splice"!==e||0!==i.length||delete i[0],J(this,i)}}),v.each(["concat","join","slice"],function(e){var t=r[e];v.prototype[e]=function(){return J(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return String(this._wrapped)},void 0===(n=function(){return v}.apply(t,[]))||(i.exports=n)}()}).call(t,i(2),i(11)(e))},function(e,t,i){var n,o,s,r;r=function(e){var t,i=0,n=Array.prototype.slice;return e.cleanData=(t=e.cleanData,function(i){var n,o,s;for(s=0;null!=(o=i[s]);s++)try{(n=e._data(o,"events"))&&n.remove&&e(o).triggerHandler("remove")}catch(e){}t(i)}),e.widget=function(t,i,n){var o,s,r,a={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return n||(n=i,i=e.Widget),e.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},o=e[l][t],s=e[l][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(r=new i).options=e.widget.extend({},r.options),e.each(n,function(t,n){e.isFunction(n)?a[t]=function(){function e(){return i.prototype[t].apply(this,arguments)}function o(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}():a[t]=n}),s.prototype=e.widget.extend(r,{widgetEventPrefix:o&&r.widgetEventPrefix||t},a,{constructor:s,namespace:l,widgetName:t,widgetFullName:c}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete o._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var i,o,s=n.call(arguments,1),r=0,a=s.length;r<a;r++)for(i in s[r])o=s[r][i],s[r].hasOwnProperty(i)&&void 0!==o&&(e.isPlainObject(o)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],o):e.widget.extend({},o):t[i]=o);return t},e.widget.bridge=function(t,i){var o=i.prototype.widgetFullName||t;e.fn[t]=function(s){var r="string"==typeof s,a=n.call(arguments,1),l=this;return r?this.length||"instance"!==s?this.each(function(){var i,n=e.data(this,o);return"instance"===s?(l=n,!1):n?e.isFunction(n[s])&&"_"!==s.charAt(0)?(i=n[s].apply(n,a))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):l=void 0:(a.length&&(s=e.widget.extend.apply(null,[s].concat(a))),this.each(function(){var t=e.data(this,o);t?(t.option(s||{}),t._init&&t._init()):e.data(this,o,new i(s,this))})),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,i){t._removeClass(i,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,s,r=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(r={},t=(n=t.split(".")).shift(),n.length){for(o=r[t]=e.widget.extend({},this.options[t]),s=0;s<n.length-1;s++)o[n[s]]=o[n[s]]||{},o=o[n[s]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=i}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,n,o;for(i in t)o=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&o&&o.length&&(n=e(o.get()),this._removeClass(o,i),n.addClass(this._classes({element:n,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var i=[],n=this;function o(o,s){var r,a;for(a=0;a<o.length;a++)r=n.classesElementLookup[o[a]]||e(),r=t.add?e(e.unique(r.get().concat(t.element.get()))):e(r.not(t.element).get()),n.classesElementLookup[o[a]]=r,i.push(o[a]),s&&t.classes[o[a]]&&i.push(t.classes[o[a]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&o(t.keys.match(/\S+/g)||[],!0),t.extra&&o(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,function(n,o){-1!==e.inArray(t.target,o)&&(i.classesElementLookup[n]=e(o.not(t.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof e||null===e,s={extra:o?t:i,keys:o?e:t,element:o?this.element:e,add:n};return s.element.toggleClass(this._classes(s),n),this},_on:function(t,i,n){var o,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,r){function a(){if(t||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof r?s[r]:r).apply(s,arguments)}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?o.on(c,u,a):i.on(c,a)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(i).off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var o,s,r=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(o in s)o in i||(i[o]=s[o]);return this.element.trigger(i,n),!(e.isFunction(r)&&!1===r.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,s){var r;"string"==typeof o&&(o={effect:o});var a=o?!0===o||"number"==typeof o?i:o.effect||i:t;"number"==typeof(o=o||{})&&(o={duration:o}),r=!e.isEmptyObject(o),o.complete=s,o.delay&&n.delay(o.delay),r&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}}),e.widget},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){var t=!1;return e(document).on("mouseup",function(){t=!1}),e.widget("ui.mouse",{version:"1.12.1",options:{cancel:"input, textarea, button, select, option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.on("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).on("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.off("."+this.widgetName),this._mouseMoveDelegate&&this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,o=1===i.which,s=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(o&&!s&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),!0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},this.document.on("mousemove."+this.widgetName,this._mouseMoveDelegate).on("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,!0))}},_mouseMove:function(t){if(this._mouseMoved){if(e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button)return this._mouseUp(t);if(!t.which)if(t.originalEvent.altKey||t.originalEvent.ctrlKey||t.originalEvent.metaKey||t.originalEvent.shiftKey)this.ignoreMissingWhich=!0;else if(!this.ignoreMissingWhich)return this._mouseUp(t)}return(t.which||t.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(i){this.document.off("mousemove."+this.widgetName,this._mouseMoveDelegate).off("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,i.target===this._mouseDownEvent.target&&e.data(i.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(i)),this._mouseDelayTimer&&(clearTimeout(this._mouseDelayTimer),delete this._mouseDelayTimer),this.ignoreMissingWhich=!1,t=!1,i.preventDefault()},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})},o=[i(1),i(25),i(3),i(5)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.widget("ui.draggable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this._addClass("ui-draggable"),this._setHandleClassName(),this._mouseInit()},_setOption:function(e,t){this._super(e,t),"handle"===e&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){(this.helper||this.element).is(".ui-draggable-dragging")?this.destroyOnClear=!0:(this._removeHandleClassName(),this._mouseDestroy())},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).closest(".ui-resizable-handle").length>0)&&(this.handle=this._getHandle(t),!!this.handle&&(this._blurActiveElement(t),this._blockFrames(!0===i.iframeFix?"iframe":i.iframeFix),!0))},_blockFrames:function(t){this.iframeBlocks=this.document.find(t).map(function(){var t=e(this);return e("<div>").css("position","absolute").appendTo(t.parent()).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(t){var i=e.ui.safeActiveElement(this.document[0]);e(t.target).closest(i).length||e.ui.safeBlur(i)},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this._addClass(this.helper,"ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===e(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(t),this.originalPosition=this.position=this._generatePosition(t,!1),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_refreshOffsets:function(e){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:e.pageX-this.offset.left,top:e.pageY-this.offset.top}},_mouseDrag:function(t,i){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(t,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp(new e.Event("mouseup",t)),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=this,n=!1;return e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==i._trigger("stop",t)&&i._clear()}):!1!==this._trigger("stop",t)&&this._clear(),!1},_mouseUp:function(t){return this._unblockFrames(),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),this.handleElement.is(t.target)&&this.element.trigger("focus"),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp(new e.Event("mouseup",{target:this.element[0]})):this._clear(),this},_getHandle:function(t){return!this.options.handle||!!e(t.target).closest(this.element.find(this.options.handle)).length},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this._addClass(this.handleElement,"ui-draggable-handle")},_removeHandleClassName:function(){this._removeClass(this.handleElement,"ui-draggable-handle")},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper),o=n?e(i.helper.apply(this.element[0],[t])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return o.parents("body").length||o.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n&&o[0]===this.element[0]&&this._setPositionRelative(),o[0]===this.element[0]||/(fixed|absolute)/.test(o.css("position"))||o.css("position","absolute"),o},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_isRootNode:function(e){return/(html|body)/i.test(e.tagName)||e===this.document[0]},_getParentOffset:function(){var t=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var e=this.element.position(),t=this._isRootNode(this.scrollParent[0]);return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+(t?0:this.scrollParent.scrollTop()),left:e.left-(parseInt(this.helper.css("left"),10)||0)+(t?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options,s=this.document[0];this.relativeContainer=null,o.containment?"window"!==o.containment?"document"!==o.containment?o.containment.constructor!==Array?("parent"===o.containment&&(o.containment=this.helper[0].parentNode),(n=(i=e(o.containment))[0])&&(t=/(scroll|auto)/.test(i.css("overflow")),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(t?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=i)):this.containment=o.containment:this.containment=[0,0,e(s).width()-this.helperProportions.width-this.margins.left,(e(s).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=[e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,e(window).scrollLeft()+e(window).width()-this.helperProportions.width-this.margins.left,e(window).scrollTop()+(e(window).height()||s.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]:this.containment=null},_convertPositionTo:function(e,t){t||(t=this.position);var i="absolute"===e?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:t.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:t.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(e,t){var i,n,o,s,r=this.options,a=this._isRootNode(this.scrollParent[0]),l=e.pageX,c=e.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),t&&(this.containment&&(this.relativeContainer?(n=this.relativeContainer.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,e.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),e.pageY-this.offset.click.top<i[1]&&(c=i[1]+this.offset.click.top),e.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),e.pageY-this.offset.click.top>i[3]&&(c=i[3]+this.offset.click.top)),r.grid&&(o=r.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/r.grid[1])*r.grid[1]:this.originalPageY,c=i?o-this.offset.click.top>=i[1]||o-this.offset.click.top>i[3]?o:o-this.offset.click.top>=i[1]?o-r.grid[1]:o+r.grid[1]:o,s=r.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/r.grid[0])*r.grid[0]:this.originalPageX,l=i?s-this.offset.click.left>=i[0]||s-this.offset.click.left>i[2]?s:s-this.offset.click.left>=i[0]?s-r.grid[0]:s+r.grid[0]:s),"y"===r.axis&&(l=this.originalPageX),"x"===r.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this._removeClass(this.helper,"ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n,this],!0),/^(drag|start|stop)/.test(t)&&(this.positionAbs=this._convertPositionTo("absolute"),n.offset=this.positionAbs),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i,n){var o=e.extend({},i,{item:n.element});n.sortables=[],e(n.options.connectToSortable).each(function(){var i=e(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push(i),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i,n){var o=e.extend({},i,{item:n.element});n.cancelHelperRemoval=!1,e.each(n.sortables,function(){this.isOver?(this.isOver=0,n.cancelHelperRemoval=!0,this.cancelHelperRemoval=!1,this._storedCSS={position:this.placeholder.css("position"),top:this.placeholder.css("top"),left:this.placeholder.css("left")},this._mouseStop(t),this.options.helper=this.options._helper):(this.cancelHelperRemoval=!0,this._trigger("deactivate",t,o))})},drag:function(t,i,n){e.each(n.sortables,function(){var o=!1,s=this;s.positionAbs=n.positionAbs,s.helperProportions=n.helperProportions,s.offset.click=n.offset.click,s._intersectsWith(s.containerCache)&&(o=!0,e.each(n.sortables,function(){return this.positionAbs=n.positionAbs,this.helperProportions=n.helperProportions,this.offset.click=n.offset.click,this!==s&&this._intersectsWith(this.containerCache)&&e.contains(s.element[0],this.element[0])&&(o=!1),o})),o?(s.isOver||(s.isOver=1,n._parent=i.helper.parent(),s.currentItem=i.helper.appendTo(s.element).data("ui-sortable-item",!0),s.options._helper=s.options.helper,s.options.helper=function(){return i.helper[0]},t.target=s.currentItem[0],s._mouseCapture(t,!0),s._mouseStart(t,!0,!0),s.offset.click.top=n.offset.click.top,s.offset.click.left=n.offset.click.left,s.offset.parent.left-=n.offset.parent.left-s.offset.parent.left,s.offset.parent.top-=n.offset.parent.top-s.offset.parent.top,n._trigger("toSortable",t),n.dropped=s.element,e.each(n.sortables,function(){this.refreshPositions()}),n.currentItem=n.element,s.fromOutside=n),s.currentItem&&(s._mouseDrag(t),i.position=s.position)):s.isOver&&(s.isOver=0,s.cancelHelperRemoval=!0,s.options._revert=s.options.revert,s.options.revert=!1,s._trigger("out",t,s._uiHash(s)),s._mouseStop(t,!0),s.options.revert=s.options._revert,s.options.helper=s.options._helper,s.placeholder&&s.placeholder.remove(),i.helper.appendTo(n._parent),n._refreshOffsets(t),i.position=n._generatePosition(t,!0),n._trigger("fromSortable",t),n.dropped=!1,e.each(n.sortables,function(){this.refreshPositions()}))})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i,n){var o=e("body"),s=n.options;o.css("cursor")&&(s._cursor=o.css("cursor")),o.css("cursor",s.cursor)},stop:function(t,i,n){var o=n.options;o._cursor&&e("body").css("cursor",o._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i,n){var o=e(i.helper),s=n.options;o.css("opacity")&&(s._opacity=o.css("opacity")),o.css("opacity",s.opacity)},stop:function(t,i,n){var o=n.options;o._opacity&&e(i.helper).css("opacity",o._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(e,t,i){i.scrollParentNotHidden||(i.scrollParentNotHidden=i.helper.scrollParent(!1)),i.scrollParentNotHidden[0]!==i.document[0]&&"HTML"!==i.scrollParentNotHidden[0].tagName&&(i.overflowOffset=i.scrollParentNotHidden.offset())},drag:function(t,i,n){var o=n.options,s=!1,r=n.scrollParentNotHidden[0],a=n.document[0];r!==a&&"HTML"!==r.tagName?(o.axis&&"x"===o.axis||(n.overflowOffset.top+r.offsetHeight-t.pageY<o.scrollSensitivity?r.scrollTop=s=r.scrollTop+o.scrollSpeed:t.pageY-n.overflowOffset.top<o.scrollSensitivity&&(r.scrollTop=s=r.scrollTop-o.scrollSpeed)),o.axis&&"y"===o.axis||(n.overflowOffset.left+r.offsetWidth-t.pageX<o.scrollSensitivity?r.scrollLeft=s=r.scrollLeft+o.scrollSpeed:t.pageX-n.overflowOffset.left<o.scrollSensitivity&&(r.scrollLeft=s=r.scrollLeft-o.scrollSpeed))):(o.axis&&"x"===o.axis||(t.pageY-e(a).scrollTop()<o.scrollSensitivity?s=e(a).scrollTop(e(a).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(a).scrollTop())<o.scrollSensitivity&&(s=e(a).scrollTop(e(a).scrollTop()+o.scrollSpeed))),o.axis&&"y"===o.axis||(t.pageX-e(a).scrollLeft()<o.scrollSensitivity?s=e(a).scrollLeft(e(a).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(a).scrollLeft())<o.scrollSensitivity&&(s=e(a).scrollLeft(e(a).scrollLeft()+o.scrollSpeed)))),!1!==s&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i,n){var o=n.options;n.snapElements=[],e(o.snap.constructor!==String?o.snap.items||":data(ui-draggable)":o.snap).each(function(){var t=e(this),i=t.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i,n){var o,s,r,a,l,c,u,d,h,p,f=n.options,m=f.snapTolerance,g=i.offset.left,v=g+n.helperProportions.width,y=i.offset.top,b=y+n.helperProportions.height;for(h=n.snapElements.length-1;h>=0;h--)c=(l=n.snapElements[h].left-n.margins.left)+n.snapElements[h].width,d=(u=n.snapElements[h].top-n.margins.top)+n.snapElements[h].height,v<l-m||g>c+m||b<u-m||y>d+m||!e.contains(n.snapElements[h].item.ownerDocument,n.snapElements[h].item)?(n.snapElements[h].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=!1):("inner"!==f.snapMode&&(o=Math.abs(u-b)<=m,s=Math.abs(d-y)<=m,r=Math.abs(l-v)<=m,a=Math.abs(c-g)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:u-n.helperProportions.height,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:d,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c}).left)),p=o||s||r||a,"outer"!==f.snapMode&&(o=Math.abs(u-y)<=m,s=Math.abs(d-b)<=m,r=Math.abs(l-g)<=m,a=Math.abs(c-v)<=m,o&&(i.position.top=n._convertPositionTo("relative",{top:u,left:0}).top),s&&(i.position.top=n._convertPositionTo("relative",{top:d-n.helperProportions.height,left:0}).top),r&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:c-n.helperProportions.width}).left)),!n.snapElements[h].snapping&&(o||s||r||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[h].item})),n.snapElements[h].snapping=o||s||r||a||p)}}),e.ui.plugin.add("draggable","stack",{start:function(t,i,n){var o,s=n.options,r=e.makeArray(e(s.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});r.length&&(o=parseInt(e(r[0]).css("zIndex"),10)||0,e(r).each(function(t){e(this).css("zIndex",o+t)}),this.css("zIndex",o+r.length))}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i,n){var o=e(i.helper),s=n.options;o.css("zIndex")&&(s._zIndex=o.css("zIndex")),o.css("zIndex",s.zIndex)},stop:function(t,i,n){var o=n.options;o._zIndex&&e(i.helper).css("zIndex",o._zIndex)}}),e.ui.draggable},o=[i(1),i(6),i(26),i(27),i(30),i(28),i(29),i(3),i(5)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){"use strict";if(!e.ui||!e.ui.fancytree){var t,i,n=null,o=new RegExp(/\.|\//),s=/[&<>"'/]/g,r=/[<>"'/]/g,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},l={16:!0,17:!0,18:!0},c={8:"backspace",9:"tab",10:"return",13:"return",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",59:";",61:"=",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scroll",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},u={16:"shift",17:"ctrl",18:"alt",91:"meta",93:"meta"},d={0:"",1:"left",2:"middle",3:"right"},h="active expanded focus folder lazy radiogroup selected unselectable unselectableIgnore".split(" "),p={},f="columns types".split(" "),m="checkbox expanded extraClasses folder icon iconTooltip key lazy partsel radiogroup refKey selected statusNodeType title tooltip type unselectable unselectableIgnore unselectableStatus".split(" "),g={},v={},y={active:!0,children:!0,data:!0,focus:!0};for(t=0;t<h.length;t++)p[h[t]]=!0;for(t=0;t<m.length;t++)i=m[t],g[i]=!0,i!==i.toLowerCase()&&(v[i.toLowerCase()]=i);return b(e.ui,"Fancytree requires jQuery UI (http://jqueryui.com)"),Date.now||(Date.now=function(){return(new Date).getTime()}),F.prototype={_findDirectChild:function(e){var t,i,n=this.children;if(n)if("string"==typeof e){for(t=0,i=n.length;t<i;t++)if(n[t].key===e)return n[t]}else{if("number"==typeof e)return this.children[e];if(e.parent===this)return e}return null},_setChildren:function(e){b(e&&(!this.children||0===this.children.length),"only init supported"),this.children=[];for(var t=0,i=e.length;t<i;t++)this.children.push(new F(this,e[t]));this.tree._callHook("treeStructureChanged",this.tree,"setChildren")},addChildren:function(t,i){var n,o,s,r,a=this.getFirstChild(),l=this.getLastChild(),c=[];for(e.isPlainObject(t)&&(t=[t]),this.children||(this.children=[]),n=0,o=t.length;n<o;n++)c.push(new F(this,t[n]));if(r=c[0],null==i?this.children=this.children.concat(c):(i=this._findDirectChild(i),b((s=e.inArray(i,this.children))>=0,"insertBefore must be an existing child"),this.children.splice.apply(this.children,[s,0].concat(c))),a&&!i){for(n=0,o=c.length;n<o;n++)c[n].render();a!==this.getFirstChild()&&a.renderStatus(),l!==this.getLastChild()&&l.renderStatus()}else(!this.parent||this.parent.ul||this.tr)&&this.render();return 3===this.tree.options.selectMode&&this.fixSelection3FromEndNodes(),this.triggerModifyChild("add",1===c.length?c[0]:null),r},addClass:function(e){return this.toggleClass(e,!0)},addNode:function(e,t){switch(void 0!==t&&"over"!==t||(t="child"),t){case"after":return this.getParent().addChildren(e,this.getNextSibling());case"before":return this.getParent().addChildren(e,this);case"firstChild":var i=this.children?this.children[0]:null;return this.addChildren(e,i);case"child":case"over":return this.addChildren(e)}b(!1,"Invalid mode: "+t)},addPagingNode:function(t,i){var n,o;if(i=i||"child",!1!==t)return t=e.extend({title:this.tree.options.strings.moreData,statusNodeType:"paging",icon:!1},t),this.partload=!0,this.addNode(t,i);for(n=this.children.length-1;n>=0;n--)"paging"===(o=this.children[n]).statusNodeType&&this.removeChild(o);this.partload=!1},appendSibling:function(e){return this.addNode(e,"after")},applyCommand:function(e,t){return this.tree.applyCommand(e,this,t)},applyPatch:function(t){if(null===t)return this.remove(),x(this);var i,n,o={children:!0,expanded:!0,parent:!0};for(i in t)t.hasOwnProperty(i)&&(n=t[i],o[i]||e.isFunction(n)||(g[i]?this[i]=n:this.data[i]=n));return t.hasOwnProperty("children")&&(this.removeChildren(),t.children&&this._setChildren(t.children)),this.isVisible()&&(this.renderTitle(),this.renderStatus()),t.hasOwnProperty("expanded")?this.setExpanded(t.expanded):x(this)},collapseSiblings:function(){return this.tree._callHook("nodeCollapseSiblings",this)},copyTo:function(e,t,i){return e.addNode(this.toDict(!0,i),t)},countChildren:function(e){var t,i,n,o=this.children;if(!o)return 0;if(n=o.length,!1!==e)for(t=0,i=n;t<i;t++)n+=o[t].countChildren();return n},debug:function(e){this.tree.options.debugLevel>=4&&(Array.prototype.unshift.call(arguments,this.toString()),C("log",arguments))},discard:function(){return this.warn("FancytreeNode.discard() is deprecated since 2014-02-16. Use .resetLazy() instead."),this.resetLazy()},discardMarkup:function(e){var t=e?"nodeRemoveMarkup":"nodeRemoveChildMarkup";this.tree._callHook(t,this)},error:function(e){this.tree.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),C("error",arguments))},findAll:function(t){t=e.isFunction(t)?t:T(t);var i=[];return this.visit(function(e){t(e)&&i.push(e)}),i},findFirst:function(t){t=e.isFunction(t)?t:T(t);var i=null;return this.visit(function(e){if(t(e))return i=e,!1}),i},findRelatedNode:function(e,t){return this.tree.findRelatedNode(this,e,t)},_changeSelectStatusAttrs:function(e){var t=!1,i=this.tree.options,o=n.evalOption("unselectable",this,this,i,!1),s=n.evalOption("unselectableStatus",this,this,i,void 0);switch(o&&null!=s&&(e=s),e){case!1:t=this.selected||this.partsel,this.selected=!1,this.partsel=!1;break;case!0:t=!this.selected||!this.partsel,this.selected=!0,this.partsel=!0;break;case void 0:t=this.selected||!this.partsel,this.selected=!1,this.partsel=!0;break;default:b(!1,"invalid state: "+e)}return t&&this.renderStatus(),t},fixSelection3AfterClick:function(e){var t=this.isSelected();this.visit(function(e){if(e._changeSelectStatusAttrs(t),e.radiogroup)return"skip"}),this.fixSelection3FromEndNodes(e)},fixSelection3FromEndNodes:function(e){var t=this.tree.options;b(3===t.selectMode,"expected selectMode 3"),function e(i){var o,s,r,a,l,c,u,d,h=i.children;if(h&&h.length){for(c=!0,u=!1,o=0,s=h.length;o<s;o++)a=e(r=h[o]),n.evalOption("unselectableIgnore",r,r,t,!1)||(!1!==a&&(u=!0),!0!==a&&(c=!1));l=!!c||!!u&&void 0}else l=null==(d=n.evalOption("unselectableStatus",i,i,t,void 0))?!!i.selected:!!d;return i.partsel&&!i.selected&&i.lazy&&null==i.children&&(l=void 0),i._changeSelectStatusAttrs(l),l}(this),this.visitParents(function(e){var i,o,s,r,a,l=e.children,c=!0,u=!1;for(i=0,o=l.length;i<o;i++)s=l[i],n.evalOption("unselectableIgnore",s,s,t,!1)||(((r=null==(a=n.evalOption("unselectableStatus",s,s,t,void 0))?!!s.selected:!!a)||s.partsel)&&(u=!0),r||(c=!1));r=!!c||!!u&&void 0,e._changeSelectStatusAttrs(r)})},fromDict:function(t){for(var i in t)g[i]?this[i]=t[i]:"data"===i?e.extend(this.data,t.data):e.isFunction(t[i])||y[i]||(this.data[i]=t[i]);t.children&&(this.removeChildren(),this.addChildren(t.children)),this.renderTitle()},getChildren:function(){if(void 0!==this.hasChildren())return this.children},getFirstChild:function(){return this.children?this.children[0]:null},getIndex:function(){return e.inArray(this,this.parent.children)},getIndexHier:function(t,i){t=t||".";var n,o=[];return e.each(this.getParentList(!1,!0),function(e,t){n=""+(t.getIndex()+1),i&&(n=("0000000"+n).substr(-i)),o.push(n)}),o.join(t)},getKeyPath:function(e){var t=this.tree.options.keyPathSeparator;return t+this.getPath(!e,"key",t)},getLastChild:function(){return this.children?this.children[this.children.length-1]:null},getLevel:function(){for(var e=0,t=this.parent;t;)e++,t=t.parent;return e},getNextSibling:function(){if(this.parent){var e,t,i=this.parent.children;for(e=0,t=i.length-1;e<t;e++)if(i[e]===this)return i[e+1]}return null},getParent:function(){return this.parent},getParentList:function(e,t){for(var i=[],n=t?this:this.parent;n;)(e||n.parent)&&i.unshift(n),n=n.parent;return i},getPath:function(t,i,n){t=!1!==t,i=i||"title",n=n||"/";var o,s=[],r=e.isFunction(i);return this.visitParents(function(e){e.parent&&(o=r?i(e):e[i],s.unshift(o))},t),s.join(n)},getPrevSibling:function(){if(this.parent){var e,t,i=this.parent.children;for(e=1,t=i.length;e<t;e++)if(i[e]===this)return i[e-1]}return null},getSelectedNodes:function(e){var t=[];return this.visit(function(i){if(i.selected&&(t.push(i),!0===e))return"skip"}),t},hasChildren:function(){if(this.lazy){if(null==this.children)return;if(0===this.children.length)return!1;if(1===this.children.length&&this.children[0].isStatusNode())return;return!0}return!(!this.children||!this.children.length)},hasClass:function(e){return(" "+(this.extraClasses||"")+" ").indexOf(" "+e+" ")>=0},hasFocus:function(){return this.tree.hasFocus()&&this.tree.focusNode===this},info:function(e){this.tree.options.debugLevel>=3&&(Array.prototype.unshift.call(arguments,this.toString()),C("info",arguments))},isActive:function(){return this.tree.activeNode===this},isBelowOf:function(e){return this.getIndexHier(".",5)>e.getIndexHier(".",5)},isChildOf:function(e){return this.parent&&this.parent===e},isDescendantOf:function(t){if(!t||t.tree!==this.tree)return!1;for(var i=this.parent;i;){if(i===t)return!0;i===i.parent&&e.error("Recursive parent link: "+i),i=i.parent}return!1},isExpanded:function(){return!!this.expanded},isFirstSibling:function(){var e=this.parent;return!e||e.children[0]===this},isFolder:function(){return!!this.folder},isLastSibling:function(){var e=this.parent;return!e||e.children[e.children.length-1]===this},isLazy:function(){return!!this.lazy},isLoaded:function(){return!this.lazy||void 0!==this.hasChildren()},isLoading:function(){return!!this._isLoading},isRoot:function(){return this.isRootNode()},isPartsel:function(){return!this.selected&&!!this.partsel},isPartload:function(){return!!this.partload},isRootNode:function(){return this.tree.rootNode===this},isSelected:function(){return!!this.selected},isStatusNode:function(){return!!this.statusNodeType},isPagingNode:function(){return"paging"===this.statusNodeType},isTopLevel:function(){return this.tree.rootNode===this.parent},isUndefined:function(){return void 0===this.hasChildren()},isVisible:function(){var e,t,i=this.tree.enableFilter,n=this.getParentList(!1,!1);if(i&&!this.match&&!this.subMatchCount)return this.debug("isVisible: HIDDEN ("+i+", "+this.match+", "+this.match+")"),!1;for(e=0,t=n.length;e<t;e++)if(!n[e].expanded)return this.debug("isVisible: HIDDEN (parent collapsed)"),!1;return this.debug("isVisible: VISIBLE"),!0},lazyLoad:function(e){return this.warn("FancytreeNode.lazyLoad() is deprecated since 2014-02-16. Use .load() instead."),this.load(e)},load:function(e){var t,i,n=this,o=this.isExpanded();return b(this.isLazy(),"load() requires a lazy node"),e||this.isUndefined()?(this.isLoaded()&&this.resetLazy(),!1===(i=this.tree._triggerNodeEvent("lazyLoad",this))?x(this):(b("boolean"!=typeof i,"lazyLoad event must return source in data.result"),t=this.tree._callHook("nodeLoadChildren",this,i),o?(this.expanded=!0,t.always(function(){n.render()})):t.always(function(){n.renderStatus()}),t)):x(this)},makeVisible:function(t){var i,n=this,o=[],s=new e.Deferred,r=this.getParentList(!1,!1),a=r.length,l=!(t&&!0===t.noAnimation),c=!(t&&!1===t.scrollIntoView);for(i=a-1;i>=0;i--)o.push(r[i].setExpanded(!0,t));return e.when.apply(e,o).done(function(){c?n.scrollIntoView(l).done(function(){s.resolve()}):s.resolve()}),s.promise()},moveTo:function(t,i,n){void 0===i||"over"===i?i="child":"firstChild"===i&&(t.children&&t.children.length?(i="before",t=t.children[0]):i="child");var o,s=this.tree,r=this.parent,a="child"===i?t:t.parent;if(this!==t){if(this.parent?a.isDescendantOf(this)&&e.error("Cannot move a node to its own descendant"):e.error("Cannot move system root"),a!==r&&r.triggerModifyChild("remove",this),1===this.parent.children.length){if(this.parent===a)return;this.parent.children=this.parent.lazy?[]:null,this.parent.expanded=!1}else b((o=e.inArray(this,this.parent.children))>=0,"invalid source parent"),this.parent.children.splice(o,1);if(this.parent=a,a.hasChildren())switch(i){case"child":a.children.push(this);break;case"before":b((o=e.inArray(t,a.children))>=0,"invalid target parent"),a.children.splice(o,0,this);break;case"after":b((o=e.inArray(t,a.children))>=0,"invalid target parent"),a.children.splice(o+1,0,this);break;default:e.error("Invalid mode "+i)}else a.children=[this];n&&t.visit(n,!0),a===r?a.triggerModifyChild("move",this):a.triggerModifyChild("add",this),s!==t.tree&&(this.warn("Cross-tree moveTo is experimental!"),this.visit(function(e){e.tree=t.tree},!0)),s._callHook("treeStructureChanged",s,"moveTo"),r.isDescendantOf(a)||r.render(),a.isDescendantOf(r)||a===r||a.render()}},navigate:function(t,i){var n,o=e.ui.keyCode;switch(t){case"left":case o.LEFT:if(this.expanded)return this.setExpanded(!1);break;case"right":case o.RIGHT:if(!this.expanded&&(this.children||this.lazy))return this.setExpanded()}if(n=this.findRelatedNode(t)){try{n.makeVisible({scrollIntoView:!1})}catch(e){}return!1===i?(n.setFocus(),x()):n.setActive()}return this.warn("Could not find related node '"+t+"'."),x()},remove:function(){return this.parent.removeChild(this)},removeChild:function(e){return this.tree._callHook("nodeRemoveChild",this,e)},removeChildren:function(){return this.tree._callHook("nodeRemoveChildren",this)},removeClass:function(e){return this.toggleClass(e,!1)},render:function(e,t){return this.tree._callHook("nodeRender",this,e,t)},renderTitle:function(){return this.tree._callHook("nodeRenderTitle",this)},renderStatus:function(){return this.tree._callHook("nodeRenderStatus",this)},replaceWith:function(i){var n,o=this.parent,s=e.inArray(this,o.children),r=this;return b(this.isPagingNode(),"replaceWith() currently requires a paging status node"),(n=this.tree._callHook("nodeLoadChildren",this,i)).done(function(e){var i=r.children;for(t=0;t<i.length;t++)i[t].parent=o;o.children.splice.apply(o.children,[s+1,0].concat(i)),r.children=null,r.remove(),o.render()}).fail(function(){r.setExpanded()}),n},resetLazy:function(){this.removeChildren(),this.expanded=!1,this.lazy=!0,this.children=void 0,this.renderStatus()},scheduleAction:function(t,i){this.tree.timer&&(clearTimeout(this.tree.timer),this.tree.debug("clearTimeout(%o)",this.tree.timer)),this.tree.timer=null;var n=this;switch(t){case"cancel":break;case"expand":this.tree.timer=setTimeout(function(){n.tree.debug("setTimeout: trigger expand"),n.setExpanded(!0)},i);break;case"activate":this.tree.timer=setTimeout(function(){n.tree.debug("setTimeout: trigger activate"),n.setActive(!0)},i);break;default:e.error("Invalid mode "+t)}},scrollIntoView:function(t,i){if(void 0!==i&&((n=i).tree&&void 0!==n.statusNodeType))throw Error("scrollIntoView() with 'topNode' option is deprecated since 2014-05-08. Use 'options.topNode' instead.");var n,o=e.extend({effects:!0===t?{duration:200,queue:!1}:t,scrollOfs:this.tree.options.scrollOfs,scrollParent:this.tree.options.scrollParent,topNode:null},i),s=o.scrollParent,r=this.tree.$container,a=r.css("overflow-y");s?s.jquery||(s=e(s)):s=this.tree.tbody?r.scrollParent():"scroll"===a||"auto"===a?r:r.scrollParent(),s[0]!==document&&s[0]!==document.body||(this.debug("scrollIntoView(): normalizing scrollParent to 'window':",s[0]),s=e(window));var l,c,u,d=new e.Deferred,h=this,p=e(this.span).height(),f=o.scrollOfs.top||0,m=o.scrollOfs.bottom||0,g=s.height(),v=s.scrollTop(),y=s,C=s[0]===window,_=o.topNode||null,D=null;return this.isVisible()?(C?(c=e(this.span).offset().top,l=_&&_.span?e(_.span).offset().top:0,y=e("html,body")):(b(s[0]!==document&&s[0]!==document.body,"scrollParent should be a simple element or `window`, not document or body."),u=s.offset().top,c=e(this.span).offset().top-u+v,l=_?e(_.span).offset().top-u+v:0,g-=Math.max(0,s.innerHeight()-s[0].clientHeight)),c<v+f?D=c-f:c+p>v+g-m&&(D=c+p-g+m,_&&(b(_.isRootNode()||_.isVisible(),"topNode must be visible"),l<D&&(D=l-f))),null===D?d.resolveWith(this):o.effects?(o.effects.complete=function(){d.resolveWith(h)},y.stop(!0).animate({scrollTop:D},o.effects)):(y[0].scrollTop=D,d.resolveWith(this)),d.promise()):(this.warn("scrollIntoView(): node is invisible."),x())},setActive:function(e,t){return this.tree._callHook("nodeSetActive",this,e,t)},setExpanded:function(e,t){return this.tree._callHook("nodeSetExpanded",this,e,t)},setFocus:function(e){return this.tree._callHook("nodeSetFocus",this,e)},setSelected:function(e,t){return this.tree._callHook("nodeSetSelected",this,e,t)},setStatus:function(e,t,i){return this.tree._callHook("nodeSetStatus",this,e,t,i)},setTitle:function(e){this.title=e,this.renderTitle(),this.triggerModify("rename")},sortChildren:function(e,t){var i,n,o=this.children;if(o){if(e=e||function(e,t){var i=e.title.toLowerCase(),n=t.title.toLowerCase();return i===n?0:i>n?1:-1},o.sort(e),t)for(i=0,n=o.length;i<n;i++)o[i].children&&o[i].sortChildren(e,"$norender$");"$norender$"!==t&&this.render(),this.triggerModifyChild("sort")}},toDict:function(t,i){var n,o,s,r,a={},l=this;if(e.each(m,function(e,t){(l[t]||!1===l[t])&&(a[t]=l[t])}),e.isEmptyObject(this.data)||(a.data=e.extend({},this.data),e.isEmptyObject(a.data)&&delete a.data),i){if(!1===(r=i(a,l)))return!1;"skip"===r&&(t=!1)}if(t&&this.hasChildren())for(a.children=[],n=0,o=this.children.length;n<o;n++)(s=this.children[n]).isStatusNode()||!1!==(r=s.toDict(!0,i))&&a.children.push(r);return a},toggleClass:function(t,i){var n,o,s=t.match(/\S+/g)||[],r=0,a=!1,l=this[this.tree.statusClassPropName],c=" "+(this.extraClasses||"")+" ";for(l&&e(l).toggleClass(t,i);n=s[r++];)if(o=c.indexOf(" "+n+" ")>=0,i=void 0===i?!o:!!i)o||(c+=n+" ",a=!0);else for(;c.indexOf(" "+n+" ")>-1;)c=c.replace(" "+n+" "," ");return this.extraClasses=e.trim(c),a},toggleExpanded:function(){return this.tree._callHook("nodeToggleExpanded",this)},toggleSelected:function(){return this.tree._callHook("nodeToggleSelected",this)},toString:function(){return"FancytreeNode@"+this.key+"[title='"+this.title+"']"},triggerModifyChild:function(t,i,n){var o,s=this.tree.options.modifyChild;s&&(i&&i.parent!==this&&e.error("childNode "+i+" is not a child of "+this),o={node:this,tree:this.tree,operation:t,childNode:i||null},n&&e.extend(o,n),s({type:"modifyChild"},o))},triggerModify:function(e,t){this.parent.triggerModifyChild(e,this,t)},visit:function(e,t){var i,n,o=!0,s=this.children;if(!0===t&&(!1===(o=e(this))||"skip"===o))return o;if(s)for(i=0,n=s.length;i<n&&!1!==(o=s[i].visit(e,!0));i++);return o},visitAndLoad:function(t,i,n){var o,s,r,a=this;return!t||!0!==i||!1!==(s=t(a))&&"skip"!==s?a.children||a.lazy?(o=new e.Deferred,r=[],a.load().done(function(){for(var i=0,n=a.children.length;i<n;i++){if(!1===(s=a.children[i].visitAndLoad(t,!0,!0))){o.reject();break}"skip"!==s&&r.push(s)}e.when.apply(this,r).then(function(){o.resolve()})}),o.promise()):x():n?s:x()},visitParents:function(e,t){if(t&&!1===e(this))return!1;for(var i=this.parent;i;){if(!1===e(i))return!1;i=i.parent}return!0},visitSiblings:function(e,t){var i,n,o,s=this.parent.children;for(i=0,n=s.length;i<n;i++)if(o=s[i],(t||o!==this)&&!1===e(o))return!1;return!0},warn:function(e){this.tree.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),C("warn",arguments))}},I.prototype={_makeHookContext:function(t,i,n){var o,s;return void 0!==t.node?(i&&t.originalEvent!==i&&e.error("invalid args"),o=t):t.tree?o={node:t,tree:s=t.tree,widget:s.widget,options:s.widget.options,originalEvent:i,typeInfo:s.types[t.type]||{}}:t.widget?o={node:null,tree:t,widget:t.widget,options:t.widget.options,originalEvent:i}:e.error("invalid args"),n&&e.extend(o,n),o},_callHook:function(t,i,n){var o=this._makeHookContext(i),s=this[t],r=Array.prototype.slice.call(arguments,2);return e.isFunction(s)||e.error("_callHook('"+t+"') is not a function"),r.unshift(o),s.apply(this,r)},_setExpiringValue:function(e,t,i){this._tempCache[e]={value:t,expire:Date.now()+(+i||50)}},_getExpiringValue:function(e){var t=this._tempCache[e];return t&&t.expire>Date.now()?t.value:(delete this._tempCache[e],null)},_requireExtension:function(t,i,n,o){null!=n&&(n=!!n);var s=this._local.name,r=this.options.extensions,a=e.inArray(t,r)<e.inArray(s,r),l=i&&null==this.ext[t],c=!l&&null!=n&&n!==a;return b(s&&s!==t,"invalid or same name '"+s+"' (require yourself?)"),!l&&!c||(o||(l||i?(o="'"+s+"' extension requires '"+t+"'",c&&(o+=" to be registered "+(n?"before":"after")+" itself")):o="If used together, `"+t+"` must be registered "+(n?"before":"after")+" `"+s+"`"),e.error(o),!1)},activateKey:function(e,t){var i=this.getNodeByKey(e);return i?i.setActive(!0,t):this.activeNode&&this.activeNode.setActive(!1,t),i},addPagingNode:function(e,t){return this.rootNode.addPagingNode(e,t)},applyCommand:function(t,i,n){var o;switch(i=i||this.getActiveNode(),t){case"moveUp":(o=i.getPrevSibling())&&(i.moveTo(o,"before"),i.setActive());break;case"moveDown":(o=i.getNextSibling())&&(i.moveTo(o,"after"),i.setActive());break;case"indent":(o=i.getPrevSibling())&&(i.moveTo(o,"child"),o.setExpanded(),i.setActive());break;case"outdent":i.isTopLevel()||(i.moveTo(i.getParent(),"after"),i.setActive());break;case"remove":o=i.getPrevSibling()||i.getParent(),i.remove(),o&&o.setActive();break;case"addChild":i.editCreateNode("child","");break;case"addSibling":i.editCreateNode("after","");break;case"rename":i.editStart();break;case"down":case"first":case"last":case"left":case"parent":case"right":case"up":return i.navigate(t);default:e.error("Unhandled command: '"+t+"'")}},applyPatch:function(t){var i,n,o,s,r,a,l=t.length,c=[];for(n=0;n<l;n++)b(2===(o=t[n]).length,"patchList must be an array of length-2-arrays"),s=o[0],r=o[1],(a=null===s?this.rootNode:this.getNodeByKey(s))?(i=new e.Deferred,c.push(i),a.applyPatch(r).always(E(i,a))):this.warn("could not find node with key '"+s+"'");return e.when.apply(e,c).promise()},clear:function(e){this._callHook("treeClear",this)},count:function(){return this.rootNode.countChildren()},debug:function(e){this.options.debugLevel>=4&&(Array.prototype.unshift.call(arguments,this.toString()),C("log",arguments))},enable:function(e){!1===e?this.widget.disable():this.widget.enable()},enableUpdate:function(e){return e=!1!==e,!!this._enableUpdate==!!e?e:(this._enableUpdate=e,e?(this.debug("enableUpdate(true): redraw "),this._callHook("treeStructureChanged",this,"enableUpdate"),this.render()):this.debug("enableUpdate(false)..."),!e)},error:function(e){this.options.debugLevel>=1&&(Array.prototype.unshift.call(arguments,this.toString()),C("error",arguments))},expandAll:function(e,t){var i=this.enableUpdate(!1);e=!1!==e,this.visit(function(i){!1!==i.hasChildren()&&i.isExpanded()!==e&&i.setExpanded(e,t)}),this.enableUpdate(i)},findAll:function(e){return this.rootNode.findAll(e)},findFirst:function(e){return this.rootNode.findFirst(e)},findNextNode:function(e,t){var i,n=null,o=this.getFirstChild();function s(i){if(e(i)&&(n=i),n||i===t)return!1}return e="string"==typeof e?(i=new RegExp("^"+e,"i"),function(e){return i.test(e.title)}):e,t=t||o,this.visitRows(s,{start:t,includeSelf:!1}),n||t===o||this.visitRows(s,{start:o,includeSelf:!0}),n},findRelatedNode:function(t,i,n){var o=null,s=e.ui.keyCode;switch(i){case"parent":case s.BACKSPACE:t.parent&&t.parent.parent&&(o=t.parent);break;case"first":case s.HOME:this.visit(function(e){if(e.isVisible())return o=e,!1});break;case"last":case s.END:this.visit(function(e){e.isVisible()&&(o=e)});break;case"left":case s.LEFT:t.expanded?t.setExpanded(!1):t.parent&&t.parent.parent&&(o=t.parent);break;case"right":case s.RIGHT:t.expanded||!t.children&&!t.lazy?t.children&&t.children.length&&(o=t.children[0]):(t.setExpanded(),o=t);break;case"up":case s.UP:this.visitRows(function(e){return o=e,!1},{start:t,reverse:!0,includeSelf:!1});break;case"down":case s.DOWN:this.visitRows(function(e){return o=e,!1},{start:t,includeSelf:!1});break;default:this.tree.warn("Unknown relation '"+i+"'.")}return o},generateFormElements:function(t,i,n){n=n||{};var o,s="string"==typeof t?t:"ft_"+this._id+"[]",r="string"==typeof i?i:"ft_"+this._id+"_active",a="fancytree_result_"+this._id,l=e("#"+a),c=3===this.options.selectMode&&!1!==n.stopOnParents;function u(t){l.append(e("<input>",{type:"checkbox",name:s,value:t.key,checked:!0}))}l.length?l.empty():l=e("<div>",{id:a}).hide().insertAfter(this.$container),!1!==i&&this.activeNode&&l.append(e("<input>",{type:"radio",name:r,value:this.activeNode.key,checked:!0})),n.filter?this.visit(function(e){var t=n.filter(e);if("skip"===t)return t;!1!==t&&u(e)}):!1!==t&&(o=this.getSelectedNodes(c),e.each(o,function(e,t){u(t)}))},getActiveNode:function(){return this.activeNode},getFirstChild:function(){return this.rootNode.getFirstChild()},getFocusNode:function(){return this.focusNode},getOption:function(e){return this.widget.option(e)},getNodeByKey:function(e,t){var i,n;return!t&&(i=document.getElementById(this.options.idPrefix+e))?i.ftnode?i.ftnode:null:(t=t||this.rootNode,n=null,t.visit(function(t){if(t.key===e)return n=t,!1},!0),n)},getRootNode:function(){return this.rootNode},getSelectedNodes:function(e){return this.rootNode.getSelectedNodes(e)},hasFocus:function(){return!!this._hasFocus},info:function(e){this.options.debugLevel>=3&&(Array.prototype.unshift.call(arguments,this.toString()),C("info",arguments))},isLoading:function(){var e=!1;return this.rootNode.visit(function(t){if(t._isLoading||t._requestId)return e=!0,!1},!0),e},loadKeyPath:function(t,i){var n,o,s,r=this,a=new e.Deferred,l=this.getRootNode(),c=this.options.keyPathSeparator,u=[],d=e.extend({},i);for("function"==typeof i?n=i:i&&i.callback&&(n=i.callback),d.callback=function(e,t,i){n&&n.call(e,t,i),a.notifyWith(e,[{node:t,status:i}])},null==d.matchKey&&(d.matchKey=function(e,t){return e.key===t}),e.isArray(t)||(t=[t]),o=0;o<t.length;o++)(s=t[o]).charAt(0)===c&&(s=s.substr(1)),u.push(s.split(c));return setTimeout(function(){r._loadKeyPathImpl(a,d,l,u).done(function(){a.resolve()})},0),a.promise()},_loadKeyPathImpl:function(t,i,n,o){var s,r,a,l,c,u,d,h,p,f,m=this;function g(e,t){var n,o,s=e.children;if(s)for(n=0,o=s.length;n<o;n++)if(i.matchKey(s[n],t))return s[n];return null}for(d={},r=0;r<o.length;r++)for(p=o[r],h=n;p.length;){if(a=p.shift(),!(l=g(h,a))){this.warn("loadKeyPath: key not found: "+a+" (parent: "+h+")"),i.callback(this,a,"error");break}if(0===p.length){i.callback(this,l,"ok");break}if(l.lazy&&void 0===l.hasChildren()){i.callback(this,l,"loaded"),d[a=l.key]?d[a].pathSegList.push(p):d[a]={parent:l,pathSegList:[p]};break}i.callback(this,l,"loaded"),h=l}function v(e,t,n){i.callback(m,t,"loading"),t.load().done(function(){m._loadKeyPathImpl.call(m,e,i,t,n).always(E(e,m))}).fail(function(n){m.warn("loadKeyPath: error loading lazy "+t),i.callback(m,l,"error"),e.rejectWith(m)})}for(c in s=[],d)d.hasOwnProperty(c)&&(u=d[c],f=new e.Deferred,s.push(f),v(f,u.parent,u.pathSegList));return e.when.apply(e,s).promise()},reactivate:function(e){var t,i=this.activeNode;return i?(this.activeNode=null,t=i.setActive(!0,{noFocus:!0}),e&&i.setFocus(),t):x()},reload:function(e){return this._callHook("treeClear",this),this._callHook("treeLoad",this,e)},render:function(e,t){return this.rootNode.render(e,t)},selectAll:function(e){this.visit(function(t){t.setSelected(e)})},setFocus:function(e){return this._callHook("treeSetFocus",this,e)},setOption:function(e,t){return this.widget.option(e,t)},toDict:function(e,t){var i=this.rootNode.toDict(!0,t);return e?i:i.children},toString:function(){return"Fancytree@"+this._id},_triggerNodeEvent:function(e,t,i,n){var o=this._makeHookContext(t,i,n),s=this.widget._trigger(e,i,o);return!1!==s&&void 0!==o.result?o.result:s},_triggerTreeEvent:function(e,t,i){var n=this._makeHookContext(this,t,i),o=this.widget._trigger(e,t,n);return!1!==o&&void 0!==n.result?n.result:o},visit:function(e){return this.rootNode.visit(e,!1)},visitRows:function(e,t){if(!this.rootNode.children)return!1;if(t&&t.reverse)return delete t.reverse,this._visitRowsUp(e,t);var i,n,o,s=0,r=!1===(t=t||{}).includeSelf,a=!!t.includeHidden,l=!a&&this.enableFilter,c=t.start||this.rootNode.children[0];for(n=c.parent;n;){for(i=(o=n.children).indexOf(c)+s;i<o.length;i++)if(c=o[i],!l||c.match||c.subMatchCount){if(!r&&!1===e(c))return!1;if(r=!1,c.children&&c.children.length&&(a||c.expanded)&&!1===c.visit(function(t){return!l||t.match||t.subMatchCount?!1!==e(t)&&(a||!t.children||t.expanded?void 0:"skip"):"skip"},!1))return!1}c=n,n=n.parent,s=1}return!0},_visitRowsUp:function(e,t){for(var i,n,o=!!t.includeHidden,s=t.start||this.rootNode.children[0];;){if((i=(n=s.parent).children)[0]===s){if(!(s=n).parent)break;i=n.children}else for(s=i[i.indexOf(s)-1];(o||s.expanded)&&s.children&&s.children.length;)n=s,s=(i=s.children)[i.length-1];if((o||s.isVisible())&&!1===e(s))return!1}},warn:function(e){this.options.debugLevel>=2&&(Array.prototype.unshift.call(arguments,this.toString()),C("warn",arguments))}},e.extend(I.prototype,{nodeClick:function(e){var t,i,n=e.targetType,o=e.node;if("expander"===n){if(o.isLoading())return void o.debug("Got 2nd click while loading: ignored");this._callHook("nodeToggleExpanded",e)}else if("checkbox"===n)this._callHook("nodeToggleSelected",e),e.options.focusOnSelect&&this._callHook("nodeSetFocus",e,!0);else{if(i=!1,t=!0,o.folder)switch(e.options.clickFolderMode){case 2:i=!0,t=!1;break;case 3:t=!0,i=!0}t&&(this.nodeSetFocus(e),this._callHook("nodeSetActive",e,!0)),i&&this._callHook("nodeToggleExpanded",e)}},nodeCollapseSiblings:function(e,t){var i,n,o,s=e.node;if(s.parent)for(n=0,o=(i=s.parent.children).length;n<o;n++)i[n]!==s&&i[n].expanded&&this._callHook("nodeSetExpanded",i[n],!1,t)},nodeDblclick:function(e){"title"===e.targetType&&4===e.options.clickFolderMode&&this._callHook("nodeToggleExpanded",e),"title"===e.targetType&&e.originalEvent.preventDefault()},nodeKeydown:function(t){var i,o,s,r=t.originalEvent,a=t.node,l=t.tree,d=t.options,h=r.which,p=r.key||String.fromCharCode(h),f=!!(r.altKey||r.ctrlKey||r.metaKey),m=!u[h]&&!c[h]&&!f,g=e(r.target),v=!0,y=!(r.ctrlKey||!d.autoActivate);if(a||(s=this.getActiveNode()||this.getFirstChild())&&(s.setFocus(),(a=t.node=this.focusNode).debug("Keydown force focus on active node")),d.quicksearch&&m&&!g.is(":input:enabled"))return(o=Date.now())-l.lastQuicksearchTime>500&&(l.lastQuicksearchTerm=""),l.lastQuicksearchTime=o,l.lastQuicksearchTerm+=p,(i=l.findNextNode(l.lastQuicksearchTerm,l.getActiveNode()))&&i.setActive(),void r.preventDefault();switch(n.eventToString(r)){case"+":case"=":l.nodeSetExpanded(t,!0);break;case"-":l.nodeSetExpanded(t,!1);break;case"space":a.isPagingNode()?l._triggerNodeEvent("clickPaging",t,r):n.evalOption("checkbox",a,a,d,!1)?l.nodeToggleSelected(t):l.nodeSetActive(t,!0);break;case"return":l.nodeSetActive(t,!0);break;case"home":case"end":case"backspace":case"left":case"right":case"up":case"down":a.navigate(r.which,y);break;default:v=!1}v&&r.preventDefault()},nodeLoadChildren:function(t,i){var n,o,s,r,a=t.tree,l=t.node,c=Date.now();return e.isFunction(i)&&(i=i.call(a,{type:"source"},t),b(!e.isFunction(i),"source callback must not return another function")),i.url&&(l._requestId&&l.warn("Recursive load request #"+c+" while #"+l._requestId+" is pending."),n=e.extend({},t.options.ajax,i),l._requestId=c,n.debugDelay?(o=n.debugDelay,delete n.debugDelay,e.isArray(o)&&(o=o[0]+Math.random()*(o[1]-o[0])),l.warn("nodeLoadChildren waiting debugDelay "+Math.round(o)+" ms ..."),s=e.Deferred(function(t){setTimeout(function(){e.ajax(n).done(function(){t.resolveWith(this,arguments)}).fail(function(){t.rejectWith(this,arguments)})},o)})):s=e.ajax(n),i=new e.Deferred,s.done(function(n,o,s){var r,u;if("json"!==this.dataType&&"jsonp"!==this.dataType||"string"!=typeof n||e.error("Ajax request returned a string (did you get the JSON dataType wrong?)."),l._requestId&&l._requestId>c)i.rejectWith(this,["$recursive_request"]);else{if(t.options.postProcess){try{u=a._triggerNodeEvent("postProcess",t,t.originalEvent,{response:n,error:null,dataType:this.dataType})}catch(e){u={error:e,message:""+e,details:"postProcess failed"}}if(u.error)return r=e.isPlainObject(u.error)?u.error:{message:u.error},r=a._makeHookContext(l,null,r),void i.rejectWith(this,[r]);(e.isArray(u)||e.isPlainObject(u)&&e.isArray(u.children))&&(n=u)}else n&&n.hasOwnProperty("d")&&t.options.enableAspx&&(n="string"==typeof n.d?e.parseJSON(n.d):n.d);i.resolveWith(this,[n])}}).fail(function(e,t,n){var o=a._makeHookContext(l,null,{error:e,args:Array.prototype.slice.call(arguments),message:n,details:e.status+": "+n});i.rejectWith(this,[o])})),e.isFunction(i.then)&&e.isFunction(i.catch)&&(s=i,i=new e.Deferred,s.then(function(e){i.resolve(e)},function(e){i.reject(e)})),e.isFunction(i.promise)?(a.nodeSetStatus(t,"loading"),i.done(function(e){a.nodeSetStatus(t,"ok"),l._requestId=null}).fail(function(e){var i;"$recursive_request"!==e?(e.node&&e.error&&e.message?i=e:"[object Object]"===(i=a._makeHookContext(l,null,{error:e,args:Array.prototype.slice.call(arguments),message:e?e.message||e.toString():""})).message&&(i.message=""),l.warn("Load children failed ("+i.message+")",i),!1!==a._triggerNodeEvent("loadError",i,null)&&a.nodeSetStatus(t,"error",i.message,i.details)):l.warn("Ignored response for obsolete load request #"+c+" (expected #"+l._requestId+")")})):t.options.postProcess&&(r=a._triggerNodeEvent("postProcess",t,t.originalEvent,{response:i,error:null,dataType:typeof i}),(e.isArray(r)||e.isPlainObject(r)&&e.isArray(r.children))&&(i=r)),e.when(i).done(function(i){var n,o;e.isPlainObject(i)&&(b(l.isRootNode(),"source may only be an object for root nodes (expecting an array of child objects otherwise)"),b(e.isArray(i.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),n=i,i=i.children,delete n.children,e.each(f,function(e,t){void 0!==n[t]&&(a[t]=n[t],delete n[t])}),e.extend(a.data,n)),b(e.isArray(i),"expected array of children"),l._setChildren(i),a.options.nodata&&0===i.length&&(e.isFunction(a.options.nodata)?o=a.options.nodata.call(a,{type:"nodata"},t):!0===a.options.nodata&&l.isRootNode()?o=a.options.strings.nodata:"string"==typeof a.options.nodata&&l.isRootNode()&&(o=a.options.nodata),o&&l.setStatus("nodata",o)),a._triggerNodeEvent("loadChildren",l)})},nodeLoadKeyPath:function(e,t){},nodeRemoveChild:function(t,i){var n,o=t.node,s=e.extend({},t,{node:i}),r=o.children;if(1===r.length)return b(i===r[0],"invalid single child"),this.nodeRemoveChildren(t);this.activeNode&&(i===this.activeNode||this.activeNode.isDescendantOf(i))&&this.activeNode.setActive(!1),this.focusNode&&(i===this.focusNode||this.focusNode.isDescendantOf(i))&&(this.focusNode=null),this.nodeRemoveMarkup(s),this.nodeRemoveChildren(s),b((n=e.inArray(i,r))>=0,"invalid child"),o.triggerModifyChild("remove",i),i.visit(function(e){e.parent=null},!0),this._callHook("treeRegisterNode",this,!1,i),r.splice(n,1)},nodeRemoveChildMarkup:function(t){var i=t.node;i.ul&&(i.isRootNode()?e(i.ul).empty():(e(i.ul).remove(),i.ul=null),i.visit(function(e){e.li=e.ul=null}))},nodeRemoveChildren:function(e){var t=e.tree,i=e.node;i.children&&(this.activeNode&&this.activeNode.isDescendantOf(i)&&this.activeNode.setActive(!1),this.focusNode&&this.focusNode.isDescendantOf(i)&&(this.focusNode=null),this.nodeRemoveChildMarkup(e),i.triggerModifyChild("remove",null),i.visit(function(e){e.parent=null,t._callHook("treeRegisterNode",t,!1,e)}),i.lazy?i.children=[]:i.children=null,i.isRootNode()||(i.expanded=!1),this.nodeRenderStatus(e))},nodeRemoveMarkup:function(t){var i=t.node;i.li&&(e(i.li).remove(),i.li=null),this.nodeRemoveChildMarkup(t)},nodeRender:function(t,i,n,o,s){var r,a,l,c,u,d,h,p=t.node,f=t.tree,m=t.options,g=m.aria,v=!1,y=p.parent,C=!y,_=p.children,D=null;if(!1!==f._enableUpdate&&(C||y.ul)){if(b(C||y.ul,"parent UL must exist"),C||(p.li&&(i||p.li.parentNode!==p.parent.ul)&&(p.li.parentNode===p.parent.ul?D=p.li.nextSibling:this.debug("Unlinking "+p+" (must be child of "+p.parent+")"),this.nodeRemoveMarkup(t)),p.li?this.nodeRenderStatus(t):(v=!0,p.li=document.createElement("li"),p.li.ftnode=p,p.key&&m.generateIds&&(p.li.id=m.idPrefix+p.key),p.span=document.createElement("span"),p.span.className="fancytree-node",g&&!p.tr&&e(p.li).attr("role","treeitem"),p.li.appendChild(p.span),this.nodeRenderTitle(t),m.createNode&&m.createNode.call(f,{type:"createNode"},t)),m.renderNode&&m.renderNode.call(f,{type:"renderNode"},t)),_){if(C||p.expanded||!0===n){for(p.ul||(p.ul=document.createElement("ul"),(!0!==o||s)&&p.expanded||(p.ul.style.display="none"),g&&e(p.ul).attr("role","group"),p.li?p.li.appendChild(p.ul):p.tree.$div.append(p.ul)),c=0,u=_.length;c<u;c++)h=e.extend({},t,{node:_[c]}),this.nodeRender(h,i,n,!1,!0);for(r=p.ul.firstChild;r;)(l=r.ftnode)&&l.parent!==p?(p.debug("_fixParent: remove missing "+l,r),d=r.nextSibling,r.parentNode.removeChild(r),r=d):r=r.nextSibling;for(r=p.ul.firstChild,c=0,u=_.length-1;c<u;c++)(a=_[c])===(l=r.ftnode)?r=r.nextSibling:p.ul.insertBefore(a.li,l.li)}}else p.ul&&(this.warn("remove child markup for "+p),this.nodeRemoveChildMarkup(t));C||v&&y.ul.insertBefore(p.li,D)}},nodeRenderTitle:function(t,i){var s,r,a,l,c,u,d,h=t.node,p=t.tree,f=t.options,m=f.aria,g=h.getLevel(),v=[];void 0!==i&&(h.title=i),h.span&&!1!==p._enableUpdate&&(c=m&&!1!==h.hasChildren()?" role='button'":"",g<f.minExpandLevel?(h.lazy||(h.expanded=!0),g>1&&v.push("<span "+c+" class='fancytree-expander fancytree-expander-fixed'></span>")):v.push("<span "+c+" class='fancytree-expander'></span>"),(s=n.evalOption("checkbox",h,h,f,!1))&&!h.isStatusNode()&&(c=m?" role='checkbox'":"",r="fancytree-checkbox",("radio"===s||h.parent&&h.parent.radiogroup)&&(r+=" fancytree-radio"),v.push("<span "+c+" class='"+r+"'></span>")),void 0!==h.data.iconClass&&(h.icon?e.error("'iconClass' node option is deprecated since v2.14.0: use 'icon' only instead"):(h.warn("'iconClass' node option is deprecated since v2.14.0: use 'icon' instead"),h.icon=h.data.iconClass)),!1!==(a=n.evalOption("icon",h,h,f,!0))&&(c=m?" role='presentation'":"",d=(d=n.evalOption("iconTooltip",h,h,f,null))?" title='"+A(d)+"'":"","string"==typeof a?o.test(a)?(a="/"===a.charAt(0)?a:(f.imagePath||"")+a,v.push("<img src='"+a+"' class='fancytree-icon'"+d+" alt='' />")):v.push("<span "+c+" class='fancytree-custom-icon "+a+"'"+d+"></span>"):a.text?v.push("<span "+c+" class='fancytree-custom-icon "+(a.addClass||"")+"'"+d+">"+n.escapeHtml(a.text)+"</span>"):a.html?v.push("<span "+c+" class='fancytree-custom-icon "+(a.addClass||"")+"'"+d+">"+a.html+"</span>"):v.push("<span "+c+" class='fancytree-icon'"+d+"></span>")),l="",f.renderTitle&&(l=f.renderTitle.call(p,{type:"renderTitle"},t)||""),l||(!0===(u=n.evalOption("tooltip",h,h,f,null))&&(u=h.title),l="<span class='fancytree-title'"+(u=u?" title='"+A(u)+"'":"")+(f.titlesTabbable?" tabindex='0'":"")+">"+(f.escapeTitles?n.escapeHtml(h.title):h.title)+"</span>"),v.push(l),h.span.innerHTML=v.join(""),this.nodeRenderStatus(t),f.enhanceTitle&&(t.$title=e(">span.fancytree-title",h.span),l=f.enhanceTitle.call(p,{type:"enhanceTitle"},t)||""))},nodeRenderStatus:function(t){var i,o=t.node,s=t.tree,r=t.options,a=o.hasChildren(),l=o.isLastSibling(),c=r.aria,u=r._classNames,d=[],h=o[s.statusClassPropName];h&&!1!==s._enableUpdate&&(c&&(i=e(o.tr||o.li)),d.push(u.node),s.activeNode===o&&d.push(u.active),s.focusNode===o&&d.push(u.focused),o.expanded&&d.push(u.expanded),c&&(!1===a?i.removeAttr("aria-expanded"):i.attr("aria-expanded",Boolean(o.expanded))),o.folder&&d.push(u.folder),!1!==a&&d.push(u.hasChildren),l&&d.push(u.lastsib),o.lazy&&null==o.children&&d.push(u.lazy),o.partload&&d.push(u.partload),o.partsel&&d.push(u.partsel),n.evalOption("unselectable",o,o,r,!1)&&d.push(u.unselectable),o._isLoading&&d.push(u.loading),o._error&&d.push(u.error),o.statusNodeType&&d.push(u.statusNodePrefix+o.statusNodeType),o.selected?(d.push(u.selected),c&&i.attr("aria-selected",!0)):c&&i.attr("aria-selected",!1),o.extraClasses&&d.push(o.extraClasses),!1===a?d.push(u.combinedExpanderPrefix+"n"+(l?"l":"")):d.push(u.combinedExpanderPrefix+(o.expanded?"e":"c")+(o.lazy&&null==o.children?"d":"")+(l?"l":"")),d.push(u.combinedIconPrefix+(o.expanded?"e":"c")+(o.folder?"f":"")),h.className=d.join(" "),o.li&&e(o.li).toggleClass(u.lastsib,l))},nodeSetActive:function(t,i,n){n=n||{};var o,s=t.node,r=t.tree,a=t.options,l=!0===n.noEvents,c=!0===n.noFocus,u=!1!==n.scrollIntoView;return s===r.activeNode===(i=!1!==i)?x(s):i&&!l&&!1===this._triggerNodeEvent("beforeActivate",s,t.originalEvent)?k(s,["rejected"]):(i?(r.activeNode&&(b(r.activeNode!==s,"node was active (inconsistency)"),o=e.extend({},t,{node:r.activeNode}),r.nodeSetActive(o,!1),b(null===r.activeNode,"deactivate was out of sync?")),a.activeVisible&&s.makeVisible({scrollIntoView:u}),r.activeNode=s,r.nodeRenderStatus(t),c||r.nodeSetFocus(t),l||r._triggerNodeEvent("activate",s,t.originalEvent)):(b(r.activeNode===s,"node was not active (inconsistency)"),r.activeNode=null,this.nodeRenderStatus(t),l||t.tree._triggerNodeEvent("deactivate",s,t.originalEvent)),x(s))},nodeSetExpanded:function(t,i,n){n=n||{};var o,s,r,a,l,c,u=t.node,d=t.tree,h=t.options,p=!0===n.noAnimation,f=!0===n.noEvents;if(i=!1!==i,u.expanded&&i||!u.expanded&&!i)return x(u);if(i&&!u.lazy&&!u.hasChildren())return x(u);if(!i&&u.getLevel()<h.minExpandLevel)return k(u,["locked"]);if(!f&&!1===this._triggerNodeEvent("beforeExpand",u,t.originalEvent))return k(u,["rejected"]);if(p||u.isVisible()||(p=n.noAnimation=!0),s=new e.Deferred,i&&!u.expanded&&h.autoCollapse){l=u.getParentList(!1,!0),c=h.autoCollapse;try{for(h.autoCollapse=!1,r=0,a=l.length;r<a;r++)this._callHook("nodeCollapseSiblings",l[r],n)}finally{h.autoCollapse=c}}return s.done(function(){var e=u.getLastChild();i&&h.autoScroll&&!p&&e?e.scrollIntoView(!0,{topNode:u}).always(function(){f||t.tree._triggerNodeEvent(i?"expand":"collapse",t)}):f||t.tree._triggerNodeEvent(i?"expand":"collapse",t)}),o=function(n){var o=h._classNames,s=h.toggleEffect;if(u.expanded=i,d._callHook("treeStructureChanged",t,i?"expand":"collapse"),d._callHook("nodeRender",t,!1,!1,!0),u.ul)if("none"!==u.ul.style.display===!!u.expanded)u.warn("nodeSetExpanded: UL.style.display already set");else{if(s&&!p)return e(u.li).addClass(o.animating),void(e.isFunction(e(u.ul)[s.effect])?(d.debug("use jquery."+s.effect+" method"),e(u.ul)[s.effect]({duration:s.duration,always:function(){e(this).removeClass(o.animating),e(u.li).removeClass(o.animating),n()}})):(e(u.ul).stop(!0,!0),e(u.ul).parent().find(".ui-effects-placeholder").remove(),e(u.ul).toggle(s.effect,s.options,s.duration,function(){e(this).removeClass(o.animating),e(u.li).removeClass(o.animating),n()})));u.ul.style.display=u.expanded||!parent?"":"none"}n()},i&&u.lazy&&void 0===u.hasChildren()?u.load().done(function(){s.notifyWith&&s.notifyWith(u,["loaded"]),o(function(){s.resolveWith(u)})}).fail(function(e){o(function(){s.rejectWith(u,["load failed ("+e+")"])})}):o(function(){s.resolveWith(u)}),s.promise()},nodeSetFocus:function(t,i){var n,o=t.tree,s=t.node,r=o.options,a=!!t.originalEvent&&e(t.originalEvent.target).is(":input");if(i=!1!==i,o.focusNode){if(o.focusNode===s&&i)return;n=e.extend({},t,{node:o.focusNode}),o.focusNode=null,this._triggerNodeEvent("blur",n),this._callHook("nodeRenderStatus",n)}i&&(this.hasFocus()||(s.debug("nodeSetFocus: forcing container focus"),this._callHook("treeSetFocus",t,!0,{calledByNode:!0})),s.makeVisible({scrollIntoView:!1}),o.focusNode=s,r.titlesTabbable&&(a||e(s.span).find(".fancytree-title").focus()),r.aria&&e(o.$container).attr("aria-activedescendant",e(s.tr||s.li).uniqueId().attr("id")),this._triggerNodeEvent("focus",t),document.activeElement===o.$container.get(0)||e(document.activeElement,o.$container).length>=1||e(o.$container).focus(),r.autoScroll&&s.scrollIntoView(),this._callHook("nodeRenderStatus",t))},nodeSetSelected:function(e,t,i){i=i||{};var o=e.node,s=e.tree,r=e.options,a=!0===i.noEvents,l=o.parent;if(t=!1!==t,!n.evalOption("unselectable",o,o,r,!1)){if(o._lastSelectIntent=t,!!o.selected===t&&(3!==r.selectMode||!o.partsel||t))return t;if(!a&&!1===this._triggerNodeEvent("beforeSelect",o,e.originalEvent))return!!o.selected;t&&1===r.selectMode?(s.lastSelectedNode&&s.lastSelectedNode.setSelected(!1),o.selected=t):3!==r.selectMode||!l||l.radiogroup||o.radiogroup?l&&l.radiogroup?o.visitSiblings(function(e){e._changeSelectStatusAttrs(t&&e===o)},!0):o.selected=t:(o.selected=t,o.fixSelection3AfterClick(i)),this.nodeRenderStatus(e),s.lastSelectedNode=t?o:null,a||s._triggerNodeEvent("select",e)}},nodeSetStatus:function(t,i,n,o){var s=t.node,r=t.tree;function a(i,n){var o=s.children?s.children[0]:null;return o&&o.isStatusNode()?(e.extend(o,i),o.statusNodeType=n,r._callHook("nodeRenderTitle",o)):(s._setChildren([i]),r._callHook("treeStructureChanged",t,"setStatusNode"),s.children[0].statusNodeType=n,r.render()),s.children[0]}switch(i){case"ok":!function(){var e=s.children?s.children[0]:null;if(e&&e.isStatusNode()){try{s.ul&&(s.ul.removeChild(e.li),e.li=null)}catch(e){}1===s.children.length?s.children=[]:s.children.shift(),r._callHook("treeStructureChanged",t,"clearStatusNode")}}(),s._isLoading=!1,s._error=null,s.renderStatus();break;case"loading":s.parent||a({title:r.options.strings.loading+(n?" ("+n+")":""),checkbox:!1,tooltip:o},i),s._isLoading=!0,s._error=null,s.renderStatus();break;case"error":a({title:r.options.strings.loadError+(n?" ("+n+")":""),checkbox:!1,tooltip:o},i),s._isLoading=!1,s._error={message:n,details:o},s.renderStatus();break;case"nodata":a({title:n||r.options.strings.noData,checkbox:!1,tooltip:o},i),s._isLoading=!1,s._error=null,s.renderStatus();break;default:e.error("invalid node status "+i)}},nodeToggleExpanded:function(e){return this.nodeSetExpanded(e,!e.node.expanded)},nodeToggleSelected:function(e){var t=e.node,i=!t.selected;return t.partsel&&!t.selected&&!0===t._lastSelectIntent&&(i=!1,t.selected=!0),t._lastSelectIntent=i,this.nodeSetSelected(e,i)},treeClear:function(e){var t=e.tree;t.activeNode=null,t.focusNode=null,t.$div.find(">ul.fancytree-container").empty(),t.rootNode.children=null,t._callHook("treeStructureChanged",e,"clear")},treeCreate:function(e){},treeDestroy:function(e){this.$div.find(">ul.fancytree-container").remove(),this.$source&&this.$source.removeClass("fancytree-helper-hidden")},treeInit:function(t){var i=t.tree,n=i.options;i.$container.attr("tabindex",n.tabindex),e.each(f,function(e,t){void 0!==n[t]&&(i.info("Move option "+t+" to tree"),i[t]=n[t],delete n[t])}),n.checkboxAutoHide&&i.$container.addClass("fancytree-checkbox-auto-hide"),n.rtl?i.$container.attr("DIR","RTL").addClass("fancytree-rtl"):i.$container.removeAttr("DIR").removeClass("fancytree-rtl"),n.aria&&(i.$container.attr("role","tree"),1!==n.selectMode&&i.$container.attr("aria-multiselectable",!0)),this.treeLoad(t)},treeLoad:function(t,i){var n,o,s,r=t.tree,a=t.widget.element,l=e.extend({},t,{node:this.rootNode});if(r.rootNode.children&&this.treeClear(t),i=i||this.options.source)"string"==typeof i&&e.error("Not implemented");else switch(o=a.data("type")||"html"){case"html":(s=a.find(">ul").first()).addClass("ui-fancytree-source fancytree-helper-hidden"),i=e.ui.fancytree.parseHtml(s),this.data=e.extend(this.data,S(s));break;case"json":i=e.parseJSON(a.text()),a.contents().filter(function(){return 3===this.nodeType}).remove(),e.isPlainObject(i)&&(b(e.isArray(i.children),"if an object is passed as source, it must contain a 'children' array (all other properties are added to 'tree.data')"),n=i,i=i.children,delete n.children,e.each(f,function(e,t){void 0!==n[t]&&(r[t]=n[t],delete n[t])}),e.extend(r.data,n));break;default:e.error("Invalid data-type: "+o)}return this.nodeLoadChildren(l,i).done(function(){r._callHook("treeStructureChanged",t,"loadChildren"),r.render(),3===t.options.selectMode&&r.rootNode.fixSelection3FromEndNodes(),r.activeNode&&r.options.activeVisible&&r.activeNode.makeVisible(),r._triggerTreeEvent("init",null,{status:!0})}).fail(function(){r.render(),r._triggerTreeEvent("init",null,{status:!1})})},treeRegisterNode:function(e,t,i){e.tree._callHook("treeStructureChanged",e,t?"addNode":"removeNode")},treeSetFocus:function(t,i,n){var o;(i=!1!==i)!==this.hasFocus()&&(this._hasFocus=i,!i&&this.focusNode?this.focusNode.setFocus(!1):!i||n&&n.calledByNode||e(this.$container).focus(),this.$container.toggleClass("fancytree-treefocus",i),this._triggerTreeEvent(i?"focusTree":"blurTree"),i&&!this.activeNode&&(o=this._lastMousedownNode||this.getFirstChild())&&o.setFocus())},treeSetOption:function(t,i,n){var o=t.tree,s=!0,r=!1,a=!1;switch(i){case"aria":case"checkbox":case"icon":case"minExpandLevel":case"tabindex":r=!0,a=!0;break;case"checkboxAutoHide":o.$container.toggleClass("fancytree-checkbox-auto-hide",!!n);break;case"escapeTitles":case"tooltip":a=!0;break;case"rtl":!1===n?o.$container.removeAttr("DIR").removeClass("fancytree-rtl"):o.$container.attr("DIR","RTL").addClass("fancytree-rtl"),a=!0;break;case"source":s=!1,o._callHook("treeLoad",o,n),a=!0}o.debug("set option "+i+"="+n+" <"+typeof n+">"),s&&(this.widget._super?this.widget._super.call(this.widget,i,n):e.Widget.prototype._setOption.call(this.widget,i,n)),r&&o._callHook("treeCreate",o),a&&o.render(!0,!1)},treeStructureChanged:function(e,t){}}),e.widget("ui.fancytree",{options:{activeVisible:!0,ajax:{type:"GET",cache:!1,dataType:"json"},aria:!0,autoActivate:!0,autoCollapse:!1,autoScroll:!1,checkbox:!1,clickFolderMode:4,debugLevel:null,disabled:!1,enableAspx:!0,escapeTitles:!1,extensions:[],toggleEffect:{effect:"slideToggle",duration:200},generateIds:!1,icon:!0,idPrefix:"ft_",focusOnSelect:!1,keyboard:!0,keyPathSeparator:"/",minExpandLevel:1,nodata:!0,quicksearch:!1,rtl:!1,scrollOfs:{top:0,bottom:0},scrollParent:null,selectMode:2,strings:{loading:"Loading...",loadError:"Load error!",moreData:"More...",noData:"No data."},tabindex:"0",titlesTabbable:!1,tooltip:!1,treeId:null,_classNames:{node:"fancytree-node",folder:"fancytree-folder",animating:"fancytree-animating",combinedExpanderPrefix:"fancytree-exp-",combinedIconPrefix:"fancytree-ico-",hasChildren:"fancytree-has-children",active:"fancytree-active",selected:"fancytree-selected",expanded:"fancytree-expanded",lazy:"fancytree-lazy",focused:"fancytree-focused",partload:"fancytree-partload",partsel:"fancytree-partsel",radio:"fancytree-radio",unselectable:"fancytree-unselectable",lastsib:"fancytree-lastsib",loading:"fancytree-loading",error:"fancytree-error",statusNodePrefix:"fancytree-statusnode-"},lazyLoad:null,postProcess:null},_create:function(){this.tree=new I(this),this.$source=this.source||"json"===this.element.data("type")?this.element:this.element.find(">ul").first();var t,i,n,o=this.options,s=o.extensions;this.tree;for(n=0;n<s.length;n++)i=s[n],(t=e.ui.fancytree._extensions[i])||e.error("Could not apply extension '"+i+"' (it is not registered, did you forget to include it?)"),this.tree.options[i]=_({},t.options,this.tree.options[i]),b(void 0===this.tree.ext[i],"Extension name must not exist as Fancytree.ext attribute: '"+i+"'"),this.tree.ext[i]={},w(this.tree,0,t,i),t;void 0!==o.icons&&(!0===o.icon?(this.tree.warn("'icons' tree option is deprecated since v2.14.0: use 'icon' instead"),o.icon=o.icons):e.error("'icons' tree option is deprecated since v2.14.0: use 'icon' only instead")),void 0!==o.iconClass&&(o.icon?e.error("'iconClass' tree option is deprecated since v2.14.0: use 'icon' only instead"):(this.tree.warn("'iconClass' tree option is deprecated since v2.14.0: use 'icon' instead"),o.icon=o.iconClass)),void 0!==o.tabbable&&(o.tabindex=o.tabbable?"0":"-1",this.tree.warn("'tabbable' tree option is deprecated since v2.17.0: use 'tabindex='"+o.tabindex+"' instead")),this.tree._callHook("treeCreate",this.tree)},_init:function(){this.tree._callHook("treeInit",this.tree),this._bind()},_setOption:function(e,t){return this.tree._callHook("treeSetOption",this.tree,e,t)},destroy:function(){this._unbind(),this.tree._callHook("treeDestroy",this.tree),e.Widget.prototype.destroy.call(this)},_unbind:function(){var t=this.tree._ns;this.element.off(t),this.tree.$container.off(t),e(document).off(t)},_bind:function(){var t=this,i=this.options,o=this.tree,s=o._ns;this._unbind(),o.$container.on("focusin"+s+" focusout"+s,function(t){var i=n.getNode(t),s="focusin"===t.type;if(!s&&i&&e(t.target).is("a"))i.debug("Ignored focusout on embedded <a> element.");else{if(s){if(o._getExpiringValue("focusin"))return void o.debug("Ignored double focusin.");o._setExpiringValue("focusin",!0,50),i||(i=o._getExpiringValue("mouseDownNode"))&&o.debug("Reconstruct mouse target for focusin from recent event.")}i?o._callHook("nodeSetFocus",o._makeHookContext(i,t),s):o.tbody&&e(t.target).parents("table.fancytree-container > thead").length?o.debug("Ignore focus event outside table body.",t):o._callHook("treeSetFocus",o,s)}}).on("selectstart"+s,"span.fancytree-title",function(e){e.preventDefault()}).on("keydown"+s,function(e){if(i.disabled||!1===i.keyboard)return!0;var t,n=o.focusNode,s=o._makeHookContext(n||o,e),r=o.phase;try{return o.phase="userEvent","preventNav"===(t=n?o._triggerNodeEvent("keydown",n,e):o._triggerTreeEvent("keydown",e))?t=!0:!1!==t&&(t=o._callHook("nodeKeydown",s)),t}finally{o.phase=r}}).on("mousedown"+s,function(e){var t=n.getEventTarget(e);o._lastMousedownNode=t?t.node:null,o._setExpiringValue("mouseDownNode",o._lastMousedownNode)}).on("click"+s+" dblclick"+s,function(e){if(i.disabled)return!0;var o,s=n.getEventTarget(e),r=s.node,a=t.tree,l=a.phase;if(!r)return!0;o=a._makeHookContext(r,e);try{switch(a.phase="userEvent",e.type){case"click":return o.targetType=s.type,r.isPagingNode()?!0===a._triggerNodeEvent("clickPaging",o,e):!1!==a._triggerNodeEvent("click",o,e)&&a._callHook("nodeClick",o);case"dblclick":return o.targetType=s.type,!1!==a._triggerNodeEvent("dblclick",o,e)&&a._callHook("nodeDblclick",o)}}finally{a.phase=l}})},getActiveNode:function(){return this.tree.activeNode},getNodeByKey:function(e){return this.tree.getNodeByKey(e)},getRootNode:function(){return this.tree.rootNode},getTree:function(){return this.tree}}),n=e.ui.fancytree,e.extend(e.ui.fancytree,{version:"2.32.0",buildType:"production",debugLevel:3,_nextId:1,_nextNodeKey:1,_extensions:{},_FancytreeClass:I,_FancytreeNodeClass:F,jquerySupports:{positionMyOfs:function(t,i,n,o){var s,r,a,l=e.map(e.trim(t).split("."),function(e){return parseInt(e,10)}),c=e.map(Array.prototype.slice.call(arguments,1),function(e){return parseInt(e,10)});for(s=0;s<c.length;s++)if((r=l[s]||0)!==(a=c[s]||0))return r>a;return!0}(e.ui.version,1,9)},assert:function(e,t){return b(e,t)},createTree:function(t,i){return e(t).fancytree(i).fancytree("getTree")},debounce:function(e,t,i,n){var o;return 3===arguments.length&&"boolean"!=typeof i&&(n=i,i=!1),function(){var s=arguments;n=n||this,i&&!o&&t.apply(n,s),clearTimeout(o),o=setTimeout(function(){i||t.apply(n,s),o=null},e)}},debug:function(t){e.ui.fancytree.debugLevel>=4&&C("log",arguments)},error:function(t){e.ui.fancytree.debugLevel>=1&&C("error",arguments)},escapeHtml:function(e){return(""+e).replace(s,function(e){return a[e]})},fixPositionOptions:function(t){if((t.offset||(""+t.my+t.at).indexOf("%")>=0)&&e.error("expected new position syntax (but '%' is not supported)"),!e.ui.fancytree.jquerySupports.positionMyOfs){var i=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.my),n=/(\w+)([+-]?\d+)?\s+(\w+)([+-]?\d+)?/.exec(t.at),o=(i[2]?+i[2]:0)+(n[2]?+n[2]:0),s=(i[4]?+i[4]:0)+(n[4]?+n[4]:0);t=e.extend({},t,{my:i[1]+" "+i[3],at:n[1]+" "+n[3]}),(o||s)&&(t.offset=o+" "+s)}return t},getEventTarget:function(t){var i,o=t&&t.target?t.target.className:"",s={node:this.getNode(t.target),type:void 0};return/\bfancytree-title\b/.test(o)?s.type="title":/\bfancytree-expander\b/.test(o)?s.type=!1===s.node.hasChildren()?"prefix":"expander":/\bfancytree-checkbox\b/.test(o)?s.type="checkbox":/\bfancytree(-custom)?-icon\b/.test(o)?s.type="icon":/\bfancytree-node\b/.test(o)?s.type="title":t&&t.target&&((i=e(t.target)).is("ul[role=group]")?((s.node&&s.node.tree||n).debug("Ignoring click on outer UL."),s.node=null):i.closest(".fancytree-title").length?s.type="title":i.closest(".fancytree-checkbox").length?s.type="checkbox":i.closest(".fancytree-expander").length&&(s.type="expander")),s},getEventTargetType:function(e){return this.getEventTarget(e).type},getNode:function(t){if(t instanceof F)return t;for(t instanceof e?t=t[0]:void 0!==t.originalEvent&&(t=t.target);t;){if(t.ftnode)return t.ftnode;t=t.parentNode}return null},getTree:function(t){var i,n=t;return t instanceof I?t:(void 0===t&&(t=0),"number"==typeof t?t=e(".fancytree-container").eq(t):"string"==typeof t?(t=e("#ft-id-"+n).eq(0)).length||(t=e(n).eq(0)):t instanceof e?t=t.eq(0):void 0!==t.originalEvent&&(t=e(t.target)),(i=(t=t.closest(":ui-fancytree")).data("ui-fancytree")||t.data("fancytree"))?i.tree:null)},evalOption:function(t,i,n,o,s){var r,a,l=i.tree,c=o[t],u=n[t];return e.isFunction(c)?(r={node:i,tree:l,widget:l.widget,options:l.widget.options,typeInfo:l.types[i.type]||{}},null==(a=c.call(l,{type:t},r))&&(a=u)):a=null==u?c:u,null==a&&(a=s),a},setSpanIcon:function(t,i,n){var o=e(t);"string"==typeof n?o.attr("class",i+" "+n):(n.text?o.text(""+n.text):n.html&&(t.innerHTML=n.html),o.attr("class",i+" "+(n.addClass||"")))},eventToString:function(e){var t=e.which,i=e.type,n=[];return e.altKey&&n.push("alt"),e.ctrlKey&&n.push("ctrl"),e.metaKey&&n.push("meta"),e.shiftKey&&n.push("shift"),"click"===i||"dblclick"===i?n.push(d[e.button]+i):"wheel"===i?n.push(i):l[t]||n.push(c[t]||String.fromCharCode(t).toLowerCase()),n.join("+")},info:function(t){e.ui.fancytree.debugLevel>=3&&C("info",arguments)},keyEventToString:function(e){return this.warn("keyEventToString() is deprecated: use eventToString()"),this.eventToString(e)},overrideMethod:function(t,i,n,o){var s,r=t[i]||e.noop;t[i]=function(){var e=o||this;try{return s=e._super,e._super=r,n.apply(e,arguments)}finally{e._super=s}}},parseHtml:function(t){var i,n,o,s,r,a,l,c,u=[];return t.find(">li").each(function(){var d,f,g=e(this),y=g.find(">span",this).first(),b=y.length?null:g.find(">a").first(),C={tooltip:null,data:{}};for(y.length?C.title=y.html():b&&b.length?(C.title=b.html(),C.data.href=b.attr("href"),C.data.target=b.attr("target"),C.tooltip=b.attr("title")):(C.title=g.html(),(r=C.title.search(/<ul/i))>=0&&(C.title=C.title.substring(0,r))),C.title=e.trim(C.title),s=0,a=h.length;s<a;s++)C[h[s]]=void 0;for(i=this.className.split(" "),o=[],s=0,a=i.length;s<a;s++)n=i[s],p[n]?C[n]=!0:o.push(n);if(C.extraClasses=o.join(" "),(l=g.attr("title"))&&(C.tooltip=l),(l=g.attr("id"))&&(C.key=l),g.attr("hideCheckbox")&&(C.checkbox=!1),(d=S(g))&&!e.isEmptyObject(d)){for(f in v)d.hasOwnProperty(f)&&(d[v[f]]=d[f],delete d[f]);for(s=0,a=m.length;s<a;s++)l=m[s],null!=(c=d[l])&&(delete d[l],C[l]=c);e.extend(C.data,d)}(t=g.find(">ul").first()).length?C.children=e.ui.fancytree.parseHtml(t):C.children=C.lazy?void 0:null,u.push(C)}),u},registerExtension:function(t){b(null!=t.name,"extensions must have a `name` property."),b(null!=t.version,"extensions must have a `version` property."),e.ui.fancytree._extensions[t.name]=t},unescapeHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,0===t.childNodes.length?"":t.childNodes[0].nodeValue},warn:function(t){e.ui.fancytree.debugLevel>=2&&C("warn",arguments)}}),e.ui.fancytree}function b(t,i){t||(i=i?": "+i:"",e.error("Fancytree assertion failed"+i))}function C(e,t){var i,n,o=window.console?window.console[e]:null;if(o)try{o.apply(window.console,t)}catch(e){for(n="",i=0;i<t.length;i++)n+=t[i];o(n)}}function _(){var t,i,n,o,s,r=arguments[0]||{},a=1,l=arguments.length;if("object"==typeof r||e.isFunction(r)||(r={}),a===l)throw Error("need at least two args");for(;a<l;a++)if(null!=(t=arguments[a]))for(i in t)if(t.hasOwnProperty(i)){if(n=r[i],r===(o=t[i]))continue;o&&e.isPlainObject(o)?(s=n&&e.isPlainObject(n)?n:{},r[i]=_(s,o)):void 0!==o&&(r[i]=o)}return r}function D(e,t,i,n,o){var s,r,a,l,c;return s=t[e],r=n[e],a=t.ext[o],l=function(){return s.apply(t,arguments)},c=function(e){return s.apply(t,e)},function(){var e=t._local,i=t._super,n=t._superApply;try{return t._local=a,t._super=l,t._superApply=c,r.apply(t,arguments)}finally{t._local=e,t._super=i,t._superApply=n}}}function w(t,i,n,o){for(var s in n)"function"==typeof n[s]?"function"==typeof t[s]?t[s]=D(s,t,0,n,o):"_"===s.charAt(0)?t.ext[o][s]=D(s,t,0,n,o):e.error("Could not override tree."+s+". Use prefix '_' to create tree."+o+"._"+s):"options"!==s&&(t.ext[o][s]=n[s])}function x(t,i){return void 0===t?e.Deferred(function(){this.resolve()}).promise():e.Deferred(function(){this.resolveWith(t,i)}).promise()}function k(t,i){return void 0===t?e.Deferred(function(){this.reject()}).promise():e.Deferred(function(){this.rejectWith(t,i)}).promise()}function E(e,t){return function(){e.resolveWith(t)}}function S(t){var i=e.extend({},t.data()),n=i.json;return delete i.fancytree,delete i.uiFancytree,n&&(delete i.json,i=e.extend(i,n)),i}function A(e){return(""+e).replace(r,function(e){return a[e]})}function T(e){return e=e.toLowerCase(),function(t){return t.title.toLowerCase().indexOf(e)>=0}}function F(t,i){var o,s,r,a;for(this.parent=t,this.tree=t.tree,this.ul=null,this.li=null,this.statusNodeType=null,this._isLoading=!1,this._error=null,this.data={},o=0,s=m.length;o<s;o++)this[r=m[o]]=i[r];for(r in null==this.unselectableIgnore&&null==this.unselectableStatus||(this.unselectable=!0),i.hideCheckbox&&e.error("'hideCheckbox' node option was removed in v2.23.0: use 'checkbox: false'"),i.data&&e.extend(this.data,i.data),i)g[r]||e.isFunction(i[r])||y[r]||(this.data[r]=i[r]);null==this.key?this.tree.options.defaultKey?(this.key=this.tree.options.defaultKey(this),b(this.key,"defaultKey() must return a unique key")):this.key="_"+n._nextNodeKey++:this.key=""+this.key,i.active&&(b(null===this.tree.activeNode,"only one active node allowed"),this.tree.activeNode=this),i.selected&&(this.tree.lastSelectedNode=this),(a=i.children)?a.length?this._setChildren(a):this.children=this.lazy?[]:null:this.children=null,this.tree._callHook("treeRegisterNode",this.tree,!0,this)}function I(t){this.widget=t,this.$div=t.element,this.options=t.options,this.options&&(void 0!==this.options.lazyload&&e.error("The 'lazyload' event is deprecated since 2014-02-25. Use 'lazyLoad' (with uppercase L) instead."),void 0!==this.options.loaderror&&e.error("The 'loaderror' event was renamed since 2014-07-03. Use 'loadError' (with uppercase E) instead."),void 0!==this.options.fx&&e.error("The 'fx' option was replaced by 'toggleEffect' since 2014-11-30."),void 0!==this.options.removeNode&&e.error("The 'removeNode' event was replaced by 'modifyChild' since 2.20 (2016-09-10).")),this.ext={},this.types={},this.columns={},this.data=S(this.$div),this._id=""+(this.options.treeId||e.ui.fancytree._nextId++),this._ns=".fancytree-"+this._id,this.activeNode=null,this.focusNode=null,this._hasFocus=null,this._tempCache={},this._lastMousedownNode=null,this._enableUpdate=!0,this.lastSelectedNode=null,this.systemFocusElement=null,this.lastQuicksearchTerm="",this.lastQuicksearchTime=0,this.viewport=null,this.statusClassPropName="span",this.ariaPropName="li",this.nodeContainerAttrName="li",this.$div.find(">ul.fancytree-container").remove();var i,o={tree:this};this.rootNode=new F(o,{title:"root",key:"root_"+this._id,children:null,expanded:!0}),this.rootNode.parent=null,i=e("<ul>",{id:"ft-id-"+this._id,class:"ui-fancytree fancytree-container fancytree-plain"}).appendTo(this.$div),this.$container=i,this.rootNode.ul=i[0],null==this.options.debugLevel&&(this.options.debugLevel=n.debugLevel)}e.ui.fancytree.warn("Fancytree: ignored duplicate include")},o=[i(1),i(83)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var i="undefined"!=typeof window&&"undefined"!=typeof document,n=["Edge","Trident","Firefox"],o=0,s=0;s<n.length;s+=1)if(i&&navigator.userAgent.indexOf(n[s])>=0){o=1;break}var r=i&&window.Promise?function(e){var t=!1;return function(){t||(t=!0,window.Promise.resolve().then(function(){t=!1,e()}))}}:function(e){var t=!1;return function(){t||(t=!0,setTimeout(function(){t=!1,e()},o))}};function a(e){return e&&"[object Function]"==={}.toString.call(e)}function l(e,t){if(1!==e.nodeType)return[];var i=e.ownerDocument.defaultView.getComputedStyle(e,null);return t?i[t]:i}function c(e){return"HTML"===e.nodeName?e:e.parentNode||e.host}function u(e){if(!e)return document.body;switch(e.nodeName){case"HTML":case"BODY":return e.ownerDocument.body;case"#document":return e.body}var t=l(e),i=t.overflow,n=t.overflowX,o=t.overflowY;return/(auto|scroll|overlay)/.test(i+o+n)?e:u(c(e))}var d=i&&!(!window.MSInputMethodContext||!document.documentMode),h=i&&/MSIE 10/.test(navigator.userAgent);function p(e){return 11===e?d:10===e?h:d||h}function f(e){if(!e)return document.documentElement;for(var t=p(10)?document.body:null,i=e.offsetParent||null;i===t&&e.nextElementSibling;)i=(e=e.nextElementSibling).offsetParent;var n=i&&i.nodeName;return n&&"BODY"!==n&&"HTML"!==n?-1!==["TH","TD","TABLE"].indexOf(i.nodeName)&&"static"===l(i,"position")?f(i):i:e?e.ownerDocument.documentElement:document.documentElement}function m(e){return null!==e.parentNode?m(e.parentNode):e}function g(e,t){if(!(e&&e.nodeType&&t&&t.nodeType))return document.documentElement;var i=e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING,n=i?e:t,o=i?t:e,s=document.createRange();s.setStart(n,0),s.setEnd(o,0);var r,a,l=s.commonAncestorContainer;if(e!==l&&t!==l||n.contains(o))return"BODY"===(a=(r=l).nodeName)||"HTML"!==a&&f(r.firstElementChild)!==r?f(l):l;var c=m(e);return c.host?g(c.host,t):g(e,m(t).host)}function v(e){var t="top"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"top")?"scrollTop":"scrollLeft",i=e.nodeName;if("BODY"===i||"HTML"===i){var n=e.ownerDocument.documentElement;return(e.ownerDocument.scrollingElement||n)[t]}return e[t]}function y(e,t){var i="x"===t?"Left":"Top",n="Left"===i?"Right":"Bottom";return parseFloat(e["border"+i+"Width"],10)+parseFloat(e["border"+n+"Width"],10)}function b(e,t,i,n){return Math.max(t["offset"+e],t["scroll"+e],i["client"+e],i["offset"+e],i["scroll"+e],p(10)?parseInt(i["offset"+e])+parseInt(n["margin"+("Height"===e?"Top":"Left")])+parseInt(n["margin"+("Height"===e?"Bottom":"Right")]):0)}function C(e){var t=e.body,i=e.documentElement,n=p(10)&&getComputedStyle(i);return{height:b("Height",t,i,n),width:b("Width",t,i,n)}}var _=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},D=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),w=function(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e},x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e};function k(e){return x({},e,{right:e.left+e.width,bottom:e.top+e.height})}function E(e){var t={};try{if(p(10)){t=e.getBoundingClientRect();var i=v(e,"top"),n=v(e,"left");t.top+=i,t.left+=n,t.bottom+=i,t.right+=n}else t=e.getBoundingClientRect()}catch(e){}var o={left:t.left,top:t.top,width:t.right-t.left,height:t.bottom-t.top},s="HTML"===e.nodeName?C(e.ownerDocument):{},r=s.width||e.clientWidth||o.right-o.left,a=s.height||e.clientHeight||o.bottom-o.top,c=e.offsetWidth-r,u=e.offsetHeight-a;if(c||u){var d=l(e);c-=y(d,"x"),u-=y(d,"y"),o.width-=c,o.height-=u}return k(o)}function S(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=p(10),o="HTML"===t.nodeName,s=E(e),r=E(t),a=u(e),c=l(t),d=parseFloat(c.borderTopWidth,10),h=parseFloat(c.borderLeftWidth,10);i&&o&&(r.top=Math.max(r.top,0),r.left=Math.max(r.left,0));var f=k({top:s.top-r.top-d,left:s.left-r.left-h,width:s.width,height:s.height});if(f.marginTop=0,f.marginLeft=0,!n&&o){var m=parseFloat(c.marginTop,10),g=parseFloat(c.marginLeft,10);f.top-=d-m,f.bottom-=d-m,f.left-=h-g,f.right-=h-g,f.marginTop=m,f.marginLeft=g}return(n&&!i?t.contains(a):t===a&&"BODY"!==a.nodeName)&&(f=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=v(t,"top"),o=v(t,"left"),s=i?-1:1;return e.top+=n*s,e.bottom+=n*s,e.left+=o*s,e.right+=o*s,e}(f,t)),f}function A(e){if(!e||!e.parentElement||p())return document.documentElement;for(var t=e.parentElement;t&&"none"===l(t,"transform");)t=t.parentElement;return t||document.documentElement}function T(e,t,i,n){var o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s={top:0,left:0},r=o?A(e):g(e,t);if("viewport"===n)s=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=e.ownerDocument.documentElement,n=S(e,i),o=Math.max(i.clientWidth,window.innerWidth||0),s=Math.max(i.clientHeight,window.innerHeight||0),r=t?0:v(i),a=t?0:v(i,"left");return k({top:r-n.top+n.marginTop,left:a-n.left+n.marginLeft,width:o,height:s})}(r,o);else{var a=void 0;"scrollParent"===n?"BODY"===(a=u(c(t))).nodeName&&(a=e.ownerDocument.documentElement):a="window"===n?e.ownerDocument.documentElement:n;var d=S(a,r,o);if("HTML"!==a.nodeName||function e(t){var i=t.nodeName;if("BODY"===i||"HTML"===i)return!1;if("fixed"===l(t,"position"))return!0;var n=c(t);return!!n&&e(n)}(r))s=d;else{var h=C(e.ownerDocument),p=h.height,f=h.width;s.top+=d.top-d.marginTop,s.bottom=p+d.top,s.left+=d.left-d.marginLeft,s.right=f+d.left}}var m="number"==typeof(i=i||0);return s.left+=m?i:i.left||0,s.top+=m?i:i.top||0,s.right-=m?i:i.right||0,s.bottom-=m?i:i.bottom||0,s}function F(e,t,i,n,o){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;if(-1===e.indexOf("auto"))return e;var r=T(i,n,s,o),a={top:{width:r.width,height:t.top-r.top},right:{width:r.right-t.right,height:r.height},bottom:{width:r.width,height:r.bottom-t.bottom},left:{width:t.left-r.left,height:r.height}},l=Object.keys(a).map(function(e){return x({key:e},a[e],{area:(t=a[e],t.width*t.height)});var t}).sort(function(e,t){return t.area-e.area}),c=l.filter(function(e){var t=e.width,n=e.height;return t>=i.clientWidth&&n>=i.clientHeight}),u=c.length>0?c[0].key:l[0].key,d=e.split("-")[1];return u+(d?"-"+d:"")}function I(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return S(i,n?A(t):g(t,i),n)}function P(e){var t=e.ownerDocument.defaultView.getComputedStyle(e),i=parseFloat(t.marginTop||0)+parseFloat(t.marginBottom||0),n=parseFloat(t.marginLeft||0)+parseFloat(t.marginRight||0);return{width:e.offsetWidth+n,height:e.offsetHeight+i}}function M(e){var t={left:"right",right:"left",bottom:"top",top:"bottom"};return e.replace(/left|right|bottom|top/g,function(e){return t[e]})}function $(e,t,i){i=i.split("-")[0];var n=P(e),o={width:n.width,height:n.height},s=-1!==["right","left"].indexOf(i),r=s?"top":"left",a=s?"left":"top",l=s?"height":"width",c=s?"width":"height";return o[r]=t[r]+t[l]/2-n[l]/2,o[a]=i===a?t[a]-n[c]:t[M(a)],o}function N(e,t){return Array.prototype.find?e.find(t):e.filter(t)[0]}function O(e,t,i){return(void 0===i?e:e.slice(0,function(e,t,i){if(Array.prototype.findIndex)return e.findIndex(function(e){return e[t]===i});var n=N(e,function(e){return e[t]===i});return e.indexOf(n)}(e,"name",i))).forEach(function(e){e.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var i=e.function||e.fn;e.enabled&&a(i)&&(t.offsets.popper=k(t.offsets.popper),t.offsets.reference=k(t.offsets.reference),t=i(t,e))}),t}function B(e,t){return e.some(function(e){var i=e.name;return e.enabled&&i===t})}function L(e){for(var t=[!1,"ms","Webkit","Moz","O"],i=e.charAt(0).toUpperCase()+e.slice(1),n=0;n<t.length;n++){var o=t[n],s=o?""+o+i:e;if(void 0!==document.body.style[s])return s}return null}function z(e){var t=e.ownerDocument;return t?t.defaultView:window}function H(e,t,i,n){i.updateBound=n,z(e).addEventListener("resize",i.updateBound,{passive:!0});var o=u(e);return function e(t,i,n,o){var s="BODY"===t.nodeName,r=s?t.ownerDocument.defaultView:t;r.addEventListener(i,n,{passive:!0}),s||e(u(r.parentNode),i,n,o),o.push(r)}(o,"scroll",i.updateBound,i.scrollParents),i.scrollElement=o,i.eventsEnabled=!0,i}function R(){var e,t;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(e=this.reference,t=this.state,z(e).removeEventListener("resize",t.updateBound),t.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.updateBound)}),t.updateBound=null,t.scrollParents=[],t.scrollElement=null,t.eventsEnabled=!1,t))}function j(e){return""!==e&&!isNaN(parseFloat(e))&&isFinite(e)}function W(e,t){Object.keys(t).forEach(function(i){var n="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&j(t[i])&&(n="px"),e.style[i]=t[i]+n})}var U=i&&/Firefox/i.test(navigator.userAgent);function q(e,t,i){var n=N(e,function(e){return e.name===t}),o=!!n&&e.some(function(e){return e.name===i&&e.enabled&&e.order<n.order});if(!o){var s="`"+t+"`",r="`"+i+"`";console.warn(r+" modifier is required by "+s+" modifier in order to work, be sure to include it before "+s+"!")}return o}var V=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],K=V.slice(3);function Y(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=K.indexOf(e),n=K.slice(i+1).concat(K.slice(0,i));return t?n.reverse():n}var Q={FLIP:"flip",CLOCKWISE:"clockwise",COUNTERCLOCKWISE:"counterclockwise"};function G(e,t,i,n){var o=[0,0],s=-1!==["right","left"].indexOf(n),r=e.split(/(\+|\-)/).map(function(e){return e.trim()}),a=r.indexOf(N(r,function(e){return-1!==e.search(/,|\s/)}));r[a]&&-1===r[a].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var l=/\s*,\s*|\s+/,c=-1!==a?[r.slice(0,a).concat([r[a].split(l)[0]]),[r[a].split(l)[1]].concat(r.slice(a+1))]:[r];return(c=c.map(function(e,n){var o=(1===n?!s:s)?"height":"width",r=!1;return e.reduce(function(e,t){return""===e[e.length-1]&&-1!==["+","-"].indexOf(t)?(e[e.length-1]=t,r=!0,e):r?(e[e.length-1]+=t,r=!1,e):e.concat(t)},[]).map(function(e){return function(e,t,i,n){var o=e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),s=+o[1],r=o[2];if(!s)return e;if(0===r.indexOf("%")){var a=void 0;switch(r){case"%p":a=i;break;case"%":case"%r":default:a=n}return k(a)[t]/100*s}if("vh"===r||"vw"===r)return("vh"===r?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*s;return s}(e,o,t,i)})})).forEach(function(e,t){e.forEach(function(i,n){j(i)&&(o[t]+=i*("-"===e[n-1]?-1:1))})}),o}var X={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(e){var t=e.placement,i=t.split("-")[0],n=t.split("-")[1];if(n){var o=e.offsets,s=o.reference,r=o.popper,a=-1!==["bottom","top"].indexOf(i),l=a?"left":"top",c=a?"width":"height",u={start:w({},l,s[l]),end:w({},l,s[l]+s[c]-r[c])};e.offsets.popper=x({},r,u[n])}return e}},offset:{order:200,enabled:!0,fn:function(e,t){var i=t.offset,n=e.placement,o=e.offsets,s=o.popper,r=o.reference,a=n.split("-")[0],l=void 0;return l=j(+i)?[+i,0]:G(i,s,r,a),"left"===a?(s.top+=l[0],s.left-=l[1]):"right"===a?(s.top+=l[0],s.left+=l[1]):"top"===a?(s.left+=l[0],s.top-=l[1]):"bottom"===a&&(s.left+=l[0],s.top+=l[1]),e.popper=s,e},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(e,t){var i=t.boundariesElement||f(e.instance.popper);e.instance.reference===i&&(i=f(i));var n=L("transform"),o=e.instance.popper.style,s=o.top,r=o.left,a=o[n];o.top="",o.left="",o[n]="";var l=T(e.instance.popper,e.instance.reference,t.padding,i,e.positionFixed);o.top=s,o.left=r,o[n]=a,t.boundaries=l;var c=t.priority,u=e.offsets.popper,d={primary:function(e){var i=u[e];return u[e]<l[e]&&!t.escapeWithReference&&(i=Math.max(u[e],l[e])),w({},e,i)},secondary:function(e){var i="right"===e?"left":"top",n=u[i];return u[e]>l[e]&&!t.escapeWithReference&&(n=Math.min(u[i],l[e]-("right"===e?u.width:u.height))),w({},i,n)}};return c.forEach(function(e){var t=-1!==["left","top"].indexOf(e)?"primary":"secondary";u=x({},u,d[t](e))}),e.offsets.popper=u,e},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(e){var t=e.offsets,i=t.popper,n=t.reference,o=e.placement.split("-")[0],s=Math.floor,r=-1!==["top","bottom"].indexOf(o),a=r?"right":"bottom",l=r?"left":"top",c=r?"width":"height";return i[a]<s(n[l])&&(e.offsets.popper[l]=s(n[l])-i[c]),i[l]>s(n[a])&&(e.offsets.popper[l]=s(n[a])),e}},arrow:{order:500,enabled:!0,fn:function(e,t){var i;if(!q(e.instance.modifiers,"arrow","keepTogether"))return e;var n=t.element;if("string"==typeof n){if(!(n=e.instance.popper.querySelector(n)))return e}else if(!e.instance.popper.contains(n))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),e;var o=e.placement.split("-")[0],s=e.offsets,r=s.popper,a=s.reference,c=-1!==["left","right"].indexOf(o),u=c?"height":"width",d=c?"Top":"Left",h=d.toLowerCase(),p=c?"left":"top",f=c?"bottom":"right",m=P(n)[u];a[f]-m<r[h]&&(e.offsets.popper[h]-=r[h]-(a[f]-m)),a[h]+m>r[f]&&(e.offsets.popper[h]+=a[h]+m-r[f]),e.offsets.popper=k(e.offsets.popper);var g=a[h]+a[u]/2-m/2,v=l(e.instance.popper),y=parseFloat(v["margin"+d],10),b=parseFloat(v["border"+d+"Width"],10),C=g-e.offsets.popper[h]-y-b;return C=Math.max(Math.min(r[u]-m,C),0),e.arrowElement=n,e.offsets.arrow=(w(i={},h,Math.round(C)),w(i,p,""),i),e},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(e,t){if(B(e.instance.modifiers,"inner"))return e;if(e.flipped&&e.placement===e.originalPlacement)return e;var i=T(e.instance.popper,e.instance.reference,t.padding,t.boundariesElement,e.positionFixed),n=e.placement.split("-")[0],o=M(n),s=e.placement.split("-")[1]||"",r=[];switch(t.behavior){case Q.FLIP:r=[n,o];break;case Q.CLOCKWISE:r=Y(n);break;case Q.COUNTERCLOCKWISE:r=Y(n,!0);break;default:r=t.behavior}return r.forEach(function(a,l){if(n!==a||r.length===l+1)return e;n=e.placement.split("-")[0],o=M(n);var c=e.offsets.popper,u=e.offsets.reference,d=Math.floor,h="left"===n&&d(c.right)>d(u.left)||"right"===n&&d(c.left)<d(u.right)||"top"===n&&d(c.bottom)>d(u.top)||"bottom"===n&&d(c.top)<d(u.bottom),p=d(c.left)<d(i.left),f=d(c.right)>d(i.right),m=d(c.top)<d(i.top),g=d(c.bottom)>d(i.bottom),v="left"===n&&p||"right"===n&&f||"top"===n&&m||"bottom"===n&&g,y=-1!==["top","bottom"].indexOf(n),b=!!t.flipVariations&&(y&&"start"===s&&p||y&&"end"===s&&f||!y&&"start"===s&&m||!y&&"end"===s&&g),C=!!t.flipVariationsByContent&&(y&&"start"===s&&f||y&&"end"===s&&p||!y&&"start"===s&&g||!y&&"end"===s&&m),_=b||C;(h||v||_)&&(e.flipped=!0,(h||v)&&(n=r[l+1]),_&&(s=function(e){return"end"===e?"start":"start"===e?"end":e}(s)),e.placement=n+(s?"-"+s:""),e.offsets.popper=x({},e.offsets.popper,$(e.instance.popper,e.offsets.reference,e.placement)),e=O(e.instance.modifiers,e,"flip"))}),e},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(e){var t=e.placement,i=t.split("-")[0],n=e.offsets,o=n.popper,s=n.reference,r=-1!==["left","right"].indexOf(i),a=-1===["top","left"].indexOf(i);return o[r?"left":"top"]=s[i]-(a?o[r?"width":"height"]:0),e.placement=M(t),e.offsets.popper=k(o),e}},hide:{order:800,enabled:!0,fn:function(e){if(!q(e.instance.modifiers,"hide","preventOverflow"))return e;var t=e.offsets.reference,i=N(e.instance.modifiers,function(e){return"preventOverflow"===e.name}).boundaries;if(t.bottom<i.top||t.left>i.right||t.top>i.bottom||t.right<i.left){if(!0===e.hide)return e;e.hide=!0,e.attributes["x-out-of-boundaries"]=""}else{if(!1===e.hide)return e;e.hide=!1,e.attributes["x-out-of-boundaries"]=!1}return e}},computeStyle:{order:850,enabled:!0,fn:function(e,t){var i=t.x,n=t.y,o=e.offsets.popper,s=N(e.instance.modifiers,function(e){return"applyStyle"===e.name}).gpuAcceleration;void 0!==s&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var r=void 0!==s?s:t.gpuAcceleration,a=f(e.instance.popper),l=E(a),c={position:o.position},u=function(e,t){var i=e.offsets,n=i.popper,o=i.reference,s=Math.round,r=Math.floor,a=function(e){return e},l=s(o.width),c=s(n.width),u=-1!==["left","right"].indexOf(e.placement),d=-1!==e.placement.indexOf("-"),h=t?u||d||l%2==c%2?s:r:a,p=t?s:a;return{left:h(l%2==1&&c%2==1&&!d&&t?n.left-1:n.left),top:p(n.top),bottom:p(n.bottom),right:h(n.right)}}(e,window.devicePixelRatio<2||!U),d="bottom"===i?"top":"bottom",h="right"===n?"left":"right",p=L("transform"),m=void 0,g=void 0;if(g="bottom"===d?"HTML"===a.nodeName?-a.clientHeight+u.bottom:-l.height+u.bottom:u.top,m="right"===h?"HTML"===a.nodeName?-a.clientWidth+u.right:-l.width+u.right:u.left,r&&p)c[p]="translate3d("+m+"px, "+g+"px, 0)",c[d]=0,c[h]=0,c.willChange="transform";else{var v="bottom"===d?-1:1,y="right"===h?-1:1;c[d]=g*v,c[h]=m*y,c.willChange=d+", "+h}var b={"x-placement":e.placement};return e.attributes=x({},b,e.attributes),e.styles=x({},c,e.styles),e.arrowStyles=x({},e.offsets.arrow,e.arrowStyles),e},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(e){var t,i;return W(e.instance.popper,e.styles),t=e.instance.popper,i=e.attributes,Object.keys(i).forEach(function(e){!1!==i[e]?t.setAttribute(e,i[e]):t.removeAttribute(e)}),e.arrowElement&&Object.keys(e.arrowStyles).length&&W(e.arrowElement,e.arrowStyles),e},onLoad:function(e,t,i,n,o){var s=I(o,t,e,i.positionFixed),r=F(i.placement,s,t,e,i.modifiers.flip.boundariesElement,i.modifiers.flip.padding);return t.setAttribute("x-placement",r),W(t,{position:i.positionFixed?"fixed":"absolute"}),i},gpuAcceleration:void 0}}},J=function(){function e(t,i){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_(this,e),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=r(this.update.bind(this)),this.options=x({},e.Defaults,o),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=i&&i.jquery?i[0]:i,this.options.modifiers={},Object.keys(x({},e.Defaults.modifiers,o.modifiers)).forEach(function(t){n.options.modifiers[t]=x({},e.Defaults.modifiers[t]||{},o.modifiers?o.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(e){return x({name:e},n.options.modifiers[e])}).sort(function(e,t){return e.order-t.order}),this.modifiers.forEach(function(e){e.enabled&&a(e.onLoad)&&e.onLoad(n.reference,n.popper,n.options,e,n.state)}),this.update();var s=this.options.eventsEnabled;s&&this.enableEventListeners(),this.state.eventsEnabled=s}return D(e,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var e={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};e.offsets.reference=I(this.state,this.popper,this.reference,this.options.positionFixed),e.placement=F(this.options.placement,e.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),e.originalPlacement=e.placement,e.positionFixed=this.options.positionFixed,e.offsets.popper=$(this.popper,e.offsets.reference,e.placement),e.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",e=O(this.modifiers,e),this.state.isCreated?this.options.onUpdate(e):(this.state.isCreated=!0,this.options.onCreate(e))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,B(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[L("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=H(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return R.call(this)}}]),e}();J.Utils=("undefined"!=typeof window?window:e).PopperUtils,J.placements=V,J.Defaults=X,t.default=J}.call(t,i(2))},function(e,t,i){var n,o,s,r;r=function(e){return e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},,,,,,,,,,,function(e,t,i){var n,o;void 0===(o="function"==typeof(n=function(){var e,t,i={version:"0.2.0"},n=i.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,barSelector:'[role="bar"]',spinnerSelector:'[role="spinner"]',parent:"body",template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};function o(e,t,i){return e<t?t:e>i?i:e}function s(e){return 100*(-1+e)}i.configure=function(e){var t,i;for(t in e)void 0!==(i=e[t])&&e.hasOwnProperty(t)&&(n[t]=i);return this},i.status=null,i.set=function(e){var t=i.isStarted();e=o(e,n.minimum,1),i.status=1===e?null:e;var l=i.render(!t),c=l.querySelector(n.barSelector),u=n.speed,d=n.easing;return l.offsetWidth,r(function(t){""===n.positionUsing&&(n.positionUsing=i.getPositioningCSS()),a(c,function(e,t,i){var o;o="translate3d"===n.positionUsing?{transform:"translate3d("+s(e)+"%,0,0)"}:"translate"===n.positionUsing?{transform:"translate("+s(e)+"%,0)"}:{"margin-left":s(e)+"%"};return o.transition="all "+t+"ms "+i,o}(e,u,d)),1===e?(a(l,{transition:"none",opacity:1}),l.offsetWidth,setTimeout(function(){a(l,{transition:"all "+u+"ms linear",opacity:0}),setTimeout(function(){i.remove(),t()},u)},u)):setTimeout(t,u)}),this},i.isStarted=function(){return"number"==typeof i.status},i.start=function(){i.status||i.set(0);var e=function(){setTimeout(function(){i.status&&(i.trickle(),e())},n.trickleSpeed)};return n.trickle&&e(),this},i.done=function(e){return e||i.status?i.inc(.3+.5*Math.random()).set(1):this},i.inc=function(e){var t=i.status;return t?("number"!=typeof e&&(e=(1-t)*o(Math.random()*t,.1,.95)),t=o(t+e,0,.994),i.set(t)):i.start()},i.trickle=function(){return i.inc(Math.random()*n.trickleRate)},e=0,t=0,i.promise=function(n){return n&&"resolved"!==n.state()?(0===t&&i.start(),e++,t++,n.always(function(){0==--t?(e=0,i.done()):i.set((e-t)/e)}),this):this},i.render=function(e){if(i.isRendered())return document.getElementById("nprogress");c(document.documentElement,"nprogress-busy");var t=document.createElement("div");t.id="nprogress",t.innerHTML=n.template;var o,r=t.querySelector(n.barSelector),l=e?"-100":s(i.status||0),u=document.querySelector(n.parent);return a(r,{transition:"all 0 linear",transform:"translate3d("+l+"%,0,0)"}),n.showSpinner||(o=t.querySelector(n.spinnerSelector))&&h(o),u!=document.body&&c(u,"nprogress-custom-parent"),u.appendChild(t),t},i.remove=function(){u(document.documentElement,"nprogress-busy"),u(document.querySelector(n.parent),"nprogress-custom-parent");var e=document.getElementById("nprogress");e&&h(e)},i.isRendered=function(){return!!document.getElementById("nprogress")},i.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"};var r=function(){var e=[];function t(){var i=e.shift();i&&i(t)}return function(i){e.push(i),1==e.length&&t()}}(),a=function(){var e=["Webkit","O","Moz","ms"],t={};function i(i){return i=i.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()}),t[i]||(t[i]=function(t){var i=document.body.style;if(t in i)return t;for(var n,o=e.length,s=t.charAt(0).toUpperCase()+t.slice(1);o--;)if((n=e[o]+s)in i)return n;return t}(i))}function n(e,t,n){t=i(t),e.style[t]=n}return function(e,t){var i,o,s=arguments;if(2==s.length)for(i in t)void 0!==(o=t[i])&&t.hasOwnProperty(i)&&n(e,i,o);else n(e,s[1],s[2])}}();function l(e,t){return("string"==typeof e?e:d(e)).indexOf(" "+t+" ")>=0}function c(e,t){var i=d(e),n=i+t;l(i,t)||(e.className=n.substring(1))}function u(e,t){var i,n=d(e);l(e,t)&&(i=n.replace(" "+t+" "," "),e.className=i.substring(1,i.length-1))}function d(e){return(" "+(e.className||"")+" ").replace(/\s+/gi," ")}function h(e){e&&e.parentNode&&e.parentNode.removeChild(e)}return i})?n.call(t,i,t,e):n)||(e.exports=o)},function(e,t,i){"use strict";let n,o,s=()=>{n.defaultStack.context=document.body,window.addEventListener("resize",()=>{o&&clearTimeout(o),o=setTimeout(()=>{n.positionAll()},10)})},r=e=>{e.overlay.parentNode&&e.overlay.parentNode.removeChild(e.overlay)};const a=(e,t)=>("object"!=typeof e&&(e={text:e}),t&&(e.type=t),{target:document.body,data:e});var l={runModules(e){if("init"===e){for(let e in n.modules)if(n.modules.hasOwnProperty(e)&&"function"==typeof n.modules[e].init){const t=n.modules[e].init(this);this.initModule(t)}}else{const{_modules:t}=this.get();for(let i in t){if(!t.hasOwnProperty(i))continue;const n=Object.assign({_notice:this,_options:this.get()},this.get().modules[i]);t[i].set(n),"function"==typeof t[i][e]&&t[i][e]()}}},initModule(e){const{modules:t}=this.get();t.hasOwnProperty(e.constructor.key)||(t[e.constructor.key]={});const i=Object.assign({_notice:this,_options:this.get()},t[e.constructor.key]);e.initModule(i);const{_modules:n}=this.get();n[e.constructor.key]=e},update(e){const t=this.get().hide,i=this.get().icon;this.set(e),this.runModules("update"),this.get().hide?t||this.queueClose():this.cancelClose(),this.queuePosition();const{icon:n}=this.get();return n!==i&&(!0===n&&"fontawesome5"===this.get().icons||"string"==typeof n&&n.match(/(^| )fa[srlb]($| )/))&&(this.set({icon:!1}),this.set({icon:n})),this},open(){const{_state:e,hide:t}=this.get();if("opening"===e)return;if("open"===e)return void(t&&this.queueClose());this.set({_state:"opening",_animatingClass:"ui-pnotify-initial-hidden"}),this.runModules("beforeOpen");let{stack:i}=this.get();if(!this.refs.elem.parentNode||i&&i.context&&i.context!==this.refs.elem.parentNode)if(i&&i.context)i.context.appendChild(this.refs.elem);else{if(!document.body)throw new Error("No context to open this notice in.");document.body.appendChild(this.refs.elem)}return setTimeout(()=>{i&&(i.animation=!1,n.positionAll(),i.animation=!0),this.animateIn(()=>{this.get().hide&&this.queueClose(),this.set({_state:"open"}),this.runModules("afterOpen")})},0),this},remove(e){return this.close(e)},close(e){const{_state:t}=this.get();if("closing"===t||"closed"===t)return;this.set({_state:"closing",_timerHide:!!e}),this.runModules("beforeClose");const{_timer:i}=this.get();return i&&clearTimeout&&(clearTimeout(i),this.set({_timer:null})),this.animateOut(()=>{if(this.set({_state:"closed"}),this.runModules("afterClose"),this.queuePosition(),this.get().remove&&this.refs.elem.parentNode.removeChild(this.refs.elem),this.runModules("beforeDestroy"),this.get().destroy&&null!==n.notices){const e=n.notices.indexOf(this);-1!==e&&n.notices.splice(e,1)}this.runModules("afterDestroy")}),this},animateIn(e){this.set({_animating:"in"});const t=()=>{this.refs.elem.removeEventListener("transitionend",t);const{_animTimer:i,_animating:n,_moduleIsNoticeOpen:o}=this.get();if(i&&clearTimeout(i),"in"!==n)return;let s=o;if(!s){const e=this.refs.elem.getBoundingClientRect();for(let t in e)if(e[t]>0){s=!0;break}}s?(e&&e.call(),this.set({_animating:!1})):this.set({_animTimer:setTimeout(t,40)})};"fade"===this.get().animation?(this.refs.elem.addEventListener("transitionend",t),this.set({_animatingClass:"ui-pnotify-in"}),this.refs.elem.style.opacity,this.set({_animatingClass:"ui-pnotify-in ui-pnotify-fade-in"}),this.set({_animTimer:setTimeout(t,650)})):(this.set({_animatingClass:"ui-pnotify-in"}),t())},animateOut(e){this.set({_animating:"out"});const t=()=>{this.refs.elem.removeEventListener("transitionend",t);const{_animTimer:i,_animating:o,_moduleIsNoticeOpen:s}=this.get();if(i&&clearTimeout(i),"out"!==o)return;let a=s;if(!a){const e=this.refs.elem.getBoundingClientRect();for(let t in e)if(e[t]>0){a=!0;break}}if(this.refs.elem.style.opacity&&"0"!==this.refs.elem.style.opacity&&a)this.set({_animTimer:setTimeout(t,40)});else{this.set({_animatingClass:""});const{stack:t}=this.get();if(t&&t.overlay){let e=!1;for(let i=0;i<n.notices.length;i++){const o=n.notices[i];if(o!==this&&o.get().stack===t&&"closed"!==o.get()._state){e=!0;break}}e||r(t)}e&&e.call(),this.set({_animating:!1})}};"fade"===this.get().animation?(this.refs.elem.addEventListener("transitionend",t),this.set({_animatingClass:"ui-pnotify-in"}),this.set({_animTimer:setTimeout(t,650)})):(this.set({_animatingClass:""}),t())},position(){let{stack:e}=this.get(),t=this.refs.elem;if(!e)return;if(e.context||(e.context=document.body),"number"!=typeof e.nextpos1&&(e.nextpos1=e.firstpos1),"number"!=typeof e.nextpos2&&(e.nextpos2=e.firstpos2),"number"!=typeof e.addpos2&&(e.addpos2=0),!t.classList.contains("ui-pnotify-in")&&!t.classList.contains("ui-pnotify-initial-hidden"))return this;e.modal&&(e.overlay||(e=>{const t=document.createElement("div");t.classList.add("ui-pnotify-modal-overlay"),e.context!==document.body&&(t.style.height=e.context.scrollHeight+"px",t.style.width=e.context.scrollWidth+"px"),t.addEventListener("click",()=>{e.overlayClose&&n.closeStack(e)}),e.overlay=t})(e),(e=>{e.overlay.parentNode!==e.context&&(e.overlay=e.context.insertBefore(e.overlay,e.context.firstChild))})(e)),t.getBoundingClientRect(),e.animation&&this.set({_moveClass:"ui-pnotify-move"});let i,o=e.context===document.body?window.innerHeight:e.context.scrollHeight,s=e.context===document.body?window.innerWidth:e.context.scrollWidth;if(e.dir1){let n;switch(i={down:"top",up:"bottom",left:"right",right:"left"}[e.dir1],e.dir1){case"down":n=t.offsetTop;break;case"up":n=o-t.scrollHeight-t.offsetTop;break;case"left":n=s-t.scrollWidth-t.offsetLeft;break;case"right":n=t.offsetLeft}void 0===e.firstpos1&&(e.firstpos1=n,e.nextpos1=e.firstpos1)}if(e.dir1&&e.dir2){let i,n={down:"top",up:"bottom",left:"right",right:"left"}[e.dir2];switch(e.dir2){case"down":i=t.offsetTop;break;case"up":i=o-t.scrollHeight-t.offsetTop;break;case"left":i=s-t.scrollWidth-t.offsetLeft;break;case"right":i=t.offsetLeft}void 0===e.firstpos2&&(e.firstpos2=i,e.nextpos2=e.firstpos2);const r=e.nextpos1+t.offsetHeight+(void 0===e.spacing1?25:e.spacing1),a=e.nextpos1+t.offsetWidth+(void 0===e.spacing1?25:e.spacing1);switch((("down"===e.dir1||"up"===e.dir1)&&r>o||("left"===e.dir1||"right"===e.dir1)&&a>s)&&(e.nextpos1=e.firstpos1,e.nextpos2+=e.addpos2+(void 0===e.spacing2?25:e.spacing2),e.addpos2=0),"number"==typeof e.nextpos2&&(t.style[n]=e.nextpos2+"px",e.animation||t.style[n]),e.dir2){case"down":case"up":t.offsetHeight+(parseFloat(t.style.marginTop,10)||0)+(parseFloat(t.style.marginBottom,10)||0)>e.addpos2&&(e.addpos2=t.offsetHeight);break;case"left":case"right":t.offsetWidth+(parseFloat(t.style.marginLeft,10)||0)+(parseFloat(t.style.marginRight,10)||0)>e.addpos2&&(e.addpos2=t.offsetWidth)}}else if(e.dir1){let i,n;switch(e.dir1){case"down":case"up":n=["left","right"],i=e.context.scrollWidth/2-t.offsetWidth/2;break;case"left":case"right":n=["top","bottom"],i=o/2-t.offsetHeight/2}t.style[n[0]]=i+"px",t.style[n[1]]="auto",e.animation||t.style[n[0]]}if(e.dir1)switch("number"==typeof e.nextpos1&&(t.style[i]=e.nextpos1+"px",e.animation||t.style[i]),e.dir1){case"down":case"up":e.nextpos1+=t.offsetHeight+(void 0===e.spacing1?25:e.spacing1);break;case"left":case"right":e.nextpos1+=t.offsetWidth+(void 0===e.spacing1?25:e.spacing1)}else{let i=s/2-t.offsetWidth/2,n=o/2-t.offsetHeight/2;t.style.left=i+"px",t.style.top=n+"px",e.animation||t.style.left}return this},queuePosition(e){return o&&clearTimeout(o),e||(e=10),o=setTimeout(()=>{n.positionAll()},e),this},cancelRemove(){return this.cancelClose()},cancelClose(){const{_timer:e,_animTimer:t,_state:i,animation:n}=this.get();return e&&clearTimeout(e),t&&clearTimeout(t),"closing"===i&&this.set({_state:"open",_animating:!1,_animatingClass:"fade"===n?"ui-pnotify-in ui-pnotify-fade-in":"ui-pnotify-in"}),this},queueRemove(){return this.queueClose()},queueClose(){return this.cancelClose(),this.set({_timer:setTimeout(()=>this.close(!0),isNaN(this.get().delay)?0:this.get().delay)}),this},addModuleClass(...e){const{_moduleClasses:t}=this.get();for(let i=0;i<e.length;i++){let n=e[i];-1===t.indexOf(n)&&t.push(n)}this.set({_moduleClasses:t})},removeModuleClass(...e){const{_moduleClasses:t}=this.get();for(let i=0;i<e.length;i++){let n=e[i];const o=t.indexOf(n);-1!==o&&t.splice(o,1)}this.set({_moduleClasses:t})},hasModuleClass(...e){const{_moduleClasses:t}=this.get();for(let i=0;i<e.length;i++){let n=e[i];if(-1===t.indexOf(n))return!1}return!0}};function c(e,t,i){const n=Object.create(e);return n.module=t[i],n}function u(e,t,i){const n=Object.create(e);return n.module=t[i],n}function d(e,t,i){var n,o,s=i.module;function r(t){return{root:e.root,store:e.store}}if(s)var a=new s(r());function l(t){e.initModule(t.module)}return a&&a.on("init",l),{key:t,first:null,c(){n=P(),a&&a._fragment.c(),o=P(),this.first=n},m(e,t){S(e,n,t),a&&a._mount(e,t),S(e,o,t)},p(e,t){s!==(s=t.module)&&(a&&a.destroy(),s?((a=new s(r()))._fragment.c(),a._mount(o.parentNode,o),a.on("init",l)):a=null)},d(e){e&&(F(n),F(o)),a&&a.destroy(e)}}}function h(e,t){var i,n,o,s;return{c(){i=_("div"),(n=_("span")).className=o=!0===t.icon?t._icons[t.type]?t._icons[t.type]:"":t.icon,i.className=s="ui-pnotify-icon "+(t._styles.icon?t._styles.icon:"")},m(t,o){S(t,i,o),D(i,n),e.refs.iconContainer=i},p(e,t){(e.icon||e._icons||e.type)&&o!==(o=!0===t.icon?t._icons[t.type]?t._icons[t.type]:"":t.icon)&&(n.className=o),e._styles&&s!==(s="ui-pnotify-icon "+(t._styles.icon?t._styles.icon:""))&&(i.className=s)},d(t){t&&F(i),e.refs.iconContainer===i&&(e.refs.iconContainer=null)}}}function p(e,t){var i,n;function o(e){return e.titleTrusted?m:f}var s=o(t),r=s(e,t);return{c(){i=_("h4"),r.c(),i.className=n="ui-pnotify-title "+(t._styles.title?t._styles.title:"")},m(t,n){S(t,i,n),r.m(i,null),e.refs.titleContainer=i},p(t,a){s===(s=o(a))&&r?r.p(t,a):(r.d(1),(r=s(e,a)).c(),r.m(i,null)),t._styles&&n!==(n="ui-pnotify-title "+(a._styles.title?a._styles.title:""))&&(i.className=n)},d(t){t&&F(i),r.d(),e.refs.titleContainer===i&&(e.refs.titleContainer=null)}}}function f(e,t){var i;return{c(){i=x(t.title)},m(e,t){S(e,i,t)},p(e,t){e.title&&M(i,t.title)},d(e){e&&F(i)}}}function m(e,t){var i,n;return{c(){i=_("noscript"),n=_("noscript")},m(e,o){S(e,i,o),i.insertAdjacentHTML("afterend",t.title),S(e,n,o)},p(e,t){e.title&&($(i,n),i.insertAdjacentHTML("afterend",t.title))},d(e){e&&($(i,n),F(i),F(n))}}}function g(e,t){var i,n;function o(e){return e.textTrusted?y:v}var s=o(t),r=s(e,t);return{c(){i=_("div"),r.c(),i.className=n="ui-pnotify-text "+(t._styles.text?t._styles.text:""),k(i,"role","alert")},m(t,n){S(t,i,n),r.m(i,null),e.refs.textContainer=i},p(t,a){s===(s=o(a))&&r?r.p(t,a):(r.d(1),(r=s(e,a)).c(),r.m(i,null)),t._styles&&n!==(n="ui-pnotify-text "+(a._styles.text?a._styles.text:""))&&(i.className=n)},d(t){t&&F(i),r.d(),e.refs.textContainer===i&&(e.refs.textContainer=null)}}}function v(e,t){var i;return{c(){i=x(t.text)},m(e,t){S(e,i,t)},p(e,t){e.text&&M(i,t.text)},d(e){e&&F(i)}}}function y(e,t){var i,n;return{c(){i=_("noscript"),n=_("noscript")},m(e,o){S(e,i,o),i.insertAdjacentHTML("afterend",t.text),S(e,n,o)},p(e,t){e.text&&($(i,n),i.insertAdjacentHTML("afterend",t.text))},d(e){e&&($(i,n),F(i),F(n))}}}function b(e,t,i){var n,o,s=i.module;function r(t){return{root:e.root,store:e.store}}if(s)var a=new s(r());function l(t){e.initModule(t.module)}return a&&a.on("init",l),{key:t,first:null,c(){n=P(),a&&a._fragment.c(),o=P(),this.first=n},m(e,t){S(e,n,t),a&&a._mount(e,t),S(e,o,t)},p(e,t){s!==(s=t.module)&&(a&&a.destroy(),s?((a=new s(r()))._fragment.c(),a._mount(o.parentNode,o),a.on("init",l)):a=null)},d(e){e&&(F(n),F(o)),a&&a.destroy(e)}}}function C(e){(function(e,t){e._handlers=w(),e._slots=w(),e._bind=t._bind,e._staged={},e.options=t,e.root=t.root||e,e.store=t.store||e.root.store,t.root||(e._beforecreate=[],e._oncreate=[],e._aftercreate=[])})(this,e),this.refs={},this._state=N(function(){const e=Object.assign({_state:"initializing",_timer:null,_animTimer:null,_animating:!1,_animatingClass:"",_moveClass:"",_timerHide:!1,_moduleClasses:[],_moduleIsNoticeOpen:!1,_modules:{},_modulesPrependContainer:n.modulesPrependContainer,_modulesAppendContainer:n.modulesAppendContainer},n.defaults);return e.modules=Object.assign({},n.defaults.modules),e}(),e.data),this._recompute({styling:1,icons:1,width:1,minHeight:1},this._state),this._intro=!0,document.getElementById("svelte-1eldsjg-style")||function(){var e=_("style");e.id="svelte-1eldsjg-style",e.textContent='body > .ui-pnotify{position:fixed;z-index:100040}body > .ui-pnotify.ui-pnotify-modal{z-index:100042}.ui-pnotify{position:absolute;height:auto;z-index:1;display:none}.ui-pnotify.ui-pnotify-modal{z-index:3}.ui-pnotify.ui-pnotify-in{display:block}.ui-pnotify.ui-pnotify-initial-hidden{display:block;visibility:hidden}.ui-pnotify.ui-pnotify-move{transition:left .5s ease, top .5s ease, right .5s ease, bottom .5s ease}.ui-pnotify.ui-pnotify-fade-slow{transition:opacity .4s linear;opacity:0}.ui-pnotify.ui-pnotify-fade-slow.ui-pnotify.ui-pnotify-move{transition:opacity .4s linear, left .5s ease, top .5s ease, right .5s ease, bottom .5s ease}.ui-pnotify.ui-pnotify-fade-normal{transition:opacity .25s linear;opacity:0}.ui-pnotify.ui-pnotify-fade-normal.ui-pnotify.ui-pnotify-move{transition:opacity .25s linear, left .5s ease, top .5s ease, right .5s ease, bottom .5s ease}.ui-pnotify.ui-pnotify-fade-fast{transition:opacity .1s linear;opacity:0}.ui-pnotify.ui-pnotify-fade-fast.ui-pnotify.ui-pnotify-move{transition:opacity .1s linear, left .5s ease, top .5s ease, right .5s ease, bottom .5s ease}.ui-pnotify.ui-pnotify-fade-in{opacity:1}.ui-pnotify .ui-pnotify-shadow{-webkit-box-shadow:0px 6px 28px 0px rgba(0,0,0,0.1);-moz-box-shadow:0px 6px 28px 0px rgba(0,0,0,0.1);box-shadow:0px 6px 28px 0px rgba(0,0,0,0.1)}.ui-pnotify-container{background-position:0 0;padding:.8em;height:100%;margin:0}.ui-pnotify-container:after{content:" ";visibility:hidden;display:block;height:0;clear:both}.ui-pnotify-container.ui-pnotify-sharp{-webkit-border-radius:0;-moz-border-radius:0;border-radius:0}.ui-pnotify-title{display:block;white-space:pre-line;margin-bottom:.4em;margin-top:0}.ui-pnotify.ui-pnotify-with-icon .ui-pnotify-title,.ui-pnotify.ui-pnotify-with-icon .ui-pnotify-text{margin-left:24px}[dir=rtl] .ui-pnotify.ui-pnotify-with-icon .ui-pnotify-title,[dir=rtl] .ui-pnotify.ui-pnotify-with-icon .ui-pnotify-text{margin-right:24px;margin-left:0}.ui-pnotify-title-bs4{font-size:1.2rem}.ui-pnotify-text{display:block;white-space:pre-line}.ui-pnotify-icon,.ui-pnotify-icon span{display:block;float:left}[dir=rtl] .ui-pnotify-icon,[dir=rtl] .ui-pnotify-icon span{float:right}.ui-pnotify-icon-bs3 > span{position:relative;top:2px}.ui-pnotify-icon-bs4 > span{position:relative;top:4px}.ui-pnotify-modal-overlay{background-color:rgba(0, 0, 0, .4);top:0;left:0;position:absolute;height:100%;width:100%;z-index:2}body > .ui-pnotify-modal-overlay{position:fixed;z-index:100041}',D(document.head,e)}(),this._fragment=function(e,t){var i,n,o,s,r,a,l,f,m,v=[],y=w(),C=[],P=w(),M=t._modulesPrependContainer;const $=e=>e.module.key;for(var N=0;N<M.length;N+=1){let i=u(t,M,N),n=$(i);v[N]=y[n]=d(e,n,i)}var O=!1!==t.icon&&h(e,t),B=!1!==t.title&&p(e,t),L=!1!==t.text&&g(e,t),z=t._modulesAppendContainer;const H=e=>e.module.key;for(N=0;N<z.length;N+=1){let i=c(t,z,N),n=H(i);C[N]=P[n]=b(e,n,i)}function R(t){e.fire("mouseover",t)}function j(t){e.fire("mouseout",t)}function W(t){e.fire("mouseenter",t)}function U(t){e.fire("mouseleave",t)}function q(t){e.fire("mousemove",t)}function V(t){e.fire("mousedown",t)}function K(t){e.fire("mouseup",t)}function Y(t){e.fire("click",t)}function Q(t){e.fire("dblclick",t)}function G(t){e.fire("focus",t)}function X(t){e.fire("blur",t)}function J(t){e.fire("touchstart",t)}function Z(t){e.fire("touchmove",t)}function ee(t){e.fire("touchend",t)}function te(t){e.fire("touchcancel",t)}return{c(){for(i=_("div"),n=_("div"),N=0;N<v.length;N+=1)v[N].c();for(o=x("\n    "),O&&O.c(),s=x("\n    "),B&&B.c(),r=x("\n    "),L&&L.c(),a=x("\n    "),N=0;N<C.length;N+=1)C[N].c();n.className=l="\n        ui-pnotify-container\n        "+(t._styles.container?t._styles.container:"")+"\n        "+(t._styles[t.type]?t._styles[t.type]:"")+"\n        "+t.cornerClass+"\n        "+(t.shadow?"ui-pnotify-shadow":"")+"\n      ",n.style.cssText=f=t._widthStyle+" "+t._minHeightStyle,k(n,"role","alert"),E(i,"mouseover",R),E(i,"mouseout",j),E(i,"mouseenter",W),E(i,"mouseleave",U),E(i,"mousemove",q),E(i,"mousedown",V),E(i,"mouseup",K),E(i,"click",Y),E(i,"dblclick",Q),E(i,"focus",G),E(i,"blur",X),E(i,"touchstart",J),E(i,"touchmove",Z),E(i,"touchend",ee),E(i,"touchcancel",te),i.className=m="\n      ui-pnotify\n      "+(!1!==t.icon?"ui-pnotify-with-icon":"")+"\n      "+(t._styles.element?t._styles.element:"")+"\n      "+t.addClass+"\n      "+t._animatingClass+"\n      "+t._moveClass+"\n      "+("fade"===t.animation?"ui-pnotify-fade-"+t.animateSpeed:"")+"\n      "+(t.stack&&t.stack.modal?"ui-pnotify-modal":"")+"\n      "+t._moduleClasses.join(" ")+"\n    ",k(i,"aria-live","assertive"),k(i,"role","alertdialog"),k(i,"ui-pnotify",!0)},m(t,l){for(S(t,i,l),D(i,n),N=0;N<v.length;N+=1)v[N].m(n,null);for(D(n,o),O&&O.m(n,null),D(n,s),B&&B.m(n,null),D(n,r),L&&L.m(n,null),D(n,a),N=0;N<C.length;N+=1)C[N].m(n,null);e.refs.container=n,e.refs.elem=i},p(t,_){const D=_._modulesPrependContainer;v=A(v,e,t,$,1,_,D,y,n,T,d,"m",o,u),!1!==_.icon?O?O.p(t,_):((O=h(e,_)).c(),O.m(n,s)):O&&(O.d(1),O=null),!1!==_.title?B?B.p(t,_):((B=p(e,_)).c(),B.m(n,r)):B&&(B.d(1),B=null),!1!==_.text?L?L.p(t,_):((L=g(e,_)).c(),L.m(n,a)):L&&(L.d(1),L=null);const w=_._modulesAppendContainer;C=A(C,e,t,H,1,_,w,P,n,T,b,"m",null,c),(t._styles||t.type||t.cornerClass||t.shadow)&&l!==(l="\n        ui-pnotify-container\n        "+(_._styles.container?_._styles.container:"")+"\n        "+(_._styles[_.type]?_._styles[_.type]:"")+"\n        "+_.cornerClass+"\n        "+(_.shadow?"ui-pnotify-shadow":"")+"\n      ")&&(n.className=l),(t._widthStyle||t._minHeightStyle)&&f!==(f=_._widthStyle+" "+_._minHeightStyle)&&(n.style.cssText=f),(t.icon||t._styles||t.addClass||t._animatingClass||t._moveClass||t.animation||t.animateSpeed||t.stack||t._moduleClasses)&&m!==(m="\n      ui-pnotify\n      "+(!1!==_.icon?"ui-pnotify-with-icon":"")+"\n      "+(_._styles.element?_._styles.element:"")+"\n      "+_.addClass+"\n      "+_._animatingClass+"\n      "+_._moveClass+"\n      "+("fade"===_.animation?"ui-pnotify-fade-"+_.animateSpeed:"")+"\n      "+(_.stack&&_.stack.modal?"ui-pnotify-modal":"")+"\n      "+_._moduleClasses.join(" ")+"\n    ")&&(i.className=m)},d(t){for(t&&F(i),N=0;N<v.length;N+=1)v[N].d();for(O&&O.d(),B&&B.d(),L&&L.d(),N=0;N<C.length;N+=1)C[N].d();e.refs.container===n&&(e.refs.container=null),I(i,"mouseover",R),I(i,"mouseout",j),I(i,"mouseenter",W),I(i,"mouseleave",U),I(i,"mousemove",q),I(i,"mousedown",V),I(i,"mouseup",K),I(i,"click",Y),I(i,"dblclick",Q),I(i,"focus",G),I(i,"blur",X),I(i,"touchstart",J),I(i,"touchmove",Z),I(i,"touchend",ee),I(i,"touchcancel",te),e.refs.elem===i&&(e.refs.elem=null)}}}(this,this._state),this.root._oncreate.push(()=>{(function(){this.on("mouseenter",e=>{if(this.get().mouseReset&&"out"===this.get()._animating){if(!this.get()._timerHide)return;this.cancelClose()}this.get().hide&&this.get().mouseReset&&this.cancelClose()}),this.on("mouseleave",e=>{this.get().hide&&this.get().mouseReset&&"out"!==this.get()._animating&&this.queueClose(),n.positionAll()});let{stack:e}=this.get();e&&"top"===e.push?n.notices.splice(0,0,this):n.notices.push(this),this.runModules("init"),this.set({_state:"closed"}),this.get().autoDisplay&&this.open()}).call(this),this.fire("update",{changed:function(e,t){for(var i in t)e[i]=1;return e}({},this._state),current:this._state})}),e.target&&(this._fragment.c(),this._mount(e.target,e.anchor),O(this))}function _(e){return document.createElement(e)}function D(e,t){e.appendChild(t)}function w(){return Object.create(null)}function x(e){return document.createTextNode(e)}function k(e,t,i){null==i?e.removeAttribute(t):e.setAttribute(t,i)}function E(e,t,i,n){e.addEventListener(t,i,n)}function S(e,t,i){e.insertBefore(t,i)}function A(e,t,i,n,o,s,r,a,l,c,u,d,h,p){for(var f=e.length,m=r.length,g=f,v={};g--;)v[e[g].key]=g;var y=[],b={},C={};for(g=m;g--;){var _=p(s,r,g),D=n(_),w=a[D];w?o&&w.p(i,_):(w=u(t,D,_)).c(),y[g]=b[D]=w,D in v&&(C[D]=Math.abs(g-v[D]))}var x={},k={};function E(e){e[d](l,h),a[e.key]=e,h=e.first,m--}for(;f&&m;){var S=y[m-1],A=e[f-1],T=S.key,F=A.key;S===A?(h=S.first,f--,m--):b[F]?!a[T]||x[T]?E(S):k[F]?f--:C[T]>C[F]?(k[T]=!0,E(S)):(x[F]=!0,f--):(c(A,a),f--)}for(;f--;)b[(A=e[f]).key]||c(A,a);for(;m;)E(y[m-1]);return y}function T(e,t){e.d(1),t[e.key]=null}function F(e){e.parentNode.removeChild(e)}function I(e,t,i,n){e.removeEventListener(t,i,n)}function P(){return document.createComment("")}function M(e,t){e.data=""+t}function $(e,t){for(;e.nextSibling&&e.nextSibling!==t;)e.parentNode.removeChild(e.nextSibling)}function N(e,t){for(var i in t)e[i]=t[i];return e}function O(e){e._lock=!0,B(e._beforecreate),B(e._oncreate),B(e._aftercreate),e._lock=!1}function B(e){for(;e&&e.length;)e.shift()()}function L(){}N(C.prototype,{destroy:function(e){this.destroy=L,this.fire("destroy"),this.set=L,this._fragment.d(!1!==e),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(e,t){var i=e in this._handlers&&this._handlers[e].slice();if(i)for(var n=0;n<i.length;n+=1){var o=i[n];if(!o.__calling)try{o.__calling=!0,o.call(this,t)}finally{o.__calling=!1}}},on:function(e,t){var i=this._handlers[e]||(this._handlers[e]=[]);return i.push(t),{cancel:function(){var e=i.indexOf(t);~e&&i.splice(e,1)}}},set:function(e){this._set(N({},e)),this.root._lock||O(this.root)},_set:function(e){var t=this._state,i={},n=!1;for(var o in e=N(this._staged,e),this._staged={},e)this._differs(e[o],t[o])&&(i[o]=n=!0);n&&(this._state=N(N({},t),e),this._recompute(i,this._state),this._bind&&this._bind(i,this._state),this._fragment&&(this.fire("state",{changed:i,current:this._state,previous:t}),this._fragment.p(i,this._state),this.fire("update",{changed:i,current:this._state,previous:t})))},_stage:function(e){N(this._staged,e)},_mount:function(e,t){this._fragment[this._fragment.i?"i":"m"](e,t||null)},_differs:function(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}}),N(C.prototype,l),C.prototype._recompute=function(e,t){e.styling&&this._differs(t._styles,t._styles=function({styling:e}){return"object"==typeof e?e:n.styling[e]}(t))&&(e._styles=!0),e.icons&&this._differs(t._icons,t._icons=function({icons:e}){return"object"==typeof e?e:n.icons[e]}(t))&&(e._icons=!0),e.width&&this._differs(t._widthStyle,t._widthStyle=function({width:e}){return"string"==typeof e?"width: "+e+";":""}(t))&&(e._widthStyle=!0),e.minHeight&&this._differs(t._minHeightStyle,t._minHeightStyle=function({minHeight:e}){return"string"==typeof e?"min-height: "+e+";":""}(t))&&(e._minHeightStyle=!0)},(n=C).VERSION="4.0.0",n.defaultStack={dir1:"down",dir2:"left",firstpos1:25,firstpos2:25,spacing1:36,spacing2:36,push:"bottom",context:window&&document.body},n.defaults={title:!1,titleTrusted:!1,text:!1,textTrusted:!1,styling:"brighttheme",icons:"brighttheme",addClass:"",cornerClass:"",autoDisplay:!0,width:"360px",minHeight:"16px",type:"notice",icon:!0,animation:"fade",animateSpeed:"normal",shadow:!0,hide:!0,delay:8e3,mouseReset:!0,remove:!0,destroy:!0,stack:n.defaultStack,modules:{}},n.notices=[],n.modules={},n.modulesPrependContainer=[],n.modulesAppendContainer=[],n.alert=(e=>new n(a(e))),n.notice=(e=>new n(a(e,"notice"))),n.info=(e=>new n(a(e,"info"))),n.success=(e=>new n(a(e,"success"))),n.error=(e=>new n(a(e,"error"))),n.removeAll=(()=>{n.closeAll()}),n.closeAll=(()=>{for(let e=0;e<n.notices.length;e++)n.notices[e].close&&n.notices[e].close(!1)}),n.removeStack=(e=>{n.closeStack(e)}),n.closeStack=(e=>{if(!1!==e)for(let t=0;t<n.notices.length;t++)n.notices[t].close&&n.notices[t].get().stack===e&&n.notices[t].close(!1)}),n.positionAll=(()=>{if(o&&clearTimeout(o),o=null,n.notices.length>0){for(let e=0;e<n.notices.length;e++){let t=n.notices[e],{stack:i}=t.get();i&&(i.overlay&&r(i),i.nextpos1=i.firstpos1,i.nextpos2=i.firstpos2,i.addpos2=0)}for(let e=0;e<n.notices.length;e++)n.notices[e].position()}else delete n.defaultStack.nextpos1,delete n.defaultStack.nextpos2}),n.styling={brighttheme:{container:"brighttheme",notice:"brighttheme-notice",info:"brighttheme-info",success:"brighttheme-success",error:"brighttheme-error"},bootstrap3:{container:"alert",notice:"alert-warning",info:"alert-info",success:"alert-success",error:"alert-danger",icon:"ui-pnotify-icon-bs3"},bootstrap4:{container:"alert",notice:"alert-warning",info:"alert-info",success:"alert-success",error:"alert-danger",icon:"ui-pnotify-icon-bs4",title:"ui-pnotify-title-bs4"}},n.icons={brighttheme:{notice:"brighttheme-icon-notice",info:"brighttheme-icon-info",success:"brighttheme-icon-success",error:"brighttheme-icon-error"},bootstrap3:{notice:"glyphicon glyphicon-exclamation-sign",info:"glyphicon glyphicon-info-sign",success:"glyphicon glyphicon-ok-sign",error:"glyphicon glyphicon-warning-sign"},fontawesome4:{notice:"fa fa-exclamation-circle",info:"fa fa-info-circle",success:"fa fa-check-circle",error:"fa fa-exclamation-triangle"},fontawesome5:{notice:"fas fa-exclamation-circle",info:"fas fa-info-circle",success:"fas fa-check-circle",error:"fas fa-exclamation-triangle"}},window&&document.body?s():document.addEventListener("DOMContentLoaded",s),t.a=C},function(e,t,i){var n,o,s,r;r=function(e){return e.ui.escapeSelector=(t=/([!"#$%&'()*+,./:;<=>?@[\]^`{|}~])/g,function(e){return e.replace(t,"\\$1")});var t},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase())},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])}})},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.ui.plugin={add:function(t,i,n){var o,s=e.ui[t].prototype;for(o in n)s.plugins[o]=s.plugins[o]||[],s.plugins[o].push([i,n[o]])},call:function(e,t,i,n){var o,s=e.plugins[t];if(s&&(n||e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType))for(o=0;o<s.length;o++)e.options[s[o][0]]&&s[o][1].apply(e.element,i)}}},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.ui.safeBlur=function(t){t&&"body"!==t.nodeName.toLowerCase()&&e(t).trigger("blur")}},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.fn.scrollParent=function(t){var i=this.css("position"),n="absolute"===i,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return(!n||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&s.length?s:e(this[0].ownerDocument||document)}},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.ui.safeActiveElement=function(e){var t;try{t=e.activeElement}catch(i){t=e.body}return t||(t=e.body),t.nodeName||(t=e.body),t}},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.ui.focusable=function(t,i){var n,o,s,r,a,l=t.nodeName.toLowerCase();return"area"===l?(o=(n=t.parentNode).name,!(!t.href||!o||"map"!==n.nodeName.toLowerCase())&&((s=e("img[usemap='#"+o+"']")).length>0&&s.is(":visible"))):(/^(input|select|textarea|button|object)$/.test(l)?(r=!t.disabled)&&(a=e(t).closest("fieldset")[0])&&(r=!a.disabled):r="a"===l&&t.href||i,r&&e(t).is(":visible")&&function(e){var t=e.css("visibility");for(;"inherit"===t;)e=e.parent(),t=e.css("visibility");return"hidden"!==t}(e(t)))},e.extend(e.expr[":"],{focusable:function(t){return e.ui.focusable(t,null!=e.attr(t,"tabindex"))}}),e.ui.focusable},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){e.widget("ui.droppable",{version:"1.12.1",widgetEventPrefix:"drop",options:{accept:"*",addClasses:!0,greedy:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions=function(){if(!arguments.length)return t||(t={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight});t=arguments[0]},this._addToManager(i.scope),i.addClasses&&this._addClass("ui-droppable")},_addToManager:function(t){e.ui.ddmanager.droppables[t]=e.ui.ddmanager.droppables[t]||[],e.ui.ddmanager.droppables[t].push(this)},_splice:function(e){for(var t=0;t<e.length;t++)e[t]===this&&e.splice(t,1)},_destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];this._splice(t)},_setOption:function(t,i){if("accept"===t)this.accept=e.isFunction(i)?i:function(e){return e.is(i)};else if("scope"===t){var n=e.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(t,i)},_activate:function(t){var i=e.ui.ddmanager.current;this._addActiveClass(),i&&this._trigger("activate",t,this.ui(i))},_deactivate:function(t){var i=e.ui.ddmanager.current;this._removeActiveClass(),i&&this._trigger("deactivate",t,this.ui(i))},_over:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._addHoverClass(),this._trigger("over",t,this.ui(i)))},_out:function(t){var i=e.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this._removeHoverClass(),this._trigger("out",t,this.ui(i)))},_drop:function(i,n){var o=n||e.ui.ddmanager.current,s=!1;return!(!o||(o.currentItem||o.element)[0]===this.element[0])&&(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=e(this).droppable("instance");if(n.options.greedy&&!n.options.disabled&&n.options.scope===o.options.scope&&n.accept.call(n.element[0],o.currentItem||o.element)&&t(o,e.extend(n,{offset:n.element.offset()}),n.options.tolerance,i))return s=!0,!1}),!s&&(!!this.accept.call(this.element[0],o.currentItem||o.element)&&(this._removeActiveClass(),this._removeHoverClass(),this._trigger("drop",i,this.ui(o)),this.element)))},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}},_addHoverClass:function(){this._addClass("ui-droppable-hover")},_removeHoverClass:function(){this._removeClass("ui-droppable-hover")},_addActiveClass:function(){this._addClass("ui-droppable-active")},_removeActiveClass:function(){this._removeClass("ui-droppable-active")}});var t=e.ui.intersect=function(){function e(e,t,i){return e>=t&&e<t+i}return function(t,i,n,o){if(!i.offset)return!1;var s=(t.positionAbs||t.position.absolute).left+t.margins.left,r=(t.positionAbs||t.position.absolute).top+t.margins.top,a=s+t.helperProportions.width,l=r+t.helperProportions.height,c=i.offset.left,u=i.offset.top,d=c+i.proportions().width,h=u+i.proportions().height;switch(n){case"fit":return c<=s&&a<=d&&u<=r&&l<=h;case"intersect":return c<s+t.helperProportions.width/2&&a-t.helperProportions.width/2<d&&u<r+t.helperProportions.height/2&&l-t.helperProportions.height/2<h;case"pointer":return e(o.pageY,u,i.proportions().height)&&e(o.pageX,c,i.proportions().width);case"touch":return(r>=u&&r<=h||l>=u&&l<=h||r<u&&l>h)&&(s>=c&&s<=d||a>=c&&a<=d||s<c&&a>d);default:return!1}}}();return e.ui.ddmanager={current:null,droppables:{default:[]},prepareOffsets:function(t,i){var n,o,s=e.ui.ddmanager.droppables[t.options.scope]||[],r=i?i.type:null,a=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(n=0;n<s.length;n++)if(!(s[n].options.disabled||t&&!s[n].accept.call(s[n].element[0],t.currentItem||t.element))){for(o=0;o<a.length;o++)if(a[o]===s[n].element[0]){s[n].proportions().height=0;continue e}s[n].visible="none"!==s[n].element.css("display"),s[n].visible&&("mousedown"===r&&s[n]._activate.call(s[n],i),s[n].offset=s[n].element.offset(),s[n].proportions({width:s[n].element[0].offsetWidth,height:s[n].element[0].offsetHeight}))}},drop:function(i,n){var o=!1;return e.each((e.ui.ddmanager.droppables[i.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t(i,this,this.options.tolerance,n)&&(o=this._drop.call(this,n)||o),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),o},dragStart:function(t,i){t.element.parentsUntil("body").on("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)})},drag:function(i,n){i.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(i,n),e.each(e.ui.ddmanager.droppables[i.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var o,s,r,a=t(i,this,this.options.tolerance,n),l=!a&&this.isover?"isout":a&&!this.isover?"isover":null;l&&(this.options.greedy&&(s=this.options.scope,(r=this.element.parents(":data(ui-droppable)").filter(function(){return e(this).droppable("instance").options.scope===s})).length&&((o=e(r[0]).droppable("instance")).greedyChild="isover"===l)),o&&"isover"===l&&(o.isover=!1,o.isout=!0,o._out.call(o,n)),this[l]=!0,this["isout"===l?"isover":"isout"]=!1,this["isover"===l?"_over":"_out"].call(this,n),o&&"isout"===l&&(o.isout=!1,o.isover=!0,o._over.call(o,n)))}})},dragStop:function(t,i){t.element.parentsUntil("body").off("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,i)}},!1!==e.uiBackCompat&&e.widget("ui.droppable",e.ui.droppable,{options:{hoverClass:!1,activeClass:!1},_addActiveClass:function(){this._super(),this.options.activeClass&&this.element.addClass(this.options.activeClass)},_removeActiveClass:function(){this._super(),this.options.activeClass&&this.element.removeClass(this.options.activeClass)},_addHoverClass:function(){this._super(),this.options.hoverClass&&this.element.addClass(this.options.hoverClass)},_removeHoverClass:function(){this._super(),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass)}}),e.ui.droppable},o=[i(1),i(7),i(6),i(3),i(5)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){"use strict";var n,o=i(4),s=i(22),r=i.n(s),a=i(23);i(34),i(35),i(36),i(37),i(49),i(7),i(32),i(50),i(51),i(52),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63);window,n=jQuery,(Concrete.BlockType=function(e,t,i,n){this.init.apply(this,o(arguments).toArray())}).prototype=o.extend(Object.create(Concrete.Block.prototype),{init:function(e,t,i,n){var s=this;Concrete.Block.prototype.init.apply(s,o(arguments).toArray()),s.setAttr("defaultArea",n||null),n&&(n.acceptsBlockType(s.getHandle())?s.handleDefaultArea():s.removeElement())},handleDefaultArea:function(){var e=this;n.pep.unbind(e.getPeper()),e.getPeper().click(function(t){return e.handleClick(),!1}).css({cursor:"pointer"})},removeElement:function(){var e=this.getPeper().closest(".ccm-panel-content-inner");this.getPeper().closest("li").remove(),e.children(".ccm-panel-add-block-set").each(function(){n(this).children("ul").children().length||n(this).remove()})},handleClick:function(){var e=this,t=e.getAttr("defaultArea");ConcretePanelManager.exitPanelMode(function(){o.defer(function(){e.addToDragArea(o.last(t.getDragAreas()))})})},pepStart:function(e,t,i){var n;Concrete.Block.prototype.pepStart.call(this,e,t,i),this.setAttr("closedPanel",o(ConcretePanelManager.getPanels()).find(function(e){return e.isOpen})),(n=this.getAttr("closedPanel"))&&n.hide()},pepStop:function(e,t,i){var n,s,r=this;(n=r.getSelected())?r.addToDragArea(n):(s=r.getAttr("closedPanel"))&&s.show(),o.defer(function(){Concrete.event.fire("EditModeBlockDragStop",{block:r,pep:i,event:t})}),r.getDragger().remove(),r.setAttr("dragger",null)},addToDragArea:function(e){var t,i,s=this,r=s.getElem(),a=r.data("btid"),l=r.data("cid"),c=e.getArea(),u=c.getHandle(),d=c.getEnableGridContainer()?1:0,h=0,p=e.getBlock(),f=!!r.data("supports-inline-add"),m=!!r.data("has-add-template");if(p&&(h=p.getId()),n.fn.dialog.closeAll(),m)if(f)ConcreteEvent.fire("EditModeBlockAddInline",{selected:e,area:e.getArea(),cID:l,arEnableGridContainer:d,btID:a,dragAreaBlockID:h});else{var g="";if(t=c.getCustomTemplates())for(i in t)g+="&arCustomTemplates["+i+"]="+t[i];n.fn.dialog.open({onOpen:function(){n(function(){var t=n('<div style="display:none" />');e.getElem().after(t),n("#ccm-block-form").concreteAjaxBlockForm({task:"add",dragAreaBlockID:h,dragArea:e,placeholder:t})})},onDestroy:function(){var e=ConcretePanelManager.getByIdentifier("add-block");e&&e.pinned()&&e.show()},width:parseInt(r.data("dialog-width"),10),height:parseInt(r.data("dialog-height"),10)+20,title:r.data("dialog-title"),href:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/page/add_block?cID="+l+"&btID="+a+"&arHandle="+encodeURIComponent(u)+g})}else{var v={cID:l,arHandle:u,btID:a,mode:"edit",processBlock:1,add:1,ccm_token:CCM_SECURITY_TOKEN,arCustomTemplates:c.getCustomTemplates(),dragAreaBlockID:h};if(t=c.getCustomTemplates())for(i in t)v[v.length]={name:"arCustomTemplates["+i+"]",value:t[i]};n.getJSON(CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/page/add_block/submit",v,function(e){n.fn.dialog.showLoader(),ConcreteToolbar.disableDirectExit(),n.get(CCM_DISPATCHER_FILENAME+"/ccm/system/block/render",{arHandle:c.getHandle(),cID:l,bID:e.bID,arEnableGridContainer:d},function(e){p?p.getContainer().after(e):c.getBlockContainer().prepend(e),n.fn.dialog.hideLoader(),o.defer(function(){s.getEditMode().scanBlocks()});var t=ConcretePanelManager.getByIdentifier("add-block");t&&t.pinned()&&t.show()})})}}}),function(e,t){(Concrete.DuplicateBlock=function(e,t,i){this.init.apply(this,o.toArray(arguments))}).prototype=o.extend(Object.create(Concrete.BlockType.prototype),{init:function(e,t,i){Concrete.BlockType.prototype.init.call(this,e,t,e.find(".block-content"),i)},handleDefaultArea:function(){var e=this;t.pep.unbind(e.getPeper()),e.getPeper().click(function(t){return e.handleClick(),!1}).css({cursor:"pointer"}).children(".block-name").css({cursor:"pointer"})},removeElement:function(){this.getElem().remove()},addToDragArea:function(e){var i=this,n=i.getElem(),o=n.data("btid"),s=e.getArea(),r=s.getHandle(),a=0,l=n.data("cid"),c=e.getBlock(),u=n.data("pcid");c&&(a=c.getId()),ConcretePanelManager.exitPanelMode(),t.fn.dialog.closeAll(),t.fn.dialog.showLoader();var d={cID:l,arHandle:r,btID:o,mode:"edit",processBlock:1,add:1,btask:"alias_existing_block",pcID:[u],ccm_token:CCM_SECURITY_TOKEN};a&&(d.dragAreaBlockID=a),t.getJSON(CCM_DISPATCHER_FILENAME,d,function(e){i.handleAddResponse(e,s,c,function(){ConcreteEvent.fire("EditModeAddClipboardComplete",{block:i})})})}})}(window,jQuery),function(e,t){(Concrete.ContainerBlock=function(e,t){this.init.apply(this,o(arguments).toArray())}).prototype=o.extend(Object.create(Concrete.Block.prototype),{init:function(e,i){Concrete.Block.prototype.init.call(this,e,i,t()),e.children(".ccm-block-cover").remove(),this.bindDrag(),this.bindDelete()},bindDelete:function(){var e=this;e.getElem().find("a[data-inline-command=delete-block").on("click",function(){e.delete()})},bindDrag:function(){var e=t('a[data-inline-command="move-block"]').parent();t.pep.unbind(e),e.pep(this.getPepSettings())}})}(window,jQuery),function(e,t){(Concrete.Layout=function(e,t){this.init.apply(this,o(arguments).toArray())}).prototype=o.extend(Object.create(Concrete.Block.prototype),{init:function(e,i){var n=this;n.bindEvent("EditModeInlineEditLoaded.editmode",function(e,t){t.block===n&&n.bindDrag()}),Concrete.Block.prototype.init.call(n,e,i,t()),e.children(".ccm-block-cover").remove()},bindDrag:function(){var e=t('a[data-layout-command="move-block"]').parent();t.pep.unbind(e),e.pep(this.getPepSettings())},addToDragArea:function(){Concrete.Block.prototype.addToDragArea.apply(this,o.toArray(arguments));var e=t("#ccm-inline-toolbar-container");e.css({top:this.getElem().offset().top-e.outerHeight()-5})}})}(window,jQuery),function(e,t){(Concrete.Container=function(e,t,i){this.init.apply(this,o(arguments).toArray())}).prototype=o.extend(Object.create(Concrete.BlockType.prototype),{removeElement:function(){this.getElem().remove()},addToDragArea:function(e){var i=this,n=i.getElem(),o=e.getArea(),s=o.getHandle(),r=0,a=e.getBlock();a&&(r=a.getId()),t.fn.dialog.closeAll();var l={cID:n.data("cid"),arHandle:s,containerID:n.data("container-id"),ccm_token:CCM_SECURITY_TOKEN};r&&(l.dragAreaBlockID=r),t.fn.dialog.showLoader(),t.getJSON(CCM_DISPATCHER_FILENAME+"/ccm/system/page/add_container",l,function(e){i.handleAddResponse(e,o,a)})},showSuccessfulAdd:function(){ConcreteAlert.notify({message:ccmi18n.addBlockContainerMsg,title:ccmi18n.addBlockContainer})}})}(window,jQuery),function(e,t){(Concrete.Stack=function(e,t,i){this.init.apply(this,o(arguments).toArray())}).prototype=o.extend(Object.create(Concrete.BlockType.prototype),{removeElement:function(){this.getElem().remove()},addToDragArea:function(e){var i=this,n=i.getElem(),o=e.getArea(),s=o.getHandle(),r=0,a=e.getBlock();a&&(r=a.getId()),t.fn.dialog.closeAll();var l={cID:n.data("cid"),arHandle:s,stID:n.data("sid"),ccm_token:CCM_SECURITY_TOKEN};r&&(l.dragAreaBlockID=r),t.fn.dialog.showLoader(),t.getJSON(CCM_DISPATCHER_FILENAME+"/ccm/system/page/add_stack",l,function(e){i.handleAddResponse(e,o,a)})},showSuccessfulAdd:function(){ConcreteAlert.notify({message:ccmi18n.addBlockStackMsg,title:ccmi18n.addBlockStack})}})}(window,jQuery),function(e,t){(Concrete.StackBlock=function(e,t,i,n){this.init.apply(this,o.toArray(arguments))}).prototype=o.extend(Object.create(Concrete.BlockType.prototype),{init:function(e,t,i,n,o){Concrete.BlockType.prototype.init.call(this,e,i,n,o),this.setAttr("stack",t)},removeElement:function(){t.pep.unbind(this.getPeper())},addToDragArea:function(e){var i=this,n=i.getElem(),o=n.data("btid"),s=e.getArea(),r=s.getHandle(),a=0,l=e.getBlock();l&&(a=l.getId()),ConcretePanelManager.exitPanelMode();var c={cID:CCM_CID,bID:n.data("block-id"),arHandle:r,btID:o,mode:"edit",processBlock:1,add:1,btask:"alias_existing_block",pcID:[n.data("cID")],ccm_token:CCM_SECURITY_TOKEN};a&&(c.dragAreaBlockID=a),t.getJSON(CCM_DISPATCHER_FILENAME,c,function(e){i.handleAddResponse(e,s,l)})}})}(window,jQuery),window,jQuery,(Concrete.StackDisplay=function(e,t){this.init.apply(this,o(arguments).toArray())}).prototype=o.extend(Object.create(Concrete.Block.prototype),{init:function(e,t){e.children(".ccm-area").children(".ccm-area-block-list").find(".ccm-edit-mode-inline-commands").remove(),Concrete.Block.prototype.init.apply(this,o(arguments).toArray())}});i(64),i(65),i(66),i(67),i(68),i(69),i(70),i(71),i(72),i(73),i(74),i(75),i(76),i(77),i(78),i(79),i(80),i(81),i(82),i(84),i(85),i(8),i(86),i(87),i(88),i(89),i(90),i(91),i(92),i(93),i(94),i(96),i(97),i(98),i(99),i(102),i(103),i(104),i(105),i(106),i(107),i(108),i(109),i(110),i(111),i(112),i(113),i(114),i(115),i(116),i(117),i(118),i(119),i(120),i(121);window.NProgress=r.a,window._=o,window.PNotify=a.a},function(e,t,i){var n;n=function(){"use strict";function e(e,t){return e(t={exports:{}},t.exports),t.exports}var t=e(function(e){var t=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=t)}),i=e(function(e){var t=e.exports={version:"2.6.5"};"number"==typeof __e&&(__e=t)}),n=(i.version,function(e){return"object"==typeof e?null!==e:"function"==typeof e}),o=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e},s=function(e){try{return!!e()}catch(e){return!0}},r=!s(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),a=t.document,l=n(a)&&n(a.createElement),c=!r&&!s(function(){return 7!=Object.defineProperty((e="div",l?a.createElement(e):{}),"a",{get:function(){return 7}}).a;var e}),u=Object.defineProperty,d={f:r?Object.defineProperty:function(e,t,i){if(o(e),t=function(e,t){if(!n(e))return e;var i,o;if(t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;if("function"==typeof(i=e.valueOf)&&!n(o=i.call(e)))return o;if(!t&&"function"==typeof(i=e.toString)&&!n(o=i.call(e)))return o;throw TypeError("Can't convert object to primitive value")}(t,!0),o(i),c)try{return u(e,t,i)}catch(e){}if("get"in i||"set"in i)throw TypeError("Accessors not supported!");return"value"in i&&(e[t]=i.value),e}},h=r?function(e,t,i){return d.f(e,t,function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}(1,i))}:function(e,t,i){return e[t]=i,e},p={}.hasOwnProperty,f=function(e,t){return p.call(e,t)},m=0,g=Math.random(),v=e(function(e){var n=t["__core-js_shared__"]||(t["__core-js_shared__"]={});(e.exports=function(e,t){return n[e]||(n[e]=void 0!==t?t:{})})("versions",[]).push({version:i.version,mode:"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})})("native-function-to-string",Function.toString),y=e(function(e){var n,o="Symbol(".concat(void 0===(n="src")?"":n,")_",(++m+g).toString(36)),s=(""+v).split("toString");i.inspectSource=function(e){return v.call(e)},(e.exports=function(e,i,n,r){var a="function"==typeof n;a&&(f(n,"name")||h(n,"name",i)),e[i]!==n&&(a&&(f(n,o)||h(n,o,e[i]?""+e[i]:s.join(String(i)))),e===t?e[i]=n:r?e[i]?e[i]=n:h(e,i,n):(delete e[i],h(e,i,n)))})(Function.prototype,"toString",function(){return"function"==typeof this&&this[o]||v.call(this)})}),b=function(e,t,i){if(function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!")}(e),void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 2:return function(i,n){return e.call(t,i,n)};case 3:return function(i,n,o){return e.call(t,i,n,o)}}return function(){return e.apply(t,arguments)}},C=function(e,n,o){var s,r,a,l,c=e&C.F,u=e&C.G,d=e&C.S,p=e&C.P,f=e&C.B,m=u?t:d?t[n]||(t[n]={}):(t[n]||{}).prototype,g=u?i:i[n]||(i[n]={}),v=g.prototype||(g.prototype={});for(s in u&&(o=n),o)a=((r=!c&&m&&void 0!==m[s])?m:o)[s],l=f&&r?b(a,t):p&&"function"==typeof a?b(Function.call,a):a,m&&y(m,s,a,e&C.U),g[s]!=a&&h(g,s,l),p&&v[s]!=a&&(v[s]=a)};t.core=i,C.F=1,C.G=2,C.S=4,C.P=8,C.B=16,C.W=32,C.U=64,C.R=128;var _,D=C,w=Math.ceil,x=Math.floor,k=function(e){return isNaN(e=+e)?0:(e>0?x:w)(e)},E=(_=!1,function(e,t){var i,n,o=String(function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}(e)),s=k(t),r=o.length;return s<0||s>=r?_?"":void 0:(i=o.charCodeAt(s))<55296||i>56319||s+1===r||(n=o.charCodeAt(s+1))<56320||n>57343?_?o.charAt(s):i:_?o.slice(s,s+2):n-56320+(i-55296<<10)+65536});D(D.P,"String",{codePointAt:function(e){return E(this,e)}});i.String.codePointAt;var S=Math.max,A=Math.min,T=String.fromCharCode,F=String.fromCodePoint;D(D.S+D.F*(!!F&&1!=F.length),"String",{fromCodePoint:function(e){for(var t,i,n,o=arguments,s=[],r=arguments.length,a=0;r>a;){if(t=+o[a++],n=1114111,((i=k(i=t))<0?S(i+n,0):A(i,n))!==t)throw RangeError(t+" is not a valid code point");s.push(t<65536?T(t):T(55296+((t-=65536)>>10),t%1024+56320))}return s.join("")}});i.String.fromCodePoint;var I,P,M,$,N,O,B,L,z,H,R,j,W,U,q={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},V={isSpaceSeparator:function(e){return q.Space_Separator.test(e)},isIdStartChar:function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||"$"===e||"_"===e||q.ID_Start.test(e)},isIdContinueChar:function(e){return e>="a"&&e<="z"||e>="A"&&e<="Z"||e>="0"&&e<="9"||"$"===e||"_"===e||"‌"===e||"‍"===e||q.ID_Continue.test(e)},isDigit:function(e){return/[0-9]/.test(e)},isHexDigit:function(e){return/[0-9A-Fa-f]/.test(e)}};function K(){for(H="default",R="",j=!1,W=1;;){U=Y();var e=G[H]();if(e)return e}}function Y(){if(I[$])return String.fromCodePoint(I.codePointAt($))}function Q(){var e=Y();return"\n"===e?(N++,O=0):e?O+=e.length:O++,e&&($+=e.length),e}var G={default:function(){switch(U){case"\t":case"\v":case"\f":case" ":case" ":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void Q();case"/":return Q(),void(H="comment");case void 0:return Q(),X("eof")}if(!V.isSpaceSeparator(U))return G[P]();Q()},comment:function(){switch(U){case"*":return Q(),void(H="multiLineComment");case"/":return Q(),void(H="singleLineComment")}throw ne(Q())},multiLineComment:function(){switch(U){case"*":return Q(),void(H="multiLineCommentAsterisk");case void 0:throw ne(Q())}Q()},multiLineCommentAsterisk:function(){switch(U){case"*":return void Q();case"/":return Q(),void(H="default");case void 0:throw ne(Q())}Q(),H="multiLineComment"},singleLineComment:function(){switch(U){case"\n":case"\r":case"\u2028":case"\u2029":return Q(),void(H="default");case void 0:return Q(),X("eof")}Q()},value:function(){switch(U){case"{":case"[":return X("punctuator",Q());case"n":return Q(),J("ull"),X("null",null);case"t":return Q(),J("rue"),X("boolean",!0);case"f":return Q(),J("alse"),X("boolean",!1);case"-":case"+":return"-"===Q()&&(W=-1),void(H="sign");case".":return R=Q(),void(H="decimalPointLeading");case"0":return R=Q(),void(H="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return R=Q(),void(H="decimalInteger");case"I":return Q(),J("nfinity"),X("numeric",1/0);case"N":return Q(),J("aN"),X("numeric",NaN);case'"':case"'":return j='"'===Q(),R="",void(H="string")}throw ne(Q())},identifierNameStartEscape:function(){if("u"!==U)throw ne(Q());Q();var e=Z();switch(e){case"$":case"_":break;default:if(!V.isIdStartChar(e))throw se()}R+=e,H="identifierName"},identifierName:function(){switch(U){case"$":case"_":case"‌":case"‍":return void(R+=Q());case"\\":return Q(),void(H="identifierNameEscape")}if(!V.isIdContinueChar(U))return X("identifier",R);R+=Q()},identifierNameEscape:function(){if("u"!==U)throw ne(Q());Q();var e=Z();switch(e){case"$":case"_":case"‌":case"‍":break;default:if(!V.isIdContinueChar(e))throw se()}R+=e,H="identifierName"},sign:function(){switch(U){case".":return R=Q(),void(H="decimalPointLeading");case"0":return R=Q(),void(H="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return R=Q(),void(H="decimalInteger");case"I":return Q(),J("nfinity"),X("numeric",W*(1/0));case"N":return Q(),J("aN"),X("numeric",NaN)}throw ne(Q())},zero:function(){switch(U){case".":return R+=Q(),void(H="decimalPoint");case"e":case"E":return R+=Q(),void(H="decimalExponent");case"x":case"X":return R+=Q(),void(H="hexadecimal")}return X("numeric",0*W)},decimalInteger:function(){switch(U){case".":return R+=Q(),void(H="decimalPoint");case"e":case"E":return R+=Q(),void(H="decimalExponent")}if(!V.isDigit(U))return X("numeric",W*Number(R));R+=Q()},decimalPointLeading:function(){if(V.isDigit(U))return R+=Q(),void(H="decimalFraction");throw ne(Q())},decimalPoint:function(){switch(U){case"e":case"E":return R+=Q(),void(H="decimalExponent")}return V.isDigit(U)?(R+=Q(),void(H="decimalFraction")):X("numeric",W*Number(R))},decimalFraction:function(){switch(U){case"e":case"E":return R+=Q(),void(H="decimalExponent")}if(!V.isDigit(U))return X("numeric",W*Number(R));R+=Q()},decimalExponent:function(){switch(U){case"+":case"-":return R+=Q(),void(H="decimalExponentSign")}if(V.isDigit(U))return R+=Q(),void(H="decimalExponentInteger");throw ne(Q())},decimalExponentSign:function(){if(V.isDigit(U))return R+=Q(),void(H="decimalExponentInteger");throw ne(Q())},decimalExponentInteger:function(){if(!V.isDigit(U))return X("numeric",W*Number(R));R+=Q()},hexadecimal:function(){if(V.isHexDigit(U))return R+=Q(),void(H="hexadecimalInteger");throw ne(Q())},hexadecimalInteger:function(){if(!V.isHexDigit(U))return X("numeric",W*Number(R));R+=Q()},string:function(){switch(U){case"\\":return Q(),void(R+=function(){switch(Y()){case"b":return Q(),"\b";case"f":return Q(),"\f";case"n":return Q(),"\n";case"r":return Q(),"\r";case"t":return Q(),"\t";case"v":return Q(),"\v";case"0":if(Q(),V.isDigit(Y()))throw ne(Q());return"\0";case"x":return Q(),function(){var e="",t=Y();if(!V.isHexDigit(t))throw ne(Q());if(e+=Q(),t=Y(),!V.isHexDigit(t))throw ne(Q());return e+=Q(),String.fromCodePoint(parseInt(e,16))}();case"u":return Q(),Z();case"\n":case"\u2028":case"\u2029":return Q(),"";case"\r":return Q(),"\n"===Y()&&Q(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw ne(Q())}return Q()}());case'"':return j?(Q(),X("string",R)):void(R+=Q());case"'":return j?void(R+=Q()):(Q(),X("string",R));case"\n":case"\r":throw ne(Q());case"\u2028":case"\u2029":!function(e){console.warn("JSON5: '"+re(e)+"' in strings is not valid ECMAScript; consider escaping")}(U);break;case void 0:throw ne(Q())}R+=Q()},start:function(){switch(U){case"{":case"[":return X("punctuator",Q())}H="value"},beforePropertyName:function(){switch(U){case"$":case"_":return R=Q(),void(H="identifierName");case"\\":return Q(),void(H="identifierNameStartEscape");case"}":return X("punctuator",Q());case'"':case"'":return j='"'===Q(),void(H="string")}if(V.isIdStartChar(U))return R+=Q(),void(H="identifierName");throw ne(Q())},afterPropertyName:function(){if(":"===U)return X("punctuator",Q());throw ne(Q())},beforePropertyValue:function(){H="value"},afterPropertyValue:function(){switch(U){case",":case"}":return X("punctuator",Q())}throw ne(Q())},beforeArrayValue:function(){if("]"===U)return X("punctuator",Q());H="value"},afterArrayValue:function(){switch(U){case",":case"]":return X("punctuator",Q())}throw ne(Q())},end:function(){throw ne(Q())}};function X(e,t){return{type:e,value:t,line:N,column:O}}function J(e){for(var t=0,i=e;t<i.length;t+=1){var n=i[t];if(Y()!==n)throw ne(Q());Q()}}function Z(){for(var e="",t=4;t-- >0;){var i=Y();if(!V.isHexDigit(i))throw ne(Q());e+=Q()}return String.fromCodePoint(parseInt(e,16))}var ee={start:function(){if("eof"===B.type)throw oe();te()},beforePropertyName:function(){switch(B.type){case"identifier":case"string":return L=B.value,void(P="afterPropertyName");case"punctuator":return void ie();case"eof":throw oe()}},afterPropertyName:function(){if("eof"===B.type)throw oe();P="beforePropertyValue"},beforePropertyValue:function(){if("eof"===B.type)throw oe();te()},beforeArrayValue:function(){if("eof"===B.type)throw oe();"punctuator"!==B.type||"]"!==B.value?te():ie()},afterPropertyValue:function(){if("eof"===B.type)throw oe();switch(B.value){case",":return void(P="beforePropertyName");case"}":ie()}},afterArrayValue:function(){if("eof"===B.type)throw oe();switch(B.value){case",":return void(P="beforeArrayValue");case"]":ie()}},end:function(){}};function te(){var e;switch(B.type){case"punctuator":switch(B.value){case"{":e={};break;case"[":e=[]}break;case"null":case"boolean":case"numeric":case"string":e=B.value}if(void 0===z)z=e;else{var t=M[M.length-1];Array.isArray(t)?t.push(e):t[L]=e}if(null!==e&&"object"==typeof e)M.push(e),P=Array.isArray(e)?"beforeArrayValue":"beforePropertyName";else{var i=M[M.length-1];P=null==i?"end":Array.isArray(i)?"afterArrayValue":"afterPropertyValue"}}function ie(){M.pop();var e=M[M.length-1];P=null==e?"end":Array.isArray(e)?"afterArrayValue":"afterPropertyValue"}function ne(e){return ae(void 0===e?"JSON5: invalid end of input at "+N+":"+O:"JSON5: invalid character '"+re(e)+"' at "+N+":"+O)}function oe(){return ae("JSON5: invalid end of input at "+N+":"+O)}function se(){return ae("JSON5: invalid identifier character at "+N+":"+(O-=5))}function re(e){var t={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(t[e])return t[e];if(e<" "){var i=e.charCodeAt(0).toString(16);return"\\x"+("00"+i).substring(i.length)}return e}function ae(e){var t=new SyntaxError(e);return t.lineNumber=N,t.columnNumber=O,t}return{parse:function(e,t){I=String(e),P="start",M=[],$=0,N=1,O=0,B=void 0,L=void 0,z=void 0;do{B=K(),ee[P]()}while("eof"!==B.type);return"function"==typeof t?function e(t,i,n){var o=t[i];if(null!=o&&"object"==typeof o)for(var s in o){var r=e(o,s,n);void 0===r?delete o[s]:o[s]=r}return n.call(t,i,o)}({"":z},"",t):z},stringify:function(e,t,i){var n,o,s,r=[],a="",l="";if(null==t||"object"!=typeof t||Array.isArray(t)||(i=t.space,s=t.quote,t=t.replacer),"function"==typeof t)o=t;else if(Array.isArray(t)){n=[];for(var c=0,u=t;c<u.length;c+=1){var d=u[c],h=void 0;"string"==typeof d?h=d:("number"==typeof d||d instanceof String||d instanceof Number)&&(h=String(d)),void 0!==h&&n.indexOf(h)<0&&n.push(h)}}return i instanceof Number?i=Number(i):i instanceof String&&(i=String(i)),"number"==typeof i?i>0&&(i=Math.min(10,Math.floor(i)),l="          ".substr(0,i)):"string"==typeof i&&(l=i.substr(0,10)),p("",{"":e});function p(e,t){var i=t[e];switch(null!=i&&("function"==typeof i.toJSON5?i=i.toJSON5(e):"function"==typeof i.toJSON&&(i=i.toJSON(e))),o&&(i=o.call(t,e,i)),i instanceof Number?i=Number(i):i instanceof String?i=String(i):i instanceof Boolean&&(i=i.valueOf()),i){case null:return"null";case!0:return"true";case!1:return"false"}return"string"==typeof i?f(i):"number"==typeof i?String(i):"object"==typeof i?Array.isArray(i)?function(e){if(r.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");r.push(e);var t=a;a+=l;for(var i,n=[],o=0;o<e.length;o++){var s=p(String(o),e);n.push(void 0!==s?s:"null")}if(0===n.length)i="[]";else if(""===l){var c=n.join(",");i="["+c+"]"}else{var u=",\n"+a,d=n.join(u);i="[\n"+a+d+",\n"+t+"]"}return r.pop(),a=t,i}(i):function(e){if(r.indexOf(e)>=0)throw TypeError("Converting circular structure to JSON5");r.push(e);var t=a;a+=l;for(var i,o,s=[],c=0,u=n||Object.keys(e);c<u.length;c+=1){var d=u[c],h=p(d,e);if(void 0!==h){var f=m(d)+":";""!==l&&(f+=" "),f+=h,s.push(f)}}if(0===s.length)i="{}";else if(""===l)o=s.join(","),i="{"+o+"}";else{var g=",\n"+a;o=s.join(g),i="{\n"+a+o+",\n"+t+"}"}return r.pop(),a=t,i}(i):void 0}function f(e){for(var t={"'":.1,'"':.2},i={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},n="",o=0;o<e.length;o++){var r=e[o];switch(r){case"'":case'"':t[r]++,n+=r;continue;case"\0":if(V.isDigit(e[o+1])){n+="\\x00";continue}}if(i[r])n+=i[r];else if(r<" "){var a=r.charCodeAt(0).toString(16);n+="\\x"+("00"+a).substring(a.length)}else n+=r}var l=s||Object.keys(t).reduce(function(e,i){return t[e]<t[i]?e:i});return l+(n=n.replace(new RegExp(l,"g"),i[l]))+l}function m(e){if(0===e.length)return f(e);var t=String.fromCodePoint(e.codePointAt(0));if(!V.isIdStartChar(t))return f(e);for(var i=t.length;i<e.length;i++)if(!V.isIdContinueChar(String.fromCodePoint(e.codePointAt(i))))return f(e);return e}}}},e.exports=n()},function(e,t,i){var n,o,s,r;r=function(e){var t=/\+/g;function i(e){return o.raw?e:encodeURIComponent(e)}function n(i,n){var s=o.raw?i:function(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(t," ")),o.json?JSON.parse(e):e}catch(e){}}(i);return e.isFunction(n)?n(s):s}var o=e.cookie=function(t,s,r){if(void 0!==s&&!e.isFunction(s)){if("number"==typeof(r=e.extend({},o.defaults,r)).expires){var a=r.expires,l=r.expires=new Date;l.setTime(+l+864e5*a)}return document.cookie=[i(t),"=",function(e){return i(o.json?JSON.stringify(e):String(e))}(s),r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}for(var c,u=t?void 0:{},d=document.cookie?document.cookie.split("; "):[],h=0,p=d.length;h<p;h++){var f=d[h].split("="),m=(c=f.shift(),o.raw?c:decodeURIComponent(c)),g=f.join("=");if(t&&t===m){u=n(g,s);break}t||void 0===(g=n(g))||(u[m]=g)}return u};o.defaults={},e.removeCookie=function(t,i){return void 0!==e.cookie(t)&&(e.cookie(t,"",e.extend({},i,{expires:-1})),!e.cookie(t))}},o=[i(1)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){"use strict";function t(t){var i=t.data;t.isDefaultPrevented()||(t.preventDefault(),e(t.target).closest("form").ajaxSubmit(i))}function i(t){var i=t.target,n=e(i);if(!n.is("[type=submit],[type=image]")){var o=n.closest("[type=submit]");if(0===o.length)return;i=o[0]}var s=i.form;if(s.clk=i,"image"===i.type)if(void 0!==t.offsetX)s.clk_x=t.offsetX,s.clk_y=t.offsetY;else if("function"==typeof e.fn.offset){var r=n.offset();s.clk_x=t.pageX-r.left,s.clk_y=t.pageY-r.top}else s.clk_x=t.pageX-i.offsetLeft,s.clk_y=t.pageY-i.offsetTop;setTimeout(function(){s.clk=s.clk_x=s.clk_y=null},100)}function n(){if(e.fn.ajaxSubmit.debug){var t="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(t):window.opera&&window.opera.postError&&window.opera.postError(t)}}var o=/\r?\n/g,s={};s.fileapi=void 0!==e('<input type="file">').get(0).files,s.formdata=void 0!==window.FormData;var r=!!e.fn.prop;e.fn.attr2=function(){if(!r)return this.attr.apply(this,arguments);var e=this.prop.apply(this,arguments);return e&&e.jquery||"string"==typeof e?e:this.attr.apply(this,arguments)},e.fn.ajaxSubmit=function(t,i,o,a){function l(i){function o(e){var t=null;try{e.contentWindow&&(t=e.contentWindow.document)}catch(e){n("cannot get iframe.contentWindow document: "+e)}if(t)return t;try{t=e.contentDocument?e.contentDocument:e.document}catch(i){n("cannot get iframe.contentDocument: "+i),t=e.document}return t}function s(){var t=h.attr2("target"),i=h.attr2("action"),s=h.attr("enctype")||h.attr("encoding")||"multipart/form-data";w.setAttribute("target",f),c&&!/post/i.test(c)||w.setAttribute("method","POST"),i!==d.url&&w.setAttribute("action",d.url),d.skipEncodingOverride||c&&!/post/i.test(c)||h.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),d.timeout&&(D=setTimeout(function(){_=!0,a(S)},d.timeout));var r=[];try{if(d.extraData)for(var l in d.extraData)d.extraData.hasOwnProperty(l)&&(e.isPlainObject(d.extraData[l])&&d.extraData[l].hasOwnProperty("name")&&d.extraData[l].hasOwnProperty("value")?r.push(e('<input type="hidden" name="'+d.extraData[l].name+'">',k).val(d.extraData[l].value).appendTo(w)[0]):r.push(e('<input type="hidden" name="'+l+'">',k).val(d.extraData[l]).appendTo(w)[0]));d.iframeTarget||m.appendTo(E),v.attachEvent?v.attachEvent("onload",a):v.addEventListener("load",a,!1),setTimeout(function e(){try{var t=o(v).readyState;n("state = "+t),t&&"uninitialized"===t.toLowerCase()&&setTimeout(e,50)}catch(t){n("Server abort: ",t," (",t.name,")"),a(A),D&&clearTimeout(D),D=void 0}},15);try{w.submit()}catch(e){document.createElement("form").submit.apply(w)}}finally{w.setAttribute("action",i),w.setAttribute("enctype",s),t?w.setAttribute("target",t):h.removeAttr("target"),e(r).remove()}}function a(t){if(!y.aborted&&!M){if((P=o(v))||(n("cannot access response document"),t=A),t===S&&y)return y.abort("timeout"),void x.reject(y,"timeout");if(t===A&&y)return y.abort("server abort"),void x.reject(y,"error","server abort");if(P&&P.location.href!==d.iframeSrc||_){v.detachEvent?v.detachEvent("onload",a):v.removeEventListener("load",a,!1);var i,s="success";try{if(_)throw"timeout";var r="xml"===d.dataType||P.XMLDocument||e.isXMLDoc(P);if(n("isXml="+r),!r&&window.opera&&(null===P.body||!P.body.innerHTML)&&--$)return n("requeing onLoad callback, DOM not available"),void setTimeout(a,250);var l=P.body?P.body:P.documentElement;y.responseText=l?l.innerHTML:null,y.responseXML=P.XMLDocument?P.XMLDocument:P,r&&(d.dataType="xml"),y.getResponseHeader=function(e){return{"content-type":d.dataType}[e.toLowerCase()]},l&&(y.status=Number(l.getAttribute("status"))||y.status,y.statusText=l.getAttribute("statusText")||y.statusText);var c=(d.dataType||"").toLowerCase(),u=/(json|script|text)/.test(c);if(u||d.textarea){var h=P.getElementsByTagName("textarea")[0];if(h)y.responseText=h.value,y.status=Number(h.getAttribute("status"))||y.status,y.statusText=h.getAttribute("statusText")||y.statusText;else if(u){var f=P.getElementsByTagName("pre")[0],g=P.getElementsByTagName("body")[0];f?y.responseText=f.textContent?f.textContent:f.innerText:g&&(y.responseText=g.textContent?g.textContent:g.innerText)}}else"xml"===c&&!y.responseXML&&y.responseText&&(y.responseXML=N(y.responseText));try{I=B(y,c,d)}catch(e){s="parsererror",y.error=i=e||s}}catch(e){n("error caught: ",e),s="error",y.error=i=e||s}y.aborted&&(n("upload aborted"),s=null),y.status&&(s=y.status>=200&&y.status<300||304===y.status?"success":"error"),"success"===s?(d.success&&d.success.call(d.context,I,"success",y),x.resolve(y.responseText,"success",y),p&&e.event.trigger("ajaxSuccess",[y,d])):s&&(void 0===i&&(i=y.statusText),d.error&&d.error.call(d.context,y,s,i),x.reject(y,"error",i),p&&e.event.trigger("ajaxError",[y,d,i])),p&&e.event.trigger("ajaxComplete",[y,d]),p&&!--e.active&&e.event.trigger("ajaxStop"),d.complete&&d.complete.call(d.context,y,s),M=!0,d.timeout&&clearTimeout(D),setTimeout(function(){d.iframeTarget?m.attr("src",d.iframeSrc):m.remove(),y.responseXML=null},100)}}}var l,u,d,p,f,m,v,y,b,C,_,D,w=h[0],x=e.Deferred();if(x.abort=function(e){y.abort(e)},i)for(u=0;u<g.length;u++)l=e(g[u]),r?l.prop("disabled",!1):l.removeAttr("disabled");(d=e.extend(!0,{},e.ajaxSettings,t)).context=d.context||d,f="jqFormIO"+(new Date).getTime();var k=w.ownerDocument,E=h.closest("body");if(d.iframeTarget?(C=(m=e(d.iframeTarget,k)).attr2("name"))?f=C:m.attr2("name",f):(m=e('<iframe name="'+f+'" src="'+d.iframeSrc+'" />',k)).css({position:"absolute",top:"-1000px",left:"-1000px"}),v=m[0],y={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(t){var i="timeout"===t?"timeout":"aborted";n("aborting upload... "+i),this.aborted=1;try{v.contentWindow.document.execCommand&&v.contentWindow.document.execCommand("Stop")}catch(e){}m.attr("src",d.iframeSrc),y.error=i,d.error&&d.error.call(d.context,y,i,t),p&&e.event.trigger("ajaxError",[y,d,i]),d.complete&&d.complete.call(d.context,y,i)}},(p=d.global)&&0==e.active++&&e.event.trigger("ajaxStart"),p&&e.event.trigger("ajaxSend",[y,d]),d.beforeSend&&!1===d.beforeSend.call(d.context,y,d))return d.global&&e.active--,x.reject(),x;if(y.aborted)return x.reject(),x;(b=w.clk)&&(C=b.name)&&!b.disabled&&(d.extraData=d.extraData||{},d.extraData[C]=b.value,"image"===b.type&&(d.extraData[C+".x"]=w.clk_x,d.extraData[C+".y"]=w.clk_y));var S=1,A=2,T=e("meta[name=csrf-token]").attr("content"),F=e("meta[name=csrf-param]").attr("content");F&&T&&(d.extraData=d.extraData||{},d.extraData[F]=T),d.forceSync?s():setTimeout(s,10);var I,P,M,$=50,N=e.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!==t.documentElement.nodeName?t:null},O=e.parseJSON||function(e){return window.eval("("+e+")")},B=function(t,i,n){var o=t.getResponseHeader("content-type")||"",s=("xml"===i||!i)&&o.indexOf("xml")>=0,r=s?t.responseXML:t.responseText;return s&&"parsererror"===r.documentElement.nodeName&&e.error&&e.error("parsererror"),n&&n.dataFilter&&(r=n.dataFilter(r,i)),"string"==typeof r&&(("json"===i||!i)&&o.indexOf("json")>=0?r=O(r):("script"===i||!i)&&o.indexOf("javascript")>=0&&e.globalEval(r)),r};return x}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;var c,u,d,h=this;"function"==typeof t?t={success:t}:"string"==typeof t||!1===t&&arguments.length>0?(t={url:t,data:i,dataType:o},"function"==typeof a&&(t.success=a)):void 0===t&&(t={}),c=t.method||t.type||this.attr2("method"),(d=(d="string"==typeof(u=t.url||this.attr2("action"))?e.trim(u):"")||window.location.href||"")&&(d=(d.match(/^([^#]+)/)||[])[1]),t=e.extend(!0,{url:d,success:e.ajaxSettings.success,type:c||e.ajaxSettings.type,iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},t);var p={};if(this.trigger("form-pre-serialize",[this,t,p]),p.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(t.beforeSerialize&&!1===t.beforeSerialize(this,t))return n("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var f=t.traditional;void 0===f&&(f=e.ajaxSettings.traditional);var m,g=[],v=this.formToArray(t.semantic,g,t.filtering);if(t.data){var y=e.isFunction(t.data)?t.data(v):t.data;t.extraData=y,m=e.param(y,f)}if(t.beforeSubmit&&!1===t.beforeSubmit(v,this,t))return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[v,this,t,p]),p.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var b=e.param(v,f);m&&(b=b?b+"&"+m:m),"GET"===t.type.toUpperCase()?(t.url+=(t.url.indexOf("?")>=0?"&":"?")+b,t.data=null):t.data=b;var C=[];if(t.resetForm&&C.push(function(){h.resetForm()}),t.clearForm&&C.push(function(){h.clearForm(t.includeHidden)}),!t.dataType&&t.target){var _=t.success||function(){};C.push(function(i,n,o){var s=arguments,r=t.replaceTarget?"replaceWith":"html";e(t.target)[r](i).each(function(){_.apply(this,s)})})}else t.success&&(e.isArray(t.success)?e.merge(C,t.success):C.push(t.success));if(t.success=function(e,i,n){for(var o=t.context||this,s=0,r=C.length;s<r;s++)C[s].apply(o,[e,i,n||h,h])},t.error){var D=t.error;t.error=function(e,i,n){var o=t.context||this;D.apply(o,[e,i,n,h])}}if(t.complete){var w=t.complete;t.complete=function(e,i){var n=t.context||this;w.apply(n,[e,i,h])}}var x=e("input[type=file]:enabled",this).filter(function(){return""!==e(this).val()}).length>0,k="multipart/form-data",E=h.attr("enctype")===k||h.attr("encoding")===k,S=s.fileapi&&s.formdata;n("fileAPI :"+S);var A,T=(x||E)&&!S;!1!==t.iframe&&(t.iframe||T)?t.closeKeepAlive?e.get(t.closeKeepAlive,function(){A=l(v)}):A=l(v):A=(x||E)&&S?function(i){for(var n=new FormData,o=0;o<i.length;o++)n.append(i[o].name,i[o].value);if(t.extraData){var s=function(i){var n,o,s=e.param(i,t.traditional).split("&"),r=s.length,a=[];for(n=0;n<r;n++)s[n]=s[n].replace(/\+/g," "),o=s[n].split("="),a.push([decodeURIComponent(o[0]),decodeURIComponent(o[1])]);return a}(t.extraData);for(o=0;o<s.length;o++)s[o]&&n.append(s[o][0],s[o][1])}t.data=null;var r=e.extend(!0,{},e.ajaxSettings,t,{contentType:!1,processData:!1,cache:!1,type:c||"POST"});t.uploadProgress&&(r.xhr=function(){var i=e.ajaxSettings.xhr();return i.upload&&i.upload.addEventListener("progress",function(e){var i=0,n=e.loaded||e.position,o=e.total;e.lengthComputable&&(i=Math.ceil(n/o*100)),t.uploadProgress(e,n,o,i)},!1),i}),r.data=null;var a=r.beforeSend;return r.beforeSend=function(e,i){t.formData?i.data=t.formData:i.data=n,a&&a.call(this,e,i)},e.ajax(r)}(v):e.ajax(t),h.removeData("jqxhr").data("jqxhr",A);for(var F=0;F<g.length;F++)g[F]=null;return this.trigger("form-submit-notify",[this,t]),this},e.fn.ajaxForm=function(o,s,r,a){if(("string"==typeof o||!1===o&&arguments.length>0)&&(o={url:o,data:s,dataType:r},"function"==typeof a&&(o.success=a)),(o=o||{}).delegation=o.delegation&&e.isFunction(e.fn.on),!o.delegation&&0===this.length){var l={s:this.selector,c:this.context};return!e.isReady&&l.s?(n("DOM not ready, queuing ajaxForm"),e(function(){e(l.s,l.c).ajaxForm(o)}),this):(n("terminating; zero elements found by selector"+(e.isReady?"":" (DOM not ready)")),this)}return o.delegation?(e(document).off("submit.form-plugin",this.selector,t).off("click.form-plugin",this.selector,i).on("submit.form-plugin",this.selector,o,t).on("click.form-plugin",this.selector,o,i),this):this.ajaxFormUnbind().on("submit.form-plugin",o,t).on("click.form-plugin",o,i)},e.fn.ajaxFormUnbind=function(){return this.off("submit.form-plugin click.form-plugin")},e.fn.formToArray=function(t,i,n){var o=[];if(0===this.length)return o;var r,a,l,c,u,d,h,p,f=this[0],m=this.attr("id"),g=t||void 0===f.elements?f.getElementsByTagName("*"):f.elements;if(g&&(g=e.makeArray(g)),m&&(t||/(Edge|Trident)\//.test(navigator.userAgent))&&(r=e(':input[form="'+m+'"]').get()).length&&(g=(g||[]).concat(r)),!g||!g.length)return o;for(e.isFunction(n)&&(g=e.map(g,n)),a=0,h=g.length;a<h;a++)if((c=(d=g[a]).name)&&!d.disabled)if(t&&f.clk&&"image"===d.type)f.clk===d&&(o.push({name:c,value:e(d).val(),type:d.type}),o.push({name:c+".x",value:f.clk_x},{name:c+".y",value:f.clk_y}));else if((u=e.fieldValue(d,!0))&&u.constructor===Array)for(i&&i.push(d),l=0,p=u.length;l<p;l++)o.push({name:c,value:u[l]});else if(s.fileapi&&"file"===d.type){i&&i.push(d);var v=d.files;if(v.length)for(l=0;l<v.length;l++)o.push({name:c,value:v[l],type:d.type});else o.push({name:c,value:"",type:d.type})}else null!==u&&void 0!==u&&(i&&i.push(d),o.push({name:c,value:u,type:d.type,required:d.required}));if(!t&&f.clk){var y=e(f.clk),b=y[0];(c=b.name)&&!b.disabled&&"image"===b.type&&(o.push({name:c,value:y.val()}),o.push({name:c+".x",value:f.clk_x},{name:c+".y",value:f.clk_y}))}return o},e.fn.formSerialize=function(t){return e.param(this.formToArray(t))},e.fn.fieldSerialize=function(t){var i=[];return this.each(function(){var n=this.name;if(n){var o=e.fieldValue(this,t);if(o&&o.constructor===Array)for(var s=0,r=o.length;s<r;s++)i.push({name:n,value:o[s]});else null!==o&&void 0!==o&&i.push({name:this.name,value:o})}}),e.param(i)},e.fn.fieldValue=function(t){for(var i=[],n=0,o=this.length;n<o;n++){var s=this[n],r=e.fieldValue(s,t);null===r||void 0===r||r.constructor===Array&&!r.length||(r.constructor===Array?e.merge(i,r):i.push(r))}return i},e.fieldValue=function(t,i){var n=t.name,s=t.type,r=t.tagName.toLowerCase();if(void 0===i&&(i=!0),i&&(!n||t.disabled||"reset"===s||"button"===s||("checkbox"===s||"radio"===s)&&!t.checked||("submit"===s||"image"===s)&&t.form&&t.form.clk!==t||"select"===r&&-1===t.selectedIndex))return null;if("select"===r){var a=t.selectedIndex;if(a<0)return null;for(var l=[],c=t.options,u="select-one"===s,d=u?a+1:c.length,h=u?a:0;h<d;h++){var p=c[h];if(p.selected&&!p.disabled){var f=p.value;if(f||(f=p.attributes&&p.attributes.value&&!p.attributes.value.specified?p.text:p.value),u)return f;l.push(f)}}return l}return e(t).val().replace(o,"\r\n")},e.fn.clearForm=function(t){return this.each(function(){e("input,select,textarea",this).clearFields(t)})},e.fn.clearFields=e.fn.clearInputs=function(t){var i=/^(?:color|date|datetime|email|month|number|password|range|search|tel|text|time|url|week)$/i;return this.each(function(){var n=this.type,o=this.tagName.toLowerCase();i.test(n)||"textarea"===o?this.value="":"checkbox"===n||"radio"===n?this.checked=!1:"select"===o?this.selectedIndex=-1:"file"===n?/MSIE/.test(navigator.userAgent)?e(this).replaceWith(e(this).clone(!0)):e(this).val(""):t&&(!0===t&&/hidden/.test(n)||"string"==typeof t&&e(this).is(t))&&(this.value="")})},e.fn.resetForm=function(){return this.each(function(){var t=e(this),i=this.tagName.toLowerCase();switch(i){case"input":this.checked=this.defaultChecked;case"textarea":return this.value=this.defaultValue,!0;case"option":case"optgroup":var n=t.parents("select");return n.length&&n[0].multiple?"option"===i?this.selected=this.defaultSelected:t.find("option").resetForm():n.resetForm(),!0;case"select":return t.find("option").each(function(e){if(this.selected=this.defaultSelected,this.defaultSelected&&!t[0].multiple)return t[0].selectedIndex=e,!1}),!0;case"label":var o=e(t.attr("for")),s=t.find("input,select,textarea");return o[0]&&s.unshift(o[0]),s.resetForm(),!0;case"form":return("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset(),!0;default:return t.find("form,input,label,select,textarea").resetForm(),!0}})},e.fn.enable=function(e){return void 0===e&&(e=!0),this.each(function(){this.disabled=!e})},e.fn.selected=function(t){return void 0===t&&(t=!0),this.each(function(){var i=this.type;if("checkbox"===i||"radio"===i)this.checked=t;else if("option"===this.tagName.toLowerCase()){var n=e(this).parent("select");t&&n[0]&&"select-one"===n[0].type&&n.find("option").selected(!1),this.selected=t}})},e.fn.ajaxSubmit.debug=!1},o=[i(1)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.widget("ui.dialog",{version:"1.12.1",options:{appendTo:"body",autoOpen:!0,buttons:[],classes:{"ui-dialog":"ui-corner-all","ui-dialog-titlebar":"ui-corner-all"},closeOnEscape:!0,closeText:"Close",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var i=e(this).css(t).offset().top;i<0&&e(this).css("top",t.top-i)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},sizeRelatedOptions:{buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},resizableRelatedOptions:{maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),null==this.options.title&&null!=this.originalTitle&&(this.options.title=this.originalTitle),this.options.disabled&&(this.options.disabled=!1),this._createWrapper(),this.element.show().removeAttr("title").appendTo(this.uiDialog),this._addClass("ui-dialog-content","ui-widget-content"),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1,this._trackFocus()},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._untrackInstance(),this._destroyOverlay(),this.element.removeUniqueId().css(this.originalCss).detach(),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),(e=t.parent.children().eq(t.index)).length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var i=this;this._isOpen&&!1!==this._trigger("beforeClose",t)&&(this._isOpen=!1,this._focusedElement=null,this._destroyOverlay(),this._untrackInstance(),this.opener.filter(":focusable").trigger("focus").length||e.ui.safeBlur(e.ui.safeActiveElement(this.document[0])),this._hide(this.uiDialog,this.options.hide,function(){i._trigger("close",t)}))},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(t,i){var n=!1,o=this.uiDialog.siblings(".ui-front:visible").map(function(){return+e(this).css("z-index")}).get(),s=Math.max.apply(null,o);return s>=+this.uiDialog.css("z-index")&&(this.uiDialog.css("z-index",s+1),n=!0),n&&!i&&this._trigger("focus",t),n},open:function(){var t=this;this._isOpen?this._moveToTop()&&this._focusTabbable():(this._isOpen=!0,this.opener=e(e.ui.safeActiveElement(this.document[0])),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this.overlay&&this.overlay.css("z-index",this.uiDialog.css("z-index")-1),this._show(this.uiDialog,this.options.show,function(){t._focusTabbable(),t._trigger("focus")}),this._makeFocusTarget(),this._trigger("open"))},_focusTabbable:function(){var e=this._focusedElement;e||(e=this.element.find("[autofocus]")),e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).trigger("focus")},_keepFocus:function(t){function i(){var t=e.ui.safeActiveElement(this.document[0]);this.uiDialog[0]===t||e.contains(this.uiDialog[0],t)||this._focusTabbable()}t.preventDefault(),i.call(this),this._delay(i)},_createWrapper:function(){this.uiDialog=e("<div>").hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._addClass(this.uiDialog,"ui-dialog","ui-widget ui-widget-content ui-front"),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE)return t.preventDefault(),void this.close(t);if(t.keyCode===e.ui.keyCode.TAB&&!t.isDefaultPrevented()){var i=this.uiDialog.find(":tabbable"),n=i.filter(":first"),o=i.filter(":last");t.target!==o[0]&&t.target!==this.uiDialog[0]||t.shiftKey?t.target!==n[0]&&t.target!==this.uiDialog[0]||!t.shiftKey||(this._delay(function(){o.trigger("focus")}),t.preventDefault()):(this._delay(function(){n.trigger("focus")}),t.preventDefault())}},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>"),this._addClass(this.uiDialogTitlebar,"ui-dialog-titlebar","ui-widget-header ui-helper-clearfix"),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.trigger("focus")}}),this.uiDialogTitlebarClose=e("<button type='button'></button>").button({label:e("<a>").text(this.options.closeText).html(),icon:"ui-icon-closethick",showLabel:!1}).appendTo(this.uiDialogTitlebar),this._addClass(this.uiDialogTitlebarClose,"ui-dialog-titlebar-close"),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().prependTo(this.uiDialogTitlebar),this._addClass(t,"ui-dialog-title"),this._title(t),this.uiDialogTitlebar.prependTo(this.uiDialog),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title?e.text(this.options.title):e.html("&#160;")},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>"),this._addClass(this.uiDialogButtonPane,"ui-dialog-buttonpane","ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").appendTo(this.uiDialogButtonPane),this._addClass(this.uiButtonSet,"ui-dialog-buttonset"),this._createButtons()},_createButtons:function(){var t=this,i=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),e.isEmptyObject(i)||e.isArray(i)&&!i.length?this._removeClass(this.uiDialog,"ui-dialog-buttons"):(e.each(i,function(i,n){var o,s;n=e.isFunction(n)?{click:n,text:i}:n,n=e.extend({type:"button"},n),o=n.click,s={icon:n.icon,iconPosition:n.iconPosition,showLabel:n.showLabel,icons:n.icons,text:n.text},delete n.click,delete n.icon,delete n.iconPosition,delete n.showLabel,delete n.icons,"boolean"==typeof n.text&&delete n.text,e("<button></button>",n).button(s).appendTo(t.uiButtonSet).on("click",function(){o.apply(t.element[0],arguments)})}),this._addClass(this.uiDialog,"ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog))},_makeDraggable:function(){var t=this,i=this.options;function n(e){return{position:e.position,offset:e.offset}}this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){t._addClass(e(this),"ui-dialog-dragging"),t._blockFrames(),t._trigger("dragStart",i,n(o))},drag:function(e,i){t._trigger("drag",e,n(i))},stop:function(o,s){var r=s.offset.left-t.document.scrollLeft(),a=s.offset.top-t.document.scrollTop();i.position={my:"left top",at:"left"+(r>=0?"+":"")+r+" top"+(a>=0?"+":"")+a,of:t.window},t._removeClass(e(this),"ui-dialog-dragging"),t._unblockFrames(),t._trigger("dragStop",o,n(s))}})},_makeResizable:function(){var t=this,i=this.options,n=i.resizable,o=this.uiDialog.css("position"),s="string"==typeof n?n:"n,e,s,w,se,sw,ne,nw";function r(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:i.maxWidth,maxHeight:i.maxHeight,minWidth:i.minWidth,minHeight:this._minHeight(),handles:s,start:function(i,n){t._addClass(e(this),"ui-dialog-resizing"),t._blockFrames(),t._trigger("resizeStart",i,r(n))},resize:function(e,i){t._trigger("resize",e,r(i))},stop:function(n,o){var s=t.uiDialog.offset(),a=s.left-t.document.scrollLeft(),l=s.top-t.document.scrollTop();i.height=t.uiDialog.height(),i.width=t.uiDialog.width(),i.position={my:"left top",at:"left"+(a>=0?"+":"")+a+" top"+(l>=0?"+":"")+l,of:t.window},t._removeClass(e(this),"ui-dialog-resizing"),t._unblockFrames(),t._trigger("resizeStop",n,r(o))}}).css("position",o)},_trackFocus:function(){this._on(this.widget(),{focusin:function(t){this._makeFocusTarget(),this._focusedElement=e(t.target)}})},_makeFocusTarget:function(){this._untrackInstance(),this._trackingInstances().unshift(this)},_untrackInstance:function(){var t=this._trackingInstances(),i=e.inArray(this,t);-1!==i&&t.splice(i,1)},_trackingInstances:function(){var e=this.document.data("ui-dialog-instances");return e||(e=[],this.document.data("ui-dialog-instances",e)),e},_minHeight:function(){var e=this.options;return"auto"===e.height?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,n=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in i.sizeRelatedOptions&&(n=!0),e in i.resizableRelatedOptions&&(o[e]=t)}),n&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(t,i){var n,o,s=this.uiDialog;"disabled"!==t&&(this._super(t,i),"appendTo"===t&&this.uiDialog.appendTo(this._appendTo()),"buttons"===t&&this._createButtons(),"closeText"===t&&this.uiDialogTitlebarClose.button({label:e("<a>").text(""+this.options.closeText).html()}),"draggable"===t&&((n=s.is(":data(ui-draggable)"))&&!i&&s.draggable("destroy"),!n&&i&&this._makeDraggable()),"position"===t&&this._position(),"resizable"===t&&((o=s.is(":data(ui-resizable)"))&&!i&&s.resizable("destroy"),o&&"string"==typeof i&&s.resizable("option","handles",i),o||!1===i||this._makeResizable()),"title"===t&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title")))},_size:function(){var e,t,i,n=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),t=Math.max(0,n.minHeight-e),i="number"==typeof n.maxHeight?Math.max(0,n.maxHeight-e):"none","auto"===n.height?this.element.css({minHeight:t,maxHeight:i,height:"auto"}):this.element.height(Math.max(0,n.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_blockFrames:function(){this.iframeBlocks=this.document.find("iframe").map(function(){var t=e(this);return e("<div>").css({position:"absolute",width:t.outerWidth(),height:t.outerHeight()}).appendTo(t.parent()).offset(t.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_allowInteraction:function(t){return!!e(t.target).closest(".ui-dialog").length||!!e(t.target).closest(".ui-datepicker").length},_createOverlay:function(){if(this.options.modal){var t=!0;this._delay(function(){t=!1}),this.document.data("ui-dialog-overlays")||this._on(this.document,{focusin:function(e){t||this._allowInteraction(e)||(e.preventDefault(),this._trackingInstances()[0]._focusTabbable())}}),this.overlay=e("<div>").appendTo(this._appendTo()),this._addClass(this.overlay,null,"ui-widget-overlay ui-front"),this._on(this.overlay,{mousedown:"_keepFocus"}),this.document.data("ui-dialog-overlays",(this.document.data("ui-dialog-overlays")||0)+1)}},_destroyOverlay:function(){if(this.options.modal&&this.overlay){var e=this.document.data("ui-dialog-overlays")-1;e?this.document.data("ui-dialog-overlays",e):(this._off(this.document,"focusin"),this.document.removeData("ui-dialog-overlays")),this.overlay.remove(),this.overlay=null}}}),!1!==e.uiBackCompat&&e.widget("ui.dialog",e.ui.dialog,{options:{dialogClass:""},_createWrapper:function(){this._super(),this.uiDialog.addClass(this.options.dialogClass)},_setOption:function(e,t){"dialogClass"===e&&this.uiDialog.removeClass(this.options.dialogClass).addClass(t),this._superApply(arguments)}}),e.ui.dialog},o=[i(1),i(38),i(7),i(6),i(44),i(31),i(10),i(48),i(30),i(28),i(46),i(47),i(3),i(5)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){var t;return e.widget("ui.button",{version:"1.12.1",defaultElement:"<button>",options:{classes:{"ui-button":"ui-corner-all"},disabled:null,icon:null,iconPosition:"beginning",label:null,showLabel:!0},_getCreateOptions:function(){var e,t=this._super()||{};return this.isInput=this.element.is("input"),null!=(e=this.element[0].disabled)&&(t.disabled=e),this.originalLabel=this.isInput?this.element.val():this.element.html(),this.originalLabel&&(t.label=this.originalLabel),t},_create:function(){!this.option.showLabel&!this.options.icon&&(this.options.showLabel=!0),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled||!1),this.hasTitle=!!this.element.attr("title"),this.options.label&&this.options.label!==this.originalLabel&&(this.isInput?this.element.val(this.options.label):this.element.html(this.options.label)),this._addClass("ui-button","ui-widget"),this._setOption("disabled",this.options.disabled),this._enhance(),this.element.is("a")&&this._on({keyup:function(t){t.keyCode===e.ui.keyCode.SPACE&&(t.preventDefault(),this.element[0].click?this.element[0].click():this.element.trigger("click"))}})},_enhance:function(){this.element.is("button")||this.element.attr("role","button"),this.options.icon&&(this._updateIcon("icon",this.options.icon),this._updateTooltip())},_updateTooltip:function(){this.title=this.element.attr("title"),this.options.showLabel||this.title||this.element.attr("title",this.options.label)},_updateIcon:function(t,i){var n="iconPosition"!==t,o=n?this.options.iconPosition:i,s="top"===o||"bottom"===o;this.icon?n&&this._removeClass(this.icon,null,this.options.icon):(this.icon=e("<span>"),this._addClass(this.icon,"ui-button-icon","ui-icon"),this.options.showLabel||this._addClass("ui-button-icon-only")),n&&this._addClass(this.icon,null,i),this._attachIcon(o),s?(this._addClass(this.icon,null,"ui-widget-icon-block"),this.iconSpace&&this.iconSpace.remove()):(this.iconSpace||(this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-button-icon-space")),this._removeClass(this.icon,null,"ui-wiget-icon-block"),this._attachIconSpace(o))},_destroy:function(){this.element.removeAttr("role"),this.icon&&this.icon.remove(),this.iconSpace&&this.iconSpace.remove(),this.hasTitle||this.element.removeAttr("title")},_attachIconSpace:function(e){this.icon[/^(?:end|bottom)/.test(e)?"before":"after"](this.iconSpace)},_attachIcon:function(e){this.element[/^(?:end|bottom)/.test(e)?"append":"prepend"](this.icon)},_setOptions:function(e){var t=void 0===e.showLabel?this.options.showLabel:e.showLabel,i=void 0===e.icon?this.options.icon:e.icon;t||i||(e.showLabel=!0),this._super(e)},_setOption:function(e,t){"icon"===e&&(t?this._updateIcon(e,t):this.icon&&(this.icon.remove(),this.iconSpace&&this.iconSpace.remove())),"iconPosition"===e&&this._updateIcon(e,t),"showLabel"===e&&(this._toggleClass("ui-button-icon-only",null,!t),this._updateTooltip()),"label"===e&&(this.isInput?this.element.val(t):(this.element.html(t),this.icon&&(this._attachIcon(this.options.iconPosition),this._attachIconSpace(this.options.iconPosition)))),this._super(e,t),"disabled"===e&&(this._toggleClass(null,"ui-state-disabled",t),this.element[0].disabled=t,t&&this.element.blur())},refresh:function(){var e=this.element.is("input, button")?this.element[0].disabled:this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOptions({disabled:e}),this._updateTooltip()}}),!1!==e.uiBackCompat&&(e.widget("ui.button",e.ui.button,{options:{text:!0,icons:{primary:null,secondary:null}},_create:function(){this.options.showLabel&&!this.options.text&&(this.options.showLabel=this.options.text),!this.options.showLabel&&this.options.text&&(this.options.text=this.options.showLabel),this.options.icon||!this.options.icons.primary&&!this.options.icons.secondary?this.options.icon&&(this.options.icons.primary=this.options.icon):this.options.icons.primary?this.options.icon=this.options.icons.primary:(this.options.icon=this.options.icons.secondary,this.options.iconPosition="end"),this._super()},_setOption:function(e,t){"text"!==e?("showLabel"===e&&(this.options.text=t),"icon"===e&&(this.options.icons.primary=t),"icons"===e&&(t.primary?(this._super("icon",t.primary),this._super("iconPosition","beginning")):t.secondary&&(this._super("icon",t.secondary),this._super("iconPosition","end"))),this._superApply(arguments)):this._super("showLabel",t)}}),e.fn.button=(t=e.fn.button,function(){return!this.length||this.length&&"INPUT"!==this[0].tagName||this.length&&"INPUT"===this[0].tagName&&"checkbox"!==this.attr("type")&&"radio"!==this.attr("type")?t.apply(this,arguments):(e.ui.checkboxradio||e.error("Checkboxradio widget missing"),0===arguments.length?this.checkboxradio({icon:!1}):this.checkboxradio.apply(this,arguments))}),e.fn.buttonset=function(){return e.ui.controlgroup||e.error("Controlgroup widget missing"),"option"===arguments[0]&&"items"===arguments[1]&&arguments[2]?this.controlgroup.apply(this,[arguments[0],"items.button",arguments[2]]):"option"===arguments[0]&&"items"===arguments[1]?this.controlgroup.apply(this,[arguments[0],"items.button"]):("object"==typeof arguments[0]&&arguments[0].items&&(arguments[0].items={button:arguments[0].items}),this.controlgroup.apply(this,arguments))}),e.ui.button},o=[i(1),i(39),i(40),i(10),i(5)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){var t=/ui-corner-([a-z]){2,6}/g;return e.widget("ui.controlgroup",{version:"1.12.1",defaultElement:"<div>",options:{direction:"horizontal",disabled:null,onlyVisible:!0,items:{button:"input[type=button], input[type=submit], input[type=reset], button, a",controlgroupLabel:".ui-controlgroup-label",checkboxradio:"input[type='checkbox'], input[type='radio']",selectmenu:"select",spinner:".ui-spinner-input"}},_create:function(){this._enhance()},_enhance:function(){this.element.attr("role","toolbar"),this.refresh()},_destroy:function(){this._callChildMethod("destroy"),this.childWidgets.removeData("ui-controlgroup-data"),this.element.removeAttr("role"),this.options.items.controlgroupLabel&&this.element.find(this.options.items.controlgroupLabel).find(".ui-controlgroup-label-contents").contents().unwrap()},_initWidgets:function(){var t=this,i=[];e.each(this.options.items,function(n,o){var s,r={};if(o)return"controlgroupLabel"===n?((s=t.element.find(o)).each(function(){var t=e(this);t.children(".ui-controlgroup-label-contents").length||t.contents().wrapAll("<span class='ui-controlgroup-label-contents'></span>")}),t._addClass(s,null,"ui-widget ui-widget-content ui-state-default"),void(i=i.concat(s.get()))):void(e.fn[n]&&(r=t["_"+n+"Options"]?t["_"+n+"Options"]("middle"):{classes:{}},t.element.find(o).each(function(){var o=e(this),s=o[n]("instance"),a=e.widget.extend({},r);if("button"!==n||!o.parent(".ui-spinner").length){s||(s=o[n]()[n]("instance")),s&&(a.classes=t._resolveClassesValues(a.classes,s)),o[n](a);var l=o[n]("widget");e.data(l[0],"ui-controlgroup-data",s||o[n]("instance")),i.push(l[0])}})))}),this.childWidgets=e(e.unique(i)),this._addClass(this.childWidgets,"ui-controlgroup-item")},_callChildMethod:function(t){this.childWidgets.each(function(){var i=e(this).data("ui-controlgroup-data");i&&i[t]&&i[t]()})},_updateCornerClass:function(e,t){var i=this._buildSimpleOptions(t,"label").classes.label;this._removeClass(e,null,"ui-corner-top ui-corner-bottom ui-corner-left ui-corner-right ui-corner-all"),this._addClass(e,null,i)},_buildSimpleOptions:function(e,t){var i="vertical"===this.options.direction,n={classes:{}};return n.classes[t]={middle:"",first:"ui-corner-"+(i?"top":"left"),last:"ui-corner-"+(i?"bottom":"right"),only:"ui-corner-all"}[e],n},_spinnerOptions:function(e){var t=this._buildSimpleOptions(e,"ui-spinner");return t.classes["ui-spinner-up"]="",t.classes["ui-spinner-down"]="",t},_buttonOptions:function(e){return this._buildSimpleOptions(e,"ui-button")},_checkboxradioOptions:function(e){return this._buildSimpleOptions(e,"ui-checkboxradio-label")},_selectmenuOptions:function(e){var t="vertical"===this.options.direction;return{width:!!t&&"auto",classes:{middle:{"ui-selectmenu-button-open":"","ui-selectmenu-button-closed":""},first:{"ui-selectmenu-button-open":"ui-corner-"+(t?"top":"tl"),"ui-selectmenu-button-closed":"ui-corner-"+(t?"top":"left")},last:{"ui-selectmenu-button-open":t?"":"ui-corner-tr","ui-selectmenu-button-closed":"ui-corner-"+(t?"bottom":"right")},only:{"ui-selectmenu-button-open":"ui-corner-top","ui-selectmenu-button-closed":"ui-corner-all"}}[e]}},_resolveClassesValues:function(i,n){var o={};return e.each(i,function(s){var r=n.options.classes[s]||"";r=e.trim(r.replace(t,"")),o[s]=(r+" "+i[s]).replace(/\s+/g," ")}),o},_setOption:function(e,t){"direction"===e&&this._removeClass("ui-controlgroup-"+this.options.direction),this._super(e,t),"disabled"!==e?this.refresh():this._callChildMethod(t?"disable":"enable")},refresh:function(){var t,i=this;this._addClass("ui-controlgroup ui-controlgroup-"+this.options.direction),"horizontal"===this.options.direction&&this._addClass(null,"ui-helper-clearfix"),this._initWidgets(),t=this.childWidgets,this.options.onlyVisible&&(t=t.filter(":visible")),t.length&&(e.each(["first","last"],function(e,n){var o=t[n]().data("ui-controlgroup-data");if(o&&i["_"+o.widgetName+"Options"]){var s=i["_"+o.widgetName+"Options"](1===t.length?"only":n);s.classes=i._resolveClassesValues(s.classes,o),o.element[o.widgetName](s)}else i._updateCornerClass(t[n](),n)}),this._callChildMethod("refresh"))}})},o=[i(1),i(5)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.widget("ui.checkboxradio",[e.ui.formResetMixin,{version:"1.12.1",options:{disabled:null,label:null,icon:!0,classes:{"ui-checkboxradio-label":"ui-corner-all","ui-checkboxradio-icon":"ui-corner-all"}},_getCreateOptions:function(){var t,i,n=this,o=this._super()||{};return this._readType(),i=this.element.labels(),this.label=e(i[i.length-1]),this.label.length||e.error("No label found for checkboxradio widget"),this.originalLabel="",this.label.contents().not(this.element[0]).each(function(){n.originalLabel+=3===this.nodeType?e(this).text():this.outerHTML}),this.originalLabel&&(o.label=this.originalLabel),null!=(t=this.element[0].disabled)&&(o.disabled=t),o},_create:function(){var e=this.element[0].checked;this._bindFormResetHandler(),null==this.options.disabled&&(this.options.disabled=this.element[0].disabled),this._setOption("disabled",this.options.disabled),this._addClass("ui-checkboxradio","ui-helper-hidden-accessible"),this._addClass(this.label,"ui-checkboxradio-label","ui-button ui-widget"),"radio"===this.type&&this._addClass(this.label,"ui-checkboxradio-radio-label"),this.options.label&&this.options.label!==this.originalLabel?this._updateLabel():this.originalLabel&&(this.options.label=this.originalLabel),this._enhance(),e&&(this._addClass(this.label,"ui-checkboxradio-checked","ui-state-active"),this.icon&&this._addClass(this.icon,null,"ui-state-hover")),this._on({change:"_toggleClasses",focus:function(){this._addClass(this.label,null,"ui-state-focus ui-visual-focus")},blur:function(){this._removeClass(this.label,null,"ui-state-focus ui-visual-focus")}})},_readType:function(){var t=this.element[0].nodeName.toLowerCase();this.type=this.element[0].type,"input"===t&&/radio|checkbox/.test(this.type)||e.error("Can't create checkboxradio on element.nodeName="+t+" and element.type="+this.type)},_enhance:function(){this._updateIcon(this.element[0].checked)},widget:function(){return this.label},_getRadioGroup:function(){var t=this.element[0].name,i="input[name='"+e.ui.escapeSelector(t)+"']";return t?(this.form.length?e(this.form[0].elements).filter(i):e(i).filter(function(){return 0===e(this).form().length})).not(this.element):e([])},_toggleClasses:function(){var t=this.element[0].checked;this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",t),this.options.icon&&"checkbox"===this.type&&this._toggleClass(this.icon,null,"ui-icon-check ui-state-checked",t)._toggleClass(this.icon,null,"ui-icon-blank",!t),"radio"===this.type&&this._getRadioGroup().each(function(){var t=e(this).checkboxradio("instance");t&&t._removeClass(t.label,"ui-checkboxradio-checked","ui-state-active")})},_destroy:function(){this._unbindFormResetHandler(),this.icon&&(this.icon.remove(),this.iconSpace.remove())},_setOption:function(e,t){if("label"!==e||t){if(this._super(e,t),"disabled"===e)return this._toggleClass(this.label,null,"ui-state-disabled",t),void(this.element[0].disabled=t);this.refresh()}},_updateIcon:function(t){var i="ui-icon ui-icon-background ";this.options.icon?(this.icon||(this.icon=e("<span>"),this.iconSpace=e("<span> </span>"),this._addClass(this.iconSpace,"ui-checkboxradio-icon-space")),"checkbox"===this.type?(i+=t?"ui-icon-check ui-state-checked":"ui-icon-blank",this._removeClass(this.icon,null,t?"ui-icon-blank":"ui-icon-check")):i+="ui-icon-blank",this._addClass(this.icon,"ui-checkboxradio-icon",i),t||this._removeClass(this.icon,null,"ui-icon-check ui-state-checked"),this.icon.prependTo(this.label).after(this.iconSpace)):void 0!==this.icon&&(this.icon.remove(),this.iconSpace.remove(),delete this.icon)},_updateLabel:function(){var e=this.label.contents().not(this.element[0]);this.icon&&(e=e.not(this.icon[0])),this.iconSpace&&(e=e.not(this.iconSpace[0])),e.remove(),this.label.append(this.options.label)},refresh:function(){var e=this.element[0].checked,t=this.element[0].disabled;this._updateIcon(e),this._toggleClass(this.label,"ui-checkboxradio-checked","ui-state-active",e),null!==this.options.label&&this._updateLabel(),t!==this.options.disabled&&this._setOptions({disabled:t})}}]),e.ui.checkboxradio},o=[i(1),i(24),i(41),i(43),i(5)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.ui.formResetMixin={_formResetHandler:function(){var t=e(this);setTimeout(function(){var i=t.data("ui-form-reset-instances");e.each(i,function(){this.refresh()})})},_bindFormResetHandler:function(){if(this.form=this.element.form(),this.form.length){var e=this.form.data("ui-form-reset-instances")||[];e.length||this.form.on("reset.ui-form-reset",this._formResetHandler),e.push(this),this.form.data("ui-form-reset-instances",e)}},_unbindFormResetHandler:function(){if(this.form.length){var t=this.form.data("ui-form-reset-instances");t.splice(e.inArray(this,t),1),t.length?this.form.data("ui-form-reset-instances",t):this.form.removeData("ui-form-reset-instances").off("reset.ui-form-reset")}}}},o=[i(1),i(42),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.fn.form=function(){return"string"==typeof this[0].form?this.closest("form"):e(this[0].form)}},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.fn.labels=function(){var t,i,n,o,s;return this[0].labels&&this[0].labels.length?this.pushStack(this[0].labels):(o=this.eq(0).parents("label"),(n=this.attr("id"))&&(s=(t=this.eq(0).parents().last()).add(t.length?t.siblings():this.siblings()),i="label[for='"+e.ui.escapeSelector(n)+"']",o=o.add(s.find(i).addBack(i))),this.pushStack(o))}},o=[i(1),i(3),i(24)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.widget("ui.resizable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,classes:{"ui-resizable-se":"ui-icon ui-icon-gripsmall-diagonal-se"},containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_num:function(e){return parseFloat(e)||0},_isNumber:function(e){return!isNaN(parseFloat(e))},_hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n,o=i&&"left"===i?"scrollLeft":"scrollTop";return t[o]>0||(t[o]=1,n=t[o]>0,t[o]=0,n)},_create:function(){var t,i=this.options,n=this;this._addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/^(canvas|textarea|input|select|button|img)$/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.resizable("instance")),this.elementIsWrapper=!0,t={marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom"),marginLeft:this.originalElement.css("marginLeft")},this.element.css(t),this.originalElement.css("margin",0),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css(t),this._proportionallyResize()),this._setupHandles(),i.autoHide&&e(this.element).on("mouseenter",function(){i.disabled||(n._removeClass("ui-resizable-autohide"),n._handles.show())}).on("mouseleave",function(){i.disabled||n.resizing||(n._addClass("ui-resizable-autohide"),n._handles.hide())}),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,i=function(t){e(t).removeData("resizable").removeData("ui-resizable").off(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(i(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),i(this.originalElement),this},_setOption:function(e,t){switch(this._super(e,t),e){case"handles":this._removeHandles(),this._setupHandles()}},_setupHandles:function(){var t,i,n,o,s,r=this.options,a=this;if(this.handles=r.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this._handles=e(),this.handles.constructor===String)for("all"===this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw"),n=this.handles.split(","),this.handles={},i=0;i<n.length;i++)o="ui-resizable-"+(t=e.trim(n[i])),s=e("<div>"),this._addClass(s,"ui-resizable-handle "+o),s.css({zIndex:r.zIndex}),this.handles[t]=".ui-resizable-"+t,this.element.append(s);this._renderAxis=function(t){var i,n,o,s;for(i in t=t||this.element,this.handles)this.handles[i].constructor===String?this.handles[i]=this.element.children(this.handles[i]).first().show():(this.handles[i].jquery||this.handles[i].nodeType)&&(this.handles[i]=e(this.handles[i]),this._on(this.handles[i],{mousedown:a._mouseDown})),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/^(textarea|input|select|button)$/i)&&(n=e(this.handles[i],this.element),s=/sw|ne|nw|se|n|s/.test(i)?n.outerHeight():n.outerWidth(),o=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join(""),t.css(o,s),this._proportionallyResize()),this._handles=this._handles.add(this.handles[i])},this._renderAxis(this.element),this._handles=this._handles.add(this.element.find(".ui-resizable-handle")),this._handles.disableSelection(),this._handles.on("mouseover",function(){a.resizing||(this.className&&(s=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),a.axis=s&&s[1]?s[1]:"se")}),r.autoHide&&(this._handles.hide(),this._addClass("ui-resizable-autohide"))},_removeHandles:function(){this._handles.remove()},_mouseCapture:function(t){var i,n,o=!1;for(i in this.handles)((n=e(this.handles[i])[0])===t.target||e.contains(n,t.target))&&(o=!0);return!this.options.disabled&&o},_mouseStart:function(t){var i,n,o,s=this.options,r=this.element;return this.resizing=!0,this._renderProxy(),i=this._num(this.helper.css("left")),n=this._num(this.helper.css("top")),s.containment&&(i+=e(s.containment).scrollLeft()||0,n+=e(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:i,top:n},this.size=this._helper?{width:this.helper.width(),height:this.helper.height()}:{width:r.width(),height:r.height()},this.originalSize=this._helper?{width:r.outerWidth(),height:r.outerHeight()}:{width:r.width(),height:r.height()},this.sizeDiff={width:r.outerWidth()-r.width(),height:r.outerHeight()-r.height()},this.originalPosition={left:i,top:n},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1,o=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor","auto"===o?this.axis+"-resize":o),this._addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var i,n,o=this.originalMousePosition,s=this.axis,r=t.pageX-o.left||0,a=t.pageY-o.top||0,l=this._change[s];return this._updatePrevProperties(),!!l&&(i=l.apply(this,[t,r,a]),this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(i=this._updateRatio(i,t)),i=this._respectSize(i,t),this._updateCache(i),this._propagate("resize",t),n=this._applyChanges(),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(n)||(this._updatePrevProperties(),this._trigger("resize",t,this.ui()),this._applyChanges()),!1)},_mouseStop:function(t){this.resizing=!1;var i,n,o,s,r,a,l,c=this.options;return this._helper&&(o=(n=(i=this._proportionallyResizeElements).length&&/textarea/i.test(i[0].nodeName))&&this._hasScroll(i[0],"left")?0:this.sizeDiff.height,s=n?0:this.sizeDiff.width,r={width:this.helper.width()-s,height:this.helper.height()-o},a=parseFloat(this.element.css("left"))+(this.position.left-this.originalPosition.left)||null,l=parseFloat(this.element.css("top"))+(this.position.top-this.originalPosition.top)||null,c.animate||this.element.css(e.extend(r,{top:l,left:a})),this.helper.height(this.size.height),this.helper.width(this.size.width),this._helper&&!c.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this._removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updatePrevProperties:function(){this.prevPosition={top:this.position.top,left:this.position.left},this.prevSize={width:this.size.width,height:this.size.height}},_applyChanges:function(){var e={};return this.position.top!==this.prevPosition.top&&(e.top=this.position.top+"px"),this.position.left!==this.prevPosition.left&&(e.left=this.position.left+"px"),this.size.width!==this.prevSize.width&&(e.width=this.size.width+"px"),this.size.height!==this.prevSize.height&&(e.height=this.size.height+"px"),this.helper.css(e),e},_updateVirtualBoundaries:function(e){var t,i,n,o,s,r=this.options;s={minWidth:this._isNumber(r.minWidth)?r.minWidth:0,maxWidth:this._isNumber(r.maxWidth)?r.maxWidth:1/0,minHeight:this._isNumber(r.minHeight)?r.minHeight:0,maxHeight:this._isNumber(r.maxHeight)?r.maxHeight:1/0},(this._aspectRatio||e)&&(t=s.minHeight*this.aspectRatio,n=s.minWidth/this.aspectRatio,i=s.maxHeight*this.aspectRatio,o=s.maxWidth/this.aspectRatio,t>s.minWidth&&(s.minWidth=t),n>s.minHeight&&(s.minHeight=n),i<s.maxWidth&&(s.maxWidth=i),o<s.maxHeight&&(s.maxHeight=o)),this._vBoundaries=s},_updateCache:function(e){this.offset=this.helper.offset(),this._isNumber(e.left)&&(this.position.left=e.left),this._isNumber(e.top)&&(this.position.top=e.top),this._isNumber(e.height)&&(this.size.height=e.height),this._isNumber(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,i=this.size,n=this.axis;return this._isNumber(e.height)?e.width=e.height*this.aspectRatio:this._isNumber(e.width)&&(e.height=e.width/this.aspectRatio),"sw"===n&&(e.left=t.left+(i.width-e.width),e.top=null),"nw"===n&&(e.top=t.top+(i.height-e.height),e.left=t.left+(i.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,i=this.axis,n=this._isNumber(e.width)&&t.maxWidth&&t.maxWidth<e.width,o=this._isNumber(e.height)&&t.maxHeight&&t.maxHeight<e.height,s=this._isNumber(e.width)&&t.minWidth&&t.minWidth>e.width,r=this._isNumber(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,l=this.originalPosition.top+this.originalSize.height,c=/sw|nw|w/.test(i),u=/nw|ne|n/.test(i);return s&&(e.width=t.minWidth),r&&(e.height=t.minHeight),n&&(e.width=t.maxWidth),o&&(e.height=t.maxHeight),s&&c&&(e.left=a-t.minWidth),n&&c&&(e.left=a-t.maxWidth),r&&u&&(e.top=l-t.minHeight),o&&u&&(e.top=l-t.maxHeight),e.width||e.height||e.left||!e.top?e.width||e.height||e.top||!e.left||(e.left=null):e.top=null,e},_getPaddingPlusBorderDimensions:function(e){for(var t=0,i=[],n=[e.css("borderTopWidth"),e.css("borderRightWidth"),e.css("borderBottomWidth"),e.css("borderLeftWidth")],o=[e.css("paddingTop"),e.css("paddingRight"),e.css("paddingBottom"),e.css("paddingLeft")];t<4;t++)i[t]=parseFloat(n[t])||0,i[t]+=parseFloat(o[t])||0;return{height:i[0]+i[2],width:i[1]+i[3]}},_proportionallyResize:function(){if(this._proportionallyResizeElements.length)for(var e,t=0,i=this.helper||this.element;t<this._proportionallyResizeElements.length;t++)e=this._proportionallyResizeElements[t],this.outerDimensions||(this.outerDimensions=this._getPaddingPlusBorderDimensions(e)),e.css({height:i.height()-this.outerDimensions.height||0,width:i.width()-this.outerDimensions.width||0})},_renderProxy:function(){var t=this.element,i=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this._addClass(this.helper,this._helper),this.helper.css({width:this.element.outerWidth(),height:this.element.outerHeight(),position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=this.originalSize;return{left:this.originalPosition.left+t,width:i.width-t}},n:function(e,t,i){var n=this.originalSize;return{top:this.originalPosition.top+i,height:n.height-i}},s:function(e,t,i){return{height:this.originalSize.height+i}},se:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},sw:function(t,i,n){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,i,n]))},ne:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,i,n]))},nw:function(t,i,n){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,i,n]))}},_propagate:function(t,i){e.ui.plugin.call(this,t,[i,this.ui()]),"resize"!==t&&this._trigger(t,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var i=e(this).resizable("instance"),n=i.options,o=i._proportionallyResizeElements,s=o.length&&/textarea/i.test(o[0].nodeName),r=s&&i._hasScroll(o[0],"left")?0:i.sizeDiff.height,a=s?0:i.sizeDiff.width,l={width:i.size.width-a,height:i.size.height-r},c=parseFloat(i.element.css("left"))+(i.position.left-i.originalPosition.left)||null,u=parseFloat(i.element.css("top"))+(i.position.top-i.originalPosition.top)||null;i.element.animate(e.extend(l,u&&c?{top:u,left:c}:{}),{duration:n.animateDuration,easing:n.animateEasing,step:function(){var n={width:parseFloat(i.element.css("width")),height:parseFloat(i.element.css("height")),top:parseFloat(i.element.css("top")),left:parseFloat(i.element.css("left"))};o&&o.length&&e(o[0]).css({width:n.width,height:n.height}),i._updateCache(n),i._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,i,n,o,s,r,a,l=e(this).resizable("instance"),c=l.options,u=l.element,d=c.containment,h=d instanceof e?d.get(0):/parent/.test(d)?u.parent().get(0):d;h&&(l.containerElement=e(h),/document/.test(d)||d===document?(l.containerOffset={left:0,top:0},l.containerPosition={left:0,top:0},l.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(h),i=[],e(["Top","Right","Left","Bottom"]).each(function(e,n){i[e]=l._num(t.css("padding"+n))}),l.containerOffset=t.offset(),l.containerPosition=t.position(),l.containerSize={height:t.innerHeight()-i[3],width:t.innerWidth()-i[1]},n=l.containerOffset,o=l.containerSize.height,s=l.containerSize.width,r=l._hasScroll(h,"left")?h.scrollWidth:s,a=l._hasScroll(h)?h.scrollHeight:o,l.parentData={element:h,left:n.left,top:n.top,width:r,height:a}))},resize:function(t){var i,n,o,s,r=e(this).resizable("instance"),a=r.options,l=r.containerOffset,c=r.position,u=r._aspectRatio||t.shiftKey,d={top:0,left:0},h=r.containerElement,p=!0;h[0]!==document&&/static/.test(h.css("position"))&&(d=l),c.left<(r._helper?l.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-l.left:r.position.left-d.left),u&&(r.size.height=r.size.width/r.aspectRatio,p=!1),r.position.left=a.helper?l.left:0),c.top<(r._helper?l.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-l.top:r.position.top),u&&(r.size.width=r.size.height*r.aspectRatio,p=!1),r.position.top=r._helper?l.top:0),o=r.containerElement.get(0)===r.element.parent().get(0),s=/relative|absolute/.test(r.containerElement.css("position")),o&&s?(r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top):(r.offset.left=r.element.offset().left,r.offset.top=r.element.offset().top),i=Math.abs(r.sizeDiff.width+(r._helper?r.offset.left-d.left:r.offset.left-l.left)),n=Math.abs(r.sizeDiff.height+(r._helper?r.offset.top-d.top:r.offset.top-l.top)),i+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-i,u&&(r.size.height=r.size.width/r.aspectRatio,p=!1)),n+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-n,u&&(r.size.width=r.size.height*r.aspectRatio,p=!1)),p||(r.position.left=r.prevPosition.left,r.position.top=r.prevPosition.top,r.size.width=r.prevSize.width,r.size.height=r.prevSize.height)},stop:function(){var t=e(this).resizable("instance"),i=t.options,n=t.containerOffset,o=t.containerPosition,s=t.containerElement,r=e(t.helper),a=r.offset(),l=r.outerWidth()-t.sizeDiff.width,c=r.outerHeight()-t.sizeDiff.height;t._helper&&!i.animate&&/relative/.test(s.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c}),t._helper&&!i.animate&&/static/.test(s.css("position"))&&e(this).css({left:a.left-o.left-n.left,width:l,height:c})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).resizable("instance").options;e(t.alsoResize).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseFloat(t.width()),height:parseFloat(t.height()),left:parseFloat(t.css("left")),top:parseFloat(t.css("top"))})})},resize:function(t,i){var n=e(this).resizable("instance"),o=n.options,s=n.originalSize,r=n.originalPosition,a={height:n.size.height-s.height||0,width:n.size.width-s.width||0,top:n.position.top-r.top||0,left:n.position.left-r.left||0};e(o.alsoResize).each(function(){var t=e(this),n=e(this).data("ui-resizable-alsoresize"),o={},s=t.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(s,function(e,t){var i=(n[t]||0)+(a[t]||0);i&&i>=0&&(o[t]=i||null)}),t.css(o)})},stop:function(){e(this).removeData("ui-resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).resizable("instance"),i=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:i.height,width:i.width,margin:0,left:0,top:0}),t._addClass(t.ghost,"ui-resizable-ghost"),!1!==e.uiBackCompat&&"string"==typeof t.options.ghost&&t.ghost.addClass(this.options.ghost),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).resizable("instance");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).resizable("instance");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t,i=e(this).resizable("instance"),n=i.options,o=i.size,s=i.originalSize,r=i.originalPosition,a=i.axis,l="number"==typeof n.grid?[n.grid,n.grid]:n.grid,c=l[0]||1,u=l[1]||1,d=Math.round((o.width-s.width)/c)*c,h=Math.round((o.height-s.height)/u)*u,p=s.width+d,f=s.height+h,m=n.maxWidth&&n.maxWidth<p,g=n.maxHeight&&n.maxHeight<f,v=n.minWidth&&n.minWidth>p,y=n.minHeight&&n.minHeight>f;n.grid=l,v&&(p+=c),y&&(f+=u),m&&(p-=c),g&&(f-=u),/^(se|s|e)$/.test(a)?(i.size.width=p,i.size.height=f):/^(ne)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.top=r.top-h):/^(sw)$/.test(a)?(i.size.width=p,i.size.height=f,i.position.left=r.left-d):((f-u<=0||p-c<=0)&&(t=i._getPaddingPlusBorderDimensions(this)),f-u>0?(i.size.height=f,i.position.top=r.top-h):(f=u-t.height,i.size.height=f,i.position.top=r.top+s.height-f),p-c>0?(i.size.width=p,i.position.left=r.left-d):(p=c-t.width,i.size.width=p,i.position.left=r.left+s.width-p))}}),e.ui.resizable},o=[i(1),i(6),i(45),i(27),i(3),i(5)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.fn.extend({disableSelection:(t="onselectstart"in document.createElement("div")?"selectstart":"mousedown",function(){return this.on(t+".ui-disableSelection",function(e){e.preventDefault()})}),enableSelection:function(){return this.off(".ui-disableSelection")}});var t},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.extend(e.expr[":"],{tabbable:function(t){var i=e.attr(t,"tabindex"),n=null!=i;return(!n||i>=0)&&e.ui.focusable(t,n)}})},o=[i(1),i(3),i(31)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.fn.extend({uniqueId:(t=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}});var t},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return function(){var t,i=Math.max,n=Math.abs,o=/left|center|right/,s=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=e.fn.position;function u(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function d(t,i){return parseInt(e.css(t,i),10)||0}e.position={scrollbarWidth:function(){if(void 0!==t)return t;var i,n,o=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=o.children()[0];return e("body").append(o),i=s.offsetWidth,o.css("overflow","scroll"),i===(n=s.offsetWidth)&&(n=o[0].clientWidth),o.remove(),t=i-n},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:!n&&!o?e(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var l,h,p,f,m,g,v,y,b=e(t.of),C=e.position.getWithinInfo(t.within),_=e.position.getScrollInfo(C),D=(t.collision||"flip").split(" "),w={};return g=9===(y=(v=b)[0]).nodeType?{width:v.width(),height:v.height(),offset:{top:0,left:0}}:e.isWindow(y)?{width:v.width(),height:v.height(),offset:{top:v.scrollTop(),left:v.scrollLeft()}}:y.preventDefault?{width:0,height:0,offset:{top:y.pageY,left:y.pageX}}:{width:v.outerWidth(),height:v.outerHeight(),offset:v.offset()},b[0].preventDefault&&(t.at="left top"),h=g.width,p=g.height,f=g.offset,m=e.extend({},f),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=s.test(n[1])?n[1]:"center",e=r.exec(n[0]),i=r.exec(n[1]),w[this]=[e?e[0]:0,i?i[0]:0],t[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]}),1===D.length&&(D[1]=D[0]),"right"===t.at[0]?m.left+=h:"center"===t.at[0]&&(m.left+=h/2),"bottom"===t.at[1]?m.top+=p:"center"===t.at[1]&&(m.top+=p/2),l=u(w.at,h,p),m.left+=l[0],m.top+=l[1],this.each(function(){var o,s,r=e(this),a=r.outerWidth(),c=r.outerHeight(),g=d(this,"marginLeft"),v=d(this,"marginTop"),y=a+g+d(this,"marginRight")+_.width,x=c+v+d(this,"marginBottom")+_.height,k=e.extend({},m),E=u(w.my,r.outerWidth(),r.outerHeight());"right"===t.my[0]?k.left-=a:"center"===t.my[0]&&(k.left-=a/2),"bottom"===t.my[1]?k.top-=c:"center"===t.my[1]&&(k.top-=c/2),k.left+=E[0],k.top+=E[1],o={marginLeft:g,marginTop:v},e.each(["left","top"],function(i,n){e.ui.position[D[i]]&&e.ui.position[D[i]][n](k,{targetWidth:h,targetHeight:p,elemWidth:a,elemHeight:c,collisionPosition:o,collisionWidth:y,collisionHeight:x,offset:[l[0]+E[0],l[1]+E[1]],my:t.my,at:t.at,within:C,elem:r})}),t.using&&(s=function(e){var o=f.left-k.left,s=o+h-a,l=f.top-k.top,u=l+p-c,d={target:{element:b,left:f.left,top:f.top,width:h,height:p},element:{element:r,left:k.left,top:k.top,width:a,height:c},horizontal:s<0?"left":o>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};h<a&&n(o+s)<h&&(d.horizontal="center"),p<c&&n(l+u)<p&&(d.vertical="middle"),i(n(o),n(s))>i(n(l),n(u))?d.important="horizontal":d.important="vertical",t.using.call(this,e,d)}),r.offset(e.extend(k,{using:s}))})},e.ui.position={fit:{left:function(e,t){var n,o=t.within,s=o.isWindow?o.scrollLeft:o.offset.left,r=o.width,a=e.left-t.collisionPosition.marginLeft,l=s-a,c=a+t.collisionWidth-r-s;t.collisionWidth>r?l>0&&c<=0?(n=e.left+l+t.collisionWidth-r-s,e.left+=l-n):e.left=c>0&&l<=0?s:l>c?s+r-t.collisionWidth:s:l>0?e.left+=l:c>0?e.left-=c:e.left=i(e.left-a,e.left)},top:function(e,t){var n,o=t.within,s=o.isWindow?o.scrollTop:o.offset.top,r=t.within.height,a=e.top-t.collisionPosition.marginTop,l=s-a,c=a+t.collisionHeight-r-s;t.collisionHeight>r?l>0&&c<=0?(n=e.top+l+t.collisionHeight-r-s,e.top+=l-n):e.top=c>0&&l<=0?s:l>c?s+r-t.collisionHeight:s:l>0?e.top+=l:c>0?e.top-=c:e.top=i(e.top-a,e.top)}},flip:{left:function(e,t){var i,o,s=t.within,r=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];u<0?((i=e.left+h+p+f+t.collisionWidth-a-r)<0||i<n(u))&&(e.left+=h+p+f):d>0&&((o=e.left-t.collisionPosition.marginLeft+h+p+f-l)>0||n(o)<d)&&(e.left+=h+p+f)},top:function(e,t){var i,o,s=t.within,r=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-a-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];u<0?((o=e.top+h+p+f+t.collisionHeight-a-r)<0||o<n(u))&&(e.top+=h+p+f):d>0&&((i=e.top-t.collisionPosition.marginTop+h+p+f-l)>0||n(i)<d)&&(e.top+=h+p+f)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}(),e.ui.position},o=[i(1),i(3)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){var t;function i(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.regional.en=e.extend(!0,{},this.regional[""]),this.regional["en-US"]=e.extend(!0,{},this.regional.en),this.dpDiv=n(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function n(t){var i="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.on("mouseout",i,function(){e(this).removeClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).removeClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).removeClass("ui-datepicker-next-hover")}).on("mouseover",i,o)}function o(){e.datepicker._isDisabledDatepicker(t.inline?t.dpDiv.parent()[0]:t.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),-1!==this.className.indexOf("ui-datepicker-prev")&&e(this).addClass("ui-datepicker-prev-hover"),-1!==this.className.indexOf("ui-datepicker-next")&&e(this).addClass("ui-datepicker-next-hover"))}function s(t,i){for(var n in e.extend(t,i),i)null==i[n]&&(t[n]=i[n]);return t}return e.extend(e.ui,{datepicker:{version:"1.12.1"}}),e.extend(i.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return s(this._defaults,e||{}),this},_attachDatepicker:function(t,i){var n,o,s;o="div"===(n=t.nodeName.toLowerCase())||"span"===n,t.id||(this.uuid+=1,t.id="dp"+this.uuid),(s=this._newInst(e(t),o)).settings=e.extend({},i||{}),"input"===n?this._connectDatepicker(t,s):o&&this._inlineDatepicker(t,s)},_newInst:function(t,i){return{id:t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:i,dpDiv:i?n(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,i){var n=e(t);i.append=e([]),i.trigger=e([]),n.hasClass(this.markerClassName)||(this._attachments(n,i),n.addClass(this.markerClassName).on("keydown",this._doKeyDown).on("keypress",this._doKeyPress).on("keyup",this._doKeyUp),this._autoSize(i),e.data(t,"datepicker",i),i.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,i){var n,o,s,r=this._get(i,"appendText"),a=this._get(i,"isRTL");i.append&&i.append.remove(),r&&(i.append=e("<span class='"+this._appendClass+"'>"+r+"</span>"),t[a?"before":"after"](i.append)),t.off("focus",this._showDatepicker),i.trigger&&i.trigger.remove(),"focus"!==(n=this._get(i,"showOn"))&&"both"!==n||t.on("focus",this._showDatepicker),"button"!==n&&"both"!==n||(o=this._get(i,"buttonText"),s=this._get(i,"buttonImage"),i.trigger=e(this._get(i,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:o,title:o}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:o,title:o}):o)),t[a?"before":"after"](i.trigger),i.trigger.on("click",function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1}))},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,i,n,o,s=new Date(2009,11,20),r=this._get(e,"dateFormat");r.match(/[DM]/)&&(t=function(e){for(i=0,n=0,o=0;o<e.length;o++)e[o].length>i&&(i=e[o].length,n=o);return n},s.setMonth(t(this._get(e,r.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,r.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,i){var n=e(t);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(i.dpDiv),e.data(t,"datepicker",i),this._setDate(i,this._getDefaultDate(i),!0),this._updateDatepicker(i),this._updateAlternate(i),i.settings.disabled&&this._disableDatepicker(t),i.dpDiv.css("display","block"))},_dialogDatepicker:function(t,i,n,o,r){var a,l,c,u,d,h=this._dialogInst;return h||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.on("keydown",this._doKeyDown),e("body").append(this._dialogInput),(h=this._dialogInst=this._newInst(this._dialogInput,!1)).settings={},e.data(this._dialogInput[0],"datepicker",h)),s(h.settings,o||{}),i=i&&i.constructor===Date?this._formatDate(h,i):i,this._dialogInput.val(i),this._pos=r?r.length?r:[r.pageX,r.pageY]:null,this._pos||(l=document.documentElement.clientWidth,c=document.documentElement.clientHeight,u=document.documentElement.scrollLeft||document.body.scrollLeft,d=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[l/2-100+u,c/2-150+d]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),h.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],"datepicker",h),this},_destroyDatepicker:function(i){var n,o=e(i),s=e.data(i,"datepicker");o.hasClass(this.markerClassName)&&(n=i.nodeName.toLowerCase(),e.removeData(i,"datepicker"),"input"===n?(s.append.remove(),s.trigger.remove(),o.removeClass(this.markerClassName).off("focus",this._showDatepicker).off("keydown",this._doKeyDown).off("keypress",this._doKeyPress).off("keyup",this._doKeyUp)):"div"!==n&&"span"!==n||o.removeClass(this.markerClassName).empty(),t===s&&(t=null))},_enableDatepicker:function(t){var i,n,o=e(t),s=e.data(t,"datepicker");o.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!1,s.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""})):"div"!==i&&"span"!==i||((n=o.children("."+this._inlineClass)).children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}))},_disableDatepicker:function(t){var i,n,o=e(t),s=e.data(t,"datepicker");o.hasClass(this.markerClassName)&&("input"===(i=t.nodeName.toLowerCase())?(t.disabled=!0,s.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"})):"div"!==i&&"span"!==i||((n=o.children("."+this._inlineClass)).children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)),this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t)},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,"datepicker")}catch(e){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,i,n){var o,r,a,l,c=this._getInst(t);if(2===arguments.length&&"string"==typeof i)return"defaults"===i?e.extend({},e.datepicker._defaults):c?"all"===i?e.extend({},c.settings):this._get(c,i):null;o=i||{},"string"==typeof i&&((o={})[i]=n),c&&(this._curInst===c&&this._hideDatepicker(),r=this._getDateDatepicker(t,!0),a=this._getMinMaxDate(c,"min"),l=this._getMinMaxDate(c,"max"),s(c.settings,o),null!==a&&void 0!==o.dateFormat&&void 0===o.minDate&&(c.settings.minDate=this._formatDate(c,a)),null!==l&&void 0!==o.dateFormat&&void 0===o.maxDate&&(c.settings.maxDate=this._formatDate(c,l)),"disabled"in o&&(o.disabled?this._disableDatepicker(t):this._enableDatepicker(t)),this._attachments(e(t),c),this._autoSize(c),this._setDate(c,r),this._updateAlternate(c),this._updateDatepicker(c))},_changeDatepicker:function(e,t,i){this._optionDatepicker(e,t,i)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var i=this._getInst(e);i&&(this._setDate(i,t),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(e,t){var i=this._getInst(e);return i&&!i.inline&&this._setDateFromField(i,t),i?this._getDate(i):null},_doKeyDown:function(t){var i,n,o,s=e.datepicker._getInst(t.target),r=!0,a=s.dpDiv.is(".ui-datepicker-rtl");if(s._keyEvent=!0,e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),r=!1;break;case 13:return(o=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv))[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,o[0]),(i=e.datepicker._get(s,"onSelect"))?(n=e.datepicker._formatDate(s),i.apply(s.input?s.input[0]:null,[n,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),r=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),r=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?1:-1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),r=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,a?-1:1,"D"),r=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),r=t.ctrlKey||t.metaKey;break;default:r=!1}else 36===t.keyCode&&t.ctrlKey?e.datepicker._showDatepicker(this):r=!1;r&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var i,n,o=e.datepicker._getInst(t.target);if(e.datepicker._get(o,"constrainInput"))return i=e.datepicker._possibleChars(e.datepicker._get(o,"dateFormat")),n=String.fromCharCode(null==t.charCode?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||n<" "||!i||i.indexOf(n)>-1},_doKeyUp:function(t){var i=e.datepicker._getInst(t.target);if(i.input.val()!==i.lastVal)try{e.datepicker.parseDate(e.datepicker._get(i,"dateFormat"),i.input?i.input.val():null,e.datepicker._getFormatConfig(i))&&(e.datepicker._setDateFromField(i),e.datepicker._updateAlternate(i),e.datepicker._updateDatepicker(i))}catch(e){}return!0},_showDatepicker:function(t){var i,n,o,r,a,l,c;("input"!==(t=t.target||t).nodeName.toLowerCase()&&(t=e("input",t.parentNode)[0]),e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)||(i=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==i&&(e.datepicker._curInst.dpDiv.stop(!0,!0),i&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),!1!==(o=(n=e.datepicker._get(i,"beforeShow"))?n.apply(t,[t,i]):{})&&(s(i.settings,o),i.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(i),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),r=!1,e(t).parents().each(function(){return!(r|="fixed"===e(this).css("position"))}),a={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,i.dpDiv.empty(),i.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(i),a=e.datepicker._checkOffset(i,a,r),i.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":r?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),i.inline||(l=e.datepicker._get(i,"showAnim"),c=e.datepicker._get(i,"duration"),i.dpDiv.css("z-index",function(e){for(var t,i;e.length&&e[0]!==document;){if(("absolute"===(t=e.css("position"))||"relative"===t||"fixed"===t)&&(i=parseInt(e.css("zIndex"),10),!isNaN(i)&&0!==i))return i;e=e.parent()}return 0}(e(t))+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[l]?i.dpDiv.show(l,e.datepicker._get(i,"showOptions"),c):i.dpDiv[l||"show"](l?c:null),e.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),e.datepicker._curInst=i)))},_updateDatepicker:function(i){this.maxRows=4,t=i,i.dpDiv.empty().append(this._generateHTML(i)),this._attachHandlers(i);var n,s=this._getNumberOfMonths(i),r=s[1],a=i.dpDiv.find("."+this._dayOverClass+" a");a.length>0&&o.apply(a.get(0)),i.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),r>1&&i.dpDiv.addClass("ui-datepicker-multi-"+r).css("width",17*r+"em"),i.dpDiv[(1!==s[0]||1!==s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),i.dpDiv[(this._get(i,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),i===e.datepicker._curInst&&e.datepicker._datepickerShowing&&e.datepicker._shouldFocusInput(i)&&i.input.trigger("focus"),i.yearshtml&&(n=i.yearshtml,setTimeout(function(){n===i.yearshtml&&i.yearshtml&&i.dpDiv.find("select.ui-datepicker-year:first").replaceWith(i.yearshtml),n=i.yearshtml=null},0))},_shouldFocusInput:function(e){return e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&!e.input.is(":focus")},_checkOffset:function(t,i,n){var o=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),r=t.input?t.input.outerWidth():0,a=t.input?t.input.outerHeight():0,l=document.documentElement.clientWidth+(n?0:e(document).scrollLeft()),c=document.documentElement.clientHeight+(n?0:e(document).scrollTop());return i.left-=this._get(t,"isRTL")?o-r:0,i.left-=n&&i.left===t.input.offset().left?e(document).scrollLeft():0,i.top-=n&&i.top===t.input.offset().top+a?e(document).scrollTop():0,i.left-=Math.min(i.left,i.left+o>l&&l>o?Math.abs(i.left+o-l):0),i.top-=Math.min(i.top,i.top+s>c&&c>s?Math.abs(s+a):0),i},_findPos:function(t){for(var i,n=this._getInst(t),o=this._get(n,"isRTL");t&&("hidden"===t.type||1!==t.nodeType||e.expr.filters.hidden(t));)t=t[o?"previousSibling":"nextSibling"];return[(i=e(t).offset()).left,i.top]},_hideDatepicker:function(t){var i,n,o,s,r=this._curInst;!r||t&&r!==e.data(t,"datepicker")||this._datepickerShowing&&(i=this._get(r,"showAnim"),n=this._get(r,"duration"),o=function(){e.datepicker._tidyDialog(r)},e.effects&&(e.effects.effect[i]||e.effects[i])?r.dpDiv.hide(i,e.datepicker._get(r,"showOptions"),n,o):r.dpDiv["slideDown"===i?"slideUp":"fadeIn"===i?"fadeOut":"hide"](i?n:null,o),i||o(),this._datepickerShowing=!1,(s=this._get(r,"onClose"))&&s.apply(r.input?r.input[0]:null,[r.input?r.input.val():"",r]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).off(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(e.datepicker._curInst){var i=e(t.target),n=e.datepicker._getInst(i[0]);(i[0].id===e.datepicker._mainDivId||0!==i.parents("#"+e.datepicker._mainDivId).length||i.hasClass(e.datepicker.markerClassName)||i.closest("."+e.datepicker._triggerClass).length||!e.datepicker._datepickerShowing||e.datepicker._inDialog&&e.blockUI)&&(!i.hasClass(e.datepicker.markerClassName)||e.datepicker._curInst===n)||e.datepicker._hideDatepicker()}},_adjustDate:function(t,i,n){var o=e(t),s=this._getInst(o[0]);this._isDisabledDatepicker(o[0])||(this._adjustInstDate(s,i+("M"===n?this._get(s,"showCurrentAtPos"):0),n),this._updateDatepicker(s))},_gotoToday:function(t){var i,n=e(t),o=this._getInst(n[0]);this._get(o,"gotoCurrent")&&o.currentDay?(o.selectedDay=o.currentDay,o.drawMonth=o.selectedMonth=o.currentMonth,o.drawYear=o.selectedYear=o.currentYear):(i=new Date,o.selectedDay=i.getDate(),o.drawMonth=o.selectedMonth=i.getMonth(),o.drawYear=o.selectedYear=i.getFullYear()),this._notifyChange(o),this._adjustDate(n)},_selectMonthYear:function(t,i,n){var o=e(t),s=this._getInst(o[0]);s["selected"+("M"===n?"Month":"Year")]=s["draw"+("M"===n?"Month":"Year")]=parseInt(i.options[i.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(o)},_selectDay:function(t,i,n,o){var s,r=e(t);e(o).hasClass(this._unselectableClass)||this._isDisabledDatepicker(r[0])||((s=this._getInst(r[0])).selectedDay=s.currentDay=e("a",o).html(),s.selectedMonth=s.currentMonth=i,s.selectedYear=s.currentYear=n,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear)))},_clearDate:function(t){var i=e(t);this._selectDate(i,"")},_selectDate:function(t,i){var n,o=e(t),s=this._getInst(o[0]);i=null!=i?i:this._formatDate(s),s.input&&s.input.val(i),this._updateAlternate(s),(n=this._get(s,"onSelect"))?n.apply(s.input?s.input[0]:null,[i,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.trigger("focus"),this._lastInput=null)},_updateAlternate:function(t){var i,n,o,s=this._get(t,"altField");s&&(i=this._get(t,"altFormat")||this._get(t,"dateFormat"),n=this._getDate(t),o=this.formatDate(i,n,this._getFormatConfig(t)),e(s).val(o))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,i=new Date(e.getTime());return i.setDate(i.getDate()+4-(i.getDay()||7)),t=i.getTime(),i.setMonth(0),i.setDate(1),Math.floor(Math.round((t-i)/864e5)/7)+1},parseDate:function(t,i,n){if(null==t||null==i)throw"Invalid arguments";if(""===(i="object"==typeof i?i.toString():i+""))return null;var o,s,r,a,l=0,c=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff,u="string"!=typeof c?c:(new Date).getFullYear()%100+parseInt(c,10),d=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,h=(n?n.dayNames:null)||this._defaults.dayNames,p=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,f=(n?n.monthNames:null)||this._defaults.monthNames,m=-1,g=-1,v=-1,y=-1,b=!1,C=function(e){var i=o+1<t.length&&t.charAt(o+1)===e;return i&&o++,i},_=function(e){var t=C(e),n="@"===e?14:"!"===e?20:"y"===e&&t?4:"o"===e?3:2,o=new RegExp("^\\d{"+("y"===e?n:1)+","+n+"}"),s=i.substring(l).match(o);if(!s)throw"Missing number at position "+l;return l+=s[0].length,parseInt(s[0],10)},D=function(t,n,o){var s=-1,r=e.map(C(t)?o:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});if(e.each(r,function(e,t){var n=t[1];if(i.substr(l,n.length).toLowerCase()===n.toLowerCase())return s=t[0],l+=n.length,!1}),-1!==s)return s+1;throw"Unknown name at position "+l},w=function(){if(i.charAt(l)!==t.charAt(o))throw"Unexpected literal at position "+l;l++};for(o=0;o<t.length;o++)if(b)"'"!==t.charAt(o)||C("'")?w():b=!1;else switch(t.charAt(o)){case"d":v=_("d");break;case"D":D("D",d,h);break;case"o":y=_("o");break;case"m":g=_("m");break;case"M":g=D("M",p,f);break;case"y":m=_("y");break;case"@":m=(a=new Date(_("@"))).getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"!":m=(a=new Date((_("!")-this._ticksTo1970)/1e4)).getFullYear(),g=a.getMonth()+1,v=a.getDate();break;case"'":C("'")?w():b=!0;break;default:w()}if(l<i.length&&(r=i.substr(l),!/^\s+/.test(r)))throw"Extra/unparsed characters found in date: "+r;if(-1===m?m=(new Date).getFullYear():m<100&&(m+=(new Date).getFullYear()-(new Date).getFullYear()%100+(m<=u?0:-100)),y>-1)for(g=1,v=y;;){if(v<=(s=this._getDaysInMonth(m,g-1)))break;g++,v-=s}if((a=this._daylightSavingAdjust(new Date(m,g-1,v))).getFullYear()!==m||a.getMonth()+1!==g||a.getDate()!==v)throw"Invalid date";return a},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,i){if(!t)return"";var n,o=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,s=(i?i.dayNames:null)||this._defaults.dayNames,r=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,a=(i?i.monthNames:null)||this._defaults.monthNames,l=function(t){var i=n+1<e.length&&e.charAt(n+1)===t;return i&&n++,i},c=function(e,t,i){var n=""+t;if(l(e))for(;n.length<i;)n="0"+n;return n},u=function(e,t,i,n){return l(e)?n[t]:i[t]},d="",h=!1;if(t)for(n=0;n<e.length;n++)if(h)"'"!==e.charAt(n)||l("'")?d+=e.charAt(n):h=!1;else switch(e.charAt(n)){case"d":d+=c("d",t.getDate(),2);break;case"D":d+=u("D",t.getDay(),o,s);break;case"o":d+=c("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":d+=c("m",t.getMonth()+1,2);break;case"M":d+=u("M",t.getMonth(),r,a);break;case"y":d+=l("y")?t.getFullYear():(t.getFullYear()%100<10?"0":"")+t.getFullYear()%100;break;case"@":d+=t.getTime();break;case"!":d+=1e4*t.getTime()+this._ticksTo1970;break;case"'":l("'")?d+="'":h=!0;break;default:d+=e.charAt(n)}return d},_possibleChars:function(e){var t,i="",n=!1,o=function(i){var n=t+1<e.length&&e.charAt(t+1)===i;return n&&t++,n};for(t=0;t<e.length;t++)if(n)"'"!==e.charAt(t)||o("'")?i+=e.charAt(t):n=!1;else switch(e.charAt(t)){case"d":case"m":case"y":case"@":i+="0123456789";break;case"D":case"M":return null;case"'":o("'")?i+="'":n=!0;break;default:i+=e.charAt(t)}return i},_get:function(e,t){return void 0!==e.settings[t]?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!==e.lastVal){var i=this._get(e,"dateFormat"),n=e.lastVal=e.input?e.input.val():null,o=this._getDefaultDate(e),s=o,r=this._getFormatConfig(e);try{s=this.parseDate(i,n,r)||o}catch(e){n=t?"":n}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=n?s.getDate():0,e.currentMonth=n?s.getMonth():0,e.currentYear=n?s.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,i,n){var o=null==i||""===i?n:"string"==typeof i?function(i){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),i,e.datepicker._getFormatConfig(t))}catch(e){}for(var n=(i.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,o=n.getFullYear(),s=n.getMonth(),r=n.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,l=a.exec(i);l;){switch(l[2]||"d"){case"d":case"D":r+=parseInt(l[1],10);break;case"w":case"W":r+=7*parseInt(l[1],10);break;case"m":case"M":s+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(o,s));break;case"y":case"Y":o+=parseInt(l[1],10),r=Math.min(r,e.datepicker._getDaysInMonth(o,s))}l=a.exec(i)}return new Date(o,s,r)}(i):"number"==typeof i?isNaN(i)?n:function(e){var t=new Date;return t.setDate(t.getDate()+e),t}(i):new Date(i.getTime());return(o=o&&"Invalid Date"===o.toString()?n:o)&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,i){var n=!t,o=e.selectedMonth,s=e.selectedYear,r=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=r.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=r.getMonth(),e.drawYear=e.selectedYear=e.currentYear=r.getFullYear(),o===e.selectedMonth&&s===e.selectedYear||i||this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(n?"":this._formatDate(e))},_getDate:function(e){return!e.currentYear||e.input&&""===e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay))},_attachHandlers:function(t){var i=this._get(t,"stepMonths"),n="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){e.datepicker._adjustDate(n,-i,"M")},next:function(){e.datepicker._adjustDate(n,+i,"M")},hide:function(){e.datepicker._hideDatepicker()},today:function(){e.datepicker._gotoToday(n)},selectDay:function(){return e.datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return e.datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return e.datepicker._selectMonthYear(n,this,"Y"),!1}};e(this).on(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,i,n,o,s,r,a,l,c,u,d,h,p,f,m,g,v,y,b,C,_,D,w,x,k,E,S,A,T,F,I,P,M,$,N,O,B,L,z,H=new Date,R=this._daylightSavingAdjust(new Date(H.getFullYear(),H.getMonth(),H.getDate())),j=this._get(e,"isRTL"),W=this._get(e,"showButtonPanel"),U=this._get(e,"hideIfNoPrevNext"),q=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),K=this._get(e,"showCurrentAtPos"),Y=this._get(e,"stepMonths"),Q=1!==V[0]||1!==V[1],G=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),X=this._getMinMaxDate(e,"min"),J=this._getMinMaxDate(e,"max"),Z=e.drawMonth-K,ee=e.drawYear;if(Z<0&&(Z+=12,ee--),J)for(t=this._daylightSavingAdjust(new Date(J.getFullYear(),J.getMonth()-V[0]*V[1]+1,J.getDate())),t=X&&t<X?X:t;this._daylightSavingAdjust(new Date(ee,Z,1))>t;)--Z<0&&(Z=11,ee--);for(e.drawMonth=Z,e.drawYear=ee,i=this._get(e,"prevText"),i=q?this.formatDate(i,this._daylightSavingAdjust(new Date(ee,Z-Y,1)),this._getFormatConfig(e)):i,n=this._canAdjustMonth(e,-1,ee,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+i+"</span></a>":U?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"e":"w")+"'>"+i+"</span></a>",o=this._get(e,"nextText"),o=q?this.formatDate(o,this._daylightSavingAdjust(new Date(ee,Z+Y,1)),this._getFormatConfig(e)):o,s=this._canAdjustMonth(e,1,ee,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+o+"</span></a>":U?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+o+"'><span class='ui-icon ui-icon-circle-triangle-"+(j?"w":"e")+"'>"+o+"</span></a>",r=this._get(e,"currentText"),a=this._get(e,"gotoCurrent")&&e.currentDay?G:R,r=q?this.formatDate(r,a,this._getFormatConfig(e)):r,l=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",c=W?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(j?l:"")+(this._isInRange(e,a)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+r+"</button>":"")+(j?"":l)+"</div>":"",u=parseInt(this._get(e,"firstDay"),10),u=isNaN(u)?0:u,d=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),f=this._get(e,"monthNames"),m=this._get(e,"monthNamesShort"),g=this._get(e,"beforeShowDay"),v=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),C="",D=0;D<V[0];D++){for(w="",this.maxRows=4,x=0;x<V[1];x++){if(k=this._daylightSavingAdjust(new Date(ee,Z,e.selectedDay)),E=" ui-corner-all",S="",Q){if(S+="<div class='ui-datepicker-group",V[1]>1)switch(x){case 0:S+=" ui-datepicker-group-first",E=" ui-corner-"+(j?"right":"left");break;case V[1]-1:S+=" ui-datepicker-group-last",E=" ui-corner-"+(j?"left":"right");break;default:S+=" ui-datepicker-group-middle",E=""}S+="'>"}for(S+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+E+"'>"+(/all|left/.test(E)&&0===D?j?s:n:"")+(/all|right/.test(E)&&0===D?j?n:s:"")+this._generateMonthYearHeader(e,Z,ee,X,J,D>0||x>0,f,m)+"</div><table class='ui-datepicker-calendar'><thead><tr>",A=d?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"",_=0;_<7;_++)T=(_+u)%7,A+="<th scope='col'"+((_+u+6)%7>=5?" class='ui-datepicker-week-end'":"")+"><span title='"+h[T]+"'>"+p[T]+"</span></th>";for(S+=A+"</tr></thead><tbody>",F=this._getDaysInMonth(ee,Z),ee===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,F)),I=(this._getFirstDayOfMonth(ee,Z)-u+7)%7,P=Math.ceil((I+F)/7),M=Q&&this.maxRows>P?this.maxRows:P,this.maxRows=M,$=this._daylightSavingAdjust(new Date(ee,Z,1-I)),N=0;N<M;N++){for(S+="<tr>",O=d?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")($)+"</td>":"",_=0;_<7;_++)B=g?g.apply(e.input?e.input[0]:null,[$]):[!0,""],z=(L=$.getMonth()!==Z)&&!y||!B[0]||X&&$<X||J&&$>J,O+="<td class='"+((_+u+6)%7>=5?" ui-datepicker-week-end":"")+(L?" ui-datepicker-other-month":"")+($.getTime()===k.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===$.getTime()&&b.getTime()===k.getTime()?" "+this._dayOverClass:"")+(z?" "+this._unselectableClass+" ui-state-disabled":"")+(L&&!v?"":" "+B[1]+($.getTime()===G.getTime()?" "+this._currentClass:"")+($.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+(L&&!v||!B[2]?"":" title='"+B[2].replace(/'/g,"&#39;")+"'")+(z?"":" data-handler='selectDay' data-event='click' data-month='"+$.getMonth()+"' data-year='"+$.getFullYear()+"'")+">"+(L&&!v?"&#xa0;":z?"<span class='ui-state-default'>"+$.getDate()+"</span>":"<a class='ui-state-default"+($.getTime()===R.getTime()?" ui-state-highlight":"")+($.getTime()===G.getTime()?" ui-state-active":"")+(L?" ui-priority-secondary":"")+"' href='#'>"+$.getDate()+"</a>")+"</td>",$.setDate($.getDate()+1),$=this._daylightSavingAdjust($);S+=O+"</tr>"}++Z>11&&(Z=0,ee++),w+=S+="</tbody></table>"+(Q?"</div>"+(V[0]>0&&x===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):"")}C+=w}return C+=c,e._keyEvent=!1,C},_generateMonthYearHeader:function(e,t,i,n,o,s,r,a){var l,c,u,d,h,p,f,m,g=this._get(e,"changeMonth"),v=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",C="";if(s||!g)C+="<span class='ui-datepicker-month'>"+r[t]+"</span>";else{for(l=n&&n.getFullYear()===i,c=o&&o.getFullYear()===i,C+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>",u=0;u<12;u++)(!l||u>=n.getMonth())&&(!c||u<=o.getMonth())&&(C+="<option value='"+u+"'"+(u===t?" selected='selected'":"")+">"+a[u]+"</option>");C+="</select>"}if(y||(b+=C+(!s&&g&&v?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!v)b+="<span class='ui-datepicker-year'>"+i+"</span>";else{for(d=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),f=(p=function(e){var t=e.match(/c[+\-].*/)?i+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t})(d[0]),m=Math.max(f,p(d[1]||"")),f=n?Math.max(f,n.getFullYear()):f,m=o?Math.min(m,o.getFullYear()):m,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";f<=m;f++)e.yearshtml+="<option value='"+f+"'"+(f===i?" selected='selected'":"")+">"+f+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}return b+=this._get(e,"yearSuffix"),y&&(b+=(!s&&g&&v?"":"&#xa0;")+C),b+="</div>"},_adjustInstDate:function(e,t,i){var n=e.selectedYear+("Y"===i?t:0),o=e.selectedMonth+("M"===i?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(n,o))+("D"===i?t:0),r=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(n,o,s)));e.selectedDay=r.getDate(),e.drawMonth=e.selectedMonth=r.getMonth(),e.drawYear=e.selectedYear=r.getFullYear(),"M"!==i&&"Y"!==i||this._notifyChange(e)},_restrictMinMax:function(e,t){var i=this._getMinMaxDate(e,"min"),n=this._getMinMaxDate(e,"max"),o=i&&t<i?i:t;return n&&o>n?n:o},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,i,n){var o=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(i,n+(t<0?t:o[0]*o[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var i,n,o=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),r=null,a=null,l=this._get(e,"yearRange");return l&&(i=l.split(":"),n=(new Date).getFullYear(),r=parseInt(i[0],10),a=parseInt(i[1],10),i[0].match(/[+\-].*/)&&(r+=n),i[1].match(/[+\-].*/)&&(a+=n)),(!o||t.getTime()>=o.getTime())&&(!s||t.getTime()<=s.getTime())&&(!r||t.getFullYear()>=r)&&(!a||t.getFullYear()<=a)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return{shortYearCutoff:t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,i,n){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var o=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(n,i,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),o,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).on("mousedown",e.datepicker._checkExternalClick),e.datepicker.initialized=!0),0===e("#"+e.datepicker._mainDivId).length&&e("body").append(e.datepicker.dpDiv);var i=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!==t&&"getDate"!==t&&"widget"!==t?"option"===t&&2===arguments.length&&"string"==typeof arguments[1]?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i)):this.each(function(){"string"==typeof t?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(i)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(i))},e.datepicker=new i,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.12.1",e.datepicker},o=[i(1),i(3),i(10)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){return e.widget("ui.sortable",e.ui.mouse,{version:"1.12.1",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(e,t,i){return e>=t&&e<t+i},_isFloating:function(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))},_create:function(){this.containerCache={},this._addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(e,t){this._super(e,t),"handle"===e&&this._setHandleClassName()},_setHandleClassName:function(){var t=this;this._removeClass(this.element.find(".ui-sortable-handle"),"ui-sortable-handle"),e.each(this.items,function(){t._addClass(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item,"ui-sortable-handle")})},_destroy:function(){this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(t,i){var n=null,o=!1,s=this;return!this.reverting&&(!this.options.disabled&&"static"!==this.options.type&&(this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return n=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(n=e(t.target)),!!n&&(!(this.options.handle&&!i&&(e(this.options.handle,n).find("*").addBack().each(function(){this===t.target&&(o=!0)}),!o))&&(this.currentItem=n,this._removeCurrentsFromItems(),!0))))},_mouseStart:function(t,i,n){var o,s,r=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,r.cursorAt&&this._adjustOffsetFromHelper(r.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),r.containment&&this._setContainment(),r.cursor&&"auto"!==r.cursor&&(s=this.document.find("body"),this.storedCursor=s.css("cursor"),s.css("cursor",r.cursor),this.storedStylesheet=e("<style>*{ cursor: "+r.cursor+" !important; }</style>").appendTo(s)),r.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",r.opacity)),r.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",r.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!n)for(o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this._addClass(this.helper,"ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var i,n,o,s,r=this.options,a=!1;for(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-this.overflowOffset.top<r.scrollSensitivity&&(this.scrollParent[0].scrollTop=a=this.scrollParent[0].scrollTop-r.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-this.overflowOffset.left<r.scrollSensitivity&&(this.scrollParent[0].scrollLeft=a=this.scrollParent[0].scrollLeft-r.scrollSpeed)):(t.pageY-this.document.scrollTop()<r.scrollSensitivity?a=this.document.scrollTop(this.document.scrollTop()-r.scrollSpeed):this.window.height()-(t.pageY-this.document.scrollTop())<r.scrollSensitivity&&(a=this.document.scrollTop(this.document.scrollTop()+r.scrollSpeed)),t.pageX-this.document.scrollLeft()<r.scrollSensitivity?a=this.document.scrollLeft(this.document.scrollLeft()-r.scrollSpeed):this.window.width()-(t.pageX-this.document.scrollLeft())<r.scrollSensitivity&&(a=this.document.scrollLeft(this.document.scrollLeft()+r.scrollSpeed))),!1!==a&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),i=this.items.length-1;i>=0;i--)if(o=(n=this.items[i]).item[0],(s=this._intersectsWithPointer(n))&&n.instance===this.currentContainer&&!(o===this.currentItem[0]||this.placeholder[1===s?"next":"prev"]()[0]===o||e.contains(this.placeholder[0],o)||"semi-dynamic"===this.options.type&&e.contains(this.element[0],o))){if(this.direction=1===s?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(n))break;this._rearrange(t,n),this._trigger("change",t,this._uiHash());break}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,i){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var n=this,o=this.placeholder.offset(),s=this.options.axis,r={};s&&"x"!==s||(r.left=o.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),s&&"y"!==s||(r.top=o.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,e(this.helper).animate(r,parseInt(this.options.revert,10)||500,function(){n._clear(t)})}else this._clear(t,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp(new e.Event("mouseup",{target:null})),"original"===this.options.helper?(this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},e(i).each(function(){var i=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);i&&n.push((t.key||i[1]+"[]")+"="+(t.key&&t.expression?i[1]:i[2]))}),!n.length&&t.key&&n.push(t.key+"="),n.join("&")},toArray:function(t){var i=this._getItemsAsjQuery(t&&t.connected),n=[];return t=t||{},i.each(function(){n.push(e(t.item||this).attr(t.attribute||"id")||"")}),n},_intersectsWith:function(e){var t=this.positionAbs.left,i=t+this.helperProportions.width,n=this.positionAbs.top,o=n+this.helperProportions.height,s=e.left,r=s+e.width,a=e.top,l=a+e.height,c=this.offset.click.top,u=this.offset.click.left,d="x"===this.options.axis||n+c>a&&n+c<l,h="y"===this.options.axis||t+u>s&&t+u<r,p=d&&h;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?p:s<t+this.helperProportions.width/2&&i-this.helperProportions.width/2<r&&a<n+this.helperProportions.height/2&&o-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var t,i,n="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),o="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width);return!(!n||!o)&&(t=this._getDragVerticalDirection(),i=this._getDragHorizontalDirection(),this.floating?"right"===i||"down"===t?2:1:t&&("down"===t?2:1))},_intersectsWithSides:function(e){var t=this._isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),i=this._isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return this.floating&&o?"right"===o&&i||"left"===o&&!i:n&&("down"===n&&t||"up"===n&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!==e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!==e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var i,n,o,s,r=[],a=[],l=this._connectWith();if(l&&t)for(i=l.length-1;i>=0;i--)for(n=(o=e(l[i],this.document[0])).length-1;n>=0;n--)(s=e.data(o[n],this.widgetFullName))&&s!==this&&!s.options.disabled&&a.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s]);function c(){r.push(this)}for(a.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=a.length-1;i>=0;i--)a[i][0].each(c);return e(r)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var i=0;i<t.length;i++)if(t[i]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var i,n,o,s,r,a,l,c,u=this.items,d=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(i=h.length-1;i>=0;i--)for(n=(o=e(h[i],this.document[0])).length-1;n>=0;n--)(s=e.data(o[n],this.widgetFullName))&&s!==this&&!s.options.disabled&&(d.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s));for(i=d.length-1;i>=0;i--)for(r=d[i][1],n=0,c=(a=d[i][0]).length;n<c;n++)(l=e(a[n])).data(this.widgetName+"-item",r),u.push({item:l,instance:r,width:0,height:0,left:0,top:0})},refreshPositions:function(t){var i,n,o,s;for(this.floating=!!this.items.length&&("x"===this.options.axis||this._isFloating(this.items[0].item)),this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset()),i=this.items.length-1;i>=0;i--)(n=this.items[i]).instance!==this.currentContainer&&this.currentContainer&&n.item[0]!==this.currentItem[0]||(o=this.options.toleranceElement?e(this.options.toleranceElement,n.item):n.item,t||(n.width=o.outerWidth(),n.height=o.outerHeight()),s=o.offset(),n.left=s.left,n.top=s.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(i=this.containers.length-1;i>=0;i--)s=this.containers[i].element.offset(),this.containers[i].containerCache.left=s.left,this.containers[i].containerCache.top=s.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight();return this},_createPlaceholder:function(t){var i,n=(t=t||this).options;n.placeholder&&n.placeholder.constructor!==String||(i=n.placeholder,n.placeholder={element:function(){var n=t.currentItem[0].nodeName.toLowerCase(),o=e("<"+n+">",t.document[0]);return t._addClass(o,"ui-sortable-placeholder",i||t.currentItem[0].className)._removeClass(o,"ui-sortable-helper"),"tbody"===n?t._createTrPlaceholder(t.currentItem.find("tr").eq(0),e("<tr>",t.document[0]).appendTo(o)):"tr"===n?t._createTrPlaceholder(t.currentItem,o):"img"===n&&o.attr("src",t.currentItem.attr("src")),i||o.css("visibility","hidden"),o},update:function(e,o){i&&!n.forcePlaceholderSize||(o.height()||o.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),o.width()||o.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}),t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_createTrPlaceholder:function(t,i){var n=this;t.children().each(function(){e("<td>&#160;</td>",n.document[0]).attr("colspan",e(this).attr("colspan")||1).appendTo(i)})},_contactContainers:function(t){var i,n,o,s,r,a,l,c,u,d,h=null,p=null;for(i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(h&&e.contains(this.containers[i].element[0],h.element[0]))continue;h=this.containers[i],p=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(h)if(1===this.containers.length)this.containers[p].containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1);else{for(o=1e4,s=null,r=(u=h.floating||this._isFloating(this.currentItem))?"left":"top",a=u?"width":"height",d=u?"pageX":"pageY",n=this.items.length-1;n>=0;n--)e.contains(this.containers[p].element[0],this.items[n].item[0])&&this.items[n].item[0]!==this.currentItem[0]&&(l=this.items[n].item.offset()[r],c=!1,t[d]-l>this.items[n][a]/2&&(c=!0),Math.abs(t[d]-l)<o&&(o=Math.abs(t[d]-l),s=this.items[n],this.direction=c?"up":"down"));if(!s&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[p])return void(this.currentContainer.containerCache.over||(this.containers[p]._trigger("over",t,this._uiHash()),this.currentContainer.containerCache.over=1));s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[p].element,!0),this._trigger("change",t,this._uiHash()),this.containers[p]._trigger("change",t,this._uiHash(this)),this.currentContainer=this.containers[p],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[p]._trigger("over",t,this._uiHash(this)),this.containers[p].containerCache.over=1}},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t,this.currentItem])):"clone"===i.helper?this.currentItem.clone():this.currentItem;return n.parents("body").length||e("parent"!==i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(n[0]),n[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),n[0].style.width&&!i.forceHelperSize||n.width(this.currentItem.width()),n[0].style.height&&!i.forceHelperSize||n.height(this.currentItem.height()),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,i,n,o=this.options;"parent"===o.containment&&(o.containment=this.helper[0].parentNode),"document"!==o.containment&&"window"!==o.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===o.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===o.containment?this.document.height()||document.body.parentNode.scrollHeight:this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(o.containment)||(t=e(o.containment)[0],i=e(o.containment).offset(),n="hidden"!==e(t).css("overflow"),this.containment=[i.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,i.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,i.left+(n?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,i.top+(n?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"===t?1:-1,o="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(o[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():s?0:o.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():s?0:o.scrollLeft())*n}},_generatePosition:function(t){var i,n,o=this.options,s=t.pageX,r=t.pageY,a="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(a[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(r=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(r=this.containment[3]+this.offset.click.top)),o.grid&&(i=this.originalPageY+Math.round((r-this.originalPageY)/o.grid[1])*o.grid[1],r=this.containment?i-this.offset.click.top>=this.containment[1]&&i-this.offset.click.top<=this.containment[3]?i:i-this.offset.click.top>=this.containment[1]?i-o.grid[1]:i+o.grid[1]:i,n=this.originalPageX+Math.round((s-this.originalPageX)/o.grid[0])*o.grid[0],s=this.containment?n-this.offset.click.left>=this.containment[0]&&n-this.offset.click.left<=this.containment[2]?n:n-this.offset.click.left>=this.containment[0]?n-o.grid[0]:n+o.grid[0]:n)),{top:r-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:a.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:a.scrollLeft())}},_rearrange:function(e,t,i,n){i?i[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var o=this.counter;this._delay(function(){o===this.counter&&this.refreshPositions(!n)})},_clear:function(e,t){this.reverting=!1;var i,n=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)"auto"!==this._storedCSS[i]&&"static"!==this._storedCSS[i]||(this._storedCSS[i]="");this.currentItem.css(this._storedCSS),this._removeClass(this.currentItem,"ui-sortable-helper")}else this.currentItem.show();function o(e,t,i){return function(n){i._trigger(e,n,t._uiHash(t))}}for(this.fromOutside&&!t&&n.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||t||n.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(t||(n.push(function(e){this._trigger("remove",e,this._uiHash())}),n.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),n.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)t||n.push(o("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(n.push(o("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,t||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!t){for(i=0;i<n.length;i++)n[i].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){!1===e.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(t){var i=t||this;return{helper:i.helper,placeholder:i.placeholder||e([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:t?t.element:null}}})},o=[i(1),i(6),i(26),i(25),i(29),i(3),i(5)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t){!function(e,t){"use strict";e.Concrete=e.Concrete||{},e.console=e.console||{},e.ConcreteEvent=function(i){var n=t("<span />"),o=!1,s="function"==typeof e.console.group&&"function"==typeof e.console.groupEnd,r="function"==typeof e.console.log;function a(t,i,n){s?(e.console.groupCollapsed(t),n||"function"!=typeof i?e.console.log(i):i(),e.console.groupEnd()):r&&(n||"function"!=typeof i?e.console.log(t,i):(e.console.log('Group: "'+t+'"'),i(),e.console.log('GroupEnd: "'+t+'"')))}function l(e){return e||(e=n),e instanceof t||(e=t(e)),e.length||(e=n),e}var c={debug:function(e){return void 0===e?o:o=!!e},subscribe:function(t,i,n){var s=i,r=new Error("EventStack").stack;return i=function(){o&&a("Handler Fired.",function(){a("Type",t,!0),a("Handler",s,!0),a("Target",n,!0),a("Bound Stack",r,!0),"function"==typeof e.console.trace?e.console.trace():a("Stack",new Error("EventStack").stack)}),s.apply(this,_(arguments).toArray())},o&&a("Event Subscribed",function(){a("Type",t,!0),a("Handler",s,!0),a("Target",n,!0),"function"==typeof e.console.trace?e.console.trace():a("Stack",new Error("EventStack").stack)}),t instanceof Array?_(t).each(function(e){c.subscribe(e,i,n)}):(l(n).bind(t.toLowerCase(),i),c)},publish:function(t,i,n){return o&&a("Event Published",function(){a("Type",t,!0),a("Data",i,!0),a("Target",n,!0),"function"==typeof e.console.trace?e.console.trace():a("Stack",new Error("EventStack").stack)}),t instanceof Array?_(t).each(function(e){c.publish(e,i,n)}):(l(n).trigger(t.toLowerCase(),i),c)},unsubscribe:function(i,n,s){var r;return o&&a("Event Unsubscribed",function(){a("Type",i,!0),a("Secondary Argument",n,!0),a("Target",s,!0),"function"==typeof e.console.trace?e.console.trace():a("Stack",new Error("EventStack").stack)}),r=["function"==typeof i.toLowerCase?i.toLowerCase():i],void 0!==n&&r.push(n),t.fn.unbind.apply(l(s),r),c}};return c.sub=c.bind=c.watch=c.on=c.subscribe,c.pub=c.fire=c.trigger=c.publish,c.unsub=c.unbind=c.unwatch=c.off=c.unsubscribe,i.event=c,c}(e.Concrete)}(window,jQuery)},function(e,t){!function(e,t){"use strict";var i={getAssetURL:function(e){return e+(-1!=e.indexOf("?")?"&ts=":"?ts=")+(new Date).getTime()},loadJavaScript:function(e){if(!t('script[src*="'+e+'"]').length&&!t('script[data-source~="'+e+'"]').length){var i=this.getAssetURL(e);t("head").append('<script type="text/javascript" src="'+i+'"><\/script>')}},loadCSS:function(e){var i;if(-1!=navigator.userAgent.indexOf("MSIE")){var n=document.createElement("link"),o=document.getElementsByTagName("head")[0];i=this.getAssetURL(e),n.type="text/css",n.rel="stylesheet",n.href=i,n.media="screen",o.appendChild(n)}else t("head").children('link[href*="'+e+'"]').length||t("head").children('link[data-source~="'+e+'"]').length||(i=this.getAssetURL(e),t("head").append('<link rel="stylesheet" media="screen" type="text/css" href="'+i+'" />'))},loadOther:function(e){t("head").children(e).length||t("head").append(e)}};e.ConcreteAssetLoader=i}(window,jQuery)},function(e,t,i){(function(e){var t={reindexPendingPages:function(){$.get(CCM_TOOLS_PATH+"/reindex_pending_pages?ccm_token="+CCM_SECURITY_TOKEN)}};e.ConcretePageIndexer=t}).call(t,i(2))},function(e,t,i){(function(e){var t=$("html");function i(e,t){return e[t]}function n(e,t,o){var s="get"+(t+="").substr(0,1).toUpperCase()+t.substr(1),r="set"+t.substr(0,1).toUpperCase()+t.substr(1);return void 0===this[s]&&(this[s]=_.partial(i,e,t)),void 0===this[r]&&(this[r]=_.partial(n,e,t)),e[t]=o,o}e.Concrete={editMode:null,event:ConcreteEvent,createGetterSetters:function(e){var t=this;return t.getAttr=_.partial(i,e),t.setAttr=_.partial(n,e),_(e).each(function(e,i){t.setAttr(i,e)}),!0},forceRefresh:function(){t.hide(0,function(){$(this).show()})},const:{}}}).call(t,i(2))},function(e,t,i){(function(e){var t=$("html"),i=$("div.ccm-page").attr("class");function n(e){this.options=e,this.isOpen=!1,this.detail=!1,this.isPinned=!1,this.pinned=function(){return this.isPinned},this.willBePinned=function(){return this.isOpen&&!this.isPinned},this.isPinable=function(){return this.options.pinable},this.getPositionClass=function(){var t;switch(e.position){case"left":t="ccm-panel-left";break;case"right":t="ccm-panel-right"}switch(e.transition){case"slide":t+=" ccm-panel-transition-slide";break;default:t+=" ccm-panel-transition-none"}return t},this.getURL=function(){return this.options.url},this.getCurrentURL=function(){return this.options.currentUrl},this.getIdentifier=function(){return this.options.identifier},this.getDOMID=function(){return"ccm-panel-"+this.options.identifier.replace("/","-")},this.onPanelLoad=function(e){var t=$("a[data-launch-panel="+this.getIdentifier()+"]"),i=t.hasClass("launch-tooltip");this.setupSubPanels(),this.setupPanelDetails(),t.removeClass().addClass("ccm-launch-panel-active"),i&&t.addClass("launch-tooltip"),Concrete.event.publish("PanelLoad",{panel:this,element:e})},this.hide=function(e){e=e||$.noop;var i=this;this.closePanelDetail(function(){var n=this;$("a[data-launch-panel="+this.getIdentifier()+"]").removeClass(),$("#"+n.getDOMID()).removeClass("ccm-panel-active"),$("#ccm-panel-overlay").queue(function(){$(this).removeClass("ccm-panel-translucent"),$(this).dequeue()}).delay(1e3).hide(0),t.removeClass(n.getPositionClass()),t.removeClass("ccm-panel-open"),n.isOpen=!1,$(this).dequeue(),e.call(i),setTimeout(function(){Concrete.event.publish("PanelClose",{panel:n})},0)})},this.toggle=function(){this.isOpen?this.hide():this.show()},this.setupSubPanels=function(){var e=$("#"+this.getDOMID()),t=this;e.find("[data-launch-sub-panel-url]").unbind(".sub").on("click.sub",function(){var i=$("<div />").addClass("ccm-panel-cover").appendTo($(this).closest(".ccm-panel"));t.closePanelDetailImmediately();var n=$(this).attr("data-launch-sub-panel-url");return $("<div />",{class:"ccm-panel-content ccm-panel-content-appearing"}).appendTo(e.find(".ccm-panel-content-wrapper")).load(n+"?cID="+CCM_CID,function(){_.delay(function(){i.remove()},250),e.find(".ccm-panel-content-visible").removeClass("ccm-panel-content-visible").addClass("ccm-panel-slide-left"),$(this).removeClass("ccm-panel-content-appearing").addClass("ccm-panel-content-visible"),t.options.currentUrl=n,t.onPanelLoad(this)}),$(this).removeClass("ccm-panel-menu-item-active"),!1}),e.find("[data-panel-navigation=back]").unbind().on("click.navigate",function(){return t.goBack(),!1})},this.goBack=function(){var e=$("#"+this.getDOMID());this.closePanelDetailImmediately(),e.queue(function(){var t=e.find(".ccm-panel-content-visible").prev();e.find(".ccm-panel-content-visible").removeClass("ccm-panel-content-visible").addClass("ccm-panel-slide-right"),t.removeClass("ccm-panel-slide-left").addClass("ccm-panel-content-visible"),e.dequeue()}).delay(500).queue(function(){e.find(".ccm-panel-slide-right").remove(),e.dequeue()})},this.showPanelConfirmationMessage=function(e,t,i){var n='<div id="ccm-panel-confirmation-'+e+'" class="ccm-ui ccm-panel-confirmation-wrapper"><div class="ccm-panel-confirmation">';n+="<p>"+t+'</p><div class="ccm-panel-confirmation-buttons"></div>',n+="</div></div>",$(n).appendTo(document.body);var o=$("#ccm-panel-confirmation-"+e);o.delay(0).queue(function(){$(this).addClass("ccm-panel-confirmation-displayed"),$(this).dequeue()});for(var s=[{class:"btn pull-left btn-sm btn-link",type:"button","data-panel-confirmation-action":"cancel",text:ccmi18n.cancel}],r=0;r<i.length;r++)s.push(i[r]);$.each(s,function(e,t){o.find(".ccm-panel-confirmation-buttons").append($("<button />",t))}),o.find("button").on("click",function(){o.delay(0).queue(function(){o.removeClass("ccm-panel-confirmation-displayed"),o.addClass("ccm-panel-confirmation-disappearing"),$(this).dequeue()}).delay(350).queue(function(){o.remove()})})},this.closePanelDetail=function(e){e=e||$.noop;var i=this;if(!this.detail)return e.call(i),!1;$("a[data-launch-panel-detail="+this.detail.identifier+"]").removeClass("ccm-panel-menu-item-active");var n=this.detail.transition;return $("div.ccm-panel-detail").queue(function(){$(this).removeClass("ccm-panel-detail-transition-"+n+"-apply"),$(this).dequeue()}).delay(550).queue(function(){$(this).remove(),$(this).dequeue()}),$("div.ccm-page").queue(function(){$(this).removeClass("ccm-panel-detail-transition-"+n+"-apply"),$(this).dequeue()}).delay(550).queue(function(){t.removeClass("ccm-panel-detail-open"),$(this).addClass("ccm-panel-detail-disable-transition"),$(this).dequeue()}).delay(1).queue(function(){$(this).removeClass("ccm-panel-detail-transition-"+n),$(this).dequeue()}).delay(1).queue(function(){$(this).removeClass("ccm-panel-detail-disable-transition"),$(this).dequeue(),e.call(i)}),$("#ccm-panel-detail-form-actions-wrapper .ccm-panel-detail-form-actions").queue(function(){$(this).css("opacity",0),$(this).dequeue(0)}).delay(550).queue(function(){$(this).remove(),$(this).dequeue()}),Concrete.event.publish("PanelCloseDetail",this.detail),this.detail=!1,$(".ccm-panel-detail").length>0?550:void 0},this.closePanelDetailImmediately=function(){if(!this.detail)return!1;t.removeClass("ccm-panel-detail-open"),$(".ccm-panel-detail").remove(),$(".ccm-panel-detail-form-actions").remove(),$(".ccm-page").removeClass().addClass(i),Concrete.event.publish("PanelCloseDetail",this.detail),this.detail=!1},this.openPanelDetail=function(e){var i=this,n=$.extend({transition:"none",url:!1,data:""},e),o=n.identifier;i.detail&&i.closePanelDetailImmediately(),i.detail=n;var s=$("<div />",{id:"ccm-panel-detail-"+o,class:"ccm-panel-detail"}).appendTo(document.body),r=$("<div />",{class:"ccm-ui ccm-panel-detail-content"}).appendTo(s);$("div.ccm-page").queue(function(){s.addClass("ccm-panel-detail-transition-"+n.transition),$(this).addClass("ccm-panel-detail-transition-"+n.transition),$(this).dequeue()}).delay(3).queue(function(){s.addClass("ccm-panel-detail-transition-"+n.transition+"-apply"),$(this).addClass("ccm-panel-detail-transition-"+n.transition+"-apply"),$(this).dequeue()}),t.addClass("ccm-panel-detail-open");var a=function(){Concrete.event.publish("PanelOpenDetail",{panel:n,panelObj:i,container:r})};if(n.url){var l=n.url+"?cID="+CCM_CID,c=null;$.isPlainObject(n.data)?c=n.data:l+=n.data,r.load(l,c,function(){$.fn.dialog.hideLoader(),r.find(".launch-tooltip").tooltip({container:"#ccm-tooltip-holder"}),r.find("a[data-help-notification-toggle]").concreteHelpLauncher(),i.loadPanelDetailActions(r),_.defer(a)})}else $.fn.dialog.hideLoader(),r.find(".launch-tooltip").tooltip({container:"#ccm-tooltip-holder"}),r.find("a[data-help-notification-toggle]").concreteHelpLauncher(),i.loadPanelDetailActions(r),_.defer(a)},this.loadPanelDetailActions=function(e){var t=this,i=e.find(".ccm-panel-detail-form-actions");i.length&&($(document.body).delay(500).queue(function(){var e=$("#ccm-panel-detail-form-actions-wrapper");e.length||(e=$("<div />",{id:"ccm-panel-detail-form-actions-wrapper",class:"ccm-ui"})).appendTo(document.body),e.html("").append(i),$(this).dequeue()}).delay(5).queue(function(){$("#ccm-panel-detail-form-actions-wrapper .ccm-panel-detail-form-actions").css("opacity",1),$(this).dequeue()}),$("button[data-panel-detail-action=cancel]").on("click",function(){t.closePanelDetail()}),e.find("[data-panel-detail-form]").concreteAjaxForm(),$("button[data-panel-detail-action=submit]").on("click",function(){$("[data-panel-detail-form]").submit()}),ConcreteEvent.subscribe("AjaxFormSubmitSuccess",function(e,t){"reload"==$('[data-panel-detail-form="'+t.form+'"]').data("action-after-save")&&location.reload()}))},this.setupPanelDetails=function(){var e=$("#"+this.getDOMID()),t=this;e.find(".launch-tooltip").tooltip({container:"#ccm-tooltip-holder"}),e.find("[data-panel-menu=accordion]").each(function(){var i=$(this),n=$(this).find(">nav>span");n.text($(this).find("a[data-panel-accordion-tab-selected=true]").text()),n.unbind(".accordion").on("click.accordion",function(){i.toggleClass("ccm-panel-header-accordion-dropdown-visible")}),$(this).find(">nav ul a").unbind(".accordion").on("click.accordion",function(){var o=t.getCurrentURL();o||(o=t.getURL());var s=e.find(".ccm-panel-content");i.removeClass("ccm-panel-header-accordion-dropdown-visible"),n.html($(this).text()),$.fn.dialog.showLoader(),s.load(o+"?cID="+CCM_CID+"&tab="+$(this).attr("data-panel-accordion-tab"),function(){$.fn.dialog.hideLoader(),t.onPanelLoad(this)})})}),e.find(".dialog-launch").dialog(),e.find("[data-panel-menu=collapsible-list-group]").each(function(){var e,t=$(this),i=t.find(".list-group-item-collapse-wrapper"),n=t.attr("data-panel-menu-id"),o=t.find(".list-group-item-collapse span");t.find(".list-group-item-collapse").unbind(".clg").on("click.clg",function(){t.hasClass("ccm-panel-list-group-item-expanded")?(o.text(ccmi18n.expand),Concrete.event.publish("PanelCollapsibleListGroupCollapse",n),i.height(0)):(e=i.show().height("").outerHeight(),i.height(0),Concrete.event.publish("PanelCollapsibleListGroupExpand",n),o.text(ccmi18n.collapse),i.height(e)),t.toggleClass("ccm-panel-list-group-item-expanded")})}),e.find("[data-launch-panel-detail]").unbind(".detail").on("click.detail",function(){$.fn.dialog.showLoader(),$(".ccm-panel-menu-item-active").removeClass("ccm-panel-menu-item-active"),$(this).addClass("ccm-panel-menu-item-active");var e={identifier:$(this).attr("data-launch-panel-detail"),target:$(this)};return $(this).attr("data-panel-transition")&&(e.transition=$(this).attr("data-panel-transition")),$(this).attr("data-panel-detail-url")&&(e.url=$(this).data("panel-detail-url")),t.openPanelDetail(e),!1}),t.loadPanelDetailActions(e)},this.show=function(e){e=e||$.noop;var i=$("#"+this.getDOMID()),n=this,o=function(){t.addClass("ccm-panel-open"),i.find(".ccm-panel-content-wrapper").html(""),i.addClass("ccm-panel-active ccm-panel-loading"),$("<div/>").addClass("ccm-panel-content ccm-panel-content-visible").appendTo(i.find(".ccm-panel-content-wrapper")).load(n.getURL()+"?cID="+CCM_CID,function(){i.delay(1).queue(function(){$(this).removeClass("ccm-panel-loading").addClass("ccm-panel-loaded"),$(this).dequeue()}),n.onPanelLoad(i),n.isOpen=!0,Concrete.event.publish("PanelOpen",{panel:n,element:this}),n.options.overlay&&s.showOverlay(n.options.translucent)}),t.addClass(n.getPositionClass())};if(this.options.primary){var r=_(s.getPanels()).findWhere({isOpen:!0});r?r.hide(function(){o.call(this)}):o.call(this)}else o.call(this);$(".ccm-toolbar-mobile-menu-button").removeClass("ccm-mobile-close"),$(".ccm-mobile-menu-overlay").slideUp()}}var o,s=(o=[],{getPanels:function(){return o},showOverlay:function(e){$("#ccm-panel-overlay").clearQueue().show(0).delay(100).queue(function(){e?$(this).addClass("ccm-panel-translucent"):$(this).removeClass("ccm-panel-translucent"),$(this).dequeue()})},exitPanelMode:function(e){e=e||$.noop;var t=0;function i(){0==--t&&e.call(null)}for(var n=0;n<o.length;n++)o[n].isOpen&&(t++,o[n].hide(i))},register:function(e){var t=new n($.extend({translucent:!0,overlay:!0,position:"left",primary:!0,transition:"slide"},e));o.push(t),$("#"+t.getDOMID()).length||($("<div />",{id:t.getDOMID(),class:"ccm-panel "+t.getPositionClass()}).appendTo($(document.body)),$("<div />",{class:"ccm-panel-content-wrapper ccm-ui"}).appendTo($("#"+t.getDOMID())))},getByIdentifier:function(e){for(var t=0;t<o.length;t++)if(o[t].getIdentifier()==e)return o[t]}});e.ConcretePanel=n,e.ConcretePanelManager=s}).call(t,i(2))},function(e,t){!function(e,t){"use strict";var i,n,o=t("#ccm-toolbar"),s=t("#ccm-nav-intelligent-search"),r=t("#ccm-intelligent-search-results");function a(){s.bind("keydown.ccm-intelligent-search",function(e){if(13==e.keyCode||40==e.keyCode||38==e.keyCode){if(e.preventDefault(),e.stopPropagation(),13==e.keyCode&&t("a.ccm-intelligent-search-result-selected").length>0){var i=t("a.ccm-intelligent-search-result-selected").attr("href");i&&"#"!=i&&"javascript:void(0)"!=i?window.location.href=i:t("a.ccm-intelligent-search-result-selected").click()}var n,o=t("#ccm-intelligent-search-results li:visible");40!=e.keyCode&&38!=e.keyCode||(t.each(o,function(i,s){var r;t(s).children("a").hasClass("ccm-intelligent-search-result-selected")&&(r=38==e.keyCode?o[i-1]:o[i+1],n=t(r).find("a"))}),n&&n.length>0&&(t("a.ccm-intelligent-search-result-selected").removeClass(),t(n).addClass("ccm-intelligent-search-result-selected")))}}),s.liveUpdate("ccm-intelligent-search-results","intelligent-search"),s.bind("keyup.ccm-intelligent-search",function(e){!function(e){if(!(e=t.trim(e)))return;if(e.length>2){if(e==i)return;n&&window.clearTimeout(n),i=e,n=window.setTimeout(function(){n=null,t("#ccm-intelligent-search-results-list-marketplace").parent().show(),t("#ccm-intelligent-search-results-list-help").parent().show(),t("#ccm-intelligent-search-results-list-your-site").parent().show(),t("#ccm-intelligent-search-results-list-marketplace").parent().removeClass("ccm-intelligent-search-results-module-loaded"),t("#ccm-intelligent-search-results-list-help").parent().removeClass("ccm-intelligent-search-results-module-loaded"),t("#ccm-intelligent-search-results-list-your-site").parent().removeClass("ccm-intelligent-search-results-module-loaded"),t.getJSON(CCM_DISPATCHER_FILENAME+"/ccm/system/marketplace/search",{q:i},function(e){t("#ccm-intelligent-search-results-list-marketplace").parent().addClass("ccm-intelligent-search-results-module-loaded"),t("#ccm-intelligent-search-results-list-marketplace").html("");for(var i=0;i<e.length;i++){var n=e[i],o="ConcreteMarketplace.getMoreInformation("+n.mpID+")";t("#ccm-intelligent-search-results-list-marketplace").append('<li><a href="javascript:void(0)" onclick="'+o+'"><img src="'+n.img+'" />'+n.name+"</a></li>")}0==e.length&&t("#ccm-intelligent-search-results-list-marketplace").parent().hide(),0==t(".ccm-intelligent-search-result-selected").length&&(t("#ccm-intelligent-search-results").find("li a").removeClass("ccm-intelligent-search-result-selected"),t("#ccm-intelligent-search-results li:visible a:first").addClass("ccm-intelligent-search-result-selected")),l()}).error(function(){t("#ccm-intelligent-search-results-list-marketplace").parent().hide()}),t.getJSON(CCM_DISPATCHER_FILENAME+"/ccm/system/backend/get_remote_help",{q:i},function(e){t("#ccm-intelligent-search-results-list-help").parent().addClass("ccm-intelligent-search-results-module-loaded"),t("#ccm-intelligent-search-results-list-help").html("");for(var i=0;i<e.length;i++){var n=e[i];t("#ccm-intelligent-search-results-list-help").append('<li><a href="'+n.href+'">'+n.name+"</a></li>")}0==e.length&&t("#ccm-intelligent-search-results-list-help").parent().hide(),0==t(".ccm-intelligent-search-result-selected").length&&(t("#ccm-intelligent-search-results").find("li a").removeClass("ccm-intelligent-search-result-selected"),t("#ccm-intelligent-search-results li:visible a:first").addClass("ccm-intelligent-search-result-selected")),l()}).error(function(){t("#ccm-intelligent-search-results-list-help").parent().hide()}),t.getJSON(CCM_DISPATCHER_FILENAME+"/ccm/system/backend/intelligent_search",{q:i},function(e){t("#ccm-intelligent-search-results-list-your-site").parent().addClass("ccm-intelligent-search-results-module-loaded"),t("#ccm-intelligent-search-results-list-your-site").html("");for(var i=0;i<e.length;i++){var n=e[i];t("#ccm-intelligent-search-results-list-your-site").append('<li><a href="'+n.href+'">'+n.name+"</a></li>")}0==e.length&&t("#ccm-intelligent-search-results-list-your-site").parent().hide(),0==t(".ccm-intelligent-search-result-selected").length&&(t("#ccm-intelligent-search-results").find("li a").removeClass("ccm-intelligent-search-result-selected"),t("#ccm-intelligent-search-results li:visible a:first").addClass("ccm-intelligent-search-result-selected")),l()}).error(function(){t("#ccm-intelligent-search-results-list-your-site").parent().hide()})},500)}}(t(this).val())}),s.bind("click",function(e){""==this.value&&r.hide()})}function l(){0==t("#ccm-intelligent-search-results div:visible").length&&t("#ccm-intelligent-search-results").hide(),t("#ccm-intelligent-search-results a").hover(function(){t("a.ccm-intelligent-search-result-selected").removeClass(),t(this).addClass("ccm-intelligent-search-result-selected")},function(){t(this).removeClass("ccm-intelligent-search-result-selected")})}s.length&&r.css("right",t(window).width()-s.offset().left-r.width()-1),e.ConcreteToolbar={start:function(){o.length>0&&(o.find(".dialog-launch").dialog(),a(),t("<div />",{id:"ccm-panel-overlay"}).appendTo(t(document.body)),t("[data-launch-panel]").each(function(){t(this).prepend('<span class="spinner"><div class="double-bounce1"></div><div class="double-bounce2"></div></span>')}),t("[data-launch-panel]").unbind().on("click",function(e){var i=t(this),n=i.attr("data-launch-panel"),o=ConcretePanelManager.getByIdentifier(n);if(i.attr("data-original-icon-class")||i.attr("data-original-icon-class",i.find("i").attr("class")),e.altKey||i.find("i").hasClass(i.attr("data-original-icon-class"))||i.find("i").removeClass().addClass(i.attr("data-original-icon-class")),o.isPinable()){var s=t(i.parent());e.altKey?o.pinned()||(i.find("i").removeClass().addClass("fa fa-lock"),s.addClass("ccm-toolbar-page-edit-mode-pinned"),o.isPinned=!0,o.isOpen||o.show()):(o.isPinned&&(o.isPinned=!1,s.removeClass("ccm-toolbar-page-edit-mode-pinned")),i.toggleClass("ccm-launch-panel-loading"),o.toggle())}else i.toggleClass("ccm-launch-panel-loading"),o.toggle();return!1}),t("html").addClass("ccm-panel-ready"),ConcreteEvent.subscribe("PanelOpen",function(e,i){var n=i.panel;"page"==n.options.identifier&&t("#"+n.getDOMID()).find("[data-launch-panel-detail='page-composer']").click(),t("a[data-toolbar-action=check-in]").on("click.close-check-in",function(){return ConcretePanelManager.exitPanelMode(),!1})}),ConcreteEvent.subscribe("PanelClose",function(e){t("a[data-toolbar-action=check-in]").unbind("click.close-check-in")}),0==t("#ccm-tooltip-holder").length&&t("<div />").attr("id","ccm-tooltip-holder").attr("class","ccm-ui").prependTo(document.body),t(".launch-tooltip").tooltip({container:"#ccm-tooltip-holder"}),t(document.body).on("click","a[data-dismiss-alert=page-alert]",function(e){return e.stopPropagation(),t(this).closest(".ccm-notification").queue(function(){t(this).addClass("animated fadeOut"),t(this).dequeue()}).delay(500).queue(function(){t(this).remove(),t(this).dequeue()}),!1}),t("form[data-form=workflow]").ajaxForm({dataType:"json",beforeSubmit:function(){t.fn.dialog.showLoader()},success:function(e){e.redirect&&(window.location.href=e.redirect)}}),t("a[data-workflow-task]").on("click",function(e){var i=t(this).attr("data-workflow-task"),n=t(this).closest("form[data-form=workflow]");n.append('<input type="hidden" name="action_'+i+'" value="'+i+'">'),n.submit()}),function(){t(".ccm-notification .dialog-launch").dialog(),t("a[data-help-notification-toggle]").concreteHelpLauncher(),t("a[data-help-launch-dialog=main]").on("click",function(e){e.preventDefault(),(new ConcreteHelpDialog).open()});var e=ConcreteHelpGuideManager.get();e.getGuideToLaunchOnRefresh()&&ConcreteHelpGuideManager.getGuide(e.getGuideToLaunchOnRefresh()).start()}(),function(){t(".ccm-toolbar-mobile-menu-button").click(function(){t(this).toggleClass("ccm-mobile-close"),t(".ccm-mobile-menu-overlay").slideToggle()});var e=t(".ccm-mobile-menu-entries li.nav-selected").parentsUntil(".ccm-mobile-menu-entries").show();t(e).last().find(".drop-down-toggle:first, .nav-path-selected:not(.nav-selected) > .drop-down-toggle").removeClass("fa-caret-down").addClass("fa-caret-up"),t(".ccm-mobile-menu-entries .drop-down-toggle").on("click",function(){t(this).toggleClass("fa-caret-down fa-caret-up"),t(this).next("ul").slideToggle();var e=t(this).parent("li");t(e).siblings("li").find("ul").slideUp(),t(e).siblings("li").find(".drop-down-toggle").removeClass("fa-caret-up").addClass("fa-caret-down")})}())},disable:function(){t("#ccm-toolbar-disabled").remove(),t("<div />",{id:"ccm-toolbar-disabled"}).appendTo(document.body),setTimeout(function(){t("#ccm-toolbar-disabled").css("opacity",1)},10)},enable:function(){t("#ccm-toolbar-disabled").remove()},disableDirectExit:function(){var e=t("li.ccm-toolbar-page-edit a");"check-in"!=e.attr("data-launch-panel")&&"check-in"!=e.attr("data-disable-panel")&&e.attr("data-launch-panel","check-in").on("click",function(){return t(this).toggleClass("ccm-launch-panel-active"),ConcretePanelManager.getByIdentifier("check-in").toggle(),!1})}}}(window,jQuery)},function(module,exports){function fixDialogButtons(e){var t=e.find(".dialog-buttons").eq(0);if(0!==t.length&&0!==$.trim(t.html()).length){var i=e.parent();0===i.find(".ui-dialog-buttonset").length&&(e.jqdialog("option","buttons",[{}]),i.find(".ui-dialog-buttonset").remove(),t.removeClass().addClass("ccm-ui").appendTo(i.find(".ui-dialog-buttonpane").empty()))}}$.widget("concrete.dialog",$.ui.dialog,{_allowInteraction:function(e){return!!$(e.target).closest(".ccm-interaction-dialog").length||!!$(e.target).closest(".cke_dialog").length||this._super(e)}}),$.widget.bridge("jqdialog",$.concrete.dialog),$.fn.dialog=function(){switch(arguments.length){case 0:if($(this).is("div"))return void $(this).jqdialog();break;case 1:var e=arguments[0];if($.isPlainObject(e)){var t=e.open||null;e.open=function(e,i){fixDialogButtons($(this)),t&&t.call(this,e,i)}}return void $.fn.jqdialog.call($(this),e);default:return void $.fn.jqdialog.apply($(this),arguments)}return $(this).each(function(){$(this).unbind("click.make-dialog").bind("click.make-dialog",function(e){if(e.preventDefault(),!$(this).hasClass("ccm-dialog-launching")){$(this).addClass("ccm-dialog-launching");var t=$(this).attr("href"),i=$(this).attr("dialog-width"),n=$(this).attr("dialog-height"),o=$(this).attr("dialog-title"),s=$(this).attr("dialog-on-open"),r=$(this).attr("dialog-class"),a={modal:!0,href:t,width:i,height:n,title:o,onOpen:s,onDestroy:$(this).attr("dialog-on-destroy"),dialogClass:r,onClose:$(this).attr("dialog-on-close"),onDirectClose:$(this).attr("dialog-on-direct-close"),launcher:$(this)};$.fn.dialog.open(a)}})})},$.fn.dialog.close=function(e){$("#ccm-dialog-content"+ ++e).jqdialog("close")},$.fn.dialog.open=function(options){if("undefined"!=typeof ConcreteMenu){var activeMenu=ConcreteMenuManager.getActiveMenu();activeMenu&&activeMenu.hide()}var w,h;"string"==typeof options.width?"auto"==options.width?w="auto":options.width.indexOf("%",0)>0?(w=options.width.replace("%",""),w=$(window).width()*(w/100),w+=50):w=parseInt(options.width)+50:w=options.width?parseInt(options.width)+50:550,"string"==typeof options.height?"auto"==options.height?h="auto":options.height.indexOf("%",0)>0?(h=options.height.replace("%",""),h=$(window).height()*(h/100),h+=100):h=parseInt(options.height)+100:h=options.height?parseInt(options.height)+100:400,"auto"!==h&&h>$(window).height()&&(h=$(window).height()),options.width=w,options.height=h;var defaults={modal:!0,escapeClose:!0,width:w,height:h,dialogClass:"ccm-ui",resizable:!0,create:function(){$(this).parent().addClass("animated fadeIn")},open:function open(){var $dialog=$(this),nd=$(".ui-dialog").length;1==nd&&($("body").attr("data-last-overflow",$("body").css("overflow")),$("body").css("overflow","hidden"));var overlays=$(".ui-widget-overlay").length;if($(".ui-widget-overlay").each(function(e,t){e+1<overlays&&$(this).removeClass("animated fadeIn").css("opacity",0)}),1==overlays&&$(".ui-widget-overlay").addClass("animated fadeIn"),$.fn.dialog.activateDialogContents($dialog),$dialog.jqdialog("option","resizable")){var $wrapper=$($dialog.parent()),z=parseInt($wrapper.find(".ui-dialog-buttonpane").css("z-index"));$wrapper.find(".ui-resizable-handle").css("z-index",z+1e3)}void 0!==options.onOpen&&("function"==typeof options.onOpen?options.onOpen($dialog):eval(options.onOpen)),options.launcher&&options.launcher.removeClass("ccm-dialog-launching")},beforeClose:function(){1==$(".ui-dialog:visible").length&&$("body").css("overflow",$("body").attr("data-last-overflow"))},close:function close(ev,u){options.element||$(this).jqdialog("destroy").remove(),void 0!==options.onClose&&("function"==typeof options.onClose?options.onClose($(this)):eval(options.onClose)),void 0===options.onDirectClose||!ev.handleObj||"keydown"!=ev.handleObj.type&&"click"!=ev.handleObj.type||("function"==typeof options.onDirectClose?options.onDirectClose():eval(options.onDirectClose)),void 0!==options.onDestroy&&("function"==typeof options.onDestroy?options.onDestroy():eval(options.onDestroy));var overlays=$(".ui-widget-overlay").length;$(".ui-widget-overlay").each(function(e,t){e+1<overlays?$(this).css("opacity",0):$(this).css("opacity",1)})}},finalSettings={autoOpen:!1,data:{}};$.extend(finalSettings,defaults,options),finalSettings.element?($(finalSettings.element).jqdialog(finalSettings).jqdialog(),$(finalSettings.element).jqdialog("open")):($.fn.dialog.showLoader(),$.ajax({type:"GET",url:finalSettings.href,data:finalSettings.data,success:function(e){$.fn.dialog.hideLoader(),$("<div />").jqdialog(finalSettings).html(e).jqdialog("open")},error:function(e,t,i){$.fn.dialog.hideLoader(),ConcreteAlert.dialog(ccmi18n.error,ConcreteAjaxRequest.renderErrorResponse(e,!0))}}))},$.fn.dialog.activateDialogContents=function(e){if(e.find("button[data-dialog-action=cancel]").on("click",function(){$.fn.dialog.closeTop()}),e.find("[data-dialog-form]").each(function(){var e=$(this),t={};"progressive"==e.attr("data-dialog-form-processing")&&(t.progressiveOperation=!0,t.progressiveOperationElement="div[data-dialog-form-element=progress-bar]"),e.concreteAjaxForm(t)}),e.find("button[data-dialog-action=submit]").on("click",function(){e.find("[data-dialog-form]").submit()}),fixDialogButtons(e),e.find(".dialog-launch").dialog(),e.find(".ccm-dialog-close").on("click",function(){e.dialog("close")}),e.find(".launch-tooltip").tooltip({container:"#ccm-tooltip-holder"}),e.find(".dialog-help").length>0){e.find(".dialog-help").hide();var t=e.find(".dialog-help").html();ccmi18n.helpPopup?ccmi18n.helpPopup:"Help";var i=$('<button class="ui-dialog-titlebar-help ccm-menu-help-trigger"><i class="fa fa-info-circle"></i></button>'),n=$("#ccm-tooltip-holder");e.parent().find(".ui-dialog-titlebar").append(i),i.popover({content:function(){return t},placement:"bottom",html:!0,container:n,trigger:"click"}),i.on("shown.bs.popover",function(){var e=function(){i.popover("hide",i),e=$.noop};i.on("hide.bs.popover",function(t){i.unbind(t),e=$.noop}),$("body").mousedown(function(t){$(t.target).closest(n).length||$(t.target).closest(i).length||($(this).unbind(t),e())})})}},$.fn.dialog.getTop=function(){var e=$(".ui-dialog:visible").length;return $($(".ui-dialog:visible")[e-1]).find(".ui-dialog-content")},$.fn.dialog.replaceTop=function(e){var t=$.fn.dialog.getTop();t.html(e),$.fn.dialog.activateDialogContents(t)},$.fn.dialog.showLoader=function(e){NProgress.start()},$.fn.dialog.hideLoader=function(){NProgress.done()},$.fn.dialog.closeTop=function(){$.fn.dialog.getTop().jqdialog("close")},$.fn.dialog.closeAll=function(){$($(".ui-dialog-content").get().reverse()).jqdialog("close")},$.ui.dialog.prototype._focusTabbable=$.noop},function(e,t,i){"use strict";(function(e){var t=i(23);t.a.defaults.styling={container:"ccm-notification",notice:"ccm-notification-warning",notice_icon:"glyphicon glyphicon-exclamation-sign",info:"ccm-notification-info",info_icon:"glyphicon glyphicon-info-sign",success:"ccm-notification-success",success_icon:"glyphicon glyphicon-ok-sign",error:"ccm-notification-danger",error_icon:"glyphicon glyphicon-warning-sign",closer:"ccm-notification-closer",pin_up:!1,pin_down:!1},t.a.defaults.width="400px",t.a.defaults.addclass="ccm-ui",t.a.defaults.animate={animate:!0,in_class:"fadeIn",out_class:"bounceOutRight"};var n={dialog:function(e,t,i){var n=$('<div id="ccm-popup-alert" class="ccm-ui"><div id="ccm-popup-alert-message">'+t+"</div></div>");n.dialog({title:e,width:500,maxHeight:500,modal:!0,dialogClass:"ccm-ui",close:function(){n.remove(),i&&i()}})},confirm:function(e,t,i,n){var o=$('<div id="ccm-popup-confirmation" class="ccm-ui"><div id="ccm-popup-confirmation-message">'+e+"</div>");i=i?"btn "+i:"btn btn-primary",n=n||ccmi18n.go,o.dialog({title:ccmi18n.confirm,width:500,maxHeight:500,modal:!0,dialogClass:"ccm-ui",close:function(){o.remove()},buttons:[{}],open:function(){$(this).parent().find(".ui-dialog-buttonpane").addClass("ccm-ui").html(""),$(this).parent().find(".ui-dialog-buttonpane").append('<button onclick="jQuery.fn.dialog.closeTop()" class="btn btn-default">'+ccmi18n.cancel+'</button><button data-dialog-action="submit-confirmation-dialog" class="btn '+i+' pull-right">'+n+"</button></div>")}}),o.parent().on("click","button[data-dialog-action=submit-confirmation-dialog]",function(){return t()})},info:function(e){var t=$.extend({type:"info",icon:"question"},e);return this.notify(t)},error:function(e){var t=$.extend({type:"error",icon:"exclamation-circle"},e);return this.notify(t)},notify:function(e){var i=$.extend({type:"success",icon:"check",title:!1,message:!1,appendTo:!1,delay:2e3,callback:function(){}},e),n={text:i.message,icon:"fa fa-"+i.icon,type:i.type,delay:i.delay,after_close:i.callback};i.title&&(n.title=i.title),!1===i.hide&&(n.hide=i.hide),new t.a(n)}};e.ConcreteAlert=n}).call(t,i(2))},function(e,t){!function(e,t,i){"use strict";var n="pep",o={initiate:function(){},start:function(){},drag:function(){},stop:function(){},easing:null,rest:function(){},moveTo:!1,callIfNotStarted:["stop","rest"],startThreshold:[0,0],grid:[1,1],debug:!1,activeClass:"pep-active",startClass:"pep-start",easeClass:"pep-ease",multiplier:1,velocityMultiplier:2.5,shouldPreventDefault:!0,allowDragEventPropagation:!0,stopEvents:"",hardwareAccelerate:!0,useCSSTranslation:!0,disableSelect:!0,cssEaseString:"cubic-bezier(0.190, 1.000, 0.220, 1.000)",cssEaseDuration:1e3,shouldEase:!0,droppable:!1,droppableActiveClass:"pep-dpa",overlapFunction:!1,constrainTo:!1,removeMargins:!0,place:!0,deferPlacement:!1,axis:null,forceNonCSS3Movement:!1,elementsWithInteraction:"input",revert:!1,revertAfter:"stop",revertIf:function(){return!0},ignoreRightClick:!0,startPos:{left:null,top:null},useBoundingClientRect:!1};function s(t,i){return this.name=n,this.el=t,this.$el=e(t),this.options=e.extend({},o,i),this.$document=e(this.$el[0].ownerDocument),this.$body=this.$document.find("body"),this.moveTrigger="MSPointerMove pointermove touchmove mousemove",this.startTrigger="MSPointerDown pointerdown touchstart mousedown",this.stopTrigger="MSPointerUp pointerup touchend mouseup",this.startTriggerArray=this.startTrigger.split(" "),this.moveTriggerArray=this.moveTrigger.split(" "),this.stopTriggerArray=this.stopTrigger.split(" "),this.stopEvents=[this.stopTrigger,this.options.stopEvents].join(" "),"window"===this.options.constrainTo?this.$container=this.$document:this.options.constrainTo&&"parent"!==this.options.constrainTo?this.$container=e(this.options.constrainTo):this.$container=this.$el.parent(),this.isPointerEventCompatible()&&this.applyMSDefaults(),this.CSSEaseHash=this.getCSSEaseHash(),this.scale=1,this.started=!1,this.disabled=!1,this.autoAxis=!1,this.activeDropRegions=[],this.resetVelocityQueue(),this.init(),this}s.prototype.init=function(){this.options.debug&&this.buildDebugDiv(),this.options.disableSelect&&this.disableSelect(),this.options.place&&!this.options.deferPlacement&&(this.positionParent(),this.placeObject()),this.ev={},this.pos={},this.subscribe()},s.prototype.subscribe=function(){var e=this;this.onStartEvent=function(t){e.handleStart(t)},this.$el.on(this.startTrigger,this.onStartEvent),this.onStartEventOnElementsWithInteraction=function(e){e.ignorePropagation=!0},this.$el.on(this.startTrigger,this.options.elementsWithInteraction,this.onStartEventOnElementsWithInteraction),this.onStopEvents=function(t){e.handleStop(t)},this.$document.on(this.stopEvents,this.onStopEvents),this.onMoveEvents=function(t){e.moveEvent=t},this.$document.on(this.moveTrigger,this.onMoveEvents)},s.prototype.unsubscribe=function(){this.$el.off(this.startTrigger,this.onStartEvent),this.$el.off(this.startTrigger,this.options.elementsWithInteraction,this.onStartEventOnElementsWithInteraction),this.$document.off(this.stopEvents,this.onStopEvents),this.$document.off(this.moveTrigger,this.onMoveEvents)},s.prototype.handleStart=function(e){if(!e.ignorePropagation){var t=this;if(this.isValidMoveEvent(e)&&!this.disabled&&(!this.options.ignoreRightClick||3!==e.which)){if(this.isPointerEventCompatible()&&e.preventManipulation&&e.preventManipulation(),e=this.normalizeEvent(e),this.options.place&&this.options.deferPlacement&&(this.positionParent(),this.placeObject()),this.log({type:"event",event:e.type}),this.options.hardwareAccelerate&&!this.hardwareAccelerated&&(this.hardwareAccelerate(),this.hardwareAccelerated=!0),!1===this.options.initiate.call(this,e,this))return;clearTimeout(this.restTimeout),this.$el.addClass(this.options.activeClass),this.removeCSSEasing(),this.startX=this.ev.x=e.pep.x,this.startY=this.ev.y=e.pep.y,this.initialPosition=this.initialPosition||this.$el.position(),this.startEvent=this.moveEvent=e,this.active=!0,this.options.shouldPreventDefault&&e.preventDefault(),this.options.allowDragEventPropagation||e.stopPropagation(),function e(){t.active&&(t.handleMove(),t.requestAnimationFrame(e))}(),function e(){t.options.easing&&(t.easing&&t.options.easing.call(t,null,t),t.requestAnimationFrame(e))}()}}},s.prototype.handleMove=function(){if(void 0!==this.moveEvent){var i,n,o=this.normalizeEvent(this.moveEvent),s=t.parseInt(o.pep.x/this.options.grid[0])*this.options.grid[0],r=t.parseInt(o.pep.y/this.options.grid[1])*this.options.grid[1];if(this.addToLIFO({time:o.timeStamp,x:s,y:r}),e.inArray(o.type,this.startTriggerArray)>-1?(i=0,n=0):(i=s-this.ev.x,n=r-this.ev.y),this.dx=i,this.dy=n,this.ev.x=s,this.ev.y=r,0!==i||0!==n){var a=Math.abs(this.startX-s),l=Math.abs(this.startY-r);!this.started&&(a>this.options.startThreshold[0]||l>this.options.startThreshold[1])&&(this.started=!0,this.$el.addClass(this.options.startClass),this.options.start.call(this,this.startEvent,this)),this.doMoveTo(i,n),this.options.droppable&&this.calculateActiveDropRegions(),!1!==this.options.drag.call(this,o,this)?(this.log({type:"event",event:o.type}),this.log({type:"event-coords",x:this.ev.x,y:this.ev.y}),this.log({type:"velocity"})):this.resetVelocityQueue()}else this.log({type:"event",event:"** stopped **"})}},s.prototype.doMoveTo=function(e,t){var i,n,o=this.handleConstraint(e,t);"auto"!==this.options.axis||this.autoAxis||(Math.abs(e)>Math.abs(t)?this.autoAxis="x":Math.abs(e)<Math.abs(t)?this.autoAxis="y":(t=0,e=0)),"function"==typeof this.options.moveTo?(i=e>=0?"+="+Math.abs(e/this.scale)*this.options.multiplier:"-="+Math.abs(e/this.scale)*this.options.multiplier,n=t>=0?"+="+Math.abs(t/this.scale)*this.options.multiplier:"-="+Math.abs(t/this.scale)*this.options.multiplier,this.options.constrainTo&&(i=!1!==o.x?o.x:i,n=!1!==o.y?o.y:n),"x"!==this.options.axis&&"x"!==this.autoAxis||(n=o.y),"y"!==this.options.axis&&"y"!==this.autoAxis||(i=o.x),this.options.moveTo.call(this,i,n)):this.shouldUseCSSTranslation()?(e=e/this.scale*this.options.multiplier,t=t/this.scale*this.options.multiplier,this.options.constrainTo&&(e=!1===o.x?e:0,t=!1===o.y?t:0),"x"!==this.options.axis&&"x"!==this.autoAxis||(t=0),"y"!==this.options.axis&&"y"!==this.autoAxis||(e=0),this.moveToUsingTransforms(e,t)):(i=e>=0?"+="+Math.abs(e/this.scale)*this.options.multiplier:"-="+Math.abs(e/this.scale)*this.options.multiplier,n=t>=0?"+="+Math.abs(t/this.scale)*this.options.multiplier:"-="+Math.abs(t/this.scale)*this.options.multiplier,this.options.constrainTo&&(i=!1!==o.x?o.x:i,n=!1!==o.y?o.y:n),"x"!==this.options.axis&&"x"!==this.autoAxis||(n=o.y),"y"!==this.options.axis&&"y"!==this.autoAxis||(i=o.x),this.moveTo(i,n))},s.prototype.handleStop=function(t){this.active&&(this.log({type:"event",event:t.type}),this.active=!1,this.easing=!0,this.$el.removeClass(this.options.startClass).addClass(this.options.easeClass),this.options.droppable&&this.calculateActiveDropRegions(),(this.started||!this.started&&e.inArray("stop",this.options.callIfNotStarted)>-1)&&this.options.stop.call(this,t,this),this.options.shouldEase?this.ease(t,this.started):this.removeActiveClass(),this.options.revert&&("stop"===this.options.revertAfter||!this.options.shouldEase)&&this.options.revertIf&&this.options.revertIf.call(this)&&this.revert(),this.started=!1,this.autoAxis&&(this.autoAxis=!1),this.resetVelocityQueue())},s.prototype.ease=function(t,i){this.$el.position();var n=this.velocity(),o=(this.dt,n.x/this.scale*this.options.multiplier),s=n.y/this.scale*this.options.multiplier,r=this.handleConstraint(o,s,!0);this.cssAnimationsSupported()&&this.$el.css(this.getCSSEaseHash());var a=n.x>0?"+="+o:"-="+Math.abs(o),l=n.y>0?"+="+s:"-="+Math.abs(s);this.options.constrainTo&&(a=!1!==r.x?r.x:a,l=!1!==r.y?r.y:l),"x"!==this.options.axis&&"x"!==this.autoAxis||(l="+=0"),"y"!==this.options.axis&&"y"!==this.autoAxis||(a="+=0");var c=!this.cssAnimationsSupported()||this.options.forceNonCSS3Movement;"function"==typeof this.options.moveTo?this.options.moveTo.call(this,a,l):this.moveTo(a,l,c);var u=this;this.restTimeout=setTimeout(function(){u.options.droppable&&u.calculateActiveDropRegions(),u.easing=!1,(i||!i&&e.inArray("rest",u.options.callIfNotStarted)>-1)&&u.options.rest.call(u,t,u),u.options.revert&&"ease"===u.options.revertAfter&&u.options.shouldEase&&u.options.revertIf&&u.options.revertIf.call(u)&&u.revert(),u.removeActiveClass()},this.options.cssEaseDuration)},s.prototype.normalizeEvent=function(e){return e.pep={},this.isTouch(e)?(e.pep.x=e.originalEvent.touches[0].pageX,e.pep.y=e.originalEvent.touches[0].pageY,e.pep.type=e.type):!this.isPointerEventCompatible()&&this.isTouch(e)||(e.pageX?(e.pep.x=e.pageX,e.pep.y=e.pageY):(e.pep.x=e.originalEvent.pageX,e.pep.y=e.originalEvent.pageY),e.pep.type=e.type),e},s.prototype.resetVelocityQueue=function(){this.velocityQueue=new Array(5)},s.prototype.moveTo=function(e,t,i){this.log({type:"delta",x:e,y:t}),i?this.$el.animate({top:t,left:e},0,"easeOutQuad",{queue:!1}):this.$el.stop(!0,!1).css({top:t,left:e})},s.prototype.moveToUsingTransforms=function(e,t){var i=this.matrixToArray(this.matrixString());this.cssX||(this.cssX=this.xTranslation(i)),this.cssY||(this.cssY=this.yTranslation(i)),this.cssX=this.cssX+e,this.cssY=this.cssY+t,this.log({type:"delta",x:e,y:t}),i[4]=this.cssX,i[5]=this.cssY,this.translation=this.arrayToMatrix(i),this.transform(this.translation)},s.prototype.transform=function(e){this.$el.css({"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,"-o-transform":e,transform:e})},s.prototype.xTranslation=function(e){return e=e||this.matrixToArray(this.matrixString()),parseInt(e[4],10)},s.prototype.yTranslation=function(e){return e=e||this.matrixToArray(this.matrixString()),parseInt(e[5],10)},s.prototype.matrixString=function(){var e=function(e){return!(!e||"none"===e||e.indexOf("matrix")<0)},t="matrix(1, 0, 0, 1, 0, 0)";return e(this.$el.css("-webkit-transform"))&&(t=this.$el.css("-webkit-transform")),e(this.$el.css("-moz-transform"))&&(t=this.$el.css("-moz-transform")),e(this.$el.css("-ms-transform"))&&(t=this.$el.css("-ms-transform")),e(this.$el.css("-o-transform"))&&(t=this.$el.css("-o-transform")),e(this.$el.css("transform"))&&(t=this.$el.css("transform")),t},s.prototype.matrixToArray=function(e){return e.split("(")[1].split(")")[0].split(",")},s.prototype.arrayToMatrix=function(e){return"matrix("+e.join(",")+")"},s.prototype.addToLIFO=function(e){var t=this.velocityQueue;(t=t.slice(1,t.length)).push(e),this.velocityQueue=t},s.prototype.velocity=function(){for(var e=0,t=0,i=0;i<this.velocityQueue.length-1;i++)this.velocityQueue[i]&&(e+=this.velocityQueue[i+1].x-this.velocityQueue[i].x,t+=this.velocityQueue[i+1].y-this.velocityQueue[i].y,this.dt=this.velocityQueue[i+1].time-this.velocityQueue[i].time);return{x:e*this.options.velocityMultiplier,y:t*this.options.velocityMultiplier}},s.prototype.revert=function(){this.shouldUseCSSTranslation()&&this.moveToUsingTransforms(-this.xTranslation(),-this.yTranslation()),this.options.place&&this.moveTo(this.initialPosition.left,this.initialPosition.top)},s.prototype.requestAnimationFrame=function(e){return t.requestAnimationFrame&&t.requestAnimationFrame(e)||t.webkitRequestAnimationFrame&&t.webkitRequestAnimationFrame(e)||t.mozRequestAnimationFrame&&t.mozRequestAnimationFrame(e)||t.oRequestAnimationFrame&&t.mozRequestAnimationFrame(e)||t.msRequestAnimationFrame&&t.msRequestAnimationFrame(e)||t.setTimeout(e,1e3/60)},s.prototype.positionParent=function(){this.options.constrainTo&&!this.parentPositioned&&(this.parentPositioned=!0,"parent"===this.options.constrainTo?this.$container.css({position:"relative"}):"window"===this.options.constrainTo&&"#document"!==this.$container.get(0).nodeName&&"static"!==this.$container.css("position")&&this.$container.css({position:"static"}))},s.prototype.placeObject=function(){this.objectPlaced||(this.objectPlaced=!0,this.offset="parent"===this.options.constrainTo||this.hasNonBodyRelative()?this.$el.position():this.$el.offset(),parseInt(this.$el.css("left"),10)&&(this.offset.left=this.$el.css("left")),"number"==typeof this.options.startPos.left&&(this.offset.left=this.options.startPos.left),parseInt(this.$el.css("top"),10)&&(this.offset.top=this.$el.css("top")),"number"==typeof this.options.startPos.top&&(this.offset.top=this.options.startPos.top),this.options.removeMargins&&this.$el.css({margin:0}),this.$el.css({position:"absolute",top:this.offset.top,left:this.offset.left}))},s.prototype.hasNonBodyRelative=function(){return this.$el.parents().filter(function(){var t=e(this);return t.is("body")||"relative"===t.css("position")}).length>1},s.prototype.setScale=function(e){this.scale=e},s.prototype.setMultiplier=function(e){this.options.multiplier=e},s.prototype.removeCSSEasing=function(){this.cssAnimationsSupported()&&this.$el.css(this.getCSSEaseHash(!0))},s.prototype.disableSelect=function(){this.$el.css({"-webkit-touch-callout":"none","-webkit-user-select":"none","-khtml-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","user-select":"none"})},s.prototype.removeActiveClass=function(){this.$el.removeClass([this.options.activeClass,this.options.easeClass].join(" "))},s.prototype.handleConstraint=function(t,i,n){var o=this.$el.position();this.pos.x=o.left,this.pos.y=o.top;var s,r,a,l,c={x:!1,y:!1};return this.log({type:"pos-coords",x:this.pos.x,y:this.pos.y}),e.isArray(this.options.constrainTo)?(void 0!==this.options.constrainTo[3]&&void 0!==this.options.constrainTo[1]&&(r=!1===this.options.constrainTo[1]?1/0:this.options.constrainTo[1],a=!1===this.options.constrainTo[3]?-1/0:this.options.constrainTo[3]),!1!==this.options.constrainTo[0]&&!1!==this.options.constrainTo[2]&&(s=!1===this.options.constrainTo[2]?1/0:this.options.constrainTo[2],l=!1===this.options.constrainTo[0]?-1/0:this.options.constrainTo[0]),this.pos.x+t<a&&(c.x=a),this.pos.y+i<l&&(c.y=l)):"string"==typeof this.options.constrainTo&&(a=0,l=0,r=this.$container.width()-(this.options.useBoundingClientRect?this.$el[0].getBoundingClientRect().width:this.$el.outerWidth()),s=this.$container.height()-(this.options.useBoundingClientRect?this.$el[0].getBoundingClientRect().height:this.$el.outerHeight()),this.pos.x+t<0&&(c.x=0),this.pos.y+i<0&&(c.y=0)),this.pos.x+t>r&&(c.x=r),this.pos.y+i>s&&(c.y=s),this.shouldUseCSSTranslation()&&n&&(c.x===a&&this.xTranslation()&&(c.x=a-this.xTranslation()),c.x===r&&this.xTranslation()&&(c.x=r-this.xTranslation()),c.y===l&&this.yTranslation()&&(c.y=l-this.yTranslation()),c.y===s&&this.yTranslation()&&(c.y=s-this.yTranslation())),c},s.prototype.getCSSEaseHash=function(e){var t;if(void 0===e&&(e=!1),e)t="";else{if(this.CSSEaseHash)return this.CSSEaseHash;t=["all",this.options.cssEaseDuration+"ms",this.options.cssEaseString].join(" ")}return{"-webkit-transition":t,"-moz-transition":t,"-ms-transition":t,"-o-transition":t,transition:t}},s.prototype.calculateActiveDropRegions=function(){var t=this;this.activeDropRegions.length=0,e.each(e(this.options.droppable),function(i,n){var o=e(n);t.isOverlapping(o,t.$el)?(o.addClass(t.options.droppableActiveClass),t.activeDropRegions.push(o)):o.removeClass(t.options.droppableActiveClass)})},s.prototype.isOverlapping=function(e,t){if(this.options.overlapFunction)return this.options.overlapFunction(e,t);var i=e[0].getBoundingClientRect(),n=t[0].getBoundingClientRect();return!(i.right<n.left||i.left>n.right||i.bottom<n.top||i.top>n.bottom)},s.prototype.isTouch=function(e){return e.type.search("touch")>-1},s.prototype.isPointerEventCompatible=function(){return"MSPointerEvent"in t},s.prototype.applyMSDefaults=function(e){this.$el.css({"-ms-touch-action":"none","touch-action":"none","-ms-scroll-chaining":"none","-ms-scroll-limit":"0 0 0 0"})},s.prototype.isValidMoveEvent=function(e){return!this.isTouch(e)||this.isTouch(e)&&e.originalEvent&&e.originalEvent.touches&&1===e.originalEvent.touches.length},s.prototype.shouldUseCSSTranslation=function(){if(this.options.forceNonCSS3Movement)return!1;if(void 0!==this.useCSSTranslation)return this.useCSSTranslation;var e=!1;return e=!(!this.options.useCSSTranslation||"undefined"!=typeof Modernizr&&!Modernizr.csstransforms),this.useCSSTranslation=e,e},s.prototype.cssAnimationsSupported=function(){if(void 0!==this.cssAnimationsSupport)return this.cssAnimationsSupport;if("undefined"!=typeof Modernizr&&Modernizr.cssanimations)return this.cssAnimationsSupport=!0,!0;var e=!1,t=document.createElement("div"),i="Webkit Moz O ms Khtml".split(" "),n="";if(t.style.animationName&&(e=!0),!1===e)for(var o=0;o<i.length;o++)if(void 0!==t.style[i[o]+"AnimationName"]){(n=i[o])+"Animation","-"+n.toLowerCase()+"-",e=!0;break}return this.cssAnimationsSupport=e,e},s.prototype.hardwareAccelerate=function(){this.$el.css({"-webkit-perspective":1e3,perspective:1e3,"-webkit-backface-visibility":"hidden","backface-visibility":"hidden"})},s.prototype.getMovementValues=function(){return{ev:this.ev,pos:this.pos,velocity:this.velocity()}},s.prototype.buildDebugDiv=function(){var t;0===e("#pep-debug").length&&(t=e("<div></div>")).attr("id","pep-debug").append("<div style='font-weight:bold; background: red; color: white;'>DEBUG MODE</div>").append("<div id='pep-debug-event'>no event</div>").append("<div id='pep-debug-ev-coords'>event coords: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-pos-coords'>position coords: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-velocity'>velocity: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").append("<div id='pep-debug-delta'>&Delta; movement: <span class='pep-x'>-</span>, <span class='pep-y'>-</span></div>").css({position:"fixed",bottom:5,right:5,zIndex:99999,textAlign:"right",fontFamily:"Arial, sans",fontSize:10,border:"1px solid #DDD",padding:"3px",background:"white",color:"#333"});var i=this;setTimeout(function(){i.debugElements={$event:e("#pep-debug-event"),$velocityX:e("#pep-debug-velocity .pep-x"),$velocityY:e("#pep-debug-velocity .pep-y"),$dX:e("#pep-debug-delta .pep-x"),$dY:e("#pep-debug-delta .pep-y"),$evCoordsX:e("#pep-debug-ev-coords .pep-x"),$evCoordsY:e("#pep-debug-ev-coords .pep-y"),$posCoordsX:e("#pep-debug-pos-coords .pep-x"),$posCoordsY:e("#pep-debug-pos-coords .pep-y")}},0),e("body").append(t)},s.prototype.log=function(e){if(this.options.debug)switch(e.type){case"event":this.debugElements.$event.text(e.event);break;case"pos-coords":this.debugElements.$posCoordsX.text(e.x),this.debugElements.$posCoordsY.text(e.y);break;case"event-coords":this.debugElements.$evCoordsX.text(e.x),this.debugElements.$evCoordsY.text(e.y);break;case"delta":this.debugElements.$dX.text(e.x),this.debugElements.$dY.text(e.y);break;case"velocity":var t=this.velocity();this.debugElements.$velocityX.text(Math.round(t.x)),this.debugElements.$velocityY.text(Math.round(t.y))}},s.prototype.toggle=function(e){this.disabled=void 0===e?!this.disabled:!e},e.extend(e.easing,{easeOutQuad:function(e,t,i,n,o){return-n*(t/=o)*(t-2)+i},easeOutCirc:function(e,t,i,n,o){return n*Math.sqrt(1-(t=t/o-1)*t)+i},easeOutExpo:function(e,t,i,n,o){return t===o?i+n:n*(1-Math.pow(2,-10*t/o))+i}}),e.fn[n]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+n)){var i=new s(this,t);e.data(this,"plugin_"+n,i),e.pep.peps.push(i)}})},e.pep={},e.pep.peps=[],e.pep.toggleAll=function(t){e.each(this.peps,function(e,i){i.toggle(t)})},e.pep.unbind=function(t){e.each(t,function(t,i){var o=(i=e(i)).data("plugin_"+n);void 0!==o&&(o.toggle(!1),o.unsubscribe(),i.removeData("plugin_"+n))})}}(jQuery,window)},function(e,t){!function(e,t){"use strict";var i=t("html");(Concrete.EditMode=function(e){this.init.call(this,e)}).prototype={init:function(n){var o=this;n=n||{},n=t.extend({notify:!1},n),Concrete.createGetterSetters.call(o,{dragging:!1,active:!0,nextBlockArea:null,areas:[],selectedCache:[],selectedThreshold:5,dragAreaBlacklist:[]}),o.bindEvent("PanelLoad",function(e,t){o.panelOpened(t.panel,t.element)}),o.bindEvent("PanelClose",function(e,t){"add-block"==t.panel.getIdentifier()&&o.setNextBlockArea(null),i.removeClass("ccm-panel-add-block")}),o.bindEvent("EditModeAddBlockComplete EditModeUpdateBlockComplete",function(e){_.defer(function(){o.scanBlocks()})}),o.bindEvent("EditModeBlockSaveInline",function(e,i){t("#ccm-block-form").submit(),ConcreteEvent.fire("EditModeExitInlineSaved"),ConcreteEvent.fire("EditModeExitInline",{action:"save_inline"})}),o.bindEvent("EditModeBlockEditInline",function(e,i){var n,s=i.block,r=s.getArea(),a=i.action?i.action:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/block/edit",l=r.getEnableGridContainer()?1:0,c=r.getCustomTemplates(),u=[{name:"cID",value:s.getCID()},{name:"arHandle",value:r.getHandle()},{name:"arGridMaximumColumns",value:i.arGridMaximumColumns},{name:"arEnableGridContainer",value:l},{name:"aID",value:r.getId()},{name:"bID",value:s.getId()}],d=s.getElem();if(c)for(var h in c)u[u.length]={name:"arCustomTemplates["+h+"]",value:c[h]};if(s.getAttr("menu")&&s.getAttr("menu").destroy(),i.postData)for(n in i.postData)i.postData.hasOwnProperty(n)&&u.push({name:n,value:i.postData[n]});Concrete.event.unbind("EditModeExitInline.editmode"),o.bindEvent("EditModeExitInline.editmode",function(e,i){Concrete.event.unbind(e),e.stopPropagation();var n=CCM_DISPATCHER_FILENAME+"/ccm/system/block/render",a={cID:s.getCID(),arEnableGridContainer:l,bID:s.getId(),arHandle:r.getHandle()};t.fn.dialog.showLoader(),i&&i.action&&"save_inline"===i.action||t.get(n,a,function(e){var t=o.getBlockByID(s.getId());if(t){var i=t.replace(e);_.defer(function(){ConcreteEvent.fire("EditModeExitInlineComplete",{block:i}),o.destroyInlineEditModeToolbars(),_.defer(function(){o.scanBlocks()})})}})}),ConcreteToolbar.disable(),ConcreteMenuManager.$clickProxy.hide(),t("div.ccm-area").addClass("ccm-area-inline-edit-disabled"),s.getElem().addClass("ccm-block-edit-inline-active"),t.ajax({type:"GET",url:a,data:u,success:function(e){var i=t(e);d.empty().append(i).find(".ccm-block-edit").addClass("ccm-block-edit-inline-active"),o.loadInlineEditModeToolbars(d),t.fn.dialog.hideLoader(),Concrete.event.fire("EditModeInlineEditLoaded",{block:s,element:i})}})}),o.bindEvent("EditModeBlockAddInline",function(e,i){var n,s,r,a=i.area,l=i.selected,c=i.btID,u=i.cID,d=a.getEnableGridContainer()?1:0,h=[{name:"btask",value:"edit"},{name:"cID",value:u},{name:"arGridMaximumColumns",value:i.arGridMaximumColumns},{name:"arEnableGridContainer",value:d},{name:"arHandle",value:a.getHandle()},{name:"btID",value:c}];l?(r=l.getElem(),n=l.getBlock()):(r=a.getBlockContainer().children().last(),n=i.dragAreaBlock);var p=a.getCustomTemplates();if(p)for(var f in p)h[h.length]={name:"arCustomTemplates["+f+"]",value:p[f]};n&&(s=n.getId()),ConcreteMenuManager.disable(),ConcreteToolbar.disable(),t.fn.dialog.closeAll(),ConcreteMenuManager.$clickProxy.hide(),t("div.ccm-area").addClass("ccm-area-inline-edit-disabled"),t.fn.dialog.showLoader(),a.getAttr("menu")&&a.getAttr("menu").destroy();var m=!1;o.bindEvent("EditModeExitInlineSaved",function(e){Concrete.event.unbind(e),m=!0;var t=ConcretePanelManager.getByIdentifier("add-block");t&&t.pinned()&&t.show()}),o.bindEvent("EditModeExitInline",function(e){if(Concrete.event.unsubscribe(e),!m){t("#a"+a.getId()+"-bt"+c).remove(),o.destroyInlineEditModeToolbars(),ConcreteEvent.fire("EditModeExitInlineComplete");var i=ConcretePanelManager.getByIdentifier("add-block");i&&i.pinned()&&i.show()}}),t.ajax({type:"GET",url:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/page/add_block",data:h,success:function(e){var i=t(e),n=t('<div class="ccm-block-edit-inline-active"></div>');n.attr("id","a"+a.getId()+"-bt"+c).append(i),a.getElem().addClass("ccm-area-edit-inline-active"),r.after(n),t(function(){n.find("#ccm-block-form").concreteAjaxBlockForm({task:"add",btSupportsInlineAdd:!0,dragAreaBlockID:s,dragArea:l,placeholder:"#a"+a.getId()+"-bt"+c})}),o.loadInlineEditModeToolbars(n.find("div[data-container=inline-toolbar]"))},complete:function(){t.fn.dialog.hideLoader()}})}),Concrete.event.bind("EditModeBlockAddToClipboard",function(e,i){var n=i.block,o=n.getArea(),s=i.token;ConcreteToolbar.disableDirectExit(),t.ajax({type:"POST",url:CCM_TOOLS_PATH+"/pile_manager",data:"cID="+n.getCID()+"&bID="+n.getId()+"&arHandle="+encodeURIComponent(o.getHandle())+"&btask=add&scrapbookName=userScrapbook&ccm_token="+encodeURIComponent(s),success:function(e){ConcreteAlert.notify({message:ccmi18n.copyBlockToScrapbookMsg,title:ccmi18n.copyBlockToScrapbook})}})}),o.bindEvent("EditModeBlockDelete",function(e,t){t.block.delete(t.message)}),o.bindEvent("EditModeBlockDeleteComplete",function(e,t){var i=t.block;i.finishDelete(),ConcreteEvent.fire("EditModeBlockDeleteAfterComplete",{block:i})});var s=t(e.document),r=!1;function a(e,t,i,n,s,l,c){if(o.getDragging())if(s.call()){r=!0;var u=l.call(t),d=u+i,h=_.toArray(arguments),p=e.getDraggerPosition();l.call(t,d),p[c]-=u-l.call(t),e.renderPosition(),_.defer(function(){a.apply(this,h)},n)}else r=!1}o.bindEvent("EditModeBlockDrag",_.throttle(function(i,n){if(o.getDragging()){var l,c=n.block,u=n.pep,d=o.getAreas();c instanceof Concrete.Layout&&(d=[_(d).find(function(e){return c.getArea()===e})]),l=_.flatten(_(d).map(function(e){return e.contendingDragAreas(u,c)}),!0),_.defer(function(){Concrete.event.fire("EditModeContenders",l),o.selectContender(u,c,l,n.event)}),r||(a(c,s,2,10,function(){var i=c.getDraggerPosition().y-s.scrollTop();return c.getDragging()&&t(e).height()-i<=100},t.fn.scrollTop,"y"),a(c,s,-2,10,function(){var e=c.getDraggerPosition().y-s.scrollTop();return c.getDragging()&&e<=100},t.fn.scrollTop,"y"),a(c,s,2,10,function(){var i=c.getDraggerPosition().x-s.scrollLeft();return c.getDragging()&&t(e).width()-i<=100},t.fn.scrollLeft,"x"),a(c,s,-2,10,function(){var e=c.getDraggerPosition().x-s.scrollLeft();return c.getDragging()&&e<=100},t.fn.scrollLeft,"x"))}},250,{trailing:!1})),o.bindEvent("EditModeBlockDragStop",function(e,t){Concrete.event.fire("EditModeContenders",[]),Concrete.event.fire("EditModeSelectableContender"),i.removeClass("ccm-block-dragging"),t.block instanceof Concrete.BlockType||o.scanBlocks()}),o.bindEvent("EditModeBlockMove",function(i,n){var o=n.block,s=n.targetArea,r=n.sourceArea,a={ccm_token:e.CCM_SECURITY_TOKEN,area:s.getId(),sourceArea:r.getId(),block:o.getId(),blocks:[]},l=!1;s=s.inEditMode(s.getEditMode()),_(s.getBlocks()).each(function(e,t){a.blocks.push(e.getId())}),o.bindMenu();var c=setTimeout(function(){l=!0,t.fn.dialog.showLoader()},150);t.concreteAjax({url:CCM_DISPATCHER_FILENAME+"/ccm/system/page/arrange_blocks?cID="+o.getCID(),dataType:"json",data:a,skipResponseValidation:!0,success:function(e){clearTimeout(c),l&&t.fn.dialog.hideLoader(),ConcreteAjaxRequest.validateResponse(e,function(e){e?ConcreteToolbar.disableDirectExit():n.revert&&n.revert()})}})}),o.bindEvent("EditModeBlockDragStart",function(){i.addClass("ccm-block-dragging"),o.setDragging(!0)}),o.scanBlocks(),Concrete.getEditMode=function(){return o},n.notify&&ConcreteAlert.notify({message:ccmi18n.editModeMsg,title:ccmi18n.editMode}),ConcreteEvent.fire("EditModeAfterInit",{editMode:o})},bindEvent:function(e,t){return Concrete.event.bind(e,t)},reset:function(){_(this.getAreas()).each(function(e){e.destroy()}),this.setAttr("areas",[])},scanBlocks:function(){var e,i=this;i.reset(),t("div.ccm-area").each(function(){var n=t(this);n.parent().hasClass("ccm-block-stack")||((e=new Concrete.Area(n,i)).scanBlocks(),i.addArea(e))}),_.invoke(i.getAreas(),"bindMenu")},panelOpened:function(e,n){var o=this,s=o.getNextBlockArea();return"add-block"!==e.getIdentifier()?null:(i.addClass("ccm-panel-add-block"),t(n).find("input[data-input=search-blocks]").liveUpdate("ccm-panel-add-blocktypes-list","blocktypes"),t(n).find("input[data-input=search-blocks]").focus(),t(n).find("a.ccm-panel-add-block-draggable-block-type").each(function(){var e=t(this),i=t("<a/>").addClass("ccm-panel-add-block-draggable-block-type-dragger").appendTo(e);new Concrete.BlockType(t(this),o,i,s).setPeper(i)}),t(n).find("div.ccm-panel-add-block-stack-item").each(function(){var e=t(this).find(".ccm-panel-add-block-stack-item-handle");new Concrete.Stack(t(this),o,e,s).setPeper(e)}),t(n).find("div.ccm-panel-add-clipboard-block-item").each(function(){var e=t(this);new Concrete.DuplicateBlock(e,o,s)}),t(n).find("a.ccm-panel-add-container-item").each(function(){var e=t(this),i=e;new Concrete.Container(e,o,i,s)}),e)},getAreaByID:function(e){var t=this.getAreas();return _.findWhere(t,{id:parseInt(e)})},getBlockByID:function(e){var t=this.getAreas(),i=null;return _(t).every(function(t){return!i&&(_(t.getBlocks()).every(function(t){return t.getId()!=e||(i=t,!1)}),!0)}),i},selectContender:function(e,t,i,n){var o=this;if((i=_(i).filter(function(i){return i.isSelectable(e,t,n)})).length<2)return Concrete.event.fire("EditModeSelectableContender",_(i).first());var s=o.getSelectedCache(),r=o.getDragAreaBlacklist();o.getSelectedThreshold()!==s.length||_(s).without(_(s).last()).length||(r.push(_(s).last()),o.setDragAreaBlacklist(r),_.delay(function(e){var t=o.getDragAreaBlacklist();o.setDragAreaBlacklist(_(t).without(e))},5e3,_(s).last())),i=_(i).difference(r);var a=_(i).min(function(e){return e.centerDistanceToBlock(this)},t);return s.push(a),o.setSelectedCache(_(s).last(o.getSelectedThreshold())),Concrete.event.fire("EditModeSelectableContender",a),a},addArea:function(e){this.getAreas().push(e)},getBlocks:function(){var e=[];return _(this.getAreas()).each(function(t){e.push(t.getBlocks())}),_(e).flatten()},destroyInlineEditModeToolbars:function(){ConcreteMenuManager.enable(),t("div.ccm-area-edit-inline-active").removeClass("ccm-area-edit-inline-active"),t("div.ccm-block-edit-inline-active").remove(),ConcreteMenuManager.$clickProxy.show(),t("div.ccm-area").removeClass("ccm-area-inline-edit-disabled"),t("#ccm-toolbar").css("opacity",1),t("#ccm-inline-toolbar-container").remove(),t(e).unbind("scroll.inline-toolbar"),ConcreteToolbar.enable(),t.fn.dialog.hideLoader()},loadInlineEditModeToolbars:function(i,n){t("#ccm-inline-toolbar-container").remove();var o,s=t("<div />",{id:"ccm-inline-toolbar-container"}).appendTo(document.body);n?(s.append(n),o=s.find(".ccm-inline-toolbar")):(o=i.find(".ccm-inline-toolbar")).appendTo(s);var r=t(e),a=i.offset(),l=a.left,c=l+parseInt(o.width());if(r.width()>o.width())if(c>r.width()){var u=c-(l+i.width());o.css("left",l-u)}else o.css("left",l);o.css("opacity",1),o.find(".dialog-launch").dialog();var d=a.top-s.outerHeight()-5;s.css("top",d).css("opacity",1),r.scrollTop()>d&&(t("#ccm-toolbar-disabled,#ccm-toolbar").css("opacity",0),s.addClass("ccm-inline-toolbar-affixed")),r.on("scroll.inline-toolbar",function(){s.toggleClass("ccm-inline-toolbar-affixed",r.scrollTop()>d),r.scrollTop()>d?t("#ccm-toolbar-disabled,#ccm-toolbar").css("opacity",0):t("#ccm-toolbar-disabled,#ccm-toolbar").css("opacity",1)})}}}(window,jQuery)},function(e,t){!function(e,t){"use strict";(Concrete.Area=function(e,t){this.init.apply(this,_(arguments).toArray())}).prototype={init:function(e,i){var n=this;e.data("Concrete.area",n),Concrete.createGetterSetters.call(n,{id:e.data("area-id"),active:!0,blockTemplate:_(e.children("script[role=area-block-wrapper]").html()).template(),elem:e,totalBlocks:0,enableGridContainer:e.data("area-enable-grid-container"),customTemplates:e.data("area-custom-templates"),handle:e.data("area-handle"),dragAreas:[],blocks:[],editMode:i,maximumBlocks:parseInt(e.data("maximumBlocks"),10),blockTypes:e.data("accepts-block-types").toLowerCase().split(" "),blockContainer:e.children(".ccm-area-block-list")}),n.id=n.getId(),n.setTotalBlocks(0),n.bindEvent("EditModeBlockAddInline.area",function(e,t){t.area===n&&n.setTotalBlocks(n.getTotalBlocks()+1)}),n.bindEvent("EditModeAddBlocksToArea.area",function(e,i){i.area===n&&(n.getEditMode().setNextBlockArea(n),t('[data-launch-panel="add-block"]').click())})},inEditMode:function(e){return e.getAreaByID(this.getId())},destroy:function(){this.getAttr("menu")&&this.getAttr("menu").destroy(),Concrete.event.unbind(".ccm-area-a"+this.getId()),this.reset()},reset:function(){var e=this;_(e.getDragAreas()).each(function(e){e.destroy()}),_(e.getBlocks()).each(function(e){e.destroy()}),e.setBlocks([]),e.setDragAreas([]),e.setTotalBlocks(0)},bindEvent:function(e,t){return Concrete.EditMode.prototype.bindEvent.call(this,e+".ccm-area-a"+this.getId(),t)},scanBlocks:function(){var e,i,n=this;n.reset(),n.addDragArea(null),t("div.ccm-block-edit[data-area-id="+n.getId()+"]",this.getElem()).each(function(){var o=t(this),s=o.data("block-type-handle");e="core_container"===s?Concrete.ContainerBlock:"core_area_layout"===s?Concrete.Layout:"core_stack_display"===s?Concrete.StackDisplay:Concrete.Block,(i=new e(o,n.getEditMode())).setArea(n),n.addBlock(i)})},getBlockByID:function(e){return _.findWhere(this.getBlocks(),{id:e})},getMenuElem:function(){return t("[data-area-menu=area-menu-a"+this.getId()+"]")},bindMenu:function(){var e,i=this,n=i.getElem(),o=i.getTotalBlocks(),s=i.getMenuElem();e=o>0?"#area-menu-footer-"+i.getId():"div[data-area-menu-handle="+i.getId()+"]",i.getAttr("menu")&&i.getAttr("menu").destroy();var r={handle:e,highlightClassName:"ccm-area-highlight",menuActiveClass:"ccm-area-highlight",menu:t("[data-area-menu="+n.attr("data-launch-area-menu")+"]")};i.getElem().hasClass("ccm-global-area")&&(r.menuActiveClass+=" ccm-global-area-highlight",r.highlightClassName+=" ccm-global-area-highlight"),i.setAttr("menu",new ConcreteMenu(n,r)),s.find("a[data-menu-action=add-inline]").off("click.edit-mode").on("click.edit-mode",function(e){var n=!1;return _.each(i.getBlocks(),function(e){n=e}),Concrete.event.fire("EditModeBlockAddInline",{area:i,cID:CCM_CID,btID:t(this).data("block-type-id"),arGridMaximumColumns:t(this).attr("data-area-grid-maximum-columns"),event:e,dragAreaBlock:n,btHandle:t(this).data("block-type-handle")}),!1}),s.find("a[data-menu-action=edit-container-layout]").off("click.edit-mode").on("click.edit-mode",function(e){var i=t(this),n=parseInt(i.attr("data-container-layout-block-id")),o=Concrete.getEditMode(),s=_.findWhere(o.getBlocks(),{id:n});return Concrete.event.fire("EditModeBlockEditInline",{block:s,arGridMaximumColumns:i.attr("data-area-grid-maximum-columns"),event:e}),!1}),s.find("a[data-menu-action=edit-container-layout-style]").off("click.edit-mode").on("click.edit-mode",function(e){e.preventDefault();var i=t(this),n=parseInt(i.attr("data-container-layout-block-id")),o=Concrete.getEditMode(),s=_.findWhere(o.getBlocks(),{id:n});Concrete.event.fire("EditModeBlockEditInline",{block:s,event:e,action:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/block/design"})}),s.find("a[data-menu-action=area-add-block]").off("click.edit-mode").on("click.edit-mode",function(e){var t=i.getMaximumBlocks();return t<0||t>i.getTotalBlocks()?Concrete.event.fire("EditModeAddBlocksToArea",{area:i}):ConcreteAlert.error({message:ccmi18n.fullArea}),!1}),i.bindEvent("ConcreteMenuShow",function(e,t){if(t.menu==i.getAttr("menu")){var n=i.getMaximumBlocks(),o=t.menu.$menuPointer.find("a[data-menu-action=area-add-block]").parent();n<0||n>i.getTotalBlocks()?o.show():o.hide()}}),s.find("a[data-menu-action=edit-area-design]").off("click.edit-mode").on("click.edit-mode",function(e){e.preventDefault(),ConcreteToolbar.disable(),i.getElem().addClass("ccm-area-inline-edit-disabled");var n={arHandle:i.getHandle(),cID:CCM_CID};i.bindEvent("EditModeExitInline",function(e){Concrete.event.unsubscribe(e),i.getEditMode().destroyInlineEditModeToolbars()}),t.ajax({type:"GET",url:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/area/design",data:n,success:function(e){var n=i.getElem();i.getEditMode().loadInlineEditModeToolbars(n,e),t.fn.dialog.hideLoader()}})})},acceptsBlockType:function(e){return _(this.getBlockTypes()).contains(e.toLowerCase())},addBlock:function(e,t){return t?this.addBlockToIndex(e,_(this.getBlocks()).indexOf(t)+1):this.addBlockToIndex(e,this.getBlocks().length)},setTotalBlocks:function(e){this.setAttr("totalBlocks",e),this.getElem().attr("data-total-blocks",e)},addBlockToIndex:function(e,t){var i=this.getTotalBlocks(),n=this.getBlocks(),o=i-t;if(e.setArea(this),this.setTotalBlocks(i+1),o>0){for(var s=[],r=0;r<n.length;r++)r>=t?s[r+1]=n[r]:s[r]=n[r];s[t]=e,this.setBlocks(s)}else this.getBlocks()[t]=e;return this.addDragArea(e),e.getElem().attr("data-area-id",this.getId()),!0},removeBlock:function(e){var t=this,i=t.getTotalBlocks();t.getElem().removeClass("ccm-parent-menu-item-active"),e.getContainer().remove(),t.setBlocks(_(t.getBlocks()).without(e)),t.setTotalBlocks(i-1);var n=_.first(_(t.getDragAreas()).filter(function(t){return t.getBlock()===e}));return n&&(n.getElem().remove(),t.setDragAreas(_(t.getDragAreas()).without(n))),t.getTotalBlocks()||t.bindMenu(),!0},addDragArea:function(e){var i,n,o=this;if(e)i=t('<div class="ccm-area-drag-area"/>'),n=new Concrete.DragArea(i,o,e),e.getContainer().after(i);else{if(o.getDragAreas().length)throw new Error("No block supplied");i=t('<div class="ccm-area-drag-area"/>'),n=new Concrete.DragArea(i,o,e),o.getBlockContainer().prepend(i)}if(!o.getElem().parent().is("#ccm-stack-container")){var s=_(ccmi18n.emptyArea).template();i.text(s({area_handle:o.getElem().data("area-display-name")}))}return o.getDragAreas().push(n),n},contendingDragAreas:function(e,t){var i=this,n=i.getMaximumBlocks();return t instanceof Concrete.Stack||"core_stack_display"===t.getHandle()?_(i.getDragAreas()).filter(function(i){return i.isContender(e,t)}):n>0&&i.getBlocks().length>=n||!_(i.getBlockTypes()).contains(t.getHandle())?[]:_(i.getDragAreas()).filter(function(i){return i.isContender(e,t)})}}}(window,jQuery)},function(e,t){!function(e,t){"use strict";(Concrete.DragArea=function(e,t,i){this.init.apply(this,_.toArray(arguments))}).prototype={init:function(e,t,i){var n=this;Concrete.createGetterSetters.call(n,{block:i,active:!0,elem:e,area:t,isContender:!1,isSelectable:!1,animationLength:500}),n.bindEvent("EditModeContenders",function(e,t){n.setIsContender(_.contains(t,n))}),n.bindEvent("EditModeSelectableContender",function(e,t){n.setIsSelectable(t===n)})},destroy:function(){this.getElem().remove()},bindEvent:function(e,t){return Concrete.EditMode.prototype.bindEvent.apply(this,_(arguments).toArray())},getActive:function(){return this.getArea().getActive()&&this.getAttr("active")},isSelectable:function(e,t){return e.isOverlapping(t.getDragger(),this.getElem())},setIsSelectable:function(e){var t=this;return e&&!t.getIsSelectable()?(t.getArea().getElem().addClass("ccm-parent-menu-item-active"),t.getElem().addClass("ccm-area-drag-area-selectable")):!e&&t.getIsSelectable()&&(t.getArea().getElem().removeClass("ccm-parent-menu-item-active"),t.getElem().removeClass("ccm-area-drag-area-selectable")),t.setAttr("isSelectable",e),!0},isContender:function(e,t){return _.identity(e),this.getBlock()!==t},setIsContender:function(e){var t=this;return e&&!t.getIsContender()?_.defer(function(){t.getElem().addClass("ccm-area-drag-area-contender")}):!e&&t.getIsContender()&&_.defer(function(){t.getElem().removeClass("ccm-area-drag-area-contender")}),t.setAttr("isContender",e),!0},centerDistanceToBlock:function(e){var t=e.getDragger(),i=t.offset().left+t.width()/2,n=t.offset().top+t.height()/2,o=this.getElem(),s=o.offset().left+o.width()/2,r=o.offset().top+o.height()/2;return Math.sqrt(Math.pow(Math.abs(i-s),2)+Math.pow(Math.abs(n-r),2))}}}(window,jQuery)},function(e,t){!function(e,t){"use strict";(Concrete.Block=function(e,t,i){this.init.apply(this,_(arguments).toArray())}).prototype={init:function(e,i,n){var o=this;e.data("Concrete.block",o),e.children(".ccm-block-cover").length||t("<div/>").addClass("ccm-block-cover").appendTo(e),Concrete.createGetterSetters.call(o,{id:e.data("block-id"),active:!0,handle:e.data("block-type-handle"),areaId:e.data("area-id"),cID:e.data("cid"),wraps:!!e.data("block-type-wraps"),area:null,elem:e,dragger:null,draggerOffset:{x:0,y:0},draggerPosition:{x:0,y:0},dragging:!1,rotationDeg:0,editMode:i,selected:null,stepIndex:0,peper:n||e.children(".ccm-edit-mode-inline-commands, .ccm-custom-style-container").find('a[data-inline-command="move-block"]'),pepSettings:{}}),o.id=o.getId(),_(o.getPepSettings()).extend({deferPlacement:!0,moveTo:function(){o.dragPosition(this)},initiate:function(e,t){o.pepInitiate.call(o,this,e,t)},drag:function(e,t){o.pepDrag.call(o,this,e,t)},start:function(e,t){o.pepStart.call(o,this,e,t)},stop:function(e,t){o.pepStop.call(o,this,e,t)},place:!1}),o.bindEvent("EditModeSelectableContender",function(e,t){o.getDragging()&&t instanceof Concrete.DragArea?o.setSelected(t):o.getDragging()&&o.setSelected(null)}),o.getPeper().click(function(e){return e.preventDefault(),e.stopPropagation(),!1}).pep(o.getPepSettings())},destroy:function(){this.getPeper().unbind(),t.pep.unbind(this.getPeper()),this.setAttr("active",!1)},bindEvent:function(e,t){return Concrete.EditMode.prototype.bindEvent.apply(this,_(arguments).toArray())},getContainer:function(){for(var e=this.getElem();!e.parent().hasClass("ccm-area-block-list")&&!e.parent().is("[data-area-id]")&&e.parent().length;)e=e.parent();return e},move:function(e,i){var n,o,s=this,r=e.getDragAreas();(i=i||null,s.getArea().removeBlock(s),s.getContainer().remove(),s.getWraps()?(n=t(e.getBlockTemplate()())).children().length?n.find("div.block").replaceWith(s.getElem()):n.append(s.getElem()):n=s.getElem(),r.length>0)?(t.each(e.getDragAreas(),function(){if(this.getBlock()===i)return o=this,!1}),o.getElem().after(n)):null===i?e.getBlockContainer().prepend(n):i.getContainer().after(n);i?e.addBlock(s,i):e.addBlockToIndex(s,0),s.getPeper().pep(s.getPepSettings()),s.getEditMode().scanBlocks()},addToDragArea:function(e){var i=this,n=i.getArea(),o=e.getArea(),s=!1,r=null,a=null;t.each(n.getBlocks(),function(){if(this===i)return r=a,!1;a=this}),i.move(o,e.getBlock()),Concrete.event.fire("EditModeBlockMove",{block:i,sourceArea:n,targetArea:o,revert:function(){s||(s=!0,i.move(n,r))}})},handleAddResponse:function(e,i,n,o){var s=this,r=i.getEnableGridContainer()?1:0;if(!e.error)return t.get(CCM_DISPATCHER_FILENAME+"/ccm/system/block/render",{arHandle:e.arHandle,cID:e.cID,bID:e.bID,arEnableGridContainer:r},function(e){n?n.getContainer().after(e):i.getBlockContainer().prepend(e),t.fn.dialog.hideLoader(),_.defer(function(){s.getEditMode().scanBlocks(),s.showSuccessfulAdd(),Concrete.forceRefresh(),o&&o()})}),!0},showSuccessfulAdd:function(){ConcreteAlert.notify({message:ccmi18n.addBlockMsg,title:ccmi18n.addBlock})},delete:function(e){var i=this.getId(),n=this.getArea(),o=this.getCID(),s=n.getHandle(),r="cID="+o+"&ccm_token="+CCM_SECURITY_TOKEN+"&isAjax=true&btask=remove&bID="+i+"&arHandle="+encodeURIComponent(s);t.fn.dialog.open({width:460,height:"auto",href:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/block/delete",modal:!0,data:r,title:ccmi18n.deleteBlockTitle})},finishDelete:function(){ConcreteToolbar.disableDirectExit();var e=this.getId(),t=this.getArea(),i=t.getBlockByID(e);t.removeBlock(i)},replace:function(e){var i=t(e);return this.getContainer().replaceWith(i),this.getArea().scanBlocks(),this.getArea().getBlockByID(this.getId())},getMenuElem:function(){return t("div.ccm-edit-mode-block-menu",this.getElem()).first()},bindMenu:function(){var e=this,i=e.getElem(),n=i.attr("data-block-menu-handle"),o=e.getMenuElem();if("none"!==n){var s={highlightClassName:"ccm-block-highlight",menuActiveClass:"ccm-block-highlight",menu:o};e.getArea()&&e.getArea().getElem().hasClass("ccm-global-area")&&(s.menuActiveClass+=" ccm-global-area-block-highlight",s.highlightClassName+=" ccm-global-area-block-highlight"),e.setAttr("menu",new ConcreteMenu(i,s)),o.find("a[data-menu-action=edit_inline]").unbind("click.core").on("click.core",function(t){Concrete.event.fire("EditModeBlockEditInline",{block:e,event:t})}),o.find("a[data-menu-action=block_scrapbook]").unbind("click.core").on("click.core",function(i){Concrete.event.fire("EditModeBlockAddToClipboard",{block:e,event:i,token:t(this).data("token")})}),o.find("a[data-menu-action=delete_block]").unbind("click.core").on("click.core",function(i){Concrete.event.fire("EditModeBlockDelete",{message:t(this).attr("data-menu-delete-message"),block:e,event:i})}),o.find("a[data-menu-action=block_design]").unbind("click.core").on("click.core",function(t){t.preventDefault(),Concrete.event.fire("EditModeBlockEditInline",{block:e,event:t,action:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/block/design"})})}},setArea:function(e){this.setAttr("area",e);var i=this;i.getElem().find("a[data-menu-action=block_dialog]").each(function(){var n=t(this).data("menu-href");n+=-1!==n.indexOf("?")?"&cID="+i.getCID():"?cID="+i.getCID(),n+="&arHandle="+encodeURIComponent(e.getHandle())+"&bID="+i.getId(),t(this).attr("href",n).dialog()}),i.bindMenu()},getDragger:function(){var e=this;if(!e.getAttr("dragger")){var i=t("<a />").html(e.getElem().data("dragging-avatar")||'<p><img src="/concrete/blocks/content/icon.png"><span>'+ccmi18n.content+"</span></p>").addClass("ccm-block-edit-drag ccm-panel-add-block-draggable-block-type");e.setAttr("dragger",i.css({width:e.getElem().width(),height:e.getElem().height()}))}return e.getAttr("dragger")},transform:function(e,t){var i=this.getDragger().css({"-webkit-transform":e,"-moz-transform":e,"-ms-transform":e,"-o-transform":e,transform:e}).get(0);if(i.filters&&i.filters["DXImageTransform.Microsoft.Matrix"]){var n={elements:_(t).groupBy(function(e,t){return Math.floor(t/3)})};i.filters["DXImageTransform.Microsoft.Matrix"].M11=n.elements[0][0],i.filters["DXImageTransform.Microsoft.Matrix"].M12=n.elements[0][1],i.filters["DXImageTransform.Microsoft.Matrix"].M21=n.elements[1][0],i.filters["DXImageTransform.Microsoft.Matrix"].M22=n.elements[1][1],i.style.left=-i.offsetWidth/2+i.clientWidth/2+"px",i.style.top=-i.offsetHeight/2+i.clientHeight/2+"px"}return!0},resetTransform:function(){var e=this.getDragger().css({top:0,left:0,"-webkit-transform":"","-moz-transform":"","-ms-transform":"","-o-transform":"",transform:""}).get(0);return e.filters&&(e.filters=[]),this.setDraggerPosition({x:0,y:0}),this.renderPosition()},multiplyMatrices:function(e,t){for(var i=[],n=0;n<e.length;n++){i[n]=[];for(var o=0;o<e[0].length;o++){for(var s=0,r=0;r<e[0].length;r++)s+=e[n][r]*t[r][o];i[n][o]=s}}return i},matrixToCss:function(e){var t=Math.pow(10,4),i=function(e){return Math.round(e*t)/t};return e[0]=_(e[0]).map(i),e[1]=_(e[1]).map(i),"matrix("+[e[0][0],e[0][1],e[1][0],e[1][1],e[0][2],e[1][2]].join(",")+")"},endRotation:function(){var e=this,t=e.getRotationDeg();e.getDragger().animate({rotation:0},{duration:1,step:function(){}});var i=e.setStepIndex(e.getStepIndex()+1);return e.getDragger().animate({rotation:e.getRotationDeg()},{queue:!1,duration:150,step:function(n){e.getStepIndex()===i&&(e.setRotationDeg(t-n),e.renderPosition())}},"easeOutElastic"),!0},renderPosition:function(){var e,t,i=this,n=i.getDraggerPosition().x,o=i.getDraggerPosition().y,s=i.getRotationDeg()*(Math.PI/180),r=_.bind(Math.cos,Math),a=_.bind(Math.sin,Math),l=[[1,0,n],[0,1,o],[0,0,1]];return s?(e=[[r(s),a(s),0],[-a(s),r(s),0],[0,0,1]],t=i.multiplyMatrices(l,e)):t=l,this.transform(i.matrixToCss(t),t)},dragPosition:function(e){var t=this;t.setRotationDeg(Math.max(-15,Math.min(15,e.velocity().x/15))),t.endRotation();var i=_.last(e.velocityQueue),n=t.getDraggerOffset();i||(i={x:t.getDragger().offset().left,y:t.getDragger().offset().top});var o=i.x-n.x,s=i.y-n.y;return t.setDraggerPosition({x:o,y:s}),t.renderPosition(),!0},pepInitiate:function(t,i,n){var o=this;o.resetTransform(),o.setDragging(!0),o.getDragger().hide().appendTo(e.document.body).css(o.getElem().offset()),o.setDraggerOffset({x:i.clientX-o.getElem().offset().left+e.document.body.scrollLeft,y:i.clientY-o.getElem().offset().top+e.document.body.scrollTop}),o.getDragger().fadeIn(250),_.defer(function(){Concrete.event.fire("EditModeBlockDragInitialization",{block:o,pep:n,event:i})})},pepDrag:function(e,t,i){var n=this;_.defer(function(){Concrete.event.fire("EditModeBlockDrag",{block:n,pep:i,event:t})})},pepStart:function(e,i,n){var o=this;o.resetTransform();var s=o.getElem(),r=i.pageX,a=i.pageY,l={x:s.offset().left,y:s.offset().top},c=(l.x-r)/s.width(),u=(l.y-a)/s.height();o.setDraggerPosition({x:l.x,y:l.y}),o.renderPosition(),o.setDraggerOffset({x:c*s.width()*-1,y:u*s.height()*-1}),o.getDragger().animate({width:90,height:90},{duration:250,step:function(e,i){o.setDraggerOffset({x:c*t(this).width()*-1,y:u*t(this).height()*-1}),o.dragPosition(n)}}),_.defer(function(){Concrete.event.fire("EditModeBlockDragStart",{block:o,pep:n,event:i})})},pepStop:function(e,t,i){var n,o=this;o.getDragger().stop(1),o.getDragger().css({top:0,left:0}),o.dragPosition(i),(n=o.getSelected())&&o.addToDragArea(n),o.animateToElem(),_.defer(function(){Concrete.event.fire("EditModeBlockDragStop",{block:o,pep:i,event:t})})},animateToElem:function(e){var t=this,i=e||t.getElem(),n=t.getDraggerPosition().x,o=t.getDragger().offset().top,s=t.getDragger().width(),r=t.getDragger().height();t.setDragging(!1),t.getDragger().animate({ccm_perc:0},{duration:0,step:function(){}}).animate({ccm_perc:1,opacity:0},{duration:500,step:function(e,a){if("ccm_perc"===a.prop){var l={x:i.offset().left,y:i.offset().top,width:i.width(),height:i.height()},c={x:(l.x-n)*e,y:(l.y-o)*e,width:(l.width-s)*e,height:(l.height-r)*e};t.setDraggerPosition({x:n+c.x,y:o+c.y}),t.renderPosition(),t.getDragger().css({width:s+c.width,height:r+c.height})}else t.getDragger().css({opacity:e})},complete:function(){t.getDragger().remove(),t.setAttr("dragger",null)}})}}}(window,jQuery)},function(e,t){new Date;var i=new Date;$(window).on("mousemove keydown keyup",function(){(new Date).getTime()-i.getTime()<3e4||(i=new Date,$.ajax({async:!0,cache:!1,dataType:"json",type:"GET",url:CCM_DISPATCHER_FILENAME+"/ccm/system/heartbeat"}))})},function(e,t,i){(function(e){function t(e,t){var i=this;t=$.extend({},t),i.options=t,i.$element=e,i.$toolbar=i.$element.find(">ul"),i.$toolbar.find("div.dropdown-menu").on("click",function(e){if($(e.target).is("button"))return!0;e.stopPropagation()}),i.setupForm(),i.setupButtons(),i.setupSliders()}function i(e,i){t.call(this,e,i)}function n(e,i){t.call(this,e,i)}t.prototype={refreshStyles:function(e){e.oldIssID&&$("head").find("style[data-style-set="+e.oldIssID+"]").remove(),e.issID&&e.css&&$("head").append(e.css)},setupForm:function(){var e=this;e.$element.find(".launch-tooltip").tooltip(),e.$element.concreteAjaxForm({success:function(t){e.handleResponse(t)},error:function(t){e.$toolbar.prependTo("#ccm-inline-toolbar-container").show()}})},setupButtons:function(){var e=this;e.$toolbar.on("click.inlineStyleCustomizer","button[data-action=cancel-design]",function(){return e.$element.hide(),ConcreteEvent.fire("EditModeExitInline"),!1}),e.$toolbar.on("click.inlineStyleCustomizer","button[data-action=reset-design]",function(){return $.concreteAjax({url:$(this).attr("data-reset-action"),success:function(t){e.handleResponse(t)}}),!1}),e.$toolbar.on("click.inlineStyleCustomizer","button[data-action=save-design]",function(){return e.$toolbar.hide().prependTo(e.$element),e.$element.submit(),ConcreteEvent.unsubscribe("EditModeExitInlineComplete"),!1})},setupSliders:function(){this.$toolbar.find(".ccm-inline-style-sliders").each(function(){var e=$(this).next().children(".ccm-inline-style-slider-value"),t=e.attr("data-value-format"),i=$(this),n=parseInt($(this).attr("data-style-slider-min")),o=parseInt($(this).attr("data-style-slider-max")),s=$(this).attr("data-style-slider-default-setting"),r=function(){return parseInt(e.val().replace(/\D\-/g,""))},a=function(){(parseInt(s)===r()||isNaN(r()))&&e.prop("disabled",!0).val(s+t)};i.slider({min:n,max:o,value:r(),slide:function(i,n){e.prop("disabled",!1),e.val(n.value+t),a()}}),e.change(function(){var e=r();e>o?e=o:e<n?e=n:isNaN(e)&&(e=s),$(this).val(e+t),i.slider("value",e),a()}).blur(function(){a()}).parent().click(function(){e.prop("disabled")&&e.prop("disabled",!1).select()}),a()})}},i.prototype=Object.create(t.prototype),i.prototype.handleResponse=function(e){var t=this,i=new Concrete.getEditMode,n=i.getAreaByID(e.aID),o=n.getBlockByID(parseInt(e.originalBlockID)),s=n.getEnableGridContainer()?1:0,r=CCM_DISPATCHER_FILENAME+"/ccm/system/block/render";$.get(r,{arHandle:n.getHandle(),cID:e.cID,bID:e.bID,arEnableGridContainer:s},function(n){ConcreteToolbar.disableDirectExit();var s=o.replace(n);ConcreteAlert.notify({message:e.message}),t.refreshStyles(e),ConcreteEvent.fire("EditModeExitInline",{action:"save_inline",block:s}),ConcreteEvent.fire("EditModeExitInlineComplete",{block:s}),$.fn.dialog.hideLoader(),i.destroyInlineEditModeToolbars(),i.scanBlocks()})},n.prototype=Object.create(t.prototype),n.prototype.handleResponse=function(e){var t=new Concrete.getEditMode,i=t.getAreaByID(e.aID);this.refreshStyles(e),i.getElem().removeClassExcept("ccm-area ccm-global-area"),e.containerClass&&i.getElem().addClass(e.containerClass),t.destroyInlineEditModeToolbars()},$.fn.concreteBlockInlineStyleCustomizer=function(e){return $.each($(this),function(t,n){new i($(this),e)})},$.fn.concreteAreaInlineStyleCustomizer=function(e){return $.each($(this),function(t,i){new n($(this),e)})},$.fn.removeClassExcept=function(e){return this.each(function(t,i){for(var n=e.split(" "),o=[],s=$(i),r=0;r<n.length;r++)s.hasClass(n[r])&&o.push(n[r]);s.removeClass().addClass(o.join(" "))})},e.ConcreteBlockInlineStyleCustomizer=i,e.ConcreteAreaInlineStyleCustomizer=n}).call(t,i(2))},function(e,t,i){(function(e){function t(e,t){var i=this;t=$.extend({inputName:!1,unit:"px",appendTo:document.body},t),i.options=t,i.opened=!1,i.$element=e,i.$container=$(i.options.appendTo),i._chooseTemplate=_.template(i.chooseTemplate,{options:i.options,i18n:ccmi18n}),i._selectorTemplate=_.template(i.selectorWidgetTemplate,{options:i.options,i18n:ccmi18n}),i.$element.append(i._chooseTemplate),i.$widget=$(i._selectorTemplate),i.$container.append(i.$widget),i.$widget.find(".launch-tooltip").tooltip(),i.$widget.find("div.ccm-style-customizer-palette-actions button").on("click.style-customizer-palette",function(e){return i.save(e),!1}),i.$element.on("click.style-customizer-palette","[data-launch=style-customizer-palette]",function(e){if(i.opened)i.closeSelector(e);else{var t=i.getPosition();i.$widget.css({top:t.top,left:t.left}).show().on("click.style-customizer-palette",function(e){e.stopPropagation()}),$(document).on("click.style-customizer-palette",function(e){i.closeSelector(e)}),i.opened=!0}return!1})}t.prototype={setValue:function(e,t){this.$element.find("input[data-style-customizer-input="+e+"]").val(t)},getPosition:function(){return this.getOffset(this.$widget,this.$element)},getOffset:function(e,t){var i=e.outerWidth(),n=e.outerHeight(),o=t.outerHeight(),s=e[0].ownerDocument,r=s.documentElement,a=r.clientWidth+$(s).scrollLeft(),l=r.clientHeight+$(s).scrollTop(),c=t.offset();return c.top+=o,c.left-=Math.min(c.left,c.left+i>a&&a>i?Math.abs(c.left+i-a):0),c.top-=Math.min(c.top,c.top+n>l&&l>n?Math.abs(n+o- -5):-5),c},getValue:function(e){return this.$element.find("input[data-style-customizer-input="+e+"]").val()},closeSelector:function(e){this.$widget.hide(),this.opened=!1,$(document).unbind("click.style-customizer-palette")},updateSwatch:function(){window.alert("You must implement this method updateSwatch.")},save:function(e){this.updateSwatch(),this.closeSelector(e),ConcreteEvent.publish("StyleCustomizerControlUpdate")}},e.ConcreteStyleCustomizerPalette=t}).call(t,i(2))},function(e,t,i){(function(e){function t(e,t){var i=this;i.$element=e,i.options=$.extend(!0,{initialColor:"",i18n:{cancel:"Cancel",choose:"Choose",clear:"Clean"}},t||{}),e.spectrum({showInput:!0,showInitial:!0,preferredFormat:"rgb",allowEmpty:!0,className:"ccm-widget-colorpicker",showAlpha:!0,value:i.options.initialColor,cancelText:i.options.i18n.cancel,chooseText:i.options.i18n.choose,clearText:i.options.i18n.clear,change:function(){ConcreteEvent.publish("StyleCustomizerControlUpdate")}}),e.addClass("ccm-style-customizer-importexport").data("ccm-style-customizer-importexport",this)}t.prototype={exportStyle:function(e,t){var i=(this.$element.attr("name")||"").match(/^(.+)\[color\]$/);if(i){var n=this.$element.spectrum("get");i[1]in e||(e[i[1]]={}),e[i[1]].color=n?n.toHex8String():"",t()}else t()},importStyle:function(e,t){var i=(this.$element.attr("name")||"").match(/^(.+)\[color\]$/);i?(e[i[1]]&&"string"==typeof e[i[1]].color&&this.$element.spectrum("set",e[i[1]].color),t()):t()}},$.fn.concreteStyleCustomizerColorPicker=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcreteStyleCustomizerColorPicker=t}).call(t,i(2))},function(e,t,i){(function(e){function t(e,t){t=$.extend({inputName:!1,value:!1},t),ConcreteStyleCustomizerPalette.call(this,e,t),this.$widget.find("div[data-style-customizer-field=image]").concreteFileSelector({inputName:this.options.inputName}),e.addClass("ccm-style-customizer-importexport").data("ccm-style-customizer-importexport",this)}t.prototype=Object.create(ConcreteStyleCustomizerPalette.prototype),t.prototype.chooseTemplate='<span data-launch="style-customizer-palette" class="ccm-style-customizer-display-swatch"><input type="hidden" value="<%=options.value%>" name="<%=options.inputName%>[image]" data-style-customizer-input="image" /><span class="ccm-ui"><i class="fa fa-picture-o"></i></span></span>',t.prototype.selectorWidgetTemplate='<div class="ccm-ui ccm-style-customizer-palette"><% if (options.value) { %><div><label><%=i18n.currentImage%></label><div><img style="width: 100%" src="<%=options.value%>" /></div></div><% } %><div><label><%=i18n.image%></label><div data-style-customizer-field="image" class="ccm-file-selector"></div></div><div class="ccm-style-customizer-palette-actions"><button class="btn btn-primary"><%=i18n.save%></button></div></div>',t.prototype.save=function(e){var t,i=this.$widget.find("div.ccm-file-selector-file-selected");i.length&&(t=i.find("input[type=hidden]").val()),this.setValue("image",t),ConcreteEvent.publish("StyleCustomizerControlUpdate"),this.closeSelector(e)},t.prototype.exportStyle=function(e,t){var i=this;if(i.options.inputName){var n=i.$element.find('input[data-style-customizer-input="image"]');1===n.length?(i.options.inputName in e||(e[i.options.inputName]={}),e[i.options.inputName].image=n.val(),t()):t()}else t()},t.prototype.importStyle=function(e,t){var i=this;i.options.inputName&&e[i.options.inputName]&&"string"==typeof e[i.options.inputName].image&&i.$element.find('input[data-style-customizer-input="image"]').val(e[i.options.inputName].image),t()},$.fn.concreteStyleCustomizerImageSelector=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcreteStyleCustomizerImageSelector=t}).call(t,i(2))},function(e,t,i){(function(e){function t(e,t){var i=this,n=1;t=$.extend({inputName:!1,unit:"px",value:0,appendTo:document.body},t),ConcreteStyleCustomizerPalette.call(i,e,t),i.$slider=i.$widget.find("div.ccm-style-customizer-slider"),"em"==i.options.unit&&(n=.1),i.$slider.slider({min:0,max:1e3,step:n,value:i.options.value,create:function(e,t){$(this).parent().find("span").html(i.options.value+i.options.unit)},slide:function(e,t){$(this).parent().find("span").html(t.value+i.options.unit)}}),e.addClass("ccm-style-customizer-importexport").data("ccm-style-customizer-importexport",this)}t.prototype=Object.create(ConcreteStyleCustomizerPalette.prototype),t.prototype.chooseTemplate='<span data-launch="style-customizer-palette"><input type="hidden" name="<%=options.inputName%>[size]" value="<%=options.value%>" data-style-customizer-input="size" /><input type="hidden" name="<%=options.inputName%>[unit]" value="<%=options.unit%>" /><span><%=options.value + options.unit%></span></span>',t.prototype.selectorWidgetTemplate='<div class="ccm-ui ccm-style-customizer-palette ccm-style-customizer-palette-large"><div><label><%=i18n.size%></label><div data-style-customizer-field="size"><div class="ccm-style-customizer-slider"></div><span class="ccm-style-customizer-slider-value"><%=options.value%><%=options.unit%></span></div></div><div class="ccm-style-customizer-palette-actions"><button class="btn btn-primary"><%=i18n.save%></button></div></div>',t.prototype.updateSwatch=function(){this.$element.find("span[data-launch=style-customizer-palette] span").html(this.getValue("size")+this.options.unit)},t.prototype.save=function(e){this.setValue("size",this.$widget.find("div[data-style-customizer-field=size] div.ccm-style-customizer-slider").slider("value")),this.updateSwatch(),ConcreteEvent.publish("StyleCustomizerControlUpdate"),this.closeSelector(e)},t.prototype.exportStyle=function(e,t){var i=this;if(i.options.inputName){var n=i.$element.find('input[data-style-customizer-input="size"]');if(1===n.length){var o=parseFloat(n.val());i.options.inputName in e||(e[i.options.inputName]={}),e[i.options.inputName].size=isNaN(o)?null:o,e[i.options.inputName].unit=i.options.unit,t()}else t()}else t()},t.prototype.importStyle=function(e,t){var i=this;i.options.inputName&&e[i.options.inputName]&&e[i.options.inputName].unit===i.options.unit?(null===e[i.options.inputName].size?i.setValue("size",""):"number"==typeof e[i.options.inputName].size&&i.setValue("size",e[i.options.inputName].size.toString()),t()):t()},$.fn.concreteSizeSelector=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcreteSizeSelector=t}).call(t,i(2))},function(e,t,i){(function(e){function t(e,i){if(this instanceof t==!1)return new t(e,i);this.display=e,this.css=i}function i(e,i){var n,o,s=this;if(i=$.extend({inputName:!1,fontFamily:-1,color:-1,italic:-1,underline:-1,uppercase:-1,fontSizeValue:-1,fontSizeUnit:"px",fontWeight:-1,letterSpacingValue:-1,letterSpacingUnit:"px",lineHeightValue:-1,lineHeightUnit:"px"},i),ConcreteStyleCustomizerPalette.call(s,e,i),s.$fontMenu=s.$widget.find("select[data-style-customizer-field=font]"),s.$sliders=s.$widget.find("div.ccm-style-customizer-slider"),s.$sliders.slider({min:0,max:64,value:0,create:function(e,t){$(this).parent().find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-number").html("0")},slide:function(e,t){$(this).parent().find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-number").html(t.value)}}),s.$colorpicker=s.$widget.find("input[data-style-customizer-field=color]"),s.$colorpicker.spectrum({preferredFormat:"rgb",showAlpha:!0,className:"ccm-widget-colorpicker",showInitial:!0,showInput:!0}),s.$fontMenu.on("change",function(){var e=s.fonts[$(this).val()];$(this).css("font-family",e)}),$.each(s.fonts,function(e,t){s.$fontMenu.append('<option value="'+t+'">'+t+"</option>")}),-1!=s.options.fontFamily){var r=s.options.fontFamily.split(",")[0].replace("'","").replace("'","");void 0===s.fonts[r]&&(s.fonts[r]=new t(r,s.options.fontFamily),s.$fontMenu.append($("<option>",{value:r,text:r}))),s.setValue("font-family",s.fonts[r].css),s.$fontMenu.val(r),s.$fontMenu.css("font-family",s.fonts[r].css)}else s.$widget.find("[data-wrapper=fontFamily]").html(""),s.$element.find("[data-wrapper=fontFamily]").remove();-1!=s.options.color?(s.$colorpicker.spectrum("set",s.options.color),s.setValue("color",s.options.color)):(s.$widget.find("[data-wrapper=color]").remove(),s.$element.find("[data-wrapper=color]").remove()),-1!=s.options.underline?(s.$widget.find("input[data-style-customizer-field=underline]").prop("checked",s.options.underline),s.setValue("underline",s.options.underline?1:0)):(s.$widget.find("[data-wrapper=underline]").remove(),s.$element.find("[data-wrapper=underline]").remove()),-1!=s.options.uppercase?(s.$widget.find("input[data-style-customizer-field=uppercase]").prop("checked",s.options.uppercase),s.setValue("uppercase",s.options.uppercase?1:0)):(s.$widget.find("[data-wrapper=uppercase]").remove(),s.$element.find("[data-wrapper=uppercase]").remove()),-1!=s.options.italic?(s.$widget.find("input[data-style-customizer-field=italic]").prop("checked",s.options.italic),s.setValue("italic",s.options.italic?1:0)):(s.$widget.find("[data-wrapper=italic]").remove(),s.$element.find("[data-wrapper=italic]").remove()),-1!=s.options.fontSizeValue?((o=(n=s.$widget.find("div[data-style-customizer-field=font-size]")).find("div.ccm-style-customizer-slider")).slider("value",s.options.fontSizeValue),"em"==s.options.fontSizeUnit&&(o.slider("option","step",.1),o.slider("option","max",10)),n.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-number").html(s.options.fontSizeValue),n.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-unit").html(s.options.fontSizeUnit),s.setValue("font-size",s.options.fontSizeValue)):(s.$widget.find("[data-wrapper=fontSize]").remove(),s.$element.find("[data-wrapper=fontSize]").remove()),-1!=s.options.fontWeight?((o=(n=s.$widget.find("div[data-style-customizer-field=font-weight]")).find("div.ccm-style-customizer-slider")).slider("option","step",100),o.slider("option","max",900),o.slider("option","min",100),o.slider("value",s.options.fontWeight),n.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-number").html(s.options.fontWeight),s.setValue("font-weight",s.options.fontWeight)):(s.$widget.find("[data-wrapper=fontWeight]").remove(),s.$element.find("[data-wrapper=fontWeight]").remove()),-1!=s.options.letterSpacingValue?((o=(n=s.$widget.find("div[data-style-customizer-field=letter-spacing]")).find("div.ccm-style-customizer-slider")).slider("value",s.options.letterSpacingValue),"em"==s.options.letterSpacingUnit&&(o.slider("option","step",.1),o.slider("option","max",10)),n.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-number").html(s.options.letterSpacingValue),n.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-unit").html(s.options.letterSpacingUnit),s.setValue("letter-spacing",s.options.letterSpacingValue)):(s.$widget.find("[data-wrapper=letterSpacing]").remove(),s.$element.find("[data-wrapper=letterSpacing]").remove()),-1!=s.options.lineHeightValue?((o=(n=s.$widget.find("div[data-style-customizer-field=line-height]")).find("div.ccm-style-customizer-slider")).slider("value",s.options.lineHeightValue),"em"==s.options.lineHeightUnit&&(o.slider("option","step",.1),o.slider("option","max",10)),n.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-number").html(s.options.lineHeightValue),n.find("span.ccm-style-customizer-slider-value span.ccm-style-customizer-unit").html(s.options.lineHeightUnit),s.setValue("line-height",s.options.lineHeightValue)):(s.$widget.find("[data-wrapper=lineHeight]").remove(),s.$element.find("[data-wrapper=lineHeight]").remove()),s.updateSwatch(),e.addClass("ccm-style-customizer-importexport").data("ccm-style-customizer-importexport",this)}t.prototype.toString=function(){return this.display},i.prototype=Object.create(ConcreteStyleCustomizerPalette.prototype),i.prototype.fonts={Arial:new t("Arial","Arial, sans-serif"),Helvetica:new t("Helvetica","Helvetica, sans-serif"),Georgia:new t("Georgia","Georgia, serif"),Verdana:new t("Verdana","Verdana, sans-serif"),"Trebuchet MS":new t("Trebuchet MS","Trebuchet MS, sans-serif"),"Book Antiqua":new t("Book Antiqua","Book Antiqua, serif"),Tahoma:new t("Tahoma","Tahoma, sans-serif"),"Times New Roman":new t("Times New Roman","Times New Roman, serif"),"Courier New":new t("Courier New","Courier New, monospace"),"Arial Black":new t("Arial Black","Arial Black, sans-serif"),"Comic Sans MS":new t("Comic Sans MS","Comic Sans MS, sans-serif")},i.prototype.chooseTemplate='<span class="ccm-style-customizer-display-swatch" data-launch="style-customizer-palette"><div data-wrapper="fontFamily"><input type="hidden" name="<%=options.inputName%>[font-family]" data-style-customizer-input="font-family" /></div><div data-wrapper="color"><input type="hidden" name="<%=options.inputName%>[color]" data-style-customizer-input="color" /></div><div data-wrapper="italic"><input type="hidden" name="<%=options.inputName%>[italic]" data-style-customizer-input="italic" /></div><div data-wrapper="underline"><input type="hidden" name="<%=options.inputName%>[underline]" data-style-customizer-input="underline" /></div><div data-wrapper="uppercase"><input type="hidden" name="<%=options.inputName%>[uppercase]" data-style-customizer-input="uppercase" /></div><div data-wrapper="fontWeight"><input type="hidden" name="<%=options.inputName%>[font-weight]" data-style-customizer-input="font-weight" /></div><div data-wrapper="fontSize"><input type="hidden" name="<%=options.inputName%>[font-size][size]" data-style-customizer-input="font-size" /><input type="hidden" name="<%=options.inputName%>[font-size][unit]" value="<%=options.fontSizeUnit%>" /></div><div data-wrapper="letterSpacing"><input type="hidden" name="<%=options.inputName%>[letter-spacing][size]" data-style-customizer-input="letter-spacing" /><input type="hidden" name="<%=options.inputName%>[letter-spacing][unit]" value="<%=options.letterSpacingUnit%>" /></div><div data-wrapper="lineHeight"><input type="hidden" name="<%=options.inputName%>[line-height][size]" data-style-customizer-input="line-height" /><input type="hidden" name="<%=options.inputName%>[line-height][unit]" value="<%=options.lineHeightUnit%>" /></div><span>T</span></span>',i.prototype.selectorWidgetTemplate='<div class="ccm-ui ccm-style-customizer-palette"><div><select data-style-customizer-field="font" data-wrapper="fontFamily"><option value=""><%=i18n.chooseFont%></option></select> <span data-wrapper="color"><input type="text" data-style-customizer-field="color"></span></div><div data-wrapper="italic" class="checkbox"><label><input type="checkbox" class="ccm-flat-checkbox" data-style-customizer-field="italic"> <%=i18n.italic%></label></div><div data-wrapper="underline" class="checkbox"><label><input type="checkbox" class="ccm-flat-checkbox" data-style-customizer-field="underline"> <%=i18n.underline%></label></div><div data-wrapper="uppercase" class="checkbox"><label><input type="checkbox" class="ccm-flat-checkbox" data-style-customizer-field="uppercase"> <%=i18n.uppercase%></label></div><div data-wrapper="fontSize"><label><%=i18n.fontSize%></label><div data-style-customizer-field="font-size"><div class="ccm-style-customizer-slider"></div><span class="ccm-style-customizer-slider-value"><span class="ccm-style-customizer-number"></span><span class="ccm-style-customizer-unit">px</span></span></div></div><div data-wrapper="fontWeight"><label><%=i18n.fontWeight%> <i class="fa fa-question-circle launch-tooltip" title="400 = Normal, 700 = Bold"></i></label><div data-style-customizer-field="font-weight"><div class="ccm-style-customizer-slider"></div><span class="ccm-style-customizer-slider-value"><span class="ccm-style-customizer-number"></span></span></div></div><div data-wrapper="letterSpacing"><label><%=i18n.letterSpacing%></label><div data-style-customizer-field="letter-spacing"><div class="ccm-style-customizer-slider"></div><span class="ccm-style-customizer-slider-value"><span class="ccm-style-customizer-number"></span><span class="ccm-style-customizer-unit">px</span></span></div></div><div data-wrapper="lineHeight"><label><%=i18n.lineHeight%></label><div data-style-customizer-field="line-height"><div class="ccm-style-customizer-slider"></div><span class="ccm-style-customizer-slider-value"><span class="ccm-style-customizer-number"></span><span class="ccm-style-customizer-unit">px</span></span></div></div><div class="ccm-style-customizer-palette-actions"><button class="btn btn-primary"><%=i18n.save%></button></div></div>',i.prototype.updateSwatch=function(){var e=this,t=e.$element.find("span.ccm-style-customizer-display-swatch");e.getValue("font-family")&&t.css("font-family",e.getValue("font-family")),e.getValue("color")&&t.css("color",e.getValue("color")),t.css("font-weight","inherit"),t.css("font-style","inherit"),t.css("text-decoration","inherit"),t.css("text-transform","inherit"),"1"===e.getValue("italic")&&t.css("font-style","italic"),"1"===e.getValue("underline")&&t.css("text-decoration","underline"),t.css("font-weight",e.getValue("font-weight")),"1"===e.getValue("uppercase")&&t.css("text-transform","uppercase"),t.css("font-size","14px")},i.prototype.save=function(e){var t=this;t.setValue("font-family",-1!=t.options.fontFamily?t.fonts[t.$fontMenu.val()].css:""),t.setValue("color",t.$widget.find("input[data-style-customizer-field=color]").spectrum("get")),t.setValue("italic",t.$widget.find("input[data-style-customizer-field=italic]").is(":checked")?"1":0),t.setValue("underline",t.$widget.find("input[data-style-customizer-field=underline]").is(":checked")?"1":0),t.setValue("uppercase",t.$widget.find("input[data-style-customizer-field=uppercase]").is(":checked")?"1":0),t.setValue("font-size",t.$widget.find("div[data-style-customizer-field=font-size] div.ccm-style-customizer-slider").slider("value")),t.setValue("font-weight",t.$widget.find("div[data-style-customizer-field=font-weight] div.ccm-style-customizer-slider").slider("value")),t.setValue("letter-spacing",t.$widget.find("div[data-style-customizer-field=letter-spacing] div.ccm-style-customizer-slider").slider("value")),t.setValue("line-height",t.$widget.find("div[data-style-customizer-field=line-height] div.ccm-style-customizer-slider").slider("value")),t.updateSwatch(),ConcreteEvent.publish("StyleCustomizerControlUpdate"),t.closeSelector(e)},i.prototype.exportStyle=function(e,t){var i=this;i.options.inputName?(i.options.inputName in e||(e[i.options.inputName]={}),$.each(["font-family","color","italic","underline","uppercase","font-size","font-weight","letter-spacing","line-height"],function(t,n){var o=i.$element.find('input[data-style-customizer-input="'+n+'"]');if(1===o.length){var s;switch(n){case"color":s=(s=o.spectrum("get"))&&s.toHex8String?s.toHex8String():o.val();break;case"italic":case"underline":case"uppercase":s=!!parseInt(o.val());break;case"font-size":case"font-weight":case"letter-spacing":case"line-height":s=parseFloat(o.val()),s=isNaN(s)?null:s;break;default:s=o.val()}switch(n){case"font-size":e[i.options.inputName][n]={value:s,unit:i.options.fontSizeUnit};break;case"letter-spacing":e[i.options.inputName][n]={value:s,unit:i.options.letterSpacingUnit};break;case"line-height":e[i.options.inputName][n]={value:s,unit:i.options.lineHeightUnit};break;default:e[i.options.inputName][n]=s}}}),t()):t()},i.prototype.importStyle=function(e,t){var i=this,n=i.options.inputName?e[i.options.inputName]:null;$.isPlainObject(n)?($.each(["font-family","color"],function(e,t){"string"==typeof n[t]&&i.setValue(t,n[t])}),$.each(["italic","underline","uppercase"],function(e,t){"boolean"==typeof n[t]&&i.setValue(t,n[t]?"1":"0")}),$.each([{field:"font-size",unit:i.options.fontSizeUnit},{field:"font-weight"},{field:"letter-spacing",unit:i.options.letterSpacingUnit},{field:"line-height",unit:i.options.lineHeightUnit}],function(e,t){var o;if("unit"in t){if(!$.isPlainObject(n[t.field])||"string"!=typeof n[t.field].unit||n[t.field].unit!==t.unit)return;o=n[t.field].value}else o=n[t.field];null===o?i.setValue(t.field,""):"number"==typeof o&&i.setValue(t.field,o.toString())}),t()):t()},$.fn.concreteTypographySelector=function(e){return $.each($(this),function(t,n){new i($(this),e)})},e.ConcreteTypographySelector=i}).call(t,i(2))},function(e,t){jQuery.fn.concreteLayout=function(e){return this.each(function(){var t=$(this),n=t.data("concreteLayout");n||t.data("concreteLayout",n=new i(this,e))})};var i=function(e,t){this.options=$.extend({toolbar:"#ccm-layouts-toolbar",btnsave:"#ccm-layouts-save-button",btncancel:"#ccm-layouts-cancel-button",editing:!1,supportsgrid:!1,gridrowtmpid:"ccm-theme-grid-temp",additionalGridColumnClasses:""},t),this.$element=$(e),this.$toolbar=$(this.options.toolbar),this._setupDOM(),this._setupToolbarView(),this._setupFormSaveAndCancel(),this._setupFormEvents(),this._updateChooseTypeForm()};i.prototype._setupDOM=function(){this.$formviews=this.$toolbar.find("li[data-grid-form-view]"),this.$formviewcustom=this.$toolbar.find("li[data-grid-form-view=custom]"),this.$formviewthemegrid=this.$toolbar.find("li[data-grid-form-view=themegrid]"),this.$selectgridtype=this.$toolbar.find("select[name=gridType]"),this.$selectcolumnscustom=this.$toolbar.find("input[type=text][name=columns]"),this.$customspacing=this.$toolbar.find("input[name=spacing]"),this.$customautomatedfrm=this.$toolbar.find("input[name=isautomated]"),this.$customautomated=this.$toolbar.find("[data-layout-button=toggleautomated]"),this.$selectgridcolumns=this.$toolbar.find("input[type=text][name=themeGridColumns]"),this.$savebtn=this.$toolbar.find(this.options.btnsave),this.$cancelbtn=this.$toolbar.find(this.options.btncancel),this.$slider=!1},i.prototype._setupFormSaveAndCancel=function(){var e=this;this.$cancelbtn.unbind().on("click",function(){e.$toolbar.remove(),ConcreteEvent.unsubscribe("EditModeExitInlineComplete.layouts"),ConcreteEvent.on("EditModeExitInlineComplete.layouts",function(t,i){e._rescanAreasInPage(t,i)}),ConcreteEvent.fire("EditModeExitInline")}),this.$savebtn.unbind().on("click",function(){Concrete.event.fire("EditModeExitInlineSaved"),e.$toolbar.hide().prependTo("#ccm-block-form"),$("#ccm-block-form").submit(),ConcreteEvent.unsubscribe("EditModeExitInlineComplete.layouts"),ConcreteEvent.on("EditModeExitInlineComplete.layouts",function(t,i){e._rescanAreasInPage(t,i)})})},i.prototype._rescanAreasInPage=function(e,t){var i=Concrete.getEditMode();i.reset(),i.scanBlocks()},i.prototype._setupToolbarView=function(){var e=this;this.$formviews.each(function(t){$(this).attr("data-grid-form-view")!=e.options.formview&&$(this).hide()})},i.prototype._updateChooseTypeForm=function(){var e=this.$selectgridtype.find("option:selected").val(),t=this;switch(t.options.editing&&t.$selectgridtype.prop("disabled",!0),e){case"FF":this.$formviewthemegrid.hide(),this.$formviewcustom.show(),this._updateCustomView();break;case"TG":this.$formviewcustom.hide(),this.$formviewthemegrid.show(),this._updateThemeGridView();break;default:if(this.options.editing)return;var i=e;this._resetSlider(),jQuery.fn.dialog.showLoader();var n=CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/area/layout/presets/get/"+CCM_CID+"/"+i;$.getJSON(n,function(e){t.$formviewthemegrid.hide(),t.$formviewcustom.hide(),t.$element.html(e.html),t.$element.append($("<input />",{name:"arLayoutPresetID",type:"hidden",value:i})),jQuery.fn.dialog.hideLoader()})}},i.prototype._setupFormEvents=function(){var e=this;this.$selectcolumnscustom.on("keyup",function(){e._updateCustomView()}),this.$customspacing.on("keyup",function(){e._updateCustomView()}),this.$customautomatedfrm.on("change",function(){e._updateCustomView()}),this.$customautomated.on("click",function(){return $(this).parent().hasClass("ccm-inline-toolbar-icon-selected")?($(this).parent().removeClass("ccm-inline-toolbar-icon-selected"),e.$customautomatedfrm.val(0)):($(this).parent().addClass("ccm-inline-toolbar-icon-selected"),e.$customautomatedfrm.val(1)),e.$customautomatedfrm.trigger("change"),!1}),this.$selectgridcolumns.on("keyup",function(){e._updateThemeGridView()}),this.$selectgridtype.on("change",function(){e._updateChooseTypeForm()})},i.prototype.buildThemeGridGrid=function(){this.$element.html("");var e=this.options.rowstart;e+='<div id="ccm-theme-grid-edit-mode-row-wrapper">';var t=this._getThemeGridColumnSpan(this.columns);$.each(t,function(t,i){var n='<div id="ccm-edit-layout-column-'+t+'" class="'+i.cssClass+' ccm-theme-grid-column" data-offset="0" data-span="'+i.value+'"><div class="ccm-layout-column-highlight"><input type="hidden" id="ccm-edit-layout-column-offset-'+t+'" name="offset['+t+']" value="0" /><input type="hidden" id="ccm-edit-layout-column-span-'+t+'" name="span['+t+']" value="'+i.value+'" /></div></div>';e+=n}),e+="</div>",e+=this.options.rowend,this.$element.append(e)},i.prototype._updateThemeGridView=function(e){e||this.$selectgridtype.find("option[value=TG]").prop("selected",!0),this.columns=parseInt(this.$selectgridcolumns.val()),this.maxcolumns=parseInt(this.$selectgridcolumns.attr("data-maximum")),this.options.editing?this.$selectgridcolumns.prop("disabled",!0):this.buildThemeGridGrid(),this._resetSlider(),this.columns>1&&this._showThemeGridSlider()},i.prototype._buildThemeGridGridFromPresetColumns=function(e){this.$element.html("");var t=this.options.rowstart;t+='<div id="ccm-theme-grid-edit-mode-row-wrapper">',$.each(e,function(e,i){var n='<div id="ccm-edit-layout-column-'+e+'" class="ccm-theme-grid-column" data-offset="'+i.arLayoutColumnOffset+'" data-span="'+i.arLayoutColumnSpan+'"><div class="ccm-layout-column-highlight"><input type="hidden" id="ccm-edit-layout-column-offset-'+e+'" name="offset['+e+']" value="'+i.arLayoutColumnOffset+'" /><input type="hidden" id="ccm-edit-layout-column-span-'+e+'" name="span['+e+']" value="'+i.arLayoutColumnSpan+'" /></div></div>';t+=n}),t+="</div>",t+=this.options.rowend,this.$element.append(t),this.columns=e.length,this.maxcolumns=parseInt(this.$selectgridcolumns.attr("data-maximum")),this._resetSlider(),this._redrawThemeGrid(),this._showThemeGridSlider()},i.prototype._updateCustomView=function(e){var t,i,n;for(e||this.$selectgridtype.find("option[value=FF]").prop("selected",!0),this.columns=parseInt(this.$selectcolumnscustom.val()),this.customspacing=this.$customspacing.val(),this.automatedcustomlayout=1==this.$customautomatedfrm.val(),this.columnwidths=[],this.options.editing&&this.$selectcolumnscustom.prop("disabled",!0),this.options.editing||this.$element.html(""),n=0;n<this.columns;n++)this.options.editing&&$("#ccm-edit-layout-column-"+n).length>0||((i=$("<div />").attr("class","ccm-layout-column")).attr("id","ccm-edit-layout-column-"+n),(t=$("<div />").attr("class","ccm-layout-column-highlight")).append($("<input />",{name:"width["+n+"]",type:"hidden",id:"ccm-edit-layout-column-width-"+n})),i.append(t),this.$element.append(i));var o=this.$element.find(".ccm-layout-column");if(this.columns<o.length)for(n=this.columns;n<o.length;n++)$("#ccm-edit-layout-column-"+n).remove();for(n=0;n<this.columns;n++){var s;t=$("#ccm-edit-layout-column-"+n+" .ccm-layout-column-highlight"),n>0&&t.css("margin-left",this.customspacing/2+"px"),n+1<this.columns&&t.css("margin-right",this.customspacing/2+"px"),(i=$("#ccm-edit-layout-column-"+n)).attr("data-width")?(s=i.attr("data-width")+"px",this.columnwidths.push(parseInt(i.attr("data-width")))):s=100/this.columns+"%",i.css("width",s)}this._resetSlider(),!this.automatedcustomlayout&&this.columns>1&&this._showCustomSlider()},i.prototype._resetSlider=function(){this.$slider&&(this.$slider.slider("destroy"),this.$slider=!1),$("#ccm-area-layout-active-control-bar").hasClass("ccm-area-layout-control-bar-add")&&$("#ccm-area-layout-active-control-bar").css("height","0px")},i.prototype._getThemeGridColumnSpan=function(e){var t,i=Math.ceil(this.maxcolumns/e),n=[];for(t=0;t<e;t++)n[t]=i;var o=i*e;for(t=0;t<o-this.maxcolumns;t++){n[n.length-t-1]--}var s=[];for(t=0;t<n.length;t++)s[t]={},s[t].cssClass=this.options.gridColumnClasses[n[t]-1],this.options.additionalGridColumnClasses&&(s[t].cssClass=s[t].cssClass+" "+this.options.additionalGridColumnClasses),s[t].value=n[t];return s},i.prototype._getThemeGridNearestValue=function(e,t){var i=null;return $.each(t,function(){(null==i||Math.abs(this-e)<Math.abs(i-e))&&(i=this)}),i},i.prototype._showThemeGridSlider=function(){var e=this;e.$slider=$("#ccm-area-layout-active-control-bar"),e.$slider.css("height","6px");var t,i=[];for(p=0;p<e.columns;p++)t=$("#ccm-edit-layout-column-"+p),0==p?i.push(Math.floor(t.width())):p+1==e.columns?i.push(Math.floor(t.position().left)):(i.push(Math.floor(t.position().left)),i.push(Math.floor(t.width())+Math.floor(t.position().left)));var n=$("#ccm-area-layout-active-control-bar").width(),o=[],s=[],r=e.options.maxcolumns,a=e.options.gridColumnClasses[0],l=$("#ccm-theme-grid-edit-mode-row-wrapper").closest(".ccm-block-edit-layout, .ccm-layouts-edit-mode-add");l.length||(l=$("#ccm-theme-grid-edit-mode-row-wrapper"));var c=$("<div />",{id:e.options.gridrowtmpid}).appendTo(l),u="";for(p=1;p<=r;p++)e.options.additionalGridColumnClasses?u+='<div class="'+a+" "+e.options.additionalGridColumnClasses+'"><br><br></div>':u+='<div class="'+a+'"><br><br></div>';var d=e.options.rowstart+u+e.options.rowend;c.append($(d));for(var h=0,p=0;p<r;p++){if(t=c.find("."+a).eq(p),0==p){var f=t.position().left;f<0&&(h=Math.abs(f))}o.push(Math.floor(t.position().left+h)),s.push(Math.floor(Math.floor(t.width())+Math.floor(t.position().left)+h))}c.remove(),e.$slider.slider({min:0,max:n,step:1,values:i,slide:function(t,n){"TG"!=e.$selectgridtype.val()&&e.$selectgridtype.find("option[value=TG]").prop("selected",!0);var r,a=$(n.handle).index();r=a%2==0?s:o;for(var l=0;l<i.length;l++)for(var c=0;c<r.length;c++){Math.abs(i[l]-r[c])<=2&&(r[c]=i[l])}var u,d,h,p,f,m=e.$slider.slider("values",a),g=e._getThemeGridNearestValue(n.value,r),v=!0;($.each(n.values,function(e,t){g>=t&&a<e?v=!1:g<=t&&a>e&&(v=!1)}),v&&m==g&&(v=!1),v)&&(e.$slider.slider("values",a,g),a%2==0?(p=Math.floor(a/2),f=$("#ccm-edit-layout-column-"+p),u=parseInt(f.attr("data-span")),h=(h=(d=f.nextAll(".ccm-theme-grid-column:first")).attr("data-offset"))?parseInt(h):0,g>m?(u++,h--):(u--,h++)):(p=Math.ceil(a/2),f=$("#ccm-edit-layout-column-"+p),u=parseInt(f.attr("data-span")),h=(h=(d=f).attr("data-offset"))?parseInt(h):0,g<m?(u++,h--):(u--,h++)),d.attr("data-offset",h),f.attr("data-span",u),e._redrawThemeGrid());return!1}})},i.prototype._redrawThemeGrid=function(){var e=this;e.$element.find(".ccm-theme-grid-offset-column").remove(),$.each(e.$element.find(".ccm-theme-grid-column"),function(t,i){var n=$(i);if(n.removeClass(),n.attr("data-span")){var o=parseInt(n.attr("data-span"))-1;n.addClass(e.options.gridColumnClasses[o]),e.options.additionalGridColumnClasses&&n.addClass(e.options.additionalGridColumnClasses)}if(parseInt(n.attr("data-offset"))>0){var s=parseInt(n.attr("data-offset"))-1,r=e.options.gridColumnClasses[s]+" ccm-theme-grid-offset-column";e.options.additionalGridColumnOffsetClasses&&(r=r+" "+e.options.additionalGridColumnOffsetClasses),$("<div />",{"data-offset-column":!0}).html("&nbsp;").addClass(r).insertBefore(n)}$("#ccm-edit-layout-column-offset-"+t).val(parseInt(n.attr("data-offset"))),$("#ccm-edit-layout-column-span-"+t).val(parseInt(n.attr("data-span"))),n.addClass("ccm-theme-grid-column"),e.options.editing&&n.addClass("ccm-theme-grid-column-edit-mode")})},i.prototype._showCustomSlider=function(){this.$slider=$("#ccm-area-layout-active-control-bar"),this.$slider.css("height","6px");var e,t=[],i=0,n=Math.floor(this.$slider.width()),o=this.$element.find(".ccm-layout-column");if(this.columnwidths.length>0)for(e=0;e<this.columnwidths.length-1;e++)i+=this.columnwidths[e],t.push(i);else{var s=n/this.columns;for(e=1;e<this.columns;e++)i+=s,t.push(i)}var r=this;this.$slider.slider({min:0,max:n,step:1,values:t,create:function(e,i){var s=0;$.each(o,function(e,i){var r,a=t[e];r=e+1==o.length?n-s:a-s,r=Math.floor(r),$(i).find("#ccm-edit-layout-column-width-"+e).val(r),s=a})},slide:function(e,t){"FF"!=r.$selectgridtype.val()&&r.$selectgridtype.find("option[value=FF]").prop("selected",!0);var i=0,s=!0;if($.each(t.values,function(e,t){t<i&&(s=!1),i=t}),!s)return!1;i=0,$.each(o,function(e,s){var r;r=e+1==o.length?n-i:t.values[e]-i,r=Math.floor(r),$(s).find("#ccm-edit-layout-column-width-"+e).val(r),$(s).css("width",r+"px"),i=t.values[e]})}})}},function(e,t,i){(function(e){function t(e,t,i){this.init(e,t,i)}t.prototype={init:function(e,t,i){var n={saveValidator:function(e){return e.canSave()},debug:!1,idleTimeout:20,saveThrottleEnabled:!0,saveThrottleTimeout:10,saveDebounceEnabled:!0,saveDebounceTimeout:2,saveDebounceMaximum:11};this.lastSerialized=null,this.saveThrottleTimer=null,this.saveDebounceTimer=null,this.saveDebounceBegan=null,this.idleTimer=null,this.enabled=!1,this.queuedSave=!1,this.options=n,this.options=_(n).extend(i),this.options.form=e,this.options.saver=t,this.saving=!1,this.status={idle:0,saving:1,busy:2,throttled:3,debounced:4,saveFailed:5,disabled:6},this.cachedForm(this.getFormSerialized())},isEnabled:function(){return this.enabled},enable:function(){this.resetIdleTimer(),this.enabled=!0},disable:function(){this.enabled=!1,this.disableIdleTimer()},disableIdleTimer:function(){e.clearTimeout(this.idleTimer),this.idleTimer=null},requestSave:function(e){return this.resetIdleTimer(),this.enabled?void 0!==e&&e?this.requestQueuedSave():this.saving?(this.queuedSave=!0,this.status.busy):this.options.saveValidator(this)?this.options.saveThrottleEnabled&&this.throttleSave()?(this.resetThrottle(),this.status.throttled):this.options.saveDebounceEnabled?this.debounceSave():(this.debug("Handling Save Synchronous"),this.handleSave()):(this.debug("Save Not Needed"),this.status.saveFailed):this.status.disabled},requestQueuedSave:function(){var e=this.requestSave();return e===this.status.throttled&&(this.debug("Queuing Save"),this.queuedSave=!0),e},handleSave:function(){if(!this.enabled)return this.status.disabled;if(this.saving)return this.status.busy;this.saving=!0;var e=this,t=this.cachedForm(this.getFormSerialized());return this.options.saver(this,t,function(){e.saving=!1,e.resetThrottle(),e.resetIdleTimer()})?this.status.saving:this.status.saveFailed},resetIdleTimer:function(){var t=this;this.idleTimer&&e.clearTimeout(this.idleTimer),this.idleTimer=e.setTimeout(function(){t.requestSave(),t.resetIdleTimer()},1e3*this.options.idleTimeout)},canSave:function(){return!this.cachedFormEquals(this.getFormSerialized())},debounceSave:function(){if(!this.enabled)return this.status.disabled;this.saveDebounceTimer&&e.clearTimeout(this.saveDebounceTimer),this.saveDebounceBegan||(this.saveDebounceBegan=_.now());var t=_.now()-this.saveDebounceBegan,i=1e3*this.options.saveDebounceMaximum-t,n=Math.max(0,Math.min(1e3*this.options.saveDebounceTimeout,i)),o=this;return this.options.saveDebounceMaximum||(n=this.options.saveDebounceTimeout),this.saveDebounceTimer=e.setTimeout(function(){o.debug("Debouncing Expired, Handling Save"),o.saveDebounceBegan=null,o.handleSave()},n),this.debug("Debouncing Save for "+n+"ms"),this.status.debounced},resetThrottle:function(){this.throttleSave(1e3*this.options.saveThrottleTimeout)},throttleSave:function(t){var i=this,n=null!==this.saveThrottleTimer;return null===this.saveThrottleTimer&&void 0!==t&&(this.saveThrottleTimer=e.setTimeout(function(){i.debug("Throttle Expired"),i.saveThrottleTimer=null,i.queuedSave&&(i.debug("Handling Queued Save"),i.handleSave(),i.queuedSave=!1)},t),this.debug("Throttling Save")),n},getForm:function(){return this.options.form},getFormSerialized:function(){return this.getForm().serializeArray()},cachedForm:function(e){return void 0!==e&&(this.lastSerialized=e),this.lastSerialized},cachedFormEquals:function(e){return _(this.cachedForm()).isEqual(e)},debug:function(t){this.options.debug&&e.console.log("SaverCoordinator: "+t)}},e.Concrete||(e.Concrete={}),e.Concrete.composer||(e.Concrete.composer={}),e.Concrete.composer.SaveCoodinator=t,$.fn.saveCoordinator=function(e,i){return this.each(function(){var n=$(this),o=new t(n,e,i);n.data("SaveCoordinator",o)})}}).call(t,i(2))},function(e,t,i){(function(e){var t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,i){"use strict";function n(e){var t=this;e=e||{},e=i.extend({dataType:"json",type:"post",loader:"standard",error:function(e){t.error(e,t)},complete:function(){t.complete(t)},skipResponseValidation:!1},e),t.options=e,t.execute()}n.prototype={execute:function(){var e=this,t=e.options,n=t.success;t.success=function(t){e.success(t,e,n)},e.before(e),i.ajax(t)},before:function(e){e.options.loader&&i.fn.dialog.showLoader()},errorResponseToString:function(e){return n.renderErrorResponse(e,!0)},error:function(e,t){ConcreteEvent.fire("AjaxRequestError",{response:e}),ConcreteAlert.dialog(ccmi18n.error,n.renderErrorResponse(e,!0))},validateResponse:function(e,t){return e.error?(ConcreteEvent.fire("AjaxRequestError",{response:e}),ConcreteAlert.dialog(ccmi18n.error,n.renderJsonError(e),function(){t&&t(!1,e)}),!1):(t&&t(!0,e),!0)},success:function(e,t,i){("json"!=t.options.dataType||t.options.skipResponseValidation||t.validateResponse(e))&&i&&i(e)},complete:function(e){e.options.loader&&i.fn.dialog.hideLoader()}},n.renderJsonError=function(e,n){if(!e)return"";var o=function(t,n){return"number"==typeof n&&i.isArray(e.htmlErrorIndexes)&&i.inArray(n,e.htmlErrorIndexes)>=0?t:i("<div />").text(t).html().replace(/\n/g,"<br />")},s="";if("object"===t(e.error)&&i.isArray(e.error.trace)){s='<p class="text-danger"><strong>'+o(e.error.message)+"</strong></p>",s+='<p class="text-muted">'+ccmi18n.errorDetails+"</p>",s+='<table class="table"><tbody>';for(var r,a=0;a<e.error.trace.length;a++)r=e.error.trace[a],s+="<tr><td>"+r.file+"("+r.line+"): "+r.class+"->"+r.function+"<td></tr>";s+="</tbody></table>"}else i.isArray(e.errors)&&e.errors.length>0&&"string"==typeof e.errors[0]?i.each(e.errors,function(e,t){s+='<p class="text-danger"><strong>'+o(t,e)+"</strong></p>"}):"string"==typeof e.error&&""!==e.error&&(s='<p class="text-danger" style="word-break: break-all"><strong>'+o(e.error)+"</strong></p>");return s},n.renderErrorResponse=function(e,t){return n.renderJsonError(e.responseJSON,t)||e.responseText},n.validateResponse=n.prototype.validateResponse,n.errorResponseToString=n.prototype.errorResponseToString,i.concreteAjax=function(e){new n(e)},e.ConcreteAjaxRequest=n}(e,jQuery)}).call(t,i(2))},function(e,t,i){(function(e){!function(e,t){"use strict";function i(e,i){var n=this;return i=i||{},(i=t.extend({progressiveOperation:!1,progressiveOperationTitle:"",progressiveOperationElement:null,beforeSubmit:n.before,complete:n.complete,data:{},error:null,skipResponseValidation:!1},i)).data||(i.data={}),i.data.__ccm_consider_request_as_xhr="1",n.$form=e,ConcreteAjaxRequest.call(n,i),n.$form}i.prototype=Object.create(ConcreteAjaxRequest.prototype),i.prototype.execute=function(){var e=this,t=e.options,i=t.success,n=t.error;e.$form.ajaxForm({type:t.type,data:t.data,url:t.url,dataType:t.dataType,beforeSubmit:function(){t.beforeSubmit(e)},error:function(t){e.error(t,e,n)},success:function(t){e.success(t,e,i)},complete:function(){t.complete(e)}})},i.prototype.handleProgressiveOperation=function(e,t){jQuery.fn.dialog.hideLoader(),new ConcreteProgressiveOperation({response:e,title:this.options.progressiveOperationTitle,element:this.options.progressiveOperationElement,onComplete:function(){t(e)}})},i.prototype.error=function(e,t,i){ConcreteAjaxRequest.prototype.error(e,t),i&&i(e)},i.prototype.doFinish=function(e){ConcreteEvent.publish("AjaxFormSubmitSuccess",{response:e,form:this.$form.attr("data-dialog-form")}),e.redirectURL?window.location.href=e.redirectURL:(this.$form.attr("data-dialog-form")&&t.fn.dialog.closeTop(),e.message&&ConcreteAlert.notify({message:e.message,title:e.title}))},i.prototype.success=function(e,t,i){(t.options.skipResponseValidation||t.validateResponse(e))&&(i?t.options.progressiveOperation?t.handleProgressiveOperation(e,function(e){i(e)}):i(e):t.options.progressiveOperation?t.handleProgressiveOperation(e,function(e){t.doFinish(e)}):t.doFinish(e))},t.fn.concreteAjaxForm=function(e){return t.each(t(this),function(n,o){new i(t(this),e)})},e.ConcreteAjaxForm=i}(e,jQuery)}).call(t,i(2))},function(e,t,i){(function(e){!function(e,t){"use strict";function i(e,i){return i=t.extend({iframe:!0,task:!1,dragAreaBlockID:!1,dragArea:null,bID:!1,loader:!0},i),this.options=i,i.dragAreaBlockID&&e.find("input[name=dragAreaBlockID]").val(i.dragAreaBlockID),ConcreteAjaxForm.call(this,e,i),e}i.prototype=Object.create(ConcreteAjaxForm.prototype),i.prototype.before=function(e){t.fn.dialog.showLoader(),ConcreteEvent.fire("EditModeBeforeBlockSubmit",{form:e})},i.prototype.refreshBlock=function(e){var i=this,n=e.cID?e.cID:CCM_CID,o=new Concrete.getEditMode,s=o.getAreaByID(e.aID),r=s.getEnableGridContainer()?1:0,a=CCM_DISPATCHER_FILENAME+"/ccm/system/block/render";t.fn.dialog.closeTop(),t.get(a,{arHandle:s.getHandle(),cID:n,bID:e.bID,arEnableGridContainer:r,placeholder:""},function(e){var n,r=Concrete.getEditMode(),a=s.inEditMode(r);if(ConcreteToolbar.disableDirectExit(),t.fn.dialog.hideLoader(),"add"==i.options.task){var l=a.getElem(),c=t(e);if(!c.hasClass("ccm-block-edit")){var u=c.find(".ccm-block-edit");u.length&&(n=new Concrete.Block(u,r)).setArea(a)}if(n||(n=new Concrete.Block(c,r)).setArea(a),"core_area_layout"===i.options.btHandle)l.children(".ccm-area-block-list").append(c);else{var d=t(i.options.placeholder);d.length?d.replaceWith(c):l.children(".ccm-area-block-list").prepend(c)}ConcreteAlert.notify({message:ccmi18n.addBlockMsg,title:ccmi18n.addBlock}),t.fn.dialog.closeAll(),i.options.btSupportsInlineAdd&&(o.destroyInlineEditModeToolbars(),ConcreteEvent.fire("EditModeExitInlineComplete",{block:n})),ConcreteEvent.fire("EditModeAddBlockComplete",{block:n})}else{var h=(n=a.getBlockByID(i.options.bID)).replace(e);ConcreteAlert.notify({message:ccmi18n.updateBlockMsg,title:ccmi18n.updateBlock}),i.options.btSupportsInlineEdit&&(o.destroyInlineEditModeToolbars(),ConcreteEvent.fire("EditModeExitInlineComplete",{block:h})),ConcreteEvent.fire("EditModeUpdateBlockComplete",{block:h})}})},i.prototype.success=function(e,i){var n=i.$form[0];if(e.newbID&&n){var o=n.action,s=o.substring(o.indexOf("&bID=")),r=o.replace(s,"&bID="+e.newbID);t(n).attr("action",r)}i.options.progressiveOperation?i.handleProgressiveOperation(e,function(e){i.refreshBlock(e)}):i.validateResponse(e)&&i.refreshBlock(e)},t.fn.concreteAjaxBlockForm=function(e){return t.each(t(this),function(n,o){new i(t(this),e)})},e.ConcreteAjaxBlockForm=i}(e,jQuery)}).call(t,i(2))},function(e,t,i){(function(e){function t(e){var t=this;e=$.extend({url:"",data:{},title:"",response:null,onComplete:null,onError:null,pollRetryTimeout:1e3,element:null},e),t.options=e,t.current=0,t.total=-1,t.pnotify=!1,t.execute()}t.prototype.setProgressBarStatus=function(e,t){var i=this,n=i.options.element.find("div[data-progress-bar=remaining]");t>-1?(i.options.element.find("div.progress").removeClass("progress-striped active"),i.options.element.find("div.progress-bar").css("width",e+"%"),n.length||(i.options.element.append('<div data-progress-bar="remaining"></div>'),n=i.options.element.find("div[data-progress-bar=remaining]")),n.html(t+" remaining")):(i.options.element.find("div.progress").addClass("progress-striped active"),i.options.element.find("div.progress-bar").css("width","100%"))},t.prototype.poll=function(e,t,i){var n=this,o=CCM_DISPATCHER_FILENAME+"/ccm/system/batch/monitor/"+e+"/"+t;if(-1==n.total&&(n.total=i),n.current+=n.total-i,n.options.element){var s=(n.total-i)/n.total*100;n.setProgressBarStatus(s,i)}else NProgress.set((n.total-i)/n.total),$("div[data-wrapper=progressive-operation-status]").html(i+" remaining");$.concreteAjax({loader:!1,url:o,type:"POST",dataType:"json",success:function(i){var o=i.total-i.completed;o>0?setTimeout(function(){n.poll(e,t,o)},n.options.pollRetryTimeout):setTimeout(function(){n.options.element?n.setProgressBarStatus(100,0):(NProgress.done(),n.pnotify.remove()),"function"==typeof n.options.onComplete&&n.options.onComplete(i)},1e3)}})},t.prototype.startPolling=function(e,t,i){this.options.element||(this.pnotify=new PNotify({text:'<div data-wrapper="progressive-operation-status">'+ccmi18n.progressiveOperationLoading+"</div>",hide:!1,title:this.options.title,buttons:{closer:!1},type:"info",icon:"fa fa-refresh fa-spin"})),this.poll(e,t,i)},t.prototype.initProgressBar=function(){var e=this.options.element,t="<h4>"+this.options.title+'</h4><div class="progress progress-striped active"><div class="progress-bar" style="width: 0%;"></div></div>';e.find("div.progress-bar").length<1&&e.append(t)},t.prototype.execute=function(){var e=this;if(e.options.element&&e.options.element.length?(e.initProgressBar(),e.setProgressBarStatus(0,-1)):NProgress.set(0),e.options.response){var t=e.options.response.total-e.options.response.completed;e.startPolling(e.options.response.batch,e.options.response.token,t)}else $.concreteAjax({loader:!1,url:e.options.url,type:"POST",data:e.options.data,dataType:"json",success:function(t){var i=t.total-t.completed;e.startPolling(t.batch,t.token,i)}})},e.ConcreteProgressiveOperation=t}).call(t,i(2))},function(e,t,i){(function(e){!function(e,t){"use strict";function i(e,i){i=i||{},i=t.extend({result:{},onLoad:!1,onUpdateResults:!1,bulkParameterName:"item",selectMode:!1,appendToOuterDialog:!1,searchMethod:"get"},i),this.$element=e,this.$results=e.find("div[data-search-element=results]"),this.$resultsTableBody=this.$results.find("tbody"),this.$resultsTableHead=this.$results.find("thead"),this.$resultsPagination=this.$results.find("div.ccm-search-results-pagination"),this.$menuTemplate=e.find("script[data-template=search-results-menu]"),this.$searchFieldRowTemplate=e.find("script[data-template=search-field-row]"),this.$headerSearch=e.find("div[data-header]"),this.$headerSearchInput=e.find("div[data-header] input"),this.$advancedSearchButton=e.find("a[data-launch-dialog=advanced-search]"),this.$resetSearchButton=e.find("a[data-button-action=clear-search]"),this.options=i,e.find("script[data-template=search-form]").length&&(this._templateSearchForm=_.template(e.find("script[data-template=search-form]").html())),e.find("script[data-template=search-results-table-head]").length&&(this._templateSearchResultsTableHead=_.template(e.find("script[data-template=search-results-table-head]").html())),e.find("script[data-template=search-results-table-body]").length&&(this._templateSearchResultsTableBody=_.template(e.find("script[data-template=search-results-table-body]").html())),e.find("script[data-template=search-results-pagination]").length&&(this._templateSearchResultsPagination=_.template(e.find("script[data-template=search-results-pagination]").html())),this.$menuTemplate.length&&(this._templateSearchResultsMenu=_.template(this.$menuTemplate.html())),this.$searchFieldRowTemplate.length&&(this._templateAdvancedSearchFieldRow=_.template(this.$searchFieldRowTemplate.html())),this.setupSearch(),this.setupCheckboxes(),this.setupSort(),this.setupPagination(),this.setupSelectize(),this.setupAdvancedSearch(),this.setupCustomizeColumns(),this.updateResults(i.result),i.onLoad&&i.onLoad(this)}i.prototype.setupResetButton=function(e){var t,i=this;t=e.query||e.folder&&"search_preset"===e.folder.treeNodeTypeHandle?ccmi18n_filemanager.edit:ccmi18n.advanced,i.$advancedSearchButton.html(t),e.query&&(!e.folder||e.folder&&"search_preset"!==e.folder.treeNodeTypeHandle)&&(i.$headerSearch.find("div.btn-group").hide(),i.$headerSearchInput.prop("disabled",!0),i.$headerSearchInput.attr("placeholder",""),i.$resetSearchButton.show())},i.prototype.ajaxUpdate=function(e,i,n){var o=this;t.concreteAjax({url:e,data:i,method:o.options.searchMethod,success:function(e){o.scrollToTop(),n?n(e):o.updateResults(e)}})},i.prototype.scrollToTop=function(){var e=this.$element.closest(".ui-dialog-content");e.length?e.scrollTop(0):window.scrollTo(0,0)},i.prototype.getSearchData=function(){return this.$element.find("form[data-search-form]").serializeArray()},i.prototype.setupSelectize=function(){var e=this.$element.find(".selectize-select");e.length&&e.selectize({plugins:["remove_button"]})},i.prototype.createMenu=function(e){e.concreteMenu({menu:t("[data-search-menu="+e.attr("data-launch-search-menu")+"]")})},i.prototype.setupMenus=function(e){var i=this;i._templateSearchResultsMenu&&(i.$element.find("[data-search-menu]").remove(),t.each(e.items,function(e,t){i.$results.append(i._templateSearchResultsMenu({item:t}))}),i.$element.find("tbody tr").each(function(){i.createMenu(t(this))}))},i.prototype.setupCustomizeColumns=function(){var e=this;e.$element.on("click","a[data-search-toggle=customize]",function(){var i=t(this).attr("data-search-column-customize-url");return t.fn.dialog.open({width:480,height:400,href:i,modal:!0,title:ccmi18n.customizeSearch,onOpen:function(){ConcreteEvent.subscribe("AjaxFormSubmitSuccess",function(t,i){e.updateResults(i.response.result)})}}),!1})},i.prototype.getSelectedResults=function(){var e=this,i=e.$element.find("tbody tr"),n=[];return e.$element.find(".ccm-search-select-selected").each(function(){var o=i.index(t(this));o>-1&&n.push(e.getResult().items[o])}),n},i.prototype.showMenu=function(e,t,i){new ConcreteMenu(e,{menu:t,handle:"none"}).show(i)},i.prototype.handleSelectClick=function(e,t){var i=this;e.preventDefault(),t.removeClass("ccm-search-select-hover");var n=i.$element.find(".ccm-search-select-selected");if(e.shiftKey){var o=i.$element.find("tbody tr").index(t);if(n.length){var s=i.$element.find("tbody tr").index(n.eq(0));s>-1&&(s>o?i.$element.find("tbody tr").slice(o,s+1).removeClass().addClass("ccm-search-select-selected"):i.$element.find("tbody tr").slice(s,o+1).removeClass().addClass("ccm-search-select-selected"))}else i.$element.find("tbody tr").slice(0,o+1).removeClass().addClass("ccm-search-select-selected");ConcreteEvent.publish("SearchSelectItems",{results:i.getSelectedResults()},i.$element)}else 3==e.which?i.handleMenuClick(e,t):(e.metaKey||e.ctrlKey||n.removeClass("ccm-search-select-selected"),t.hasClass("ccm-search-select-selected")?t.removeClass("ccm-search-select-selected"):t.addClass("ccm-search-select-selected")),ConcreteEvent.publish("SearchSelectItems",{results:i.getSelectedResults()},i.$element)},i.prototype.handleMenuClick=function(e,t){t.hasClass("ccm-search-select-selected")||(this.$element.find(".ccm-search-select-selected").removeClass(),t.addClass("ccm-search-select-selected"));var i=this.getSelectedResults(),n=this.getResultMenu(i);n&&this.showMenu(t,n,e)},i.prototype.getResult=function(){return this.result},i.prototype.updateResults=function(e){var i,n=this,o=n.options,s=null;n.result=e,e&&(n.$resultsTableHead.length&&n.$resultsTableHead.html(n._templateSearchResultsTableHead({columns:e.columns})),n.$resultsTableBody.length&&n.$resultsTableBody.html(n._templateSearchResultsTableBody({items:e.items})),n.$resultsPagination.length&&n.$resultsPagination.html(n._templateSearchResultsPagination({paginationTemplate:e.paginationTemplate})),n.$advancedFields&&(n.$advancedFields.html(""),n.$advancedFields.length&&t.each(e.fields,function(e,t){n.$advancedFields.append(n._templateAdvancedSearchFieldRow({field:t}))})),n.setupResetButton(e)),"multiple"==o.selectMode?n.$element.find("tbody tr").on("contextmenu touchstart touchend",function(e){return e.preventDefault(),!1}).on("mouseover.concreteSearchResultItem",function(){n.hoverIsEnabled(t(this))&&t(this).addClass("ccm-search-select-hover")}).on("mouseout.concreteSearchResultItem",function(){n.hoverIsEnabled(t(this))&&t(this).removeClass("ccm-search-select-hover")}).on("mousedown.concreteSearchResultItem",function(e){n.handleSelectClick(e,t(this))}).on("mouseup.concreteSearchResultItem",function(e){e.metaKey||e.ctrlKey||e.shiftKey||n.$element.find(".ccm-search-select-selected").not(t(this)).removeClass()}).on("touchstart.concreteSearchResultItem",function(e){var o=t(this);i=e,s=setTimeout(function(){n.handleSelectClick(e,o),s=null},1e3)}).on("touchend.concreteSearchResultItem",function(e){s&&(clearTimeout(s),s=null,n.handleMenuClick(i,t(this))),i=null}):n.setupMenus(e),n.setupBulkActions(),o.onUpdateResults&&o.onUpdateResults(this)},i.prototype.hoverIsEnabled=function(e){return!0},i.prototype.setupAdvancedSearch=function(){var e=this;e.$advancedFields=e.$element.find("div.ccm-search-fields-advanced"),e.$element.on("click","a[data-search-toggle=advanced]",function(){return e.$advancedFields.append(e._templateAdvancedSearchFieldRow()),!1}),e.$element.on("change","select[data-search-field]",function(){var i=t(this).parent().find(".ccm-search-field-content");i.html("");var n=t(this).find(":selected").attr("data-search-field-url");n&&e.ajaxUpdate(n,!1,function(e){_.each(e.assets.css,function(e){ConcreteAssetLoader.loadCSS(e)}),_.each(e.assets.javascript,function(e){ConcreteAssetLoader.loadJavaScript(e)}),i.html(e.html)})}),e.$element.on("click","a[data-search-remove=search-field]",function(){return t(this).parent().remove(),!1}),e.$advancedSearchButton.on("click",function(){t("div[data-dialog=save-search-preset]").remove();var i=t(this).attr("href");return t.fn.dialog.open({width:620,height:500,href:i,modal:!0,title:ccmi18n.search,onOpen:function(){t("div[data-component=search-field-selector]").concreteSearchFieldSelector({result:e.result}),e.setupSearch()}}),!1})},i.prototype.setupSort=function(){var e=this;this.$element.on("click","thead th > a",function(){return e.ajaxUpdate(t(this).attr("href")),!1})},i.prototype.refreshResults=function(){this.$element.find("form[data-search-form]").trigger("submit")},i.prototype.setupSearch=function(){var e=this;if(e._templateSearchForm&&e.$element.find("[data-search-element=wrapper]").html(e._templateSearchForm()),e.$element.on("submit","form[data-search-form]",function(){var i=t(this).serializeArray();return i.push({name:"submitSearch",value:"1"}),e.ajaxUpdate(t(this).attr("action"),i),!1}),ConcreteEvent.unsubscribe("SavedPresetSubmit"),ConcreteEvent.subscribe("SavedPresetSubmit",function(t,i){e.ajaxUpdate(i),e.$resetSearchButton.show(),e.$headerSearch.find("div.btn-group").hide(),e.$headerSearchInput.prop("disabled",!0).val(""),e.$headerSearchInput.attr("placeholder","")}),ConcreteEvent.unsubscribe("SavedSearchDeleted"),ConcreteEvent.subscribe("SavedSearchDeleted",function(){t.fn.dialog.closeAll(),e.$resetSearchButton.trigger("click")}),ConcreteEvent.unsubscribe("SavedSearchUpdated"),ConcreteEvent.subscribe("SavedSearchUpdated",function(i,n){t.fn.dialog.closeAll(),n.preset&&n.preset.actionURL&&e.ajaxUpdate(n.preset.actionURL)}),ConcreteEvent.unsubscribe("SavedSearchCreated"),ConcreteEvent.subscribe("SavedSearchCreated",function(t,i){e.updateResults(i)}),e.$element.find("div[data-header] form").on("submit",function(){var i=t(this).serializeArray();return i.push({name:"submitSearch",value:"1"}),e.ajaxUpdate(t(this).attr("action"),i),e.$advancedSearchButton.hide(),e.$resetSearchButton.addClass("ccm-header-reset-search-right").show(),!1}),e.options.appendToOuterDialog){var i=e.$element.closest("div.ui-dialog");i.length&&e.$element.find("div[data-header]").insertBefore(i.find(".ui-dialog-content"))}t("form[data-form=advanced-search]").concreteAjaxForm({success:function(i){e.updateResults(i),t.fn.dialog.closeTop(),e.$advancedSearchButton.html(ccmi18n_filemanager.edit),e.$resetSearchButton.show(),e.$headerSearch.find("div.btn-group").hide(),e.$headerSearchInput.prop("disabled",!0).val(""),e.$headerSearchInput.attr("placeholder","")}}),e.$resetSearchButton.on("click",function(i){e.$element.find("div[data-header] input").val(""),i.preventDefault(),t.concreteAjax({url:t(this).attr("data-button-action-url"),success:function(t){e.updateResults(t),e.$headerSearch.find("div.btn-group").show(),e.$headerSearchInput.prop("disabled",!1),e.$headerSearchInput.attr("placeholder",ccmi18n.search),e.$advancedSearchButton.html(ccmi18n.advanced).show(),e.$resetSearchButton.removeClass("ccm-header-reset-search-right").hide()}})})},i.prototype.handleSelectedBulkAction=function(e,i,n,o){var s=this,r=[];o instanceof t?t.each(o,function(e,i){r.push({name:s.options.bulkParameterName+"[]",value:t(i).val()})}):t.each(o,function(e,t){r.push({name:s.options.bulkParameterName+"[]",value:t})}),"dialog"==i&&t.fn.dialog.open({width:n.attr("data-bulk-action-dialog-width"),height:n.attr("data-bulk-action-dialog-height"),modal:!0,href:n.attr("data-bulk-action-url")+"?"+t.param(r),title:n.attr("data-bulk-action-title")}),"ajax"==i&&t.concreteAjax({url:n.attr("data-bulk-action-url"),data:r,success:function(e){e.message&&ConcreteAlert.notify({message:e.message,title:e.title})}}),"progressive"==i&&new ConcreteProgressiveOperation({url:n.attr("data-bulk-action-url"),data:r,title:n.attr("data-bulk-action-title"),onComplete:function(){s.refreshResults()}}),s.publish("SearchBulkActionSelect",{value:e,option:n,items:o})},i.prototype.publish=function(e,t){ConcreteEvent.publish(e,t,this)},i.prototype.subscribe=function(e,t){ConcreteEvent.subscribe(e,t,this)},i.prototype.setupBulkActions=function(){var e=this;e.$bulkActions=e.$element.find("select[data-bulk-action]"),e.$element.on("change","select[data-bulk-action]",function(){var i=t(this).find("option:selected"),n=i.val(),o=i.attr("data-bulk-action-type");e.handleSelectedBulkAction(n,o,i,e.$element.find("input[data-search-checkbox=individual]:checked")),e.$element.find("option").eq(0).prop("selected",!0)})},i.prototype.setupPagination=function(){var e=this;this.$element.on("click","div.ccm-search-results-pagination a:not([disabled])",function(){return e.ajaxUpdate(t(this).attr("href")),!1})},i.prototype.getResultMenu=function(e){var i;if(e.length>1&&this.options.result.bulkMenus){var n,o=this.options.result.bulkMenus.propertyName;if(i=this.options.result.bulkMenus.menu,t.each(e,function(e,t){var i=t[o];0==e?n=i:n!=i&&(n=null)}),n&&n==this.options.result.bulkMenus.propertyValue)return t(i)}else if(1==e.length)return i=e[0].treeNodeMenu,t(i);return!1},i.prototype.setupCheckboxes=function(){var e=this;e.$element.on("click","input[data-search-checkbox=select-all]",function(){e.$element.find("input[data-search-checkbox=individual]").prop("checked",t(this).is(":checked")).trigger("change")}),e.$element.on("change","input[data-search-checkbox=individual]",function(){e.$element.find("input[data-search-checkbox=individual]:checked").length?e.$bulkActions.prop("disabled",!1):e.$bulkActions.prop("disabled",!0)}),ConcreteEvent.subscribe("SearchSelectItems",function(t,i){e.getResultMenu(i.results)?e.$element.find("button.btn-menu-launcher").prop("disabled",!1):e.$element.find("button.btn-menu-launcher").prop("disabled",!0)},e.$element)},t.fn.concreteAjaxSearch=function(e){return new i(this,e)},e.ConcreteAjaxSearch=i}(e,jQuery)}).call(t,i(2))},function(e,t,i){(function(e){!function(e,t){"use strict";t("table tr[data-search-row-url]").each(function(){t(this).hover(function(){t(this).addClass("ccm-search-select-hover")},function(){t(this).removeClass("ccm-search-select-hover")}),t(this).on("click",function(){window.location.href=t(this).attr("data-search-row-url")})})}(0,jQuery)}).call(t,i(2))},function(e,t){!function(e,t){"use strict";function i(e,i){var n=this;i=i||{},i=t.extend({},i),n.$element=e,n.options=i;var o=t("div[data-container=search-fields]"),s=_.template(t("script[data-template=search-field-row]").html()),r=t("script[data-template=default-query]").html();r&&(r=JSON.parse(r)),t("button[data-button-action=add-field]").on("click",function(){o.append(s())}),n.options.result&&n.options.result.query?t.each(n.options.result.query.fields,function(e,t){o.append(s({field:t}))}):r&&t.each(r.fields,function(e,t){o.append(s({field:t}))});var a=o.find("select.selectize-select");a.length&&a.selectize({plugins:["remove_button"]}),o.on("change","select.ccm-search-field-selector-choose",function(){var e=t(this).val(),i=t(this).parent().find("div.form-group");e&&t.concreteAjax({url:t(this).attr("data-action"),data:{field:e},success:function(e){_.each(e.assets.css,function(e){ConcreteAssetLoader.loadCSS(e)}),_.each(e.assets.javascript,function(e){ConcreteAssetLoader.loadJavaScript(e)}),i.html(e.element);var t=i.find("select.selectize-select");t.length&&t.selectize({plugins:["remove_button"]})}})}),o.on("click","a[data-search-remove=search-field]",function(e){e.preventDefault(),t(this).parent().remove()})}t.fn.concreteSearchFieldSelector=function(e){return t.each(t(this),function(n,o){new i(t(this),e)})},e.ConcreteSearchFieldSelector=i}(window,jQuery)},function(e,t,i){(function(e){!function(e,t){"use strict";function i(e,i){i=i||{},i=t.extend({},i),this.$element=e,this.options=i,t("[data-search-preset-id]").on("click",function(e){e.preventDefault(),!t(e.target).is("button")&&t(this).data("action")&&(t.fn.dialog.closeTop(),ConcreteEvent.publish("SavedPresetSubmit",t(this).data("action")))}),t(".ccm-search-presets-table tbody tr").on("mouseover",function(){t(this).addClass("ccm-search-select-hover")}).on("mouseout",function(){t(this).removeClass("ccm-search-select-hover")}),t("button[data-button-action=save-search-preset]").on("click.saveSearchPreset",function(){t.fn.dialog.open({element:"div[data-dialog=save-search-preset]:first",modal:!0,width:320,title:"Save Preset",height:"auto"})});var n=t("form[data-form=save-preset]"),o=t("form[data-form=advanced-search]");t("button[data-button-action=save-search-preset-submit]").on("click.saveSearchPresetSubmit",function(){t("form[data-form=save-preset]").trigger("submit")}),n.on("submit",function(){var e=o.serializeArray();return e=e.concat(n.serializeArray()),t.concreteAjax({data:e,url:n.attr("action"),success:function(e){t.fn.dialog.closeAll(),ConcreteEvent.publish("SavedSearchCreated",e)}}),!1}),t("button[data-button-action=edit-search-preset], button[data-button-action=delete-search-preset]").on("click",function(e){e.preventDefault();var i=t(this).attr("data-tree-action-url"),n=t(this).attr("dialog-title");t.fn.dialog.open({title:n,href:i,width:550,modal:!0,height:"auto"})})}t.fn.concreteAdvancedSearchPresetSelector=function(e){return t.each(t(this),function(n,o){new i(t(this),e)})},e.ConcreteAdvancedSearchPresetSelector=i}(e,jQuery)}).call(t,i(2))},function(e,t,i){(function(e){function t(e,i){var n=this;return i=i||{},i=$.extend({readOnly:!1,chooseNodeInForm:!1,onSelect:!1,treeID:!1,onClick:!1,allowFolderSelection:!0,selectNodesByKey:[],removeNodesByKey:[],removeNodesByCallback:!1,ajaxData:{}},i),n.options=i,n.$element=e,n.setupTree(),i.chooseNodeInForm||i.onClick||t.setupTreeEvents(n),n.$element}t.prototype={dragRequest:function(e,t,i,n){var o=t.parent.data.treeNodeID;"over"==i&&(o=t.data.treeNodeID),jQuery.fn.dialog.showLoader();var s=[{name:"sourceTreeNodeID",value:e.data.treeNodeID},{name:"treeNodeParentID",value:o}];$.concreteAjax({data:s,url:CCM_DISPATCHER_FILENAME+"/ccm/system/tree/node/drag_request",success:function(e){n&&n()}})},setupTree:function(){var e=this,t=e.options,i=!1,n={};0!=e.options.ajaxData&&(n=e.options.ajaxData),t.treeNodeParentID?n.treeNodeParentID=t.treeNodeParentID:n.treeID=t.treeID,t.allowFolderSelection&&(n.allowFolderSelection=1);t.chooseNodeInForm&&(i=!0,!1,{checkbox:"fancytree-radio"},t.selectNodesByKey.length&&(n.treeNodeSelectedIDs=t.selectNodesByKey)),"multiple"===t.chooseNodeInForm&&(i=!0,!1,{checkbox:"fancytree-checkbox"},t.selectNodesByKey.length&&(n.treeNodeSelectedIDs=t.selectNodesByKey));var o=1;t.selectMode&&(o=t.selectMode);var s,r=2;t.minExpandLevel&&(r=t.minExpandLevel),s=t.treeNodeParentID?CCM_DISPATCHER_FILENAME+"/ccm/system/tree/node/load_starting":CCM_DISPATCHER_FILENAME+"/ccm/system/tree/load",$(e.$element).fancytree({tabindex:null,titlesTabbable:!1,extensions:["glyph","dnd"],glyph:{preset:"awesome5"},source:{url:s,method:"POST",data:n},lazyLoad:function(t,i){i.result=e.getLoadNodePromise(i.node)},select:function(e,i){if(t.chooseNodeInForm){var n=$.map(i.tree.getSelectedNodes(),function(e){return e.key});t.onSelect(n)}},selectMode:o,checkbox:i,minExpandLevel:r,clickFolderMode:1,init:function(){var i,n=e.$element;if(t.removeNodesByKey.length)for(var o=0;o<t.removeNodesByKey.length;o++){var s=t.removeNodesByKey[o],r=n.fancytree("getTree").getNodeByKey(String(s));r&&r.remove()}if(t.readOnly&&n.fancytree("disable"),t.chooseNodeInForm&&(i=(i=n.fancytree("getTree")).getSelectedNodes()).length){var a=$.map(i,function(e){return e.key});t.onSelect(a)}i&&$.map(i,function(e){e.makeVisible()})},click:function(e,i){if("expander"==i.targetType)return!0;if("icon"==i.targetType)return!1;if(t.onClick)return t.onClick(i.node,e);if(t.chooseNodeInForm&&"checkbox"!=i.targetType)return!1;if(!i.targetType)return!1;if(!t.chooseNodeInForm&&e.originalEvent.target&&$(e.originalEvent.target).hasClass("fancytree-title")){var n=i.node.data.treeNodeMenu;if(n)new ConcreteMenu($(i.node.span),{menu:n,handle:"none"}).show(e)}return!0},dnd:{preventRecursiveMoves:!0,focusOnClick:!0,preventVoidMoves:!0,dragStart:function(e,i){return!t.chooseNodeInForm},dragStop:function(e,t){return!0},dragEnter:function(e,t){var i=t.otherNode,n=t.hitMode;return!(!e.parent.data.treeNodeID&&"1"!==e.data.treeNodeID)&&(("over"==n||1!=e.data.treeNodeID)&&(i.data.treeNodeID!=e.data.treeNodeID&&(!(!e.data.treeNodeID&&"after"==n)&&!e.isDescendantOf(i))))},dragDrop:function(t,i){e.dragRequest(i.otherNode,t,i.hitMode,function(){i.otherNode.moveTo(t,i.hitMode);var e=i.otherNode.parent.data.treeNodeID;"over"==i.hitMode&&(e=t.data.treeNodeID);var n=[{name:"sourceTreeNodeID",value:i.otherNode.data.treeNodeID},{name:"treeNodeParentID",value:e}],o=t.parent.getChildren();if(o)for(var s=0;s<o.length;s++){var r=o[s];n.push({name:"treeNodeID[]",value:r.data.treeNodeID})}$.concreteAjax({data:n,url:CCM_DISPATCHER_FILENAME+"/ccm/system/tree/node/update_order"})})}}})},getLoadNodePromise:function(e){var t=0!=this.options.ajaxData?this.options.ajaxData:{};return t.treeNodeParentID=e.data.treeNodeID,$.when($.getJSON(CCM_DISPATCHER_FILENAME+"/ccm/system/tree/node/load",t))},reloadNode:function(e,t){this.getLoadNodePromise(e).done(function(i){e.removeChildren(),e.addChildren(i),e.setExpanded(!0,{noAnimation:!0}),t&&t()})},cloneNode:function(e){var t=this,i=$("[data-tree="+t.options.treeID+"]");return $.ajax({dataType:"json",type:"post",data:{treeNodeID:e},url:CCM_DISPATCHER_FILENAME+"/ccm/system/tree/node/duplicate",success:function(e){if(1==e.error)ConcreteAlert.dialog(ccmi18n.error,e.errors.join("<br>"));else{jQuery.fn.dialog.closeTop();var n=i.fancytree("getTree").getNodeByKey(String(e.treeNodeParentID));jQuery.fn.dialog.showLoader(),t.reloadNode(n,function(){jQuery.fn.dialog.hideLoader()})}},error:function(e){ConcreteAlert.dialog(ccmi18n.error,'<div class="alert alert-danger">'+e.responseText+"</div>")},complete:function(){jQuery.fn.dialog.hideLoader()}}),!1}},t.setupTreeEvents=function(e){ConcreteEvent.unsubscribe("ConcreteMenuShow"),ConcreteEvent.subscribe("ConcreteMenuShow",function(t,i){i.menuElement.find("a[data-tree-action]").on("click.concreteMenu",function(t){t.preventDefault();var i=$(this).attr("data-tree-action-url"),n=$(this).attr("data-tree-action"),o=$(this).attr("dialog-title"),s=$(this).attr("dialog-width"),r=$(this).attr("dialog-height");switch(n){case"clone-node":e.cloneNode($(this).attr("data-tree-node-id"));break;default:if(!o)switch(n){case"add-node":o=ccmi18n_tree.add;break;case"edit-node":o=ccmi18n_tree.edit;break;case"delete-node":o=ccmi18n_tree.delete}s||(s=550),r||(r="auto"),jQuery.fn.dialog.open({title:o,href:i,width:s,modal:!0,height:r})}})}),ConcreteEvent.subscribe("ConcreteTreeAddTreeNode.concreteTree",function(t,i){var n=$("[data-tree="+e.options.treeID+"]"),o=i.node;if(o.length)for(var s=0;s<o.length;s++)n.fancytree("getTree").getNodeByKey(String(o[s].treeNodeParentID)).addChildren(o);else n.fancytree("getTree").getNodeByKey(String(o.treeNodeParentID)).addChildren(o)}),ConcreteEvent.subscribe("ConcreteTreeUpdateTreeNode.concreteTree",function(t,i){var n=$("[data-tree="+e.options.treeID+"]").fancytree("getTree").getNodeByKey(String(i.node.key));n.fromDict(i.node),n.render()}),ConcreteEvent.subscribe("ConcreteTreeDeleteTreeNode.concreteTree",function(t,i){$("[data-tree="+e.options.treeID+"]").fancytree("getTree").getNodeByKey(String(i.node.treeNodeID)).remove()})},$.fn.concreteTree=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcreteTree=t}).call(t,i(2))},function(e,t,i){var n,o,s,r;r=function(e){"use strict";var t=e.ui.fancytree,i={awesome3:{_addClass:"",checkbox:"icon-check-empty",checkboxSelected:"icon-check",checkboxUnknown:"icon-check icon-muted",dragHelper:"icon-caret-right",dropMarker:"icon-caret-right",error:"icon-exclamation-sign",expanderClosed:"icon-caret-right",expanderLazy:"icon-angle-right",expanderOpen:"icon-caret-down",loading:"icon-refresh icon-spin",nodata:"icon-meh",noExpander:"",radio:"icon-circle-blank",radioSelected:"icon-circle",doc:"icon-file-alt",docOpen:"icon-file-alt",folder:"icon-folder-close-alt",folderOpen:"icon-folder-open-alt"},awesome4:{_addClass:"fa",checkbox:"fa-square-o",checkboxSelected:"fa-check-square-o",checkboxUnknown:"fa-square fancytree-helper-indeterminate-cb",dragHelper:"fa-arrow-right",dropMarker:"fa-long-arrow-right",error:"fa-warning",expanderClosed:"fa-caret-right",expanderLazy:"fa-angle-right",expanderOpen:"fa-caret-down",loading:{html:"<span class='fa fa-spinner fa-pulse' />"},nodata:"fa-meh-o",noExpander:"",radio:"fa-circle-thin",radioSelected:"fa-circle",doc:"fa-file-o",docOpen:"fa-file-o",folder:"fa-folder-o",folderOpen:"fa-folder-open-o"},awesome5:{_addClass:"",checkbox:"far fa-square",checkboxSelected:"far fa-check-square",checkboxUnknown:"fas fa-square fancytree-helper-indeterminate-cb",radio:"far fa-circle",radioSelected:"fas fa-circle",radioUnknown:"far fa-dot-circle",dragHelper:"fas fa-arrow-right",dropMarker:"fas fa-long-arrow-alt-right",error:"fas fa-exclamation-triangle",expanderClosed:"fas fa-caret-right",expanderLazy:"fas fa-angle-right",expanderOpen:"fas fa-caret-down",loading:"fas fa-spinner fa-pulse",nodata:"far fa-meh",noExpander:"",doc:"far fa-file",docOpen:"far fa-file",folder:"far fa-folder",folderOpen:"far fa-folder-open"},bootstrap3:{_addClass:"glyphicon",checkbox:"glyphicon-unchecked",checkboxSelected:"glyphicon-check",checkboxUnknown:"glyphicon-expand fancytree-helper-indeterminate-cb",dragHelper:"glyphicon-play",dropMarker:"glyphicon-arrow-right",error:"glyphicon-warning-sign",expanderClosed:"glyphicon-menu-right",expanderLazy:"glyphicon-menu-right",expanderOpen:"glyphicon-menu-down",loading:"glyphicon-refresh fancytree-helper-spin",nodata:"glyphicon-info-sign",noExpander:"",radio:"glyphicon-remove-circle",radioSelected:"glyphicon-ok-circle",doc:"glyphicon-file",docOpen:"glyphicon-file",folder:"glyphicon-folder-close",folderOpen:"glyphicon-folder-open"},material:{_addClass:"material-icons",checkbox:{text:"check_box_outline_blank"},checkboxSelected:{text:"check_box"},checkboxUnknown:{text:"indeterminate_check_box"},dragHelper:{text:"play_arrow"},dropMarker:{text:"arrow-forward"},error:{text:"warning"},expanderClosed:{text:"chevron_right"},expanderLazy:{text:"last_page"},expanderOpen:{text:"expand_more"},loading:{text:"autorenew",addClass:"fancytree-helper-spin"},nodata:{text:"info"},noExpander:{text:""},radio:{text:"radio_button_unchecked"},radioSelected:{text:"radio_button_checked"},doc:{text:"insert_drive_file"},docOpen:{text:"insert_drive_file"},folder:{text:"folder"},folderOpen:{text:"folder_open"}}};function n(t,i,n,o){var s=n.map,r=s[o],a=e(t),l=a.find(".fancytree-childcounter"),c=i+" "+(s._addClass||"");"string"==typeof r?(t.innerHTML="",a.attr("class",c+" "+r).append(l)):r&&(r.text?t.textContent=""+r.text:r.html?t.innerHTML=r.html:t.innerHTML="",a.attr("class",c+" "+(r.addClass||"")).append(l))}return e.ui.fancytree.registerExtension({name:"glyph",version:"2.32.0",options:{preset:null,map:{}},treeInit:function(n){var o=n.tree,s=n.options.glyph;s.preset?(t.assert(!!i[s.preset],"Invalid value for `options.glyph.preset`: "+s.preset),s.map=e.extend({},i[s.preset],s.map)):o.warn("ext-glyph: missing `preset` option."),this._superApply(arguments),o.$container.addClass("fancytree-ext-glyph")},nodeRenderStatus:function(i){var o,s,r,a=i.node,l=e(a.span),c=i.options.glyph;return s=this._super(i),a.isRoot()?s:((r=l.children("span.fancytree-expander").get(0))&&n(r,"fancytree-expander",c,a.expanded&&a.hasChildren()?"expanderOpen":a.isUndefined()?"expanderLazy":a.hasChildren()?"expanderClosed":"noExpander"),(r=a.tr?e("td",a.tr).find("span.fancytree-checkbox").get(0):l.children("span.fancytree-checkbox").get(0))&&(o=t.evalOption("checkbox",a,a,c,!1),a.parent&&a.parent.radiogroup||"radio"===o?n(r,"fancytree-checkbox fancytree-radio",c,a.selected?"radioSelected":"radio"):n(r,"fancytree-checkbox",c,a.selected?"checkboxSelected":a.partsel?"checkboxUnknown":"checkbox")),(r=l.children("span.fancytree-icon").get(0))&&n(r,"fancytree-icon",c,a.statusNodeType?a.statusNodeType:a.folder?a.expanded&&a.hasChildren()?"folderOpen":"folder":a.expanded?"docOpen":"doc"),s)},nodeSetStatus:function(t,i,o,s){var r,a,l=t.options.glyph,c=t.node;return r=this._superApply(arguments),"error"!==i&&"loading"!==i&&"nodata"!==i||(c.parent?(a=e("span.fancytree-expander",c.span).get(0))&&n(a,"fancytree-expander",l,i):(a=e(".fancytree-statusnode-"+i,c[this.nodeContainerAttrName]).find("span.fancytree-icon").get(0))&&n(a,"fancytree-icon",l,i)),r}}),e.ui.fancytree},o=[i(1),i(8)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){e.ui=e.ui||{};e.ui.version="1.12.1";var t,i=0,n=Array.prototype.slice;e.cleanData=e.cleanData||(t=e.cleanData,function(i){var n,o,s;for(s=0;null!=(o=i[s]);s++)try{(n=e._data(o,"events"))&&n.remove&&e(o).triggerHandler("remove")}catch(e){}t(i)}),e.widget=e.widget||function(t,i,n){var o,s,r,a={},l=t.split(".")[0],c=l+"-"+(t=t.split(".")[1]);return n||(n=i,i=e.Widget),e.isArray(n)&&(n=e.extend.apply(null,[{}].concat(n))),e.expr[":"][c.toLowerCase()]=function(t){return!!e.data(t,c)},e[l]=e[l]||{},o=e[l][t],s=e[l][t]=function(e,t){if(!this._createWidget)return new s(e,t);arguments.length&&this._createWidget(e,t)},e.extend(s,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),(r=new i).options=e.widget.extend({},r.options),e.each(n,function(t,n){e.isFunction(n)?a[t]=function(){function e(){return i.prototype[t].apply(this,arguments)}function o(e){return i.prototype[t].apply(this,e)}return function(){var t,i=this._super,s=this._superApply;return this._super=e,this._superApply=o,t=n.apply(this,arguments),this._super=i,this._superApply=s,t}}():a[t]=n}),s.prototype=e.widget.extend(r,{widgetEventPrefix:o&&r.widgetEventPrefix||t},a,{constructor:s,namespace:l,widgetName:t,widgetFullName:c}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete o._childConstructors):i._childConstructors.push(s),e.widget.bridge(t,s),s},e.widget.extend=function(t){for(var i,o,s=n.call(arguments,1),r=0,a=s.length;r<a;r++)for(i in s[r])o=s[r][i],s[r].hasOwnProperty(i)&&void 0!==o&&(e.isPlainObject(o)?t[i]=e.isPlainObject(t[i])?e.widget.extend({},t[i],o):e.widget.extend({},o):t[i]=o);return t},e.widget.bridge=function(t,i){var o=i.prototype.widgetFullName||t;e.fn[t]=function(s){var r="string"==typeof s,a=n.call(arguments,1),l=this;return r?this.length||"instance"!==s?this.each(function(){var i,n=e.data(this,o);return"instance"===s?(l=n,!1):n?e.isFunction(n[s])&&"_"!==s.charAt(0)?(i=n[s].apply(n,a))!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0:e.error("no such method '"+s+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+s+"'")}):l=void 0:(a.length&&(s=e.widget.extend.apply(null,[s].concat(a))),this.each(function(){var t=e.data(this,o);t?(t.option(s||{}),t._init&&t._init()):e.data(this,o,new i(s,this))})),l}},e.Widget=e.Widget||function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{classes:{},disabled:!1,create:null},_createWidget:function(t,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=e(),this.hoverable=e(),this.focusable=e(),this.classesElementLookup={},n!==this&&(e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this._create(),this.options.disabled&&this._setOptionDisabled(this.options.disabled),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:function(){return{}},_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){var t=this;this._destroy(),e.each(this.classesElementLookup,function(e,i){t._removeClass(i,e)}),this.element.off(this.eventNamespace).removeData(this.widgetFullName),this.widget().off(this.eventNamespace).removeAttr("aria-disabled"),this.bindings.off(this.eventNamespace)},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,o,s,r=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(r={},t=(n=t.split(".")).shift(),n.length){for(o=r[t]=e.widget.extend({},this.options[t]),s=0;s<n.length-1;s++)o[n[s]]=o[n[s]]||{},o=o[n[s]];if(t=n.pop(),1===arguments.length)return void 0===o[t]?null:o[t];o[t]=i}else{if(1===arguments.length)return void 0===this.options[t]?null:this.options[t];r[t]=i}return this._setOptions(r),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return"classes"===e&&this._setOptionClasses(t),this.options[e]=t,"disabled"===e&&this._setOptionDisabled(t),this},_setOptionClasses:function(t){var i,n,o;for(i in t)o=this.classesElementLookup[i],t[i]!==this.options.classes[i]&&o&&o.length&&(n=e(o.get()),this._removeClass(o,i),n.addClass(this._classes({element:n,keys:i,classes:t,add:!0})))},_setOptionDisabled:function(e){this._toggleClass(this.widget(),this.widgetFullName+"-disabled",null,!!e),e&&(this._removeClass(this.hoverable,null,"ui-state-hover"),this._removeClass(this.focusable,null,"ui-state-focus"))},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_classes:function(t){var i=[],n=this;function o(o,s){var r,a;for(a=0;a<o.length;a++)r=n.classesElementLookup[o[a]]||e(),r=t.add?e(e.unique(r.get().concat(t.element.get()))):e(r.not(t.element).get()),n.classesElementLookup[o[a]]=r,i.push(o[a]),s&&t.classes[o[a]]&&i.push(t.classes[o[a]])}return t=e.extend({element:this.element,classes:this.options.classes||{}},t),this._on(t.element,{remove:"_untrackClassesElement"}),t.keys&&o(t.keys.match(/\S+/g)||[],!0),t.extra&&o(t.extra.match(/\S+/g)||[]),i.join(" ")},_untrackClassesElement:function(t){var i=this;e.each(i.classesElementLookup,function(n,o){-1!==e.inArray(t.target,o)&&(i.classesElementLookup[n]=e(o.not(t.target).get()))})},_removeClass:function(e,t,i){return this._toggleClass(e,t,i,!1)},_addClass:function(e,t,i){return this._toggleClass(e,t,i,!0)},_toggleClass:function(e,t,i,n){n="boolean"==typeof n?n:i;var o="string"==typeof e||null===e,s={extra:o?t:i,keys:o?e:t,element:o?this.element:e,add:n};return s.element.toggleClass(this._classes(s),n),this},_on:function(t,i,n){var o,s=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=o=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,o=this.widget()),e.each(n,function(n,r){function a(){if(t||!0!==s.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof r?s[r]:r).apply(s,arguments)}"string"!=typeof r&&(a.guid=r.guid=r.guid||a.guid||e.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+s.eventNamespace,u=l[2];u?o.on(c,u,a):i.on(c,a)})},_off:function(t,i){i=(i||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.off(i).off(i),this.bindings=e(this.bindings.not(t).get()),this.focusable=e(this.focusable.not(t).get()),this.hoverable=e(this.hoverable.not(t).get())},_delay:function(e,t){var i=this;return setTimeout(function(){return("string"==typeof e?i[e]:e).apply(i,arguments)},t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){this._addClass(e(t.currentTarget),null,"ui-state-hover")},mouseleave:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){this._addClass(e(t.currentTarget),null,"ui-state-focus")},focusout:function(t){this._removeClass(e(t.currentTarget),null,"ui-state-focus")}})},_trigger:function(t,i,n){var o,s,r=this.options[t];if(n=n||{},(i=e.Event(i)).type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],s=i.originalEvent)for(o in s)o in i||(i[o]=s[o]);return this.element.trigger(i,n),!(e.isFunction(r)&&!1===r.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,o,s){var r;"string"==typeof o&&(o={effect:o});var a=o?!0===o||"number"==typeof o?i:o.effect||i:t;"number"==typeof(o=o||{})&&(o={duration:o}),r=!e.isEmptyObject(o),o.complete=s,o.delay&&n.delay(o.delay),r&&e.effects&&e.effects.effect[a]?n[t](o):a!==t&&n[a]?n[a](o.duration,o.easing,s):n.queue(function(i){e(this)[t](),s&&s.call(n[0]),i()})}});e.widget;!function(){var t,i=Math.max,n=Math.abs,o=/left|center|right/,s=/top|center|bottom/,r=/[\+\-]\d+(\.[\d]+)?%?/,a=/^\w+/,l=/%$/,c=e.fn.position;function u(e,t,i){return[parseFloat(e[0])*(l.test(e[0])?t/100:1),parseFloat(e[1])*(l.test(e[1])?i/100:1)]}function d(t,i){return parseInt(e.css(t,i),10)||0}e.position=e.position||{scrollbarWidth:function(){if(void 0!==t)return t;var i,n,o=e("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=o.children()[0];return e("body").append(o),i=s.offsetWidth,o.css("overflow","scroll"),i===(n=s.offsetWidth)&&(n=o[0].clientWidth),o.remove(),t=i-n},getScrollInfo:function(t){var i=t.isWindow||t.isDocument?"":t.element.css("overflow-x"),n=t.isWindow||t.isDocument?"":t.element.css("overflow-y"),o="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth;return{width:"scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]),o=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:o,offset:!n&&!o?e(t).offset():{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:i.outerWidth(),height:i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var l,h,p,f,m,g,v,y,b=e(t.of),C=e.position.getWithinInfo(t.within),_=e.position.getScrollInfo(C),D=(t.collision||"flip").split(" "),w={};return g=9===(y=(v=b)[0]).nodeType?{width:v.width(),height:v.height(),offset:{top:0,left:0}}:e.isWindow(y)?{width:v.width(),height:v.height(),offset:{top:v.scrollTop(),left:v.scrollLeft()}}:y.preventDefault?{width:0,height:0,offset:{top:y.pageY,left:y.pageX}}:{width:v.outerWidth(),height:v.outerHeight(),offset:v.offset()},b[0].preventDefault&&(t.at="left top"),h=g.width,p=g.height,f=g.offset,m=e.extend({},f),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=o.test(n[0])?n.concat(["center"]):s.test(n[0])?["center"].concat(n):["center","center"]),n[0]=o.test(n[0])?n[0]:"center",n[1]=s.test(n[1])?n[1]:"center",e=r.exec(n[0]),i=r.exec(n[1]),w[this]=[e?e[0]:0,i?i[0]:0],t[this]=[a.exec(n[0])[0],a.exec(n[1])[0]]}),1===D.length&&(D[1]=D[0]),"right"===t.at[0]?m.left+=h:"center"===t.at[0]&&(m.left+=h/2),"bottom"===t.at[1]?m.top+=p:"center"===t.at[1]&&(m.top+=p/2),l=u(w.at,h,p),m.left+=l[0],m.top+=l[1],this.each(function(){var o,s,r=e(this),a=r.outerWidth(),c=r.outerHeight(),g=d(this,"marginLeft"),v=d(this,"marginTop"),y=a+g+d(this,"marginRight")+_.width,x=c+v+d(this,"marginBottom")+_.height,k=e.extend({},m),E=u(w.my,r.outerWidth(),r.outerHeight());"right"===t.my[0]?k.left-=a:"center"===t.my[0]&&(k.left-=a/2),"bottom"===t.my[1]?k.top-=c:"center"===t.my[1]&&(k.top-=c/2),k.left+=E[0],k.top+=E[1],o={marginLeft:g,marginTop:v},e.each(["left","top"],function(i,n){e.ui.position[D[i]]&&e.ui.position[D[i]][n](k,{targetWidth:h,targetHeight:p,elemWidth:a,elemHeight:c,collisionPosition:o,collisionWidth:y,collisionHeight:x,offset:[l[0]+E[0],l[1]+E[1]],my:t.my,at:t.at,within:C,elem:r})}),t.using&&(s=function(e){var o=f.left-k.left,s=o+h-a,l=f.top-k.top,u=l+p-c,d={target:{element:b,left:f.left,top:f.top,width:h,height:p},element:{element:r,left:k.left,top:k.top,width:a,height:c},horizontal:s<0?"left":o>0?"right":"center",vertical:u<0?"top":l>0?"bottom":"middle"};h<a&&n(o+s)<h&&(d.horizontal="center"),p<c&&n(l+u)<p&&(d.vertical="middle"),i(n(o),n(s))>i(n(l),n(u))?d.important="horizontal":d.important="vertical",t.using.call(this,e,d)}),r.offset(e.extend(k,{using:s}))})},e.ui.position={fit:{left:function(e,t){var n,o=t.within,s=o.isWindow?o.scrollLeft:o.offset.left,r=o.width,a=e.left-t.collisionPosition.marginLeft,l=s-a,c=a+t.collisionWidth-r-s;t.collisionWidth>r?l>0&&c<=0?(n=e.left+l+t.collisionWidth-r-s,e.left+=l-n):e.left=c>0&&l<=0?s:l>c?s+r-t.collisionWidth:s:l>0?e.left+=l:c>0?e.left-=c:e.left=i(e.left-a,e.left)},top:function(e,t){var n,o=t.within,s=o.isWindow?o.scrollTop:o.offset.top,r=t.within.height,a=e.top-t.collisionPosition.marginTop,l=s-a,c=a+t.collisionHeight-r-s;t.collisionHeight>r?l>0&&c<=0?(n=e.top+l+t.collisionHeight-r-s,e.top+=l-n):e.top=c>0&&l<=0?s:l>c?s+r-t.collisionHeight:s:l>0?e.top+=l:c>0?e.top-=c:e.top=i(e.top-a,e.top)}},flip:{left:function(e,t){var i,o,s=t.within,r=s.offset.left+s.scrollLeft,a=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,c=e.left-t.collisionPosition.marginLeft,u=c-l,d=c+t.collisionWidth-a-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,f=-2*t.offset[0];u<0?((i=e.left+h+p+f+t.collisionWidth-a-r)<0||i<n(u))&&(e.left+=h+p+f):d>0&&((o=e.left-t.collisionPosition.marginLeft+h+p+f-l)>0||n(o)<d)&&(e.left+=h+p+f)},top:function(e,t){var i,o,s=t.within,r=s.offset.top+s.scrollTop,a=s.height,l=s.isWindow?s.scrollTop:s.offset.top,c=e.top-t.collisionPosition.marginTop,u=c-l,d=c+t.collisionHeight-a-l,h="top"===t.my[1]?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,p="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];u<0?((o=e.top+h+p+f+t.collisionHeight-a-r)<0||o<n(u))&&(e.top+=h+p+f):d>0&&((i=e.top-t.collisionPosition.marginTop+h+p+f-l)>0||n(i)<d)&&(e.top+=h+p+f)}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}}}();var o;e.ui.position,e.ui.keyCode={BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38},e.fn.scrollParent=function(t){var i=this.css("position"),n="absolute"===i,o=t?/(auto|scroll|hidden)/:/(auto|scroll)/,s=this.parents().filter(function(){var t=e(this);return(!n||"static"!==t.css("position"))&&o.test(t.css("overflow")+t.css("overflow-y")+t.css("overflow-x"))}).eq(0);return"fixed"!==i&&s.length?s:e(this[0].ownerDocument||document)},e.fn.extend({uniqueId:(o=0,function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++o)})}),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&e(this).removeAttr("id")})}})},o=[i(1)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){"use strict";var t=null,i=window.localStorage?{get:function(e){return window.localStorage.getItem(e)},set:function(e,t){window.localStorage.setItem(e,t)},remove:function(e){window.localStorage.removeItem(e)}}:null,n=window.sessionStorage?{get:function(e){return window.sessionStorage.getItem(e)},set:function(e,t){window.sessionStorage.setItem(e,t)},remove:function(e){window.sessionStorage.removeItem(e)}}:null,o=e.ui.fancytree.assert,s="expanded";return"function"==typeof Cookies?t={get:Cookies.get,set:function(e,t){Cookies.set(e,t,this.options.persist.cookie)},remove:Cookies.remove}:e&&"function"==typeof e.cookie&&(t={get:e.cookie,set:function(t,i){e.cookie.set(t,i,this.options.persist.cookie)},remove:e.removeCookie}),e.ui.fancytree._FancytreeClass.prototype.clearPersistData=function(e){var t=this.ext.persist,i=t.cookiePrefix;(e=e||"active expanded focus selected").indexOf("active")>=0&&t._data(i+"active",null),e.indexOf(s)>=0&&t._data(i+s,null),e.indexOf("focus")>=0&&t._data(i+"focus",null),e.indexOf("selected")>=0&&t._data(i+"selected",null)},e.ui.fancytree._FancytreeClass.prototype.clearCookies=function(e){return this.warn("'tree.clearCookies()' is deprecated since v2.27.0: use 'clearPersistData()' instead."),this.clearPersistData(e)},e.ui.fancytree._FancytreeClass.prototype.getPersistData=function(){var e=this.ext.persist,t=e.cookiePrefix,i=e.cookieDelimiter,n={};return n.active=e._data(t+"active"),n[s]=(e._data(t+s)||"").split(i),n.selected=(e._data(t+"selected")||"").split(i),n.focus=e._data(t+"focus"),n},e.ui.fancytree.registerExtension({name:"persist",version:"2.32.0",options:{cookieDelimiter:"~",cookiePrefix:void 0,cookie:{raw:!1,expires:"",path:"",domain:"",secure:!1},expandLazy:!1,expandOpts:void 0,fireActivate:!0,overrideSource:!0,store:"auto",types:"active expanded focus selected"},_data:function(e,t){var i=this._local.store;if(void 0===t)return i.get.call(this,e);null===t?i.remove.call(this,e):i.set.call(this,e,t)},_appendKey:function(t,i,n){i=""+i;var o=this._local,s=this.options.persist.cookieDelimiter,r=o.cookiePrefix+t,a=o._data(r),l=a?a.split(s):[],c=e.inArray(i,l);c>=0&&l.splice(c,1),n&&l.push(i),o._data(r,l.join(s))},treeInit:function(r){var a=r.tree,l=r.options,c=this._local,u=this.options.persist;return c.cookiePrefix=u.cookiePrefix||"fancytree-"+a._id+"-",c.storeActive=u.types.indexOf("active")>=0,c.storeExpanded=u.types.indexOf(s)>=0,c.storeSelected=u.types.indexOf("selected")>=0,c.storeFocus=u.types.indexOf("focus")>=0,c.store=null,"auto"===u.store&&(u.store=i?"local":"cookie"),e.isPlainObject(u.store)?c.store=u.store:"cookie"===u.store?c.store=t:"local"===u.store?c.store="local"===u.store?i:n:"session"===u.store&&(c.store="local"===u.store?i:n),o(c.store,"Need a valid store."),a.$div.on("fancytreeinit",function(t){if(!1!==a._triggerTreeEvent("beforeRestore",null,{})){var i,n,o,r,d=c._data(c.cookiePrefix+"focus"),h=!1===u.fireActivate;i=c._data(c.cookiePrefix+s),o=i&&i.split(u.cookieDelimiter),(c.storeExpanded?function t(i,n,o,r,a){var l,c,u,d,h=!1,p=i.options.persist.expandOpts,f=[],m=[];for(o=o||[],a=a||e.Deferred(),l=0,u=o.length;l<u;l++)c=o[l],(d=i.getNodeByKey(c))?r&&d.isUndefined()?(h=!0,i.debug("_loadLazyNodes: "+d+" is lazy: loading..."),"expand"===r?f.push(d.setExpanded(!0,p)):f.push(d.load())):(i.debug("_loadLazyNodes: "+d+" already loaded."),d.setExpanded(!0,p)):(m.push(c),i.debug("_loadLazyNodes: "+d+" was not yet found."));return e.when.apply(e,f).always(function(){if(h&&m.length>0)t(i,n,m,r,a);else{if(m.length)for(i.warn("_loadLazyNodes: could not load those keys: ",m),l=0,u=m.length;l<u;l++)c=o[l],n._appendKey(s,o[l],!1);a.resolve()}}),a}(a,c,o,!!u.expandLazy&&"expand",null):(new e.Deferred).resolve()).done(function(){if(c.storeSelected){if(i=c._data(c.cookiePrefix+"selected"))for(o=i.split(u.cookieDelimiter),n=0;n<o.length;n++)(r=a.getNodeByKey(o[n]))?(void 0===r.selected||u.overrideSource&&!1===r.selected)&&(r.selected=!0,r.renderStatus()):c._appendKey("selected",o[n],!1);3===a.options.selectMode&&a.visit(function(e){if(e.selected)return e.fixSelection3AfterClick(),"skip"})}c.storeActive&&(!(i=c._data(c.cookiePrefix+"active"))||!l.persist.overrideSource&&a.activeNode||(r=a.getNodeByKey(i))&&(r.debug("persist: set active",i),r.setActive(!0,{noFocus:!0,noEvents:h}))),c.storeFocus&&d&&(r=a.getNodeByKey(d))&&(a.options.titlesTabbable?e(r.span).find(".fancytree-title").focus():e(a.$container).focus()),a._triggerTreeEvent("restore",null,{})})}}),this._superApply(arguments)},nodeSetActive:function(e,t,i){var n,o=this._local;return t=!1!==t,n=this._superApply(arguments),o.storeActive&&o._data(o.cookiePrefix+"active",this.activeNode?this.activeNode.key:null),n},nodeSetExpanded:function(e,t,i){var n,o=e.node,r=this._local;return t=!1!==t,n=this._superApply(arguments),r.storeExpanded&&r._appendKey(s,o.key,t),n},nodeSetFocus:function(e,t){var i,n=this._local;return t=!1!==t,i=this._superApply(arguments),n.storeFocus&&n._data(n.cookiePrefix+"focus",this.focusNode?this.focusNode.key:null),i},nodeSetSelected:function(t,i,n){var o,s,r=t.tree,a=t.node,l=this._local;return i=!1!==i,o=this._superApply(arguments),l.storeSelected&&(3===r.options.selectMode?(s=(s=e.map(r.getSelectedNodes(!0),function(e){return e.key})).join(t.options.persist.cookieDelimiter),l._data(l.cookiePrefix+"selected",s)):l._appendKey("selected",a.key,a.selected)),o}}),e.ui.fancytree},o=[i(1),i(8)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o,s,r;r=function(e){"use strict";var t=!1;function i(e){return 0===e?"":e>0?"+"+e:""+e}function n(i){var n=i.options.dnd||null,o=i.options.glyph||null;n&&(t||(e.ui.plugin.add("draggable","connectToFancytree",{start:function(t,i){var n=e(this).data("ui-draggable")||e(this).data("draggable"),o=i.helper.data("ftSourceNode")||null;if(o)return n.offset.click.top=-2,n.offset.click.left=16,o.tree.ext.dnd._onDragEvent("start",o,null,t,i,n)},drag:function(t,i){var n,o=e(this).data("ui-draggable")||e(this).data("draggable"),s=i.helper.data("ftSourceNode")||null,r=i.helper.data("ftTargetNode")||null,a=e.ui.fancytree.getNode(t.target),l=s&&s.tree.options.dnd;t.target&&!a&&e(t.target).closest("div.fancytree-drag-helper,#fancytree-drop-marker").length>0?(s||r||e.ui.fancytree).debug("Drag event over helper: ignored."):(i.helper.data("ftTargetNode",a),l&&l.updateHelper&&(n=s.tree._makeHookContext(s,t,{otherNode:a,ui:i,draggable:o,dropMarker:e("#fancytree-drop-marker")}),l.updateHelper.call(s.tree,s,n)),r&&r!==a&&r.tree.ext.dnd._onDragEvent("leave",r,s,t,i,o),a&&a.tree.options.dnd.dragDrop&&(a===r?a.tree.ext.dnd._onDragEvent("over",a,s,t,i,o):(a.tree.ext.dnd._onDragEvent("enter",a,s,t,i,o),a.tree.ext.dnd._onDragEvent("over",a,s,t,i,o))))},stop:function(t,i){var n=e(this).data("ui-draggable")||e(this).data("draggable"),o=i.helper.data("ftSourceNode")||null,s=i.helper.data("ftTargetNode")||null,r="mouseup"===t.type&&1===t.which;r||(o||s||e.ui.fancytree).debug("Drag was cancelled"),s&&(r&&s.tree.ext.dnd._onDragEvent("drop",s,o,t,i,n),s.tree.ext.dnd._onDragEvent("leave",s,o,t,i,n)),o&&o.tree.ext.dnd._onDragEvent("stop",o,null,t,i,n)}}),t=!0)),n&&n.dragStart&&i.widget.element.draggable(e.extend({addClasses:!1,appendTo:i.$container,containment:!1,delay:0,distance:4,revert:!1,scroll:!0,scrollSpeed:7,scrollSensitivity:10,connectToFancytree:!0,helper:function(t){var i,n,s,r=e.ui.fancytree.getNode(t.target);return r?(s=r.tree.options.dnd,n=e(r.span),(i=e("<div class='fancytree-drag-helper'><span class='fancytree-drag-helper-img' /></div>").css({zIndex:3,position:"relative"}).append(n.find("span.fancytree-title").clone())).data("ftSourceNode",r),o&&i.find(".fancytree-drag-helper-img").addClass(o.map._addClass+" "+o.map.dragHelper),s.initHelper&&s.initHelper.call(r.tree,r,{node:r,tree:r.tree,originalEvent:t,ui:{helper:i}}),i):"<div>ERROR?: helper requested but sourceNode not found</div>"},start:function(e,t){return!!t.helper.data("ftSourceNode")}},i.options.dnd.draggable)),n&&n.dragDrop&&i.widget.element.droppable(e.extend({addClasses:!1,tolerance:"intersect",greedy:!1},i.options.dnd.droppable))}return e.ui.fancytree.registerExtension({name:"dnd",version:"2.32.0",options:{autoExpandMS:1e3,draggable:null,droppable:null,focusOnClick:!1,preventVoidMoves:!0,preventRecursiveMoves:!0,smartRevert:!0,dropMarkerOffsetX:-24,dropMarkerInsertOffsetX:-16,dragStart:null,dragStop:null,initHelper:null,updateHelper:null,dragEnter:null,dragOver:null,dragExpand:null,dragDrop:null,dragLeave:null},treeInit:function(t){var i=t.tree;this._superApply(arguments),i.options.dnd.dragStart&&i.$container.on("mousedown",function(i){if(t.options.dnd.focusOnClick){var n=e.ui.fancytree.getNode(i);n&&n.debug("Re-enable focus that was prevented by jQuery UI draggable."),setTimeout(function(){e(i.target).closest(":tabbable").focus()},10)}}),n(i)},_setDndStatus:function(t,n,o,s,r){var a,l,c="center",u=this._local,d=this.options.dnd,h=this.options.glyph,p=t?e(t.span):null,f=e(n.span),m=f.find("span.fancytree-title");if(u.$dropMarker||(u.$dropMarker=e("<div id='fancytree-drop-marker'></div>").hide().css({"z-index":1e3}).prependTo(e(this.$div).parent()),h&&u.$dropMarker.addClass(h.map._addClass+" "+h.map.dropMarker)),"after"===s||"before"===s||"over"===s){switch(a=d.dropMarkerOffsetX||0,s){case"before":c="top",a+=d.dropMarkerInsertOffsetX||0;break;case"after":c="bottom",a+=d.dropMarkerInsertOffsetX||0}l={my:"left"+i(a)+" center",at:"left "+c,of:m},this.options.rtl&&(l.my="right"+i(-a)+" center",l.at="right "+c),u.$dropMarker.toggleClass("fancytree-drop-after","after"===s).toggleClass("fancytree-drop-over","over"===s).toggleClass("fancytree-drop-before","before"===s).toggleClass("fancytree-rtl",!!this.options.rtl).show().position(e.ui.fancytree.fixPositionOptions(l))}else u.$dropMarker.hide();p&&p.toggleClass("fancytree-drop-accept",!0===r).toggleClass("fancytree-drop-reject",!1===r),f.toggleClass("fancytree-drop-target","after"===s||"before"===s||"over"===s).toggleClass("fancytree-drop-after","after"===s).toggleClass("fancytree-drop-before","before"===s).toggleClass("fancytree-drop-accept",!0===r).toggleClass("fancytree-drop-reject",!1===r),o.toggleClass("fancytree-drop-accept",!0===r).toggleClass("fancytree-drop-reject",!1===r)},_onDragEvent:function(t,i,n,o,s,r){var a,l,c,u,d,h,p,f,m,g=this.options.dnd,v=this._makeHookContext(i,o,{otherNode:n,ui:s,draggable:r}),y=null,b=this,C=e(i.span);switch(g.smartRevert&&(r.options.revert="invalid"),t){case"start":i.isStatusNode()?y=!1:g.dragStart&&(y=g.dragStart(i,v)),!1===y?(this.debug("tree.dragStart() cancelled"),s.helper.trigger("mouseup").hide()):(g.smartRevert&&(u=i[v.tree.nodeContainerAttrName].getBoundingClientRect(),c=e(r.options.appendTo)[0].getBoundingClientRect(),r.originalPosition.left=Math.max(0,u.left-c.left),r.originalPosition.top=Math.max(0,u.top-c.top)),C.addClass("fancytree-drag-source"),e(document).on("keydown.fancytree-dnd,mousedown.fancytree-dnd",function(t){"keydown"===t.type&&t.which===e.ui.keyCode.ESCAPE?b.ext.dnd._cancelDrag():"mousedown"===t.type&&b.ext.dnd._cancelDrag()}));break;case"enter":y=!!(m=(!g.preventRecursiveMoves||!i.isDescendantOf(n))&&(g.dragEnter?g.dragEnter(i,v):null))&&(e.isArray(m)?{over:e.inArray("over",m)>=0,before:e.inArray("before",m)>=0,after:e.inArray("after",m)>=0}:{over:!0===m||"over"===m,before:!0===m||"before"===m,after:!0===m||"after"===m}),s.helper.data("enterResponse",y);break;case"over":f=null,!1===(p=s.helper.data("enterResponse"))||("string"==typeof p?f=p:(l=C.offset(),h={x:(d={x:o.pageX-l.left,y:o.pageY-l.top}).x/C.width(),y:d.y/C.height()},p.after&&h.y>.75?f="after":!p.over&&p.after&&h.y>.5?f="after":p.before&&h.y<=.25?f="before":!p.over&&p.before&&h.y<=.5?f="before":p.over&&(f="over"),g.preventVoidMoves&&(i===n?(this.debug("    drop over source node prevented"),f=null):"before"===f&&n&&i===n.getNextSibling()?(this.debug("    drop after source node prevented"),f=null):"after"===f&&n&&i===n.getPrevSibling()?(this.debug("    drop before source node prevented"),f=null):"over"===f&&n&&n.parent===i&&n.isLastSibling()&&(this.debug("    drop last child over own parent prevented"),f=null)),s.helper.data("hitMode",f))),"before"===f||"after"===f||!g.autoExpandMS||!1===i.hasChildren()||i.expanded||g.dragExpand&&!1===g.dragExpand(i,v)||i.scheduleAction("expand",g.autoExpandMS),f&&g.dragOver&&(v.hitMode=f,y=g.dragOver(i,v)),a=!1!==y&&null!==f,g.smartRevert&&(r.options.revert=!a),this._local._setDndStatus(n,i,s.helper,f,a);break;case"drop":(f=s.helper.data("hitMode"))&&g.dragDrop&&(v.hitMode=f,g.dragDrop(i,v));break;case"leave":i.scheduleAction("cancel"),s.helper.data("enterResponse",null),s.helper.data("hitMode",null),this._local._setDndStatus(n,i,s.helper,"out",void 0),g.dragLeave&&g.dragLeave(i,v);break;case"stop":C.removeClass("fancytree-drag-source"),e(document).off(".fancytree-dnd"),g.dragStop&&g.dragStop(i,v);break;default:e.error("Unsupported drag event: "+t)}return y},_cancelDrag:function(){var t=e.ui.ddmanager.current;t&&t.cancel()}}),e.ui.fancytree},o=[i(1),i(7),i(32),i(8)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){(function(e){!function(e,t){"use strict";function i(e,i){var n=this;return(i=i||{}).sitemapIndex=Math.max(0,parseInt(i.sitemapIndex,10)||0),(i=t.extend({isSitemapOverlay:!1,displayNodePagination:!1,cParentID:0,siteTreeID:0,cookieId:"ConcreteSitemap"+(i.sitemapIndex>0?"-"+i.sitemapIndex:""),includeSystemPages:!1,displaySingleLevel:!1,persist:!0,minExpandLevel:!1,dataSource:CCM_DISPATCHER_FILENAME+"/ccm/system/page/sitemap_data",ajaxData:{},selectMode:!1,onClickNode:!1,onSelectNode:!1,init:!1},i)).sitemapIndex>0&&(i.ajaxData.sitemapIndex=i.sitemapIndex),n.options=i,n.$element=e,n.$sitemap=null,n.homeCID=null,n.setupTree(),n.setupTreeEvents(),Concrete.event.publish("ConcreteSitemap",this),n.$element}i.prototype={sitemapTemplate:'<div class="ccm-sitemap-wrapper"><div class="ccm-sitemap-tree-selector-wrapper"></div><div class="ccm-sitemap-tree"></div></div>',localesWrapperTemplate:'<select data-select="site-trees"></select>',getTree:function(){return this.$sitemap.fancytree("getTree")},setupSiteTreeSelector:function(e){var i=this;if(!e)return!1;if(e.displayMenu&&i.options.siteTreeID<1&&!i.$element.find("div.ccm-sitemap-tree-selector-wrapper select").length){i.$element.find("div.ccm-sitemap-tree-selector-wrapper").append(t(i.localesWrapperTemplate));var n=i.$element.find("div.ccm-sitemap-tree-selector-wrapper select"),o=[];t.each(e.entries,function(e,t){t.isSelected&&o.push(t.siteTreeID)}),n.selectize({maxItems:1,valueField:"siteTreeID",searchField:"title",options:e.entries,items:o,optgroups:e.entryGroups,optgroupField:"class",onItemAdd:function(e){var t=e,n=i.getTree().options.source;i.options.siteTreeID=t,n.data.siteTreeID=t,i.getTree().reload(n)},render:{option:function(e,t){return'<div class="option">'+e.element+"</div>"},item:function(e,t){return'<div class="item">'+e.element+"</div>"}}})}},setupTree:function(){var e,i=this,n=!0,o=1,s=!1,r=!1,a=!1;"single"==i.options.selectMode?(s=!0,r={checkbox:"fancytree-radio"}):"multiple"==i.options.selectMode?(o=2,s=!0):"hierarchical-multiple"==i.options.selectMode&&(o=3,s=!0),s&&(n=!1),!1!==i.options.minExpandLevel?e=i.options.minExpandLevel:i.options.displaySingleLevel?(e=i.options.cParentID?3:2,n=!1):e=i.options.selectMode?2:1,i.options.persist||(n=!1);var l=t.extend({isSitemapOverlay:i.options.isSitemapOverlay?1:0,displayNodePagination:i.options.displayNodePagination?1:0,cParentID:i.options.cParentID,siteTreeID:i.options.siteTreeID,displaySingleLevel:i.options.displaySingleLevel?1:0,includeSystemPages:i.options.includeSystemPages?1:0},i.options.ajaxData),c=["glyph","dnd"];n&&c.push("persist");var u=_.template(i.sitemapTemplate);i.$element.append(u),i.$sitemap=i.$element.find("div.ccm-sitemap-tree"),i.$sitemap.fancytree({tabindex:null,titlesTabbable:!1,extensions:c,glyph:{preset:"awesome5"},persist:{cookieDelimiter:"~",cookiePrefix:i.options.cookieId,cookie:{path:CCM_REL+"/"}},autoFocus:!1,classNames:r,source:{url:i.options.dataSource,data:l},init:function(){i.options.init&&i.options.init.call(),i.options.displayNodePagination&&i.setupNodePagination(i.$sitemap,i.options.cParentID);var e=i.getTree().data;i.homeCID="homeCID"in e?e.homeCID:null,i.setupSiteTreeSelector(e.trees)},selectMode:o,checkbox:s,minExpandLevel:e,clickFolderMode:2,lazyLoad:function(e,t){if(i.options.displaySingleLevel)return!1;t.result=i.getLoadNodePromise(t.node)},click:function(e,n){var o=n.node;if("title"==n.targetType&&o.data.cID){if(i.options.selectMode)return!1;if(i.options.onClickNode)return i.options.onClickNode.call(i,o);new ConcretePageMenu(t(o.li),{menuOptions:i.options,data:o.data,sitemap:i,onHide:function(e){e.$launcher.each(function(){t(this).unbind("mousemove.concreteMenu")})}}).show(e)}else if(o.data.href)window.location.href=o.data.href;else if(i.options.displaySingleLevel)return i.displaySingleLevel(o),!1},select:function(e,t,n){i.options.onSelectNode&&i.options.onSelectNode.call(i,t.node,t.node.isSelected())},dnd:{focusOnClick:!0,preventRecursiveMoves:!1,preventVoidMoves:!1,dragStart:function(e,t){return!i.options.selectMode&&(!!e.data.cID&&(a=!0,i.$sitemap.addClass("ccm-sitemap-dnd"),!0))},dragEnter:function(e,t){if(!t.otherNode)return!1;var i=parseInt(e.data.cID),n=parseInt(t.otherNode.data.cID),o=!e.parent||!e.parent.data.cID;return!(!i||!n)&&(e.data.cAlias?["before","after"]:i===n?"over":!o||"over")},dragDrop:function(e,t){e.parent.data.cID==t.otherNode.parent.data.cID&&"over"!=t.hitMode?(t.otherNode.moveTo(e,t.hitMode),i.rescanDisplayOrder(t.otherNode.parent)):i.selectMoveCopyTarget(t.otherNode,e,t.hitMode)},dragStop:function(){i.$sitemap.removeClass("ccm-sitemap-dnd"),setTimeout(function(){a=!1},0)}}}),ConcreteEvent.subscribe("ConcreteMenuShow",function(e,t){a&&t.menu.hide()})},setupTreeEvents:function(){var e=this;if(e.options.selectMode||e.options.onClickNode)return!1;ConcreteEvent.unsubscribe("SitemapDeleteRequestComplete.sitemap"),ConcreteEvent.subscribe("SitemapDeleteRequestComplete.sitemap",function(i){var n=e.$sitemap.fancytree("getActiveNode").parent;e.reloadNode(n),t(e.$sitemap).fancytree("getTree").visit(function(t){if(t.data.isTrash){var i=t.expanded;return e.getLoadNodePromise(t).done(function(e){t.removeChildren(),t.addChildren(e),i&&t.setExpanded(!0,{noAnimation:!0})}),!1}})}),ConcreteEvent.unsubscribe("SitemapAddPageRequestComplete.sitemap"),ConcreteEvent.subscribe("SitemapAddPageRequestComplete.sitemap",function(t,i){var n=e.getTree().getNodeByKey(String(i.cParentID));n&&e.reloadNode(n),jQuery.fn.dialog.closeAll()}),ConcreteEvent.subscribe("SitemapUpdatePageRequestComplete.sitemap",function(t,i){try{var n=e.getTree().getNodeByKey(String(i.cID)).parent;n&&e.reloadNode(n)}catch(e){}}),ConcreteEvent.unsubscribe("PageVersionChanged.deleted"),ConcreteEvent.unsubscribe("PageVersionChanged.duplicated"),Concrete.event.subscribe(["PageVersionChanged.deleted","PageVersionChanged.duplicated"],function(t,i){e.reloadSelfNodeByCID(i.cID)})},rescanDisplayOrder:function(e){var i,n=e.getChildren(),o=[];for(e.setStatus("loading"),i=0;i<n.length;i++){var s=n[i];o.push({name:"cID[]",value:s.data.cID})}t.concreteAjax({dataType:"json",type:"POST",data:o,url:CCM_TOOLS_PATH+"/dashboard/sitemap_update",success:function(t){e.setStatus("ok"),ConcreteAlert.notify({message:t.message})}})},selectMoveCopyTarget:function(e,i,n){var o=this,s=ccmi18n_sitemap.moveCopyPage;n||(n="");var r=CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/page/drag_request?origCID="+e.data.cID+"&destCID="+i.data.cID+"&dragMode="+n;t.fn.dialog.open({title:s,href:r,width:520,modal:!1,height:"auto"}),ConcreteEvent.unsubscribe("SitemapDragRequestComplete.sitemap"),ConcreteEvent.subscribe("SitemapDragRequestComplete.sitemap",function(t,s){switch(s.task){case"COPY_VERSION":o.reloadSelfNode(i);break;default:var r=i.parent;"over"==n&&(r=i),"MOVE"==s.task&&e.remove(),r.removeChildren(),o.reloadNode(r,function(){i.bExpanded||i.setExpanded(!0,{noAnimation:!0})})}})},setupNodePagination:function(e){e.find(".ccm-pagination-bound").remove();var i=e.find("div.ccm-pagination-wrapper"),n=this;i.length&&(i.find("a:not([disabled])").unbind("click").on("click",function(){var e=t(this).attr("href"),i=n.$sitemap.fancytree("getRootNode");return jQuery.fn.dialog.showLoader(),t.ajax({dataType:"json",url:e,success:function(e){jQuery.fn.dialog.hideLoader(),i.removeChildren(),i.addChildren(e),n.setupNodePagination(n.$sitemap)}}),!1}),i.addClass("ccm-pagination-bound").appendTo(e))},displaySingleLevel:function(e){var i=this,n=i.options;(i.options.onDisplaySingleLevel||t.noop).call(this,e);var o=i.$sitemap.fancytree("getRootNode"),s=t.extend({dataType:"json",isSitemapOverlay:n.isSitemapOverlay?1:0,displayNodePagination:n.displayNodePagination?1:0,siteTreeID:n.siteTreeID,cParentID:e.data.cID,displaySingleLevel:!0,includeSystemPages:n.includeSystemPages?1:0},n.ajaxData);return jQuery.fn.dialog.showLoader(),t.ajax({dataType:"json",url:n.dataSource,data:s,success:function(t){jQuery.fn.dialog.hideLoader(),o.removeChildren(),o.addChildren(t),i.setupNodePagination(i.$sitemap,e.data.key)}})},getLoadNodePromise:function(e){var i=this.options,n=t.extend({cParentID:e.data.cID?e.data.cID:0,siteTreeID:i.siteTreeID,reloadNode:1,includeSystemPages:i.includeSystemPages?1:0,isSitemapOverlay:i.isSitemapOverlay?1:0,displayNodePagination:i.displayNodePagination?1:0},i.ajaxData),o={dataType:"json",url:i.dataSource,data:n};return t.ajax(o)},reloadNode:function(e,t){this.getLoadNodePromise(e).done(function(i){e.removeChildren(),e.addChildren(i),e.setExpanded(!0,{noAnimation:!0}),t&&t()})},getLoadSelfNodePromise:function(e){return t.ajax({dataType:"json",url:this.options.dataSource,data:t.extend({cID:e.data.cID,reloadNode:1,reloadSelfNode:1},this.options.ajaxData)})},reloadSelfNode:function(e,t){this.getLoadSelfNodePromise(e).done(function(i){var n=i[0];e.setTitle(n.title),t&&t()})},reloadSelfNodeByCID:function(e,t){var i=e?this.getTree().getNodeByKey(String(e)):null;i&&this.reloadSelfNode(i,t)}},i.exitEditMode=function(e){t.get(CCM_TOOLS_PATH+"/dashboard/sitemap_check_in?cID="+e+"&ccm_token="+CCM_SECURITY_TOKEN)},i.submitDragRequest=function(e){var i={ccm_token:e.find('input[name="validationToken"]').val(),dragMode:e.find('input[name="dragMode"]').val(),destCID:e.find('input[name="destCID"]').val(),destSibling:e.find('input[name="destSibling"]').val()||"",origCID:e.find('input[name="origCID"]').val(),ctask:t("input[name=ctask]:checked").val()};switch(i.ctask){case"MOVE":i.saveOldPagePath=e.find('input[name="saveOldPagePath"]').is(":checked")?1:0;break;case"a-copy-operation":i.ctask=t('input[name="dtask"]:checked').val()}var n=[];t.each(i,function(e,t){n.push({name:e,value:t})}),"COPY_ALL"===i.ctask?new ConcreteProgressiveOperation({url:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/page/drag_request/copy_all",data:n,title:ccmi18n_sitemap.copyProgressTitle,onComplete:function(){t(".ui-dialog-content").dialog("close"),ConcreteEvent.publish("SitemapDragRequestComplete",{task:i.ctask})}}):(jQuery.fn.dialog.showLoader(),t.getJSON(CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/page/drag_request/submit",i,function(e){e=JSON.parse(e),jQuery.fn.dialog.closeAll(),jQuery.fn.dialog.hideLoader(),ConcreteAlert.notify({message:e.message}),ConcreteEvent.publish("SitemapDragRequestComplete",{task:i.ctask}),jQuery.fn.dialog.closeTop(),jQuery.fn.dialog.closeTop()}).error(function(e,t,i){jQuery.fn.dialog.hideLoader();var n=i,o=e?e.responseJSON:null;o&&o.error&&(n=o.errors instanceof Array?o.errors.join("\n"):o.error),window.alert(n)}))},t.fn.concreteSitemap=function(e){return t.each(t(this),function(n,o){new i(t(this),e)})},e.ConcreteSitemap=i}(e,jQuery)}).call(t,i(2))},function(e,t,i){(function(e){!function(e,t){"use strict";function i(e,i){var n=this;i=i||{},i=t.extend({handle:"this",menu:!1,highlightClassName:"ccm-menu-highlight",highlightOffset:0,menuContainerClass:!1,menuActiveClass:"ccm-menu-item-active",menuActiveParentClass:"ccm-parent-menu-item-active",menuLauncherHoverClass:"ccm-menu-item-hover",menuLauncherHoverParentClass:"ccm-parent-menu-item-hover",enabled:!0,enableClickProxy:!0,onHide:!1},i),n.$element=e,n.options=i,"none"==i.handle?n.$launcher=!1:(n.$launcher="this"==i.handle?n.$element:t(i.handle),n.options.enableClickProxy&&n.$launcher.each(function(){t(this).on("mousemove.concreteMenu",function(e){n.hoverProxy(e,t(this))})})),n.$menu=t(i.menu),n.setup(),Concrete.event.bind("EditModeBlockDragInitialization",function(){n.hide()})}i.prototype={setup:function(){var e=this,i=e.options,o=n;i.enableClickProxy?(o.$clickProxy||(o.$clickProxy=t("<div />",{id:"ccm-menu-click-proxy"}),o.$clickProxy.on("mouseout.concreteMenuProxy",function(e){o.hoverMenu.mouseout(e)}),o.$clickProxy.on("mouseover.concreteMenuProxy",function(e){o.hoverMenu.mouseover(e)}),o.$clickProxy.on("click.concreteMenuProxy",function(e){o.hoverMenu.show(e)}),t(document.body).append(o.$clickProxy)),o.$highlighter||(o.$highlighter=t("<div />",{id:"ccm-menu-highlighter"}),t(document.body).append(o.$highlighter))):e.$launcher&&(e.$launcher.on("mouseover.concreteMenu",function(t){e.mouseover(t)}),e.$launcher.on("mouseout.concreteMenu",function(t){e.mouseout(t)}),e.$launcher.on("click.concreteMenu",function(t){e.show(t)})),o.$container||(o.$container=t("<div />",{id:"ccm-popover-menu-container",class:"ccm-ui"}),t(document.body).append(o.$container))},destroy:function(){this.hide(),this.$launcher.each(function(){t(this).unbind("mousemove.concreteMenu")})},positionAt:function(e,t){if(!t)return!1;var i=t.offset(),n={top:i.top-this.options.highlightOffset,left:i.left-this.options.highlightOffset,width:t.outerWidth()+2*this.options.highlightOffset,height:t.outerHeight()+2*this.options.highlightOffset,"border-top-left-radius":t.css("border-top-left-radius"),"border-top-right-radius":t.css("border-top-right-radius"),"border-bottom-left-radius":t.css("border-bottom-left-radius"),"border-bottom-right-radius":t.css("border-bottom-right-radius")};e.css(n)},hoverProxy:function(e,t){e.stopPropagation();var i=n,o=this.options.menuLauncherHoverClass,s=i.$clickProxy;if(!i.enabled||i.activeMenu)return!1;this.positionAt(s,t),s.removeClass().addClass(o),n.hoverMenu=this},mouseover:function(e){var t=this.$launcher,i=this.options;t.addClass(i.menuLauncherHoverClass),t.parents("*").slice(0,3).addClass(i.menuLauncherHoverParentClass)},mouseout:function(e){var t=this.$launcher,i=this.options;t.removeClass(i.menuLauncherHoverClass),t.parents("*").slice(0,3).removeClass(i.menuLauncherHoverParentClass)},setupMenuOptions:function(e){e.find(".dialog-launch").dialog()},show:function(e){var i=this,o="touch"===e.type.substr(0,5).toLowerCase()?e.originalEvent.touches[0]:null,s=n,r=i.options,a=i.$launcher,l=i.$element,c=s.$container,u=s.$highlighter,d=i.$menu.clone(!0,!0),h=(o?o.pageX:e.pageX)+2,p=(o?o.pageY:e.pageY)+2,f=o?o.clientX:e.clientX,m=o?o.clientY:e.clientY;if(s.getActiveMenu()==i)return!1;d.on("contextmenu",function(){return!1}),e.stopPropagation(),r.enableClickProxy&&(u.removeClass(),i.positionAt(u,a),_.defer(function(){u.addClass(r.highlightClassName)})),l.addClass(r.menuActiveClass),l.parents("*").slice(0,3).addClass(r.menuActiveParentClass),i.setupMenuOptions(d),c.html(""),d.appendTo(c),r.menuContainerClass&&c.addClass(r.menuContainerClass),d.css("opacity",0).show();var g=d.width(),v=d.height(),y=t(window).height(),b=t(window).width(),C=g/2-5,D=v/2-5,w=["bottom","top","right","left"],x=w.slice(0);f<g+30&&(w=_(w).without("left")),b<f+g+30&&(w=_(w).without("right")),y<m+v+30&&(w=_(w).without("bottom")),m<v+30&&(w=_(w).without("top")),(b<f+C||f<C)&&(w=_(w).without("top","bottom")),(y<m+D||m<D)&&(w=_(w).without("left","right"));var k=w.shift();switch(d.removeClass(x).addClass(k),h-=2,p-=2,k){case"left":h-=g,p-=v/2;break;case"right":p-=v/2;break;case"top":p-=v,h-=g/2;break;case"bottom":h-=g/2}d.css({top:p,left:h}),_.defer(function(){d.css("opacity",1)}),d.find("a").click(function(e){i.hide(e)}),t(document).unbind(".concreteMenuDisable").on("click.concreteMenuDisable",function(e){i.hide(e)}),ConcreteEvent.subscribe("PanelClose",function(e){i.hide(e)}),i.$menuPointer=d,n.activeMenu=i,ConcreteEvent.publish("ConcreteMenuShow",{menu:i,menuElement:d})},hide:function(e){var t=this,i=n,o={class:"",width:0,height:0,top:0,left:0};e&&e.stopPropagation(),t.$menuPointer&&(t.$menuPointer.css("opacity",0),_.defer(function(){t.$menuPointer.hide()})),_.defer(function(){t.$element.removeClass(t.options.menuActiveClass),t.$element.parents("*").slice(0,3).removeClass(t.options.menuActiveParentClass),t.options.enableClickProxy&&(i.$highlighter.removeClass(),i.$container.removeClass().addClass("ccm-ui").html(""))}),t.options.enableClickProxy&&(i.$clickProxy.css(o),i.$highlighter.css(o)),n.activeMenu=!1,t.options.onHide&&t.options.onHide(t)}};var n={enabled:!0,$clickProxy:!1,$highlighter:!1,$container:!1,hoverMenu:!1,activeMenu:!1,reset:function(){this.$clickProxy.css("width",0).css("height",0),this.$container.html("")},enable:function(){this.enabled=!0,this.reset()},disable:function(){this.enabled=!1,this.reset()},getActiveMenu:function(){return this.activeMenu}};t.fn.concreteMenu=function(e){return t.each(t(this),function(n,o){new i(t(this),e)})},e.ConcreteMenu=i,e.ConcreteMenuManager=n}(e,jQuery)}).call(t,i(2))},function(e,t,i){(function(e){function t(e,t){if(t=t||{},t=$.extend({sitemap:!1,data:{},menuOptions:{}},t),ConcreteMenu.call(this,e,t),0!=t.sitemap){var i=_.template(ConcretePageAjaxSearchMenu.get())({item:t.data});this.$menu=$(i)}}t.prototype=Object.create(ConcreteMenu.prototype),t.prototype.setupMenuOptions=function(e){var t=this,i=ConcreteMenu.prototype,n=e.attr("data-search-page-menu");i.setupMenuOptions(e),t.options.sitemap&&0!=t.options.sitemap.options.displaySingleLevel||e.find("[data-sitemap-mode=explore]").remove(),e.find("a[data-action=delete-forever]").on("click",function(){return new ConcreteProgressiveOperation({url:CCM_DISPATCHER_FILENAME+"/ccm/system/page/sitemap_delete_forever",data:[{name:"cID",value:n}],title:ccmi18n_sitemap.deletePages,onComplete:function(){t.options.sitemap&&t.options.sitemap.getTree().getNodeByKey(String(n)).remove();ConcreteAlert.notify({message:ccmi18n_sitemap.deletePageSuccessMsg})}}),!1}),e.find("a[data-action=empty-trash]").on("click",function(){return new ConcreteProgressiveOperation({url:CCM_DISPATCHER_FILENAME+"/ccm/system/page/sitemap_delete_forever",data:[{name:"cID",value:n}],title:ccmi18n_sitemap.deletePages,onComplete:function(){t.options.sitemap&&t.options.sitemap.getTree().getNodeByKey(String(n)).removeChildren()}}),!1})},$.fn.concretePageMenu=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcretePageMenu=t}).call(t,i(2))},function(e,t,i){(function(e){var t={width:350,height:270};function i(e,t){t=$.extend({mode:"menu",searchMethod:"get"},t),this.options=t,this._templateSearchResultsMenu=_.template(n.get()),ConcreteAjaxSearch.call(this,e,t),this.setupEvents()}i.prototype=Object.create(ConcreteAjaxSearch.prototype),i.prototype.setupEvents=function(){var e=this;ConcreteEvent.subscribe("SitemapDeleteRequestComplete",function(t){e.refreshResults()}),ConcreteEvent.fire("ConcreteSitemapPageSearch",e)},i.prototype.updateResults=function(e){var t=this,i=t.$element;ConcreteAjaxSearch.prototype.updateResults.call(t,e),"choose"==t.options.mode&&(i.find(".ccm-search-results-checkbox").parent().remove(),i.find("select[data-bulk-action]").parent().remove(),i.unbind(".concretePageSearchHoverPage"),i.on("mouseover.concretePageSearchHoverPage","tr[data-launch-search-menu]",function(){$(this).addClass("ccm-search-select-hover")}),i.on("mouseout.concretePageSearchHoverPage","tr[data-launch-search-menu]",function(){$(this).removeClass("ccm-search-select-hover")}),i.unbind(".concretePageSearchChoosePage").on("click.concretePageSearchChoosePage","tr[data-launch-search-menu]",function(){return ConcreteEvent.publish("SitemapSelectPage",{instance:t,cID:$(this).attr("data-page-id"),title:$(this).attr("data-page-name")}),!1}))},i.prototype.handleSelectedBulkAction=function(e,t,i,n){if("movecopy"==e||"Move/Copy"==e){var o,s=[];$.each(n,function(e,t){s.push($(t).val())}),ConcreteEvent.unsubscribe("SitemapSelectPage.search");ConcreteEvent.subscribe("SitemapSelectPage.search",function e(t,i){Concrete.event.unsubscribe(t),o=CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/page/drag_request?origCID="+s.join(",")+"&destCID="+i.cID,$.fn.dialog.open({width:520,height:"auto",href:o,title:ccmi18n_sitemap.moveCopyPage,onDirectClose:function(){ConcreteEvent.subscribe("SitemapSelectPage.search",e)}})})}ConcreteAjaxSearch.prototype.handleSelectedBulkAction.call(this,e,t,i,n)},ConcreteAjaxSearch.prototype.createMenu=function(e){e.concretePageMenu({container:this,menu:$("[data-search-menu="+e.attr("data-launch-search-menu")+"]")})},i.launchDialog=function(e){var t=$(window).width()-53;$.fn.dialog.open({width:t,height:"100%",href:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/page/sitemap_selector",modal:!0,title:ccmi18n_sitemap.pageLocationTitle,onClose:function(){ConcreteEvent.fire("PageSelectorClose")},onOpen:function(){ConcreteEvent.unsubscribe("SitemapSelectPage"),ConcreteEvent.subscribe("SitemapSelectPage",function(t,i){jQuery.fn.dialog.closeTop(),e(i)})}})},i.getPageDetails=function(e,t){$.ajax({type:"post",dataType:"json",url:CCM_DISPATCHER_FILENAME+"/ccm/system/page/get_json",data:{cID:e},error:function(e){ConcreteAlert.dialog(ccmi18n.error,e.responseText)},success:function(e){t(e)}})};var n={get:function(){return["",'<div class="popover fade" data-search-page-menu="<%=item.cID%>" data-search-menu="<%=item.cID%>">','<div class="arrow"></div>','<div class="popover-inner">','<ul class="dropdown-menu">',"<% if (item.isTrash) { %>",'<li><a data-action="empty-trash" href="javascript:void(0)">'+ccmi18n_sitemap.emptyTrash+"</a></li>","<% } else if (item.isInTrash) { %>",'<li><a data-action="delete-forever" href="javascript:void(0)">'+ccmi18n_sitemap.deletePageForever+"</a></li>","<% } else if (item.cAlias == 'LINK' || item.cAlias == 'POINTER') { %>",'<li><a href="<%- item.link %>">'+ccmi18n_sitemap.visitExternalLink+"</a></li>","<% if (item.cAlias == 'LINK' && item.canEditPageProperties) { %>",'<li><a class="dialog-launch" dialog-width="'+t.width+'" dialog-height="'+t.height+'" dialog-title="'+ccmi18n_sitemap.editExternalLink+'" dialog-modal="false" dialog-append-buttons="true" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/dialogs/page/edit_external?cID=<%=item.cID%>">'+ccmi18n_sitemap.editExternalLink+"</a></li>",'<li><a class="dialog-launch" dialog-on-close="ConcreteSitemap.exitEditMode(<%=item.cID%>)" dialog-width="90%" dialog-height="70%" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.pageAttributesTitle+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/dialogs/page/attributes?cID=<%=item.cID%>">'+ccmi18n_sitemap.pageAttributes+"</a></li>",'<li><a class="dialog-launch" dialog-on-close="ConcreteSitemap.exitEditMode(<%=item.cID%>)" dialog-width="500" dialog-height="630" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.setPagePermissions+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/panels/details/page/permissions?cID=<%=item.cID%>">'+ccmi18n_sitemap.setPagePermissions+"</a></li>","<% } %>","<% if (item.canDeletePage) { %>",'<li><a class="dialog-launch" dialog-width="360" dialog-height="150" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.deleteExternalLink+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/dialogs/page/delete_alias?cID=<%=item.cID%>">'+ccmi18n_sitemap.deleteExternalLink+"</a></li>","<% } %>","<% } else { %>",'<li><a href="<%- item.link %>">'+ccmi18n_sitemap.visitPage+"</a></li>","<% if (item.canEditPageProperties || item.canEditPageSpeedSettings || item.canEditPagePermissions || item.canEditPageDesign || item.canViewPageVersions || item.canDeletePage) { %>",'<li class="divider"></li>',"<% } %>","<% if (item.canEditPageProperties) { %>",'<li><a class="dialog-launch" dialog-on-close="ConcreteSitemap.exitEditMode(<%=item.cID%>)" dialog-width="640" dialog-height="360" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.seo+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/dialogs/page/seo?cID=<%=item.cID%>">'+ccmi18n_sitemap.seo+"</a></li>",'<li><a class="dialog-launch" dialog-on-close="ConcreteSitemap.exitEditMode(<%=item.cID%>)" dialog-width="500" dialog-height="500" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.pageLocationTitle+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/dialogs/page/location?cID=<%=item.cID%>">'+ccmi18n_sitemap.pageLocation+"</a></li>",'<li class="divider"></li>','<li><a class="dialog-launch" dialog-on-close="ConcreteSitemap.exitEditMode(<%=item.cID%>)" dialog-width="90%" dialog-height="70%" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.pageAttributesTitle+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/dialogs/page/attributes?cID=<%=item.cID%>">'+ccmi18n_sitemap.pageAttributes+"</a></li>","<% } %>","<% if (item.canEditPageSpeedSettings) { %>",'<li><a class="dialog-launch" dialog-on-close="ConcreteSitemap.exitEditMode(<%=item.cID%>)" dialog-width="550" dialog-height="280" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.speedSettingsTitle+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/panels/details/page/caching?cID=<%=item.cID%>">'+ccmi18n_sitemap.speedSettings+"</a></li>","<% } %>","<% if (item.canEditPagePermissions) { %>",'<li><a class="dialog-launch" dialog-on-close="ConcreteSitemap.exitEditMode(<%=item.cID%>)" dialog-width="500" dialog-height="630" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.setPagePermissions+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/panels/details/page/permissions?cID=<%=item.cID%>">'+ccmi18n_sitemap.setPagePermissions+"</a></li>","<% } %>","<% if (item.canEditPageDesign || item.canEditPageType) { %>",'<li><a class="dialog-launch" dialog-on-close="ConcreteSitemap.exitEditMode(<%=item.cID%>)" dialog-width="350" dialog-height="500" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.pageDesign+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/dialogs/page/design?cID=<%=item.cID%>">'+ccmi18n_sitemap.pageDesign+"</a></li>","<% } %>","<% if (item.canViewPageVersions) { %>",'<li><a class="dialog-launch" dialog-on-close="ConcreteSitemap.exitEditMode(<%=item.cID%>)" dialog-width="640" dialog-height="340" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.pageVersions+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/panels/page/versions?cID=<%=item.cID%>">'+ccmi18n_sitemap.pageVersions+"</a></li>","<% } %>","<% if (item.canDeletePage) { %>",'<li><a class="dialog-launch" dialog-on-close="ConcreteSitemap.exitEditMode(<%=item.cID%>)" dialog-width="360" dialog-height="250" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.deletePage+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/dialogs/page/delete_from_sitemap?cID=<%=item.cID%>">'+ccmi18n_sitemap.deletePage+"</a></li>","<% } %>",'<li class="divider" data-sitemap-mode="explore"></li>','<li data-sitemap-mode="explore"><a class="dialog-launch" dialog-width="90%" dialog-height="70%" dialog-modal="false" dialog-title="'+ccmi18n_sitemap.moveCopyPage+'" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/dialogs/page/sitemap_selector?sitemap_select_mode=move_copy_delete&cID=<%=item.cID%>">'+ccmi18n_sitemap.moveCopyPage+"</a></li>",'<li data-sitemap-mode="explore"><a href="'+CCM_DISPATCHER_FILENAME+'/dashboard/sitemap/explore?cNodeID=<%=item.cID%>&task=send_to_top">'+ccmi18n_sitemap.sendToTop+"</a></li>",'<li data-sitemap-mode="explore"><a href="'+CCM_DISPATCHER_FILENAME+'/dashboard/sitemap/explore?cNodeID=<%=item.cID%>&task=send_to_bottom">'+ccmi18n_sitemap.sendToBottom+"</a></li>","<% if (item.numSubpages > 0) { %>",'<li class="divider"></li>','<li><a href="'+CCM_DISPATCHER_FILENAME+'/dashboard/sitemap/search/?submitSearch=1&field[]=parent_page&cParentAll=1&cParentIDSearchField=<%=item.cID%>">'+ccmi18n_sitemap.searchPages+"</a></li>",'<li><a href="'+CCM_DISPATCHER_FILENAME+'/dashboard/sitemap/explore/-/<%=item.cID%>">'+ccmi18n_sitemap.explorePages+"</a></li>","<% } %>","<% if (item.canAddExternalLinks || item.canAddSubpages) { %>",'<li class="divider"></li>',"<% if (item.canAddSubpages > 0) { %>",'<li><a class="dialog-launch" dialog-width="350" dialog-modal="false" dialog-height="350" dialog-title="'+ccmi18n_sitemap.addPage+'" dialog-modal="false" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/dialogs/page/add?cID=<%=item.cID%>">'+ccmi18n_sitemap.addPage+"</a></li>","<% } %>","<% if (item.canAddExternalLinks > 0) { %>",'<li><a class="dialog-launch" dialog-width="'+t.width+'" dialog-modal="false" dialog-height="'+t.height+'" dialog-title="'+ccmi18n_sitemap.addExternalLink+'" dialog-modal="false" href="'+CCM_DISPATCHER_FILENAME+'/ccm/system/dialogs/page/add_external?cID=<%=item.cID%>">'+ccmi18n_sitemap.addExternalLink+"</a></li>","<% } %>","<% } %>","<% } %>","</ul>","</div>","</div>",""].join("")}};$.fn.concretePageAjaxSearch=function(e){return $.each($(this),function(t,n){new i($(this),e)})},e.ConcretePageAjaxSearch=i,e.ConcretePageAjaxSearchMenu=n}).call(t,i(2))},function(e,t,i){(function(e){function t(e,t){var i=this;t=$.extend({chooseText:ccmi18n_sitemap.choosePage,loadingText:ccmi18n_sitemap.loadingText,inputName:"cID",cID:0},t),i.$element=e,i.options=t,i._chooseTemplate=_.template(i.chooseTemplate)({options:i.options}),i._loadingTemplate=_.template(i.loadingTemplate),i._pageLoadedTemplate=_.template(i.pageLoadedTemplate),i._pageMenuTemplate=_.template(ConcretePageAjaxSearchMenu.get()),i.$element.append(i._chooseTemplate),i.$element.on("click","a[data-page-selector-link=choose]",function(e){e.preventDefault(),ConcretePageAjaxSearch.launchDialog(function(e){i.loadPage(e.cID)})}),i.options.cID&&i.loadPage(i.options.cID)}t.prototype={chooseTemplate:'<div class="ccm-item-selector"><input type="hidden" name="<%=options.inputName%>" value="0" /><a href="#" data-page-selector-link="choose"><%=options.chooseText%></a></div>',loadingTemplate:'<div class="ccm-item-selector"><div class="ccm-item-selector-choose"><input type="hidden" name="<%=options.inputName%>" value="<%=cID%>"><i class="fa fa-spin fa-spinner"></i> <%=options.loadingText%></div></div>',pageLoadedTemplate:'<div class="ccm-item-selector"><div class="ccm-item-selector-item-selected"><input type="hidden" name="<%=inputName%>" value="<%=page.cID%>" /><a data-page-selector-action="clear" href="#" class="ccm-item-selector-clear"><i class="fa fa-close"></i></a><div class="ccm-item-selector-item-selected-title launch-tooltip" title="<%- page.url %>"><%=page.name%></div></div></div>',loadPage:function(e){var t=this;t.$element.html(t._loadingTemplate({options:t.options,cID:e})),ConcretePageAjaxSearch.getPageDetails(e,function(e){var i=e.pages[0];t.$element.html(t._pageLoadedTemplate({inputName:t.options.inputName,page:i}));var n=t.$element.find(".launch-tooltip");if(n.length&&n.tooltip){var o={},s=$("#ccm-tooltip-holder");s.length&&(o.container=s),n.tooltip(o)}t.$element.on("click","a[data-page-selector-action=clear]",function(e){e.preventDefault(),t.$element.html(t._chooseTemplate)})})}},$.fn.concretePageSelector=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcretePageSelector=t}).call(t,i(2))},function(e,t,i){(function(e){function t(e,t){var i=this;t=$.extend({chooseText:ccmi18n.chooseUser,loadingText:ccmi18n.loadingText,inputName:"uID",uID:0},t),i.$element=e,i.options=t,i._chooseTemplate=_.template(i.chooseTemplate)({options:i.options}),i._loadingTemplate=_.template(i.loadingTemplate),i._userLoadedTemplate=_.template(i.userLoadedTemplate),i.$element.append(i._chooseTemplate),i.$element.on("click","a[data-user-selector-link=choose]",function(e){e.preventDefault(),$.fn.dialog.open({title:ccmi18n.chooseUser,href:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/user/search",width:"90%",modal:!0,height:"70%",onOpen:function(){ConcreteEvent.unsubscribe("UserSearchDialogSelectUser.core"),ConcreteEvent.subscribe("UserSearchDialogSelectUser.core",function(e,t){i.loadUser(t.uID)})}})}),i.options.uID&&i.loadUser(i.options.uID),ConcreteEvent.unsubscribe("UserSearchDialogAfterSelectUser.core"),ConcreteEvent.subscribe("UserSearchDialogAfterSelectUser.core",function(e){jQuery.fn.dialog.closeTop()})}t.prototype={chooseTemplate:'<div class="ccm-item-selector"><input type="hidden" name="<%=options.inputName%>" value="0" /><a href="#" data-user-selector-link="choose"><%=options.chooseText%></a></div>',loadingTemplate:'<div class="ccm-item-selector"><div class="ccm-item-selector-choose"><input type="hidden" name="<%=options.inputName%>" value="<%=uID%>"><i class="fa fa-spin fa-spinner"></i> <%=options.loadingText%></div></div>',userLoadedTemplate:'<div class="ccm-item-selector"><div class="ccm-item-selector-item-selected"><input type="hidden" name="<%=inputName%>" value="<%=user.uID%>" /><div class="ccm-item-selector-item-selected-thumbnail"><%=user.avatar%></div><a data-user-selector-action="clear" href="#" class="ccm-item-selector-clear"><i class="fa fa-close"></i></a><div class="ccm-item-selector-item-selected-title"><%=user.displayName%></div></div></div>',loadUser:function(e){var t=this;t.$element.html(t._loadingTemplate({options:t.options,uID:e})),$.ajax({type:"post",dataType:"json",url:CCM_DISPATCHER_FILENAME+"/ccm/system/user/get_json",data:{uID:e},error:function(e){ConcreteAlert.dialog(ccmi18n.error,ConcreteAjaxRequest.errorResponseToString(e))},success:function(e){var i=e.users[0];t.$element.html(t._userLoadedTemplate({inputName:t.options.inputName,user:i})),t.$element.on("click","a[data-user-selector-action=clear]",function(e){e.preventDefault(),t.$element.html(t._chooseTemplate)})}})}},$.fn.concreteUserSelector=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcreteUserSelector=t}).call(t,i(2))},function(e,t,i){(function(e){function t(e,t){var i=this;t=$.extend({chooseText:ccmi18n_express.chooseEntry,loadingText:ccmi18n.loadingText,inputName:"entryID",entityID:!1,entryID:0},t),i.$element=e,i.options=t,i._chooseTemplate=_.template(i.chooseTemplate)({options:i.options}),i._loadingTemplate=_.template(i.loadingTemplate),i._entryLoadedTemplate=_.template(i.entryLoadedTemplate),i.$element.append(i._chooseTemplate),i.$element.on("click","a[data-express-entry-selector-link=choose]",function(e){e.preventDefault(),ConcreteExpressEntryAjaxSearch.launchDialog(t.entityID,function(e){i.loadEntry(e.exEntryID)})}),i.options.exEntryID&&i.loadEntry(i.options.exEntryID)}t.prototype={chooseTemplate:'<div class="ccm-item-selector"><input type="hidden" name="<%=options.inputName%>" value="0" /><a href="#" data-express-entry-selector-link="choose"><%=options.chooseText%></a></div>',loadingTemplate:'<div class="ccm-item-selector"><div class="ccm-item-selector-choose"><input type="hidden" name="<%=options.inputName%>" value="<%=exEntryID%>"><i class="fa fa-spin fa-spinner"></i> <%=options.loadingText%></div></div>',entryLoadedTemplate:'<div class="ccm-item-selector"><div class="ccm-item-selector-item-selected"><input type="hidden" name="<%=inputName%>" value="<%=entry.exEntryID%>" /><a data-express-entry-selector-action="clear" href="#" class="ccm-item-selector-clear"><i class="fa fa-close"></i></a><div class="ccm-item-selector-item-selected-title"><%=entry.label%></div></div></div>',loadEntry:function(e){var t=this;t.$element.html(t._loadingTemplate({options:t.options,exEntryID:e})),ConcreteExpressEntryAjaxSearch.getEntryDetails(e,function(e){var i=e.entries[0];t.$element.html(t._entryLoadedTemplate({inputName:t.options.inputName,entry:i})),t.$element.on("click","a[data-express-entry-selector-action=clear]",function(e){e.preventDefault(),t.$element.html(t._chooseTemplate)})})}},$.fn.concreteExpressEntrySelector=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcreteExpressEntrySelector=t}).call(t,i(2))},function(e,t,i){(function(e){function t(e,t){t=$.extend({},t),ConcreteAjaxSearch.call(this,e,t)}t.prototype=Object.create(ConcreteAjaxSearch.prototype),t.launchDialog=function(e,t){var i=$(window).width()-53;$.fn.dialog.open({width:i,height:"100%",href:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/express/entry/search?exEntityID="+e,modal:!0,title:ccmi18n_express.entriesTitle,onClose:function(){ConcreteEvent.fire("ExpressEntrySelectorClose")},onOpen:function(){ConcreteEvent.unsubscribe("SelectExpressEntry"),ConcreteEvent.subscribe("SelectExpressEntry",function(e,i){$.fn.dialog.closeTop(),t(i)})}})},t.getEntryDetails=function(e,t){$.ajax({type:"post",dataType:"json",url:CCM_DISPATCHER_FILENAME+"/ccm/system/express/entry/get_json",data:{exEntryID:e},error:function(e){ConcreteAlert.dialog(ccmi18n.error,e.responseText)},success:function(e){t(e)}})},$.fn.concreteExpressPageAjaxSearch=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcreteExpressEntryAjaxSearch=t}).call(t,i(2))},function(e,t,i){"use strict";(function(e){var t=i(95),n=i.n(t),o=!1,s=null,r=[],a=[];function l(){null!==s&&(s.destroy(),s=null)}function c(t){l();var i={},o={previewsContainer:!1,maxFiles:null,previewTemplate:n.a.prototype.defaultOptions.previewTemplate,clickable:!1};Object.keys(o).forEach(function(e){i[e]=t.hasOwnProperty(e)?t[e]:o[e]});var c=!1===i.previewsContainer;$.extend(i,{method:"POST",url:e.CCM_DISPATCHER_FILENAME+"/ccm/system/file/upload",sending:function(e,t,i){c&&NProgress.start(),i.append("responseFormat","dropzone"),i.append("ccm_token",CCM_SECURITY_TOKEN);var n=r[r.length-1];n.originalPageID&&i.append("ocID",d(n.originalPageID)?n.originalPageID():n.originalPageID),n.replacingFileID&&i.append("fID",d(n.replacingFileID)?n.replacingFileID():n.replacingFileID),n.folderID&&i.append("currentFolder",d(n.folderID)?n.folderID():n.folderID),n.uploadStarted&&n.uploadStarted(e,t,i)},success:function(e,t){u(t)},chunksUploaded:function(e,t){e.xhr.response&&u(JSON.parse(e.xhr.response)),t()},error:function(e,t,i){this.defaultOptions.error.apply(this,arguments),1===this.options.maxFiles&&e&&(e instanceof Array||(e=[e]),e.forEach(function(e){e&&e.accepted&&(e.accepted=!1)})),r[r.length-1].uploadFailed?r[r.length-1].uploadFailed(t):ConcreteAlert.error({message:t,appendTo:document.body})},queuecomplete:function(){c&&NProgress.done(),r.length&&r[r.length-1].uploadQueueCompleted&&r[r.length-1].uploadQueueCompleted(),0!==a.length&&(ConcreteEvent.publish("FileManagerAddFilesComplete",{files:a}),a=[])}}),s=new n.a(window.document.body,i)}function u(e){e&&ConcreteAjaxRequest.validateResponse(e,function(t){var i=r[r.length-1];t?e.files&&e.files.length&&(i.uploadCompleted?i.uploadCompleted(e.files):(d(i.replacingFileID)?i.replacingFileID():i.replacingFileID)?ConcreteEvent.publish("FileManagerReplaceFileComplete",{files:e.files}):e.files.forEach(function(e){a.push(e)})):e.message&&(i.uploadFailed&&i.uploadFailed(e.message),ConcreteAlert.notify({title:e.title,message:e.message,appendTo:document.body}))})}function d(e){return!!(e&&e.constructor&&e.call&&e.apply)}$(document).ready(function(){o=!0,0!==r.length&&c(r[r.length-1])});var h={};Object.defineProperties(h,{start:{writable:!1,value:function(e){e=e||{},r.push(e),o&&c(e)}},stop:{writable:!1,value:function(t){var i=r.indexOf(t);if(i<0)e.console.error("Invalid options passed to concreteFileUploader.stop()");else{var n=i===r.length-1;r.splice(i,1),n&&(l(),o&&r.length>0&&c(r[r.length-1]))}}}}),Object.defineProperties(e,{concreteFileUploader:{writable:!1,value:h}})}).call(t,i(2))},function(e,t,i){"use strict";(function(e){var t=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(){n(this,e)}return t(e,[{key:"on",value:function(e,t){return this._callbacks=this._callbacks||{},this._callbacks[e]||(this._callbacks[e]=[]),this._callbacks[e].push(t),this}},{key:"emit",value:function(e){this._callbacks=this._callbacks||{};var t=this._callbacks[e];if(t){for(var i=arguments.length,n=Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];for(var s=0,r=r=t;;){if(s>=r.length)break;r[s++].apply(this,n)}}return this}},{key:"off",value:function(e,t){if(!this._callbacks||0===arguments.length)return this._callbacks={},this;var i=this._callbacks[e];if(!i)return this;if(1===arguments.length)return delete this._callbacks[e],this;for(var n=0;n<i.length;n++){if(i[n]===t){i.splice(n,1);break}}return this}}]),e}(),s=function(e){function s(e,t){n(this,s);var o,r=i(this,(s.__proto__||Object.getPrototypeOf(s)).call(this)),a=void 0;if(r.element=e,r.version=s.version,r.defaultOptions.previewTemplate=r.defaultOptions.previewTemplate.replace(/\n*/g,""),r.clickableElements=[],r.listeners=[],r.files=[],"string"==typeof r.element&&(r.element=document.querySelector(r.element)),!r.element||null==r.element.nodeType)throw new Error("Invalid dropzone element.");if(r.element.dropzone)throw new Error("Dropzone already attached.");s.instances.push(r),r.element.dropzone=r;var l,c=null!=(o=s.optionsForElement(r.element))?o:{};if(r.options=s.extend({},r.defaultOptions,c,null!=t?t:{}),r.options.forceFallback||!s.isBrowserSupported())return l=r.options.fallback.call(r),i(r,l);if(null==r.options.url&&(r.options.url=r.element.getAttribute("action")),!r.options.url)throw new Error("No URL provided.");if(r.options.acceptedFiles&&r.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");if(r.options.uploadMultiple&&r.options.chunking)throw new Error("You cannot set both: uploadMultiple and chunking.");return r.options.acceptedMimeTypes&&(r.options.acceptedFiles=r.options.acceptedMimeTypes,delete r.options.acceptedMimeTypes),null!=r.options.renameFilename&&(r.options.renameFile=function(e){return r.options.renameFilename.call(r,e.name,e)}),r.options.method=r.options.method.toUpperCase(),(a=r.getExistingFallback())&&a.parentNode&&a.parentNode.removeChild(a),!1!==r.options.previewsContainer&&(r.options.previewsContainer?r.previewsContainer=s.getElement(r.options.previewsContainer,"previewsContainer"):r.previewsContainer=r.element),r.options.clickable&&(!0===r.options.clickable?r.clickableElements=[r.element]:r.clickableElements=s.getElements(r.options.clickable,"clickable")),r.init(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(s,o),t(s,null,[{key:"initClass",value:function(){this.prototype.Emitter=o,this.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],this.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,timeout:3e4,parallelUploads:2,uploadMultiple:!1,chunking:!1,forceChunking:!1,chunkSize:2e6,parallelChunkUploads:!1,retryChunks:!1,retryChunksLimit:3,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,thumbnailMethod:"crop",resizeWidth:null,resizeHeight:null,resizeMimeType:null,resizeQuality:.8,resizeMethod:"contain",filesizeBase:1e3,maxFiles:null,headers:null,clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,renameFile:null,forceFallback:!1,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictUploadCanceled:"Upload canceled.",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",dictFileSizeUnits:{tb:"TB",gb:"GB",mb:"MB",kb:"KB",b:"b"},init:function(){},params:function(e,t,i){if(i)return{dzuuid:i.file.upload.uuid,dzchunkindex:i.index,dztotalfilesize:i.file.size,dzchunksize:this.options.chunkSize,dztotalchunkcount:i.file.upload.totalChunkCount,dzchunkbyteoffset:i.index*this.options.chunkSize}},accept:function(e,t){return t()},chunksUploaded:function(e,t){t()},fallback:function(){var e=void 0;this.element.className=this.element.className+" dz-browser-not-supported";for(var t=0,i=i=this.element.getElementsByTagName("div");;){if(t>=i.length)break;var n=i[t++];if(/(^| )dz-message($| )/.test(n.className)){e=n,n.className="dz-message";break}}e||(e=s.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(e));var o=e.getElementsByTagName("span")[0];return o&&(null!=o.textContent?o.textContent=this.options.dictFallbackMessage:null!=o.innerText&&(o.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(e,t,i,n){var o={srcX:0,srcY:0,srcWidth:e.width,srcHeight:e.height},s=e.width/e.height;null==t&&null==i?(t=o.srcWidth,i=o.srcHeight):null==t?t=i*s:null==i&&(i=t/s);var r=(t=Math.min(t,o.srcWidth))/(i=Math.min(i,o.srcHeight));if(o.srcWidth>t||o.srcHeight>i)if("crop"===n)s>r?(o.srcHeight=e.height,o.srcWidth=o.srcHeight*r):(o.srcWidth=e.width,o.srcHeight=o.srcWidth/r);else{if("contain"!==n)throw new Error("Unknown resizeMethod '"+n+"'");s>r?i=t/s:t=i*s}return o.srcX=(e.width-o.srcWidth)/2,o.srcY=(e.height-o.srcHeight)/2,o.trgWidth=t,o.trgHeight=i,o},transformFile:function(e,t){return(this.options.resizeWidth||this.options.resizeHeight)&&e.type.match(/image.*/)?this.resizeImage(e,this.options.resizeWidth,this.options.resizeHeight,this.options.resizeMethod,t):t(e)},previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>',drop:function(e){return this.element.classList.remove("dz-drag-hover")},dragstart:function(e){},dragend:function(e){return this.element.classList.remove("dz-drag-hover")},dragenter:function(e){return this.element.classList.add("dz-drag-hover")},dragover:function(e){return this.element.classList.add("dz-drag-hover")},dragleave:function(e){return this.element.classList.remove("dz-drag-hover")},paste:function(e){},reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(e){var t=this;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){e.previewElement=s.createElement(this.options.previewTemplate.trim()),e.previewTemplate=e.previewElement,this.previewsContainer.appendChild(e.previewElement);for(var i=0,n=n=e.previewElement.querySelectorAll("[data-dz-name]");;){if(i>=n.length)break;var o=n[i++];o.textContent=e.name}for(var r=0,a=a=e.previewElement.querySelectorAll("[data-dz-size]");!(r>=a.length);)(o=a[r++]).innerHTML=this.filesize(e.size);this.options.addRemoveLinks&&(e._removeLink=s.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),e.previewElement.appendChild(e._removeLink));for(var l=function(i){return i.preventDefault(),i.stopPropagation(),e.status===s.UPLOADING?s.confirm(t.options.dictCancelUploadConfirmation,function(){return t.removeFile(e)}):t.options.dictRemoveFileConfirmation?s.confirm(t.options.dictRemoveFileConfirmation,function(){return t.removeFile(e)}):t.removeFile(e)},c=0,u=u=e.previewElement.querySelectorAll("[data-dz-remove]");;){if(c>=u.length)break;u[c++].addEventListener("click",l)}}},removedfile:function(e){return null!=e.previewElement&&null!=e.previewElement.parentNode&&e.previewElement.parentNode.removeChild(e.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(e,t){if(e.previewElement){e.previewElement.classList.remove("dz-file-preview");for(var i=0,n=n=e.previewElement.querySelectorAll("[data-dz-thumbnail]");;){if(i>=n.length)break;var o=n[i++];o.alt=e.name,o.src=t}return setTimeout(function(){return e.previewElement.classList.add("dz-image-preview")},1)}},error:function(e,t){if(e.previewElement){e.previewElement.classList.add("dz-error"),"String"!=typeof t&&t.error&&(t=t.error);for(var i=0,n=n=e.previewElement.querySelectorAll("[data-dz-errormessage]");;){if(i>=n.length)break;n[i++].textContent=t}}},errormultiple:function(){},processing:function(e){if(e.previewElement&&(e.previewElement.classList.add("dz-processing"),e._removeLink))return e._removeLink.innerHTML=this.options.dictCancelUpload},processingmultiple:function(){},uploadprogress:function(e,t,i){if(e.previewElement)for(var n=0,o=o=e.previewElement.querySelectorAll("[data-dz-uploadprogress]");;){if(n>=o.length)break;var s=o[n++];"PROGRESS"===s.nodeName?s.value=t:s.style.width=t+"%"}},totaluploadprogress:function(){},sending:function(){},sendingmultiple:function(){},success:function(e){if(e.previewElement)return e.previewElement.classList.add("dz-success")},successmultiple:function(){},canceled:function(e){return this.emit("error",e,this.options.dictUploadCanceled)},canceledmultiple:function(){},complete:function(e){if(e._removeLink&&(e._removeLink.innerHTML=this.options.dictRemoveFile),e.previewElement)return e.previewElement.classList.add("dz-complete")},completemultiple:function(){},maxfilesexceeded:function(){},maxfilesreached:function(){},queuecomplete:function(){},addedfiles:function(){}},this.prototype._thumbnailQueue=[],this.prototype._processingThumbnail=!1}},{key:"extend",value:function(e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];for(var o=0,s=s=i;;){if(o>=s.length)break;var r=s[o++];for(var a in r){var l=r[a];e[a]=l}}return e}}]),t(s,[{key:"getAcceptedFiles",value:function(){return this.files.filter(function(e){return e.accepted}).map(function(e){return e})}},{key:"getRejectedFiles",value:function(){return this.files.filter(function(e){return!e.accepted}).map(function(e){return e})}},{key:"getFilesWithStatus",value:function(e){return this.files.filter(function(t){return t.status===e}).map(function(e){return e})}},{key:"getQueuedFiles",value:function(){return this.getFilesWithStatus(s.QUEUED)}},{key:"getUploadingFiles",value:function(){return this.getFilesWithStatus(s.UPLOADING)}},{key:"getAddedFiles",value:function(){return this.getFilesWithStatus(s.ADDED)}},{key:"getActiveFiles",value:function(){return this.files.filter(function(e){return e.status===s.UPLOADING||e.status===s.QUEUED}).map(function(e){return e})}},{key:"init",value:function(){var e=this;if("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(s.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length){!function t(){return e.hiddenFileInput&&e.hiddenFileInput.parentNode.removeChild(e.hiddenFileInput),e.hiddenFileInput=document.createElement("input"),e.hiddenFileInput.setAttribute("type","file"),(null===e.options.maxFiles||e.options.maxFiles>1)&&e.hiddenFileInput.setAttribute("multiple","multiple"),e.hiddenFileInput.className="dz-hidden-input",null!==e.options.acceptedFiles&&e.hiddenFileInput.setAttribute("accept",e.options.acceptedFiles),null!==e.options.capture&&e.hiddenFileInput.setAttribute("capture",e.options.capture),e.hiddenFileInput.style.visibility="hidden",e.hiddenFileInput.style.position="absolute",e.hiddenFileInput.style.top="0",e.hiddenFileInput.style.left="0",e.hiddenFileInput.style.height="0",e.hiddenFileInput.style.width="0",s.getElement(e.options.hiddenInputContainer,"hiddenInputContainer").appendChild(e.hiddenFileInput),e.hiddenFileInput.addEventListener("change",function(){var i=e.hiddenFileInput.files;if(i.length)for(var n=0,o=o=i;!(n>=o.length);){var s=o[n++];e.addFile(s)}return e.emit("addedfiles",i),t()})}()}this.URL=null!==window.URL?window.URL:window.webkitURL;for(var t=0,i=i=this.events;;){if(t>=i.length)break;var n=i[t++];this.on(n,this.options[n])}this.on("uploadprogress",function(){return e.updateTotalUploadProgress()}),this.on("removedfile",function(){return e.updateTotalUploadProgress()}),this.on("canceled",function(t){return e.emit("complete",t)}),this.on("complete",function(t){if(0===e.getAddedFiles().length&&0===e.getUploadingFiles().length&&0===e.getQueuedFiles().length)return setTimeout(function(){return e.emit("queuecomplete")},0)});var o=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1};return this.listeners=[{element:this.element,events:{dragstart:function(t){return e.emit("dragstart",t)},dragenter:function(t){return o(t),e.emit("dragenter",t)},dragover:function(t){var i=void 0;try{i=t.dataTransfer.effectAllowed}catch(e){}return t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",o(t),e.emit("dragover",t)},dragleave:function(t){return e.emit("dragleave",t)},drop:function(t){return o(t),e.drop(t)},dragend:function(t){return e.emit("dragend",t)}}}],this.clickableElements.forEach(function(t){return e.listeners.push({element:t,events:{click:function(i){return(t!==e.element||i.target===e.element||s.elementInside(i.target,e.element.querySelector(".dz-message")))&&e.hiddenFileInput.click(),!0}}})}),this.enable(),this.options.init.call(this)}},{key:"destroy",value:function(){return this.disable(),this.removeAllFiles(!0),(null!=this.hiddenFileInput?this.hiddenFileInput.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,s.instances.splice(s.instances.indexOf(this),1)}},{key:"updateTotalUploadProgress",value:function(){var e=void 0,t=0,i=0;if(this.getActiveFiles().length){for(var n=0,o=o=this.getActiveFiles();;){if(n>=o.length)break;var s=o[n++];t+=s.upload.bytesSent,i+=s.upload.total}e=100*t/i}else e=100;return this.emit("totaluploadprogress",e,i,t)}},{key:"_getParamName",value:function(e){return"function"==typeof this.options.paramName?this.options.paramName(e):this.options.paramName+(this.options.uploadMultiple?"["+e+"]":"")}},{key:"_renameFile",value:function(e){return"function"!=typeof this.options.renameFile?e.name:this.options.renameFile(e)}},{key:"getFallbackForm",value:function(){var e,t=void 0;if(e=this.getExistingFallback())return e;var i='<div class="dz-fallback">';this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>';var n=s.createElement(i);return"FORM"!==this.element.tagName?(t=s.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>')).appendChild(n):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=t?t:n}},{key:"getExistingFallback",value:function(){for(var e=function(e){for(var t=0,i=i=e;;){if(t>=i.length)break;var n=i[t++];if(/(^| )fallback($| )/.test(n.className))return n}},t=["div","form"],i=0;i<t.length;i++){var n,o=t[i];if(n=e(this.element.getElementsByTagName(o)))return n}}},{key:"setupEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var i in e.events){var n=e.events[i];t.push(e.element.addEventListener(i,n,!1))}return t}()})}},{key:"removeEventListeners",value:function(){return this.listeners.map(function(e){return function(){var t=[];for(var i in e.events){var n=e.events[i];t.push(e.element.removeEventListener(i,n,!1))}return t}()})}},{key:"disable",value:function(){var e=this;return this.clickableElements.forEach(function(e){return e.classList.remove("dz-clickable")}),this.removeEventListeners(),this.disabled=!0,this.files.map(function(t){return e.cancelUpload(t)})}},{key:"enable",value:function(){return delete this.disabled,this.clickableElements.forEach(function(e){return e.classList.add("dz-clickable")}),this.setupEventListeners()}},{key:"filesize",value:function(e){var t=0,i="b";if(e>0){for(var n=["tb","gb","mb","kb","b"],o=0;o<n.length;o++){var s=n[o];if(e>=Math.pow(this.options.filesizeBase,4-o)/10){t=e/Math.pow(this.options.filesizeBase,4-o),i=s;break}}t=Math.round(10*t)/10}return"<strong>"+t+"</strong> "+this.options.dictFileSizeUnits[i]}},{key:"_updateMaxFilesReachedClass",value:function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")}},{key:"drop",value:function(e){if(e.dataTransfer){this.emit("drop",e);for(var t=[],i=0;i<e.dataTransfer.files.length;i++)t[i]=e.dataTransfer.files[i];if(this.emit("addedfiles",t),t.length){var n=e.dataTransfer.items;n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(t)}}}},{key:"paste",value:function(e){if(null!=(void 0!==(t=null!=e?e.clipboardData:void 0)&&null!==t?function(e){return e.items}(t):void 0)){var t;this.emit("paste",e);var i=e.clipboardData.items;return i.length?this._addFilesFromItems(i):void 0}}},{key:"handleFiles",value:function(e){for(var t=0,i=i=e;;){if(t>=i.length)break;var n=i[t++];this.addFile(n)}}},{key:"_addFilesFromItems",value:function(e){var t=this;return function(){for(var i=[],n=0,o=o=e;;){if(n>=o.length)break;var s,r=o[n++];null!=r.webkitGetAsEntry&&(s=r.webkitGetAsEntry())?s.isFile?i.push(t.addFile(r.getAsFile())):s.isDirectory?i.push(t._addFilesFromDirectory(s,s.name)):i.push(void 0):null!=r.getAsFile&&(null==r.kind||"file"===r.kind)?i.push(t.addFile(r.getAsFile())):i.push(void 0)}return i}()}},{key:"_addFilesFromDirectory",value:function(e,t){var i=this,n=e.createReader(),o=function(e){return t=console,i="log",n=function(t){return t.log(e)},void 0!==t&&null!==t&&"function"==typeof t[i]?n(t,i):void 0;var t,i,n};return function e(){return n.readEntries(function(n){if(n.length>0){for(var o=0,s=s=n;!(o>=s.length);){var r=s[o++];r.isFile?r.file(function(e){if(!i.options.ignoreHiddenFiles||"."!==e.name.substring(0,1))return e.fullPath=t+"/"+e.name,i.addFile(e)}):r.isDirectory&&i._addFilesFromDirectory(r,t+"/"+r.name)}e()}return null},o)}()}},{key:"accept",value:function(e,t){return this.options.maxFilesize&&e.size>1024*this.options.maxFilesize*1024?t(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(e.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):s.isValidFile(e,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(t(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",e)):this.options.accept.call(this,e,t):t(this.options.dictInvalidFileType)}},{key:"addFile",value:function(e){var t=this;return e.upload={uuid:s.uuidv4(),progress:0,total:e.size,bytesSent:0,filename:this._renameFile(e),chunked:this.options.chunking&&(this.options.forceChunking||e.size>this.options.chunkSize),totalChunkCount:Math.ceil(e.size/this.options.chunkSize)},this.files.push(e),e.status=s.ADDED,this.emit("addedfile",e),this._enqueueThumbnail(e),this.accept(e,function(i){return i?(e.accepted=!1,t._errorProcessing([e],i)):(e.accepted=!0,t.options.autoQueue&&t.enqueueFile(e)),t._updateMaxFilesReachedClass()})}},{key:"enqueueFiles",value:function(e){for(var t=0,i=i=e;;){if(t>=i.length)break;var n=i[t++];this.enqueueFile(n)}return null}},{key:"enqueueFile",value:function(e){var t=this;if(e.status!==s.ADDED||!0!==e.accepted)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(e.status=s.QUEUED,this.options.autoProcessQueue)return setTimeout(function(){return t.processQueue()},0)}},{key:"_enqueueThumbnail",value:function(e){var t=this;if(this.options.createImageThumbnails&&e.type.match(/image.*/)&&e.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(e),setTimeout(function(){return t._processThumbnailQueue()},0)}},{key:"_processThumbnailQueue",value:function(){var e=this;if(!this._processingThumbnail&&0!==this._thumbnailQueue.length){this._processingThumbnail=!0;var t=this._thumbnailQueue.shift();return this.createThumbnail(t,this.options.thumbnailWidth,this.options.thumbnailHeight,this.options.thumbnailMethod,!0,function(i){return e.emit("thumbnail",t,i),e._processingThumbnail=!1,e._processThumbnailQueue()})}}},{key:"removeFile",value:function(e){if(e.status===s.UPLOADING&&this.cancelUpload(e),this.files=r(this.files,e),this.emit("removedfile",e),0===this.files.length)return this.emit("reset")}},{key:"removeAllFiles",value:function(e){null==e&&(e=!1);for(var t=0,i=i=this.files.slice();;){if(t>=i.length)break;var n=i[t++];(n.status!==s.UPLOADING||e)&&this.removeFile(n)}return null}},{key:"resizeImage",value:function(e,t,i,n,o){var r=this;return this.createThumbnail(e,t,i,n,!0,function(t,i){if(null==i)return o(e);var n=r.options.resizeMimeType;null==n&&(n=e.type);var a=i.toDataURL(n,r.options.resizeQuality);return"image/jpeg"!==n&&"image/jpg"!==n||(a=c.restore(e.dataURL,a)),o(s.dataURItoBlob(a))})}},{key:"createThumbnail",value:function(e,t,i,n,o,s){var r=this,a=new FileReader;return a.onload=function(){if(e.dataURL=a.result,"image/svg+xml"!==e.type)return r.createThumbnailFromUrl(e,t,i,n,o,s);null!=s&&s(a.result)},a.readAsDataURL(e)}},{key:"createThumbnailFromUrl",value:function(e,t,i,n,o,s,r){var a=this,c=document.createElement("img");return r&&(c.crossOrigin=r),c.onload=function(){var r=function(e){return e(1)};return"undefined"!=typeof EXIF&&null!==EXIF&&o&&(r=function(e){return EXIF.getData(c,function(){return e(EXIF.getTag(this,"Orientation"))})}),r(function(o){e.width=c.width,e.height=c.height;var r=a.options.resize.call(a,e,t,i,n),u=document.createElement("canvas"),d=u.getContext("2d");switch(u.width=r.trgWidth,u.height=r.trgHeight,o>4&&(u.width=r.trgHeight,u.height=r.trgWidth),o){case 2:d.translate(u.width,0),d.scale(-1,1);break;case 3:d.translate(u.width,u.height),d.rotate(Math.PI);break;case 4:d.translate(0,u.height),d.scale(1,-1);break;case 5:d.rotate(.5*Math.PI),d.scale(1,-1);break;case 6:d.rotate(.5*Math.PI),d.translate(0,-u.width);break;case 7:d.rotate(.5*Math.PI),d.translate(u.height,-u.width),d.scale(-1,1);break;case 8:d.rotate(-.5*Math.PI),d.translate(-u.height,0)}l(d,c,null!=r.srcX?r.srcX:0,null!=r.srcY?r.srcY:0,r.srcWidth,r.srcHeight,null!=r.trgX?r.trgX:0,null!=r.trgY?r.trgY:0,r.trgWidth,r.trgHeight);var h=u.toDataURL("image/png");if(null!=s)return s(h,u)})},null!=s&&(c.onerror=s),c.src=e.dataURL}},{key:"processQueue",value:function(){var e=this.options.parallelUploads,t=this.getUploadingFiles().length,i=t;if(!(t>=e)){var n=this.getQueuedFiles();if(n.length>0){if(this.options.uploadMultiple)return this.processFiles(n.slice(0,e-t));for(;i<e;){if(!n.length)return;this.processFile(n.shift()),i++}}}}},{key:"processFile",value:function(e){return this.processFiles([e])}},{key:"processFiles",value:function(e){for(var t=0,i=i=e;;){if(t>=i.length)break;var n=i[t++];n.processing=!0,n.status=s.UPLOADING,this.emit("processing",n)}return this.options.uploadMultiple&&this.emit("processingmultiple",e),this.uploadFiles(e)}},{key:"_getFilesWithXhr",value:function(e){return this.files.filter(function(t){return t.xhr===e}).map(function(e){return e})}},{key:"cancelUpload",value:function(e){if(e.status===s.UPLOADING){for(var t=this._getFilesWithXhr(e.xhr),i=0,n=n=t;;){if(i>=n.length)break;n[i++].status=s.CANCELED}void 0!==e.xhr&&e.xhr.abort();for(var o=0,r=r=t;;){if(o>=r.length)break;var a=r[o++];this.emit("canceled",a)}this.options.uploadMultiple&&this.emit("canceledmultiple",t)}else e.status!==s.ADDED&&e.status!==s.QUEUED||(e.status=s.CANCELED,this.emit("canceled",e),this.options.uploadMultiple&&this.emit("canceledmultiple",[e]));if(this.options.autoProcessQueue)return this.processQueue()}},{key:"resolveOption",value:function(e){if("function"==typeof e){for(var t=arguments.length,i=Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return e.apply(this,i)}return e}},{key:"uploadFile",value:function(e){return this.uploadFiles([e])}},{key:"uploadFiles",value:function(e){var t=this;this._transformFiles(e,function(i){if(e[0].upload.chunked){var n=e[0],o=i[0];n.upload.chunks=[];var r=function(){for(var i=0;void 0!==n.upload.chunks[i];)i++;if(!(i>=n.upload.totalChunkCount)){0;var r=i*t.options.chunkSize,a=Math.min(r+t.options.chunkSize,n.size),l={name:t._getParamName(0),data:o.webkitSlice?o.webkitSlice(r,a):o.slice(r,a),filename:n.upload.filename,chunkIndex:i};n.upload.chunks[i]={file:n,index:i,dataBlock:l,status:s.UPLOADING,progress:0,retries:0},t._uploadData(e,[l])}};if(n.upload.finishedChunkUpload=function(i){var o=!0;i.status=s.SUCCESS,i.dataBlock=null,i.xhr=null;for(var a=0;a<n.upload.totalChunkCount;a++){if(void 0===n.upload.chunks[a])return r();n.upload.chunks[a].status!==s.SUCCESS&&(o=!1)}o&&t.options.chunksUploaded(n,function(){t._finished(e,"",null)})},t.options.parallelChunkUploads)for(var a=0;a<n.upload.totalChunkCount;a++)r();else r()}else{for(var l=[],c=0;c<e.length;c++)l[c]={name:t._getParamName(c),data:i[c],filename:e[c].upload.filename};t._uploadData(e,l)}})}},{key:"_getChunk",value:function(e,t){for(var i=0;i<e.upload.totalChunkCount;i++)if(void 0!==e.upload.chunks[i]&&e.upload.chunks[i].xhr===t)return e.upload.chunks[i]}},{key:"_uploadData",value:function(e,t){for(var i=this,n=new XMLHttpRequest,o=0,r=r=e;;){if(o>=r.length)break;r[o++].xhr=n}e[0].upload.chunked&&(e[0].upload.chunks[t[0].chunkIndex].xhr=n);var a=this.resolveOption(this.options.method,e),l=this.resolveOption(this.options.url,e);n.open(a,l,!0),n.timeout=this.resolveOption(this.options.timeout,e),n.withCredentials=!!this.options.withCredentials,n.onload=function(t){i._finishedUploading(e,n,t)},n.onerror=function(){i._handleUploadError(e,n)},(null!=n.upload?n.upload:n).onprogress=function(t){return i._updateFilesUploadProgress(e,n,t)};var c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"};for(var u in this.options.headers&&s.extend(c,this.options.headers),c){var d=c[u];d&&n.setRequestHeader(u,d)}var h=new FormData;if(this.options.params){var p=this.options.params;for(var f in"function"==typeof p&&(p=p.call(this,e,n,e[0].upload.chunked?this._getChunk(e[0],n):null)),p){var m=p[f];h.append(f,m)}}for(var g=0,v=v=e;;){if(g>=v.length)break;var y=v[g++];this.emit("sending",y,n,h)}this.options.uploadMultiple&&this.emit("sendingmultiple",e,n,h),this._addFormElementData(h);for(var b=0;b<t.length;b++){var C=t[b];h.append(C.name,C.data,C.filename)}this.submitRequest(n,h,e)}},{key:"_transformFiles",value:function(e,t){for(var i=this,n=[],o=0,s=function(s){i.options.transformFile.call(i,e[s],function(i){n[s]=i,++o===e.length&&t(n)})},r=0;r<e.length;r++)s(r)}},{key:"_addFormElementData",value:function(e){if("FORM"===this.element.tagName)for(var t=0,i=i=this.element.querySelectorAll("input, textarea, select, button");;){if(t>=i.length)break;var n=i[t++],o=n.getAttribute("name"),s=n.getAttribute("type");if(s&&(s=s.toLowerCase()),void 0!==o&&null!==o)if("SELECT"===n.tagName&&n.hasAttribute("multiple"))for(var r=0,a=a=n.options;;){if(r>=a.length)break;var l=a[r++];l.selected&&e.append(o,l.value)}else(!s||"checkbox"!==s&&"radio"!==s||n.checked)&&e.append(o,n.value)}}},{key:"_updateFilesUploadProgress",value:function(e,t,i){var n=void 0;if(void 0!==i){if(n=100*i.loaded/i.total,e[0].upload.chunked){var o=e[0],s=this._getChunk(o,t);s.progress=n,s.total=i.total,s.bytesSent=i.loaded;o.upload.progress=0,o.upload.total=0,o.upload.bytesSent=0;for(var r=0;r<o.upload.totalChunkCount;r++)void 0!==o.upload.chunks[r]&&void 0!==o.upload.chunks[r].progress&&(o.upload.progress+=o.upload.chunks[r].progress,o.upload.total+=o.upload.chunks[r].total,o.upload.bytesSent+=o.upload.chunks[r].bytesSent);o.upload.progress=o.upload.progress/o.upload.totalChunkCount}else for(var a=0,l=l=e;;){if(a>=l.length)break;var c=l[a++];c.upload.progress=n,c.upload.total=i.total,c.upload.bytesSent=i.loaded}for(var u=0,d=d=e;;){if(u>=d.length)break;var h=d[u++];this.emit("uploadprogress",h,h.upload.progress,h.upload.bytesSent)}}else{var p=!0;n=100;for(var f=0,m=m=e;;){if(f>=m.length)break;var g=m[f++];100===g.upload.progress&&g.upload.bytesSent===g.upload.total||(p=!1),g.upload.progress=n,g.upload.bytesSent=g.upload.total}if(p)return;for(var v=0,y=y=e;;){if(v>=y.length)break;var b=y[v++];this.emit("uploadprogress",b,n,b.upload.bytesSent)}}}},{key:"_finishedUploading",value:function(e,t,i){var n=void 0;if(e[0].status!==s.CANCELED&&4===t.readyState){if("arraybuffer"!==t.responseType&&"blob"!==t.responseType&&(n=t.responseText,t.getResponseHeader("content-type")&&~t.getResponseHeader("content-type").indexOf("application/json")))try{n=JSON.parse(n)}catch(e){i=e,n="Invalid JSON response from server."}this._updateFilesUploadProgress(e),200<=t.status&&t.status<300?e[0].upload.chunked?e[0].upload.finishedChunkUpload(this._getChunk(e[0],t)):this._finished(e,n,i):this._handleUploadError(e,t,n)}}},{key:"_handleUploadError",value:function(e,t,i){if(e[0].status!==s.CANCELED){if(e[0].upload.chunked&&this.options.retryChunks){var n=this._getChunk(e[0],t);if(n.retries++<this.options.retryChunksLimit)return void this._uploadData(e,[n.dataBlock]);console.warn("Retried this chunk too often. Giving up.")}for(var o=0,r=r=e;;){if(o>=r.length)break;r[o++];this._errorProcessing(e,i||this.options.dictResponseError.replace("{{statusCode}}",t.status),t)}}}},{key:"submitRequest",value:function(e,t,i){e.send(t)}},{key:"_finished",value:function(e,t,i){for(var n=0,o=o=e;;){if(n>=o.length)break;var r=o[n++];r.status=s.SUCCESS,this.emit("success",r,t,i),this.emit("complete",r)}if(this.options.uploadMultiple&&(this.emit("successmultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}},{key:"_errorProcessing",value:function(e,t,i){for(var n=0,o=o=e;;){if(n>=o.length)break;var r=o[n++];r.status=s.ERROR,this.emit("error",r,t,i),this.emit("complete",r)}if(this.options.uploadMultiple&&(this.emit("errormultiple",e,t,i),this.emit("completemultiple",e)),this.options.autoProcessQueue)return this.processQueue()}}],[{key:"uuidv4",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}]),s}();s.initClass(),s.version="5.5.1",s.options={},s.optionsForElement=function(e){return e.getAttribute("id")?s.options[a(e.getAttribute("id"))]:void 0},s.instances=[],s.forElement=function(e){if("string"==typeof e&&(e=document.querySelector(e)),null==(null!=e?e.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return e.dropzone},s.autoDiscover=!0,s.discover=function(){var e=void 0;if(document.querySelectorAll)e=document.querySelectorAll(".dropzone");else{e=[];var t=function(t){return function(){for(var i=[],n=0,o=o=t;;){if(n>=o.length)break;var s=o[n++];/(^| )dropzone($| )/.test(s.className)?i.push(e.push(s)):i.push(void 0)}return i}()};t(document.getElementsByTagName("div")),t(document.getElementsByTagName("form"))}return function(){for(var t=[],i=0,n=n=e;;){if(i>=n.length)break;var o=n[i++];!1!==s.optionsForElement(o)?t.push(new s(o)):t.push(void 0)}return t}()},s.blacklistedBrowsers=[/opera.*(Macintosh|Windows Phone).*version\/12/i],s.isBrowserSupported=function(){var e=!0;if(window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(var t=0,i=i=s.blacklistedBrowsers;;){if(t>=i.length)break;i[t++].test(navigator.userAgent)&&(e=!1)}else e=!1;else e=!1;return e},s.dataURItoBlob=function(e){for(var t=atob(e.split(",")[1]),i=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),o=new Uint8Array(n),s=0,r=t.length,a=0<=r;a?s<=r:s>=r;a?s++:s--)o[s]=t.charCodeAt(s);return new Blob([n],{type:i})};var r=function(e,t){return e.filter(function(e){return e!==t}).map(function(e){return e})},a=function(e){return e.replace(/[\-_](\w)/g,function(e){return e.charAt(1).toUpperCase()})};s.createElement=function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes[0]},s.elementInside=function(e,t){if(e===t)return!0;for(;e=e.parentNode;)if(e===t)return!0;return!1},s.getElement=function(e,t){var i=void 0;if("string"==typeof e?i=document.querySelector(e):null!=e.nodeType&&(i=e),null==i)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector or a plain HTML element.");return i},s.getElements=function(e,t){var i=void 0,n=void 0;if(e instanceof Array){n=[];try{for(var o=0,s=s=e;!(o>=s.length);)i=s[o++],n.push(this.getElement(i,t))}catch(e){n=null}}else if("string"==typeof e){n=[];for(var r=0,a=a=document.querySelectorAll(e);!(r>=a.length);)i=a[r++],n.push(i)}else null!=e.nodeType&&(n=[e]);if(null==n||!n.length)throw new Error("Invalid `"+t+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return n},s.confirm=function(e,t,i){return window.confirm(e)?t():null!=i?i():void 0},s.isValidFile=function(e,t){if(!t)return!0;t=t.split(",");for(var i=e.type,n=i.replace(/\/.*$/,""),o=0,s=s=t;;){if(o>=s.length)break;var r=s[o++];if("."===(r=r.trim()).charAt(0)){if(-1!==e.name.toLowerCase().indexOf(r.toLowerCase(),e.name.length-r.length))return!0}else if(/\/\*$/.test(r)){if(n===r.replace(/\/.*$/,""))return!0}else if(i===r)return!0}return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new s(this,e)})}),void 0!==e&&null!==e?e.exports=s:window.Dropzone=s,s.ADDED="added",s.QUEUED="queued",s.ACCEPTED=s.QUEUED,s.UPLOADING="uploading",s.PROCESSING=s.UPLOADING,s.CANCELED="canceled",s.ERROR="error",s.SUCCESS="success";var l=function(e,t,i,n,o,s,r,a,l,c){var u=function(e){e.naturalWidth;var t=e.naturalHeight,i=document.createElement("canvas");i.width=1,i.height=t;var n=i.getContext("2d");n.drawImage(e,0,0);for(var o=n.getImageData(1,0,1,t).data,s=0,r=t,a=t;a>s;)0===o[4*(a-1)+3]?r=a:s=a,a=r+s>>1;var l=a/t;return 0===l?1:l}(t);return e.drawImage(t,i,n,o,s,r,a,l,c/u)},c=function(){function e(){n(this,e)}return t(e,null,[{key:"initClass",value:function(){this.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}},{key:"encode64",value:function(e){for(var t="",i=void 0,n=void 0,o="",s=void 0,r=void 0,a=void 0,l="",c=0;s=(i=e[c++])>>2,r=(3&i)<<4|(n=e[c++])>>4,a=(15&n)<<2|(o=e[c++])>>6,l=63&o,isNaN(n)?a=l=64:isNaN(o)&&(l=64),t=t+this.KEY_STR.charAt(s)+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(a)+this.KEY_STR.charAt(l),i=n=o="",s=r=a=l="",c<e.length;);return t}},{key:"restore",value:function(e,t){if(!e.match("data:image/jpeg;base64,"))return t;var i=this.decode64(e.replace("data:image/jpeg;base64,","")),n=this.slice2Segments(i),o=this.exifManipulation(t,n);return"data:image/jpeg;base64,"+this.encode64(o)}},{key:"exifManipulation",value:function(e,t){var i=this.getExifArray(t),n=this.insertExif(e,i);return new Uint8Array(n)}},{key:"getExifArray",value:function(e){for(var t=void 0,i=0;i<e.length;){if(255===(t=e[i])[0]&225===t[1])return t;i++}return[]}},{key:"insertExif",value:function(e,t){var i=e.replace("data:image/jpeg;base64,",""),n=this.decode64(i),o=n.indexOf(255,3),s=n.slice(0,o),r=n.slice(o),a=s;return a=(a=a.concat(t)).concat(r)}},{key:"slice2Segments",value:function(e){for(var t=0,i=[];;){if(255===e[t]&218===e[t+1])break;if(255===e[t]&216===e[t+1])t+=2;else{var n=t+(256*e[t+2]+e[t+3])+2,o=e.slice(t,n);i.push(o),t=n}if(t>e.length)break}return i}},{key:"decode64",value:function(e){var t=void 0,i=void 0,n="",o=void 0,s=void 0,r="",a=0,l=[];for(/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.warn("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, '+', '/',and '='\nExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");t=this.KEY_STR.indexOf(e.charAt(a++))<<2|(o=this.KEY_STR.indexOf(e.charAt(a++)))>>4,i=(15&o)<<4|(s=this.KEY_STR.indexOf(e.charAt(a++)))>>2,n=(3&s)<<6|(r=this.KEY_STR.indexOf(e.charAt(a++))),l.push(t),64!==s&&l.push(i),64!==r&&l.push(n),t=i=n="",o=s=r="",a<e.length;);return l}}]),e}();c.initClass();s._autoDiscoverFunction=function(){if(s.autoDiscover)return s.discover()},function(e,t){var i=!1,n=!0,o=e.document,s=o.documentElement,r=o.addEventListener?"addEventListener":"attachEvent",a=o.addEventListener?"removeEventListener":"detachEvent",l=o.addEventListener?"":"on",c=function n(s){if("readystatechange"!==s.type||"complete"===o.readyState)return("load"===s.type?e:o)[a](l+s.type,n,!1),!i&&(i=!0)?t.call(e,s.type||s):void 0};if("complete"!==o.readyState){if(o.createEventObject&&s.doScroll){try{n=!e.frameElement}catch(e){}n&&function e(){try{s.doScroll("left")}catch(t){return void setTimeout(e,50)}return c("poll")}()}o[r](l+"DOMContentLoaded",c,!1),o[r](l+"readystatechange",c,!1),e[r](l+"load",c,!1)}}(window,s._autoDiscoverFunction)}).call(t,i(11)(e))},function(e,t,i){(function(e){function t(e,t){var i=this;t=$.extend({breadcrumbElement:"div.ccm-search-results-breadcrumb.ccm-file-manager-breadcrumb",bulkParameterName:"fID",searchMethod:"get",selectMode:"multiple"},t),i.currentFolder=0,i.interactionIsDragging=!1,i.$breadcrumb=$(t.breadcrumbElement),i._templateFileProgress=_.template('<div id="ccm-file-upload-progress" class="ccm-ui"><div id="ccm-file-upload-progress-bar"><div class="progress progress-striped active"><div class="progress-bar" style="width: <%=progress%>%;"></div></div></div></div>'),ConcreteAjaxSearch.call(i,e,t),ConcreteTree.setupTreeEvents(),i.setupEvents(),i.setupItemsPerPageOptions(),i.setupAddFolder(),i.setupFolderNavigation(),i.setupFileUploads(),i.setupFileDownloads()}t.prototype=Object.create(ConcreteAjaxSearch.prototype),t.prototype.setupRowDragging=function(){var e=this,t=e.$element.find("tr[data-file-manager-tree-node-type!=file_folder]"),i=navigator.appVersion,n=/android/gi.test(i),o=/iphone|ipad|ipod/gi.test(i);n||o||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent)||(e.$element.find("tr[data-file-manager-tree-node-type]").each(function(){var i,n=$(this);switch($(this).attr("data-file-manager-tree-node-type")){case"file_folder":i="ccm-search-results-folder";break;case"file":i="ccm-search-results-file"}i&&n.draggable({delay:300,start:function(i){e.interactionIsDragging=!0,$("html").addClass("ccm-search-results-dragging"),t.css("opacity","0.4"),i.altKey&&e.$element.addClass("ccm-search-results-copy"),e.$element.find(".ccm-search-select-hover").removeClass("ccm-search-select-hover"),$(window).on("keydown.concreteSearchResultsCopy",function(t){18==t.keyCode?e.$element.addClass("ccm-search-results-copy"):e.$element.removeClass("ccm-search-results-copy")}),$(window).on("keyup.concreteSearchResultsCopy",function(t){18==t.keyCode&&e.$element.removeClass("ccm-search-results-copy")})},stop:function(){$("html").removeClass("ccm-search-results-dragging"),$(window).unbind(".concreteSearchResultsCopy"),t.css("opacity",""),e.$element.removeClass("ccm-search-results-copy"),e.interactionIsDragging=!1},revert:"invalid",helper:function(){var t=e.$element.find(".ccm-search-select-selected");return $('<div class="'+i+' ccm-draggable-search-item"><span>'+t.length+"</span></div>").data("$selected",t)},cursorAt:{left:-20,top:5}})}),e.$element.find("tr[data-file-manager-tree-node-type=file_folder], ol[data-search-navigation=breadcrumb] a[data-file-manager-tree-node]").droppable({tolerance:"pointer",hoverClass:"ccm-search-select-active-droppable",drop:function(t,i){var n=i.helper.data("$selected"),o=[],s=$(this).data("file-manager-tree-node"),r=t.altKey;n.each(function(){$(this).data("file-manager-tree-node")==s?n=n.not(this):o.push($(this).data("file-manager-tree-node"))}),0!==o.length&&(r||n.hide(),new ConcreteAjaxRequest({url:CCM_DISPATCHER_FILENAME+"/ccm/system/tree/node/drag_request",data:{ccm_token:e.options.upload_token,copyNodes:r?"1":0,sourceTreeNodeIDs:o,treeNodeParentID:s},success:function(t){r||e.reloadFolder(),ConcreteAlert.notify({message:t.message,title:t.title})},error:function(e){n.show();var t=e.responseText;e.responseJSON&&e.responseJSON.errors&&(t=e.responseJSON.errors.join("<br/>")),ConcreteAlert.dialog(ccmi18n.error,t)}}))}}))},t.prototype.setupBreadcrumb=function(e){var t=this;if(e.breadcrumb&&(t.$breadcrumb.html(""),e.breadcrumb.length)){var i=$('<ol data-search-navigation="breadcrumb" class="breadcrumb" />');$.each(e.breadcrumb,function(e,n){var o="";n.active&&(o=' class="active"');var s=$($.parseHTML('<a data-file-manager-tree-node="'+n.folder+'" href="'+n.url+'"></a>'));s.text(n.name),$("<li"+o+'><a data-file-manager-tree-node="'+n.folder+'" href="'+n.url+'"></a></li>').append(s).appendTo(i),i.find("li.active a").on("click",function(e){if(e.stopPropagation(),e.preventDefault(),n.menu){var o=$(n.menu);t.showMenu(i,o,e)}})}),i.appendTo(t.$breadcrumb),i.on("click.concreteSearchBreadcrumb","a",function(){return t.loadFolder($(this).attr("data-file-manager-tree-node"),$(this).attr("href")),!1})}},t.prototype.setupFileDownloads=function(){$("#ccm-file-manager-download-target").length?this.$downloadTarget=$("#ccm-file-manager-download-target"):this.$downloadTarget=$("<iframe />",{name:"ccm-file-manager-download-target",id:"ccm-file-manager-download-target"}).appendTo(document.body)},t.prototype.setupFileUploads=function(){var e=this;e.fileUploaderOptions={folderID:function(){return e.currentFolder}},window.concreteFileUploader.start(e.fileUploaderOptions);var t=this.$element.closest(".ui-dialog-content");0!==t.length&&t.on("dialogclose",function(){window.concreteFileUploader.stop(e.fileUploaderOptions)}),$("a[data-dialog=add-files]").on("click",function(t){t.preventDefault(),$.fn.dialog.open({width:620,height:400,modal:!0,title:ccmi18n_filemanager.addFiles,href:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/file/import?currentFolder="+e.currentFolder})})},t.prototype.refreshResults=function(e){this.currentFolder?this.loadFolder(this.currentFolder,!1,!0):$("div[data-header=file-manager] form").trigger("submit")},t.prototype._launchUploadCompleteDialog=function(e){t.launchUploadCompleteDialog(e,this)},t.prototype.setupFolders=function(e){var t=this,i=t.$element.find("tbody tr");e.folder&&(t.currentFolder=e.folder.treeNodeID),t.$element.find("tbody tr").on("dblclick",function(){var e=i.index($(this));if(e>-1){var n=t.getResult().items[e];n&&n.isFolder&&t.loadFolder(n.treeNodeID)}})},t.prototype.setupEvents=function(){var e=this;ConcreteEvent.subscribe("AjaxFormSubmitSuccess",function(t,i){"add-folder"!=i.form&&"move-to-folder"!=i.form||e.reloadFolder()}),ConcreteEvent.unsubscribe("FileManagerAddFilesComplete"),ConcreteEvent.subscribe("FileManagerAddFilesComplete",function(t,i){e._launchUploadCompleteDialog(i.files)}),ConcreteEvent.unsubscribe("FileManagerDeleteFilesComplete"),ConcreteEvent.subscribe("FileManagerDeleteFilesComplete",function(t,i){e.reloadFolder()}),ConcreteEvent.unsubscribe("ConcreteTreeAddTreeNode.concreteTree"),ConcreteEvent.subscribe("ConcreteTreeAddTreeNode.concreteTree",function(t,i){e.reloadFolder()}),ConcreteEvent.unsubscribe("ConcreteTreeUpdateTreeNode.concreteTree"),ConcreteEvent.subscribe("ConcreteTreeUpdateTreeNode.concreteTree",function(t,i){e.reloadFolder()}),ConcreteEvent.unsubscribe("FileManagerJumpToFolder.concreteTree"),ConcreteEvent.subscribe("FileManagerJumpToFolder.concreteTree",function(t,i){e.loadFolder(i.folderID)}),ConcreteEvent.unsubscribe("ConcreteTreeDeleteTreeNode.concreteTree"),ConcreteEvent.subscribe("ConcreteTreeDeleteTreeNode.concreteTree",function(t,i){e.reloadFolder()}),ConcreteEvent.unsubscribe("FileManagerUpdateFileProperties"),ConcreteEvent.subscribe("FileManagerUpdateFileProperties",function(e,t){t.file.fID&&$("[data-file-manager-file="+t.file.fID+"]").find(".ccm-search-results-name").text(t.file.title)})},t.prototype.setupImageThumbnails=function(){$(".ccm-file-manager-list-thumbnail[data-hover-image]").each(function(e){var t=$(this),i=[],n=t.data("hover-maxwidth"),o=t.data("hover-maxheight");n&&i.push("max-width: "+n),o&&i.push("max-height: "+o),i=0===i.length?"":' style="'+i.join("; ")+'"',t.popover({animation:!0,html:!0,content:'<img class="img-fluid" src="'+t.data("hover-image")+'" alt="Thumbnail"'+i+"/>",container:"body",placement:"auto",trigger:"manual"}),t.hover(function(){var e=new Image;e.src=t.data("hover-image"),e.complete?t.popover("toggle"):e.addEventListener("load",function(){t.popover("toggle")})}),t.closest(".ui-dialog").on("dialogclose",function(){t.popover("dispose")})})},t.prototype.showMenu=function(e,t,i){new ConcreteFileMenu(e,{menu:t,handle:"none",container:this}).show(i)},t.prototype.activateMenu=function(e){var t=this;if(t.getSelectedResults().length>1&&e.find("a").on("click.concreteFileManagerBulkAction",function(e){var i=$(this).attr("data-bulk-action"),n=$(this).attr("data-bulk-action-type"),o=[];$.each(t.getSelectedResults(),function(e,t){o.push(t.fID)}),t.handleSelectedBulkAction(i,n,$(this),o)}),"choose"!=t.options.selectMode){var i=e.find("a[data-file-manager-action=choose-new-file]").parent(),n=e.find("a[data-file-manager-action=clear]").parent();i.next("li.divider").remove(),n.remove(),i.remove()}},t.prototype.setupBulkActions=function(){var e=this;e.$element.on("click","button.btn-menu-launcher",function(t){var i=e.getResultMenu(e.getSelectedResults());if(i){i.find(".dialog-launch").dialog();var n=i.find("ul");n.attr("data-search-file-menu",i.attr("data-search-file-menu")),$(this).parent().find("ul").remove(),$(this).parent().append(n),(new ConcreteFileMenu).setupMenuOptions($(this).next("ul")),ConcreteEvent.publish("ConcreteMenuShow",{menu:e,menuElement:$(this).parent()})}})},t.prototype.handleSelectedBulkAction=function(e,t,i,n){var o=[];"choose"==e?(ConcreteEvent.publish("FileManagerBeforeSelectFile",{fID:n}),ConcreteEvent.publish("FileManagerSelectFile",{fID:n})):"download"==e?($.each(n,function(e,t){o.push({name:"fID[]",value:t})}),this.$downloadTarget.get(0).src=CCM_DISPATCHER_FILENAME+"/ccm/system/file/download?"+$.param(o)):ConcreteAjaxSearch.prototype.handleSelectedBulkAction.call(this,e,t,i,n)},t.prototype.reloadFolder=function(){this.loadFolder(this.currentFolder)},t.prototype.setupAddFolder=function(){var e={treeNodeID:this.currentFolder};$("a[data-dialog=add-file-manager-folder]").on("click",function(t){t.preventDefault(),$.fn.dialog.open({width:550,height:"auto",modal:!0,title:ccmi18n_filemanager.addFiles,data:e,href:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/tree/node/add/file_folder"})})},t.prototype.setupFolderNavigation=function(){$("a[data-launch-dialog=navigate-file-manager]").on("click",function(e){e.preventDefault(),$.fn.dialog.open({width:"560",height:"500",modal:!0,title:ccmi18n_filemanager.jumpToFolder,href:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/file/jump_to_folder"})})},t.prototype.hoverIsEnabled=function(e){return!this.interactionIsDragging},t.prototype.setupItemsPerPageOptions=function(){var e=this;e.$element.on("click",".dropdown-menu li",function(){var t=$(this).parent().attr("data-action"),i=parseInt($(this).data("items-per-page"));return t&&i&&(e.ajaxUpdate(t+"?fSearchItemsPerPage="+i),$(this).parents(".input-group-btn").removeClass("open"),e.updateActiveItemsPerPageOption(parseInt($(this).text()))),!1})},t.prototype.updateActiveItemsPerPageOption=function(e){this.$element.find(".dropdown-menu li").removeClass("active"),this.$element.find(".dropdown-menu li[data-items-per-page="+e+"]").addClass("active"),this.$element.find(".dropdown-toggle #selected-option").text(e)},t.prototype.updateResults=function(e){var t=this;ConcreteAjaxSearch.prototype.updateResults.call(t,e),t.setupFolders(e),t.setupBreadcrumb(e),t.setupRowDragging(),t.setupImageThumbnails(),e.itemsPerPage&&t.updateActiveItemsPerPageOption(parseInt(e.itemsPerPage)),e.baseUrl&&t.$element.find(".dropdown-menu").attr("data-action",e.baseUrl),"choose"==t.options.selectMode&&(t.$element.unbind(".concreteFileManagerHoverFile"),t.$element.on("mouseover.concreteFileManagerHoverFile","tr[data-file-manager-tree-node-type]",function(){$(this).addClass("ccm-search-select-hover")}),t.$element.on("mouseout.concreteFileManagerHoverFile","tr[data-file-manager-tree-node-type]",function(){$(this).removeClass("ccm-search-select-hover")}),t.$element.unbind(".concreteFileManagerChooseFile").on("click.concreteFileManagerChooseFile","tr[data-file-manager-tree-node-type=file]",function(e){return ConcreteEvent.publish("FileManagerBeforeSelectFile",{fID:$(this).attr("data-file-manager-file")}),ConcreteEvent.publish("FileManagerSelectFile",{fID:$(this).attr("data-file-manager-file")}),t.$downloadTarget.remove(),!1}),t.$element.unbind(".concreteFileManagerOpenFolder").on("click.concreteFileManagerOpenFolder","tr[data-file-manager-tree-node-type=search_preset],tr[data-file-manager-tree-node-type=file_folder]",function(e){e.preventDefault(),t.loadFolder($(this).attr("data-file-manager-tree-node"))}))},t.prototype.loadFolder=function(e,t,i){var n=this,o=n.getSearchData();t?n.options.result.baseUrl=t:t=n.options.result.baseUrl,o.push({name:"folder",value:e}),n.options.result.filters&&$.each(n.options.result.filters,function(e,t){var i=t.data;for(var n in o.push({name:"field[]",value:t.key}),i)o.push({name:n,value:i[n]})}),i&&(o.push({name:"ccm_order_by",value:"folderItemModified"}),o.push({name:"ccm_order_by_direction",value:"desc"})),n.currentFolder=e,n.ajaxUpdate(t,o),n.$element.find("#ccm-file-manager-upload input[name=currentFolder]").val(n.currentFolder)},t.prototype.getResultMenu=function(e){var t=ConcreteAjaxSearch.prototype.getResultMenu.call(this,e);return t&&this.activateMenu(t),t},t.launchDialog=function(e,t){var i,n=$(window).width()-100,o={},s={filters:[],multipleSelection:!1};if($.extend(s,t),s.filters.length>0)for(o["field[]"]=[],i=0;i<s.filters.length;i++){var r=$.extend(!0,{},s.filters[i]);o["field[]"].push(r.field),delete r.field,$.extend(o,r)}$.fn.dialog.open({width:n,height:"80%",href:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/file/search",modal:!0,data:o,title:ccmi18n_filemanager.title,onOpen:function(t){ConcreteEvent.unsubscribe("FileManagerSelectFile"),ConcreteEvent.subscribe("FileManagerSelectFile",function(t,i){var n="[object Array]"===Object.prototype.toString.call(i.fID);if(s.multipleSelection&&!n)i.fID=[i.fID];else if(!s.multipleSelection&&n){if(i.fID.length>1)return $(".ccm-search-bulk-action option:first-child").prop("selected","selected"),void window.alert(ccmi18n_filemanager.chosenTooMany);i.fID=i.fID[0]}$.fn.dialog.closeTop(),e(i)})}})},t.getFileDetails=function(e,t){$.ajax({type:"post",dataType:"json",url:CCM_DISPATCHER_FILENAME+"/ccm/system/file/get_json",data:{fID:e},error:function(e){ConcreteAlert.dialog(ccmi18n.error,e.responseText)},success:function(e){t(e)}})},t.launchUploadCompleteDialog=function(e,t){if(e&&e.length&&e.length>0){var i="";_.each(e,function(e){i+="fID[]="+e.fID+"&"}),i=i.substring(0,i.length-1),$.fn.dialog.open({width:"660",height:"500",href:CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/file/upload_complete",modal:!0,data:i,onClose:function(){var e={filemanager:t};ConcreteEvent.publish("FileManagerUploadCompleteDialogClose",e)},onOpen:function(){var e={filemanager:t};ConcreteEvent.publish("FileManagerUploadCompleteDialogOpen",e)},title:ccmi18n_filemanager.uploadComplete})}},$.fn.concreteFileManager=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcreteFileManager=t}).call(t,i(2))},function(e,t,i){(function(e){function t(e,t){var i=this;t=$.extend({chooseText:ccmi18n_filemanager.chooseNew,inputName:"concreteFile",fID:!1,filters:[]},t),i.$element=e,i.options=t,i._chooseTemplate=_.template(i.chooseTemplate)({options:i.options}),i._loadingTemplate=_.template(i.loadingTemplate),i._fileLoadedTemplate=_.template(i.fileLoadedTemplate),i.$element.append(i._chooseTemplate),i.$element.on("click","div.ccm-file-selector-choose-new",function(e){e.preventDefault(),i.chooseNewFile()}),i.options.fID&&i.loadFile(i.options.fID)}t.prototype={chooseTemplate:'<div class="ccm-file-selector-choose-new"><input type="hidden" name="<%=options.inputName%>" value="0" /><%=options.chooseText%></div>',loadingTemplate:'<div class="ccm-file-selector-loading"><input type="hidden" name="<%=inputName%>" value="<%=fID%>"><img src="'+CCM_IMAGE_PATH+'/throbber_white_16.gif" /></div>',fileLoadedTemplate:'<div class="ccm-file-selector-file-selected"><input type="hidden" name="<%=inputName%>" value="<%=file.fID%>" /><div class="ccm-file-selector-file-selected-thumbnail"><%=file.resultsThumbnailImg%></div><div class="ccm-file-selector-file-selected-title"><div><%=file.title%></div></div><div class="clearfix"></div></div>',chooseNewFile:function(){var e=this;ConcreteFileManager.launchDialog(function(t){e.loadFile(t.fID,function(){e.$element.closest("form").trigger("change")})},{filters:e.options.filters})},loadFile:function(e,t){var i=this;i.$element.html(i._loadingTemplate({inputName:i.options.inputName,fID:e})),ConcreteFileManager.getFileDetails(e,function(e){var n=e.files[0];i.$element.html(i._fileLoadedTemplate({inputName:i.options.inputName,file:n})),i.$element.find(".ccm-file-selector-file-selected").on("click",function(e){var t=n.treeNodeMenu;t&&new ConcreteFileMenu($(this),{menuLauncherHoverClass:"ccm-file-manager-menu-item-hover",menu:$(t),handle:"none",container:i}).show(e)}),ConcreteEvent.unsubscribe("ConcreteTreeDeleteTreeNode"),ConcreteEvent.subscribe("ConcreteTreeDeleteTreeNode",function(e,t){if(t.node&&t.node.treeJSONObject){var n=t.node.treeJSONObject.fID;n&&$("[data-file-selector]").find(".ccm-file-selector-file-selected input[value="+n+"]").each(function(e,t){_.defer(function(){i.$element.html(i._chooseTemplate)})})}}),t&&t(e)})}},$.fn.concreteFileSelector=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcreteFileSelector=t}).call(t,i(2))},function(e,t,i){(function(e){function t(e,t){t=t||{},t=$.extend({container:!1},t),this.options=t,e&&ConcreteMenu.call(this,e,t)}t.prototype=Object.create(ConcreteMenu.prototype),t.prototype.setupMenuOptions=function(e){var t=ConcreteMenu.prototype,i=e.attr("data-search-file-menu"),n=this.options.container;t.setupMenuOptions(e),e.find("a[data-file-manager-action=clear]").on("click",function(){var e=ConcreteMenuManager.getActiveMenu();return e&&e.hide(),_.defer(function(){n.$element.html(n._chooseTemplate)}),!1}),e.find("a[data-file-manager-action=choose-new-file]").on("click",function(e){e.preventDefault();var t=ConcreteMenuManager.getActiveMenu();t&&t.hide(),n.chooseNewFile()}),e.find("a[data-file-manager-action=download]").on("click",function(e){e.preventDefault(),window.frames["ccm-file-manager-download-target"].location=CCM_DISPATCHER_FILENAME+"/ccm/system/file/download?fID="+i}),e.find("a[data-file-manager-action=duplicate]").on("click",function(){return $.concreteAjax({url:CCM_DISPATCHER_FILENAME+"/ccm/system/file/duplicate",data:{fID:i},success:function(e){void 0!==n.refreshResults&&n.refreshResults()}}),!1})},$.fn.concreteFileMenu=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcreteFileMenu=t}).call(t,i(2))},function(e,t,i){var n,o,s,r;r=function(e,t,i){"use strict";var n=function(e,t){if("string"!=typeof t||t.length){var i="string"==typeof t?new RegExp(t,"i"):t,n=function(e){var t=0;if(3===e.nodeType){var o=e.data.search(i);if(o>=0&&e.data.length>0){var s=e.data.match(i),r=document.createElement("span");r.className="highlight";var a=e.splitText(o),l=(a.splitText(s[0].length),a.cloneNode(!0));r.appendChild(l),a.parentNode.replaceChild(r,a),t=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName)&&("highlight"!==e.className||"SPAN"!==e.tagName))for(var c=0;c<e.childNodes.length;++c)c+=n(e.childNodes[c]);return t};return e.each(function(){n(this)})}};e.fn.removeHighlight=function(){return this.find("span.highlight").each(function(){this.parentNode.firstChild.nodeName;var e=this.parentNode;e.replaceChild(this.firstChild,this),e.normalize()}).end()};var o=function(){};o.prototype={on:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},off:function(e,t){var i=arguments.length;return 0===i?delete this._events:1===i?delete this._events[e]:(this._events=this._events||{},void(e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)))},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},o.mixin=function(e){for(var t=["on","off","trigger"],i=0;i<t.length;i++)e.prototype[t[i]]=o.prototype[t[i]]};var s=/Mac/.test(navigator.userAgent),r=s?91:17,a=s?18:17,l=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("input").validity,c=function(e){return void 0!==e},u=function(e){return void 0===e||null===e?null:"boolean"==typeof e?e?"1":"0":e+""},d=function(e){return(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},h={before:function(e,t,i){var n=e[t];e[t]=function(){return i.apply(e,arguments),n.apply(e,arguments)}},after:function(e,t,i){var n=e[t];e[t]=function(){var t=n.apply(e,arguments);return i.apply(e,arguments),t}}},p=function(e,t,i){var n,o=e.trigger,s={};for(n in e.trigger=function(){var i=arguments[0];if(-1===t.indexOf(i))return o.apply(e,arguments);s[i]=arguments},i.apply(e,[]),e.trigger=o,s)s.hasOwnProperty(n)&&o.apply(e,s[n])},f=function(e){var t={};if("selectionStart"in e)t.start=e.selectionStart,t.length=e.selectionEnd-t.start;else if(document.selection){e.focus();var i=document.selection.createRange(),n=document.selection.createRange().text.length;i.moveStart("character",-e.value.length),t.start=i.text.length-n,t.length=n}return t},m=function(t){var i=null,n=function(n,o){var s,r,a,l,c,u,d,h,p,m;(n=n||window.event||{},o=o||{},n.metaKey||n.altKey)||(o.force||!1!==t.data("grow"))&&(s=t.val(),n.type&&"keydown"===n.type.toLowerCase()&&(a=(r=n.keyCode)>=48&&r<=57||r>=65&&r<=90||r>=96&&r<=111||r>=186&&r<=222||32===r,46===r||8===r?(h=f(t[0])).length?s=s.substring(0,h.start)+s.substring(h.start+h.length):8===r&&h.start?s=s.substring(0,h.start-1)+s.substring(h.start+1):46===r&&void 0!==h.start&&(s=s.substring(0,h.start)+s.substring(h.start+1)):a&&(u=n.shiftKey,d=String.fromCharCode(n.keyCode),s+=d=u?d.toUpperCase():d.toLowerCase())),l=t.attr("placeholder"),!s&&l&&(s=l),m=t,(c=((p=s)?(g.$testInput||(g.$testInput=e("<span />").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).appendTo("body")),g.$testInput.text(p),function(e,t,i){var n,o,s={};if(i)for(n=0,o=i.length;n<o;n++)s[i[n]]=e.css(i[n]);else s=e.css();t.css(s)}(m,g.$testInput,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),g.$testInput.width()):0)+4)!==i&&(i=c,t.width(c),t.triggerHandler("resize")))};t.on("keydown keyup update blur",n),n()},g=function(i,n){var o,s,r,a;(a=i[0]).selectize=this;var l,c,u,d=window.getComputedStyle&&window.getComputedStyle(a,null);if(r=(r=d?d.getPropertyValue("direction"):a.currentStyle&&a.currentStyle.direction)||i.parents("[dir]:first").attr("dir")||"",e.extend(this,{order:0,settings:n,$input:i,tabIndex:i.attr("tabindex")||"",tagType:"select"===a.tagName.toLowerCase()?1:2,rtl:/rtl/i.test(r),eventNS:".selectize"+ ++g.count,highlightedValue:null,isBlurring:!1,isOpen:!1,isDisabled:!1,isRequired:i.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===n.loadThrottle?this.onSearchChange:(l=this.onSearchChange,c=n.loadThrottle,function(){var e=this,t=arguments;window.clearTimeout(u),u=window.setTimeout(function(){l.apply(e,t)},c)})}),this.sifter=new t(this.options,{diacritics:n.diacritics}),this.settings.options){for(o=0,s=this.settings.options.length;o<s;o++)this.registerOption(this.settings.options[o]);delete this.settings.options}if(this.settings.optgroups){for(o=0,s=this.settings.optgroups.length;o<s;o++)this.registerOptionGroup(this.settings.optgroups[o]);delete this.settings.optgroups}this.settings.mode=this.settings.mode||(1===this.settings.maxItems?"single":"multi"),"boolean"!=typeof this.settings.hideSelected&&(this.settings.hideSelected="multi"===this.settings.mode),this.initializePlugins(this.settings.plugins),this.setupCallbacks(),this.setupTemplates(),this.setup()};return o.mixin(g),void 0!==i?i.mixin(g):function(e,t){t||(t={});console.error("Selectize: "+e),t.explanation&&(console.group&&console.group(),console.error(t.explanation),console.group&&console.groupEnd())}("Dependency MicroPlugin is missing",{explanation:'Make sure you either: (1) are using the "standalone" version of Selectize, or (2) require MicroPlugin before you load Selectize.'}),e.extend(g.prototype,{setup:function(){var t,i,n,o,c,u,d,h,p,f,g,v,y,b,C=this,_=C.settings,D=C.eventNS,w=e(window),x=e(document),k=C.$input;if(d=C.settings.mode,h=k.attr("class")||"",t=e("<div>").addClass(_.wrapperClass).addClass(h).addClass(d),i=e("<div>").addClass(_.inputClass).addClass("items").appendTo(t),n=e('<input type="text" autocomplete="off" />').appendTo(i).attr("tabindex",k.is(":disabled")?"-1":C.tabIndex),u=e(_.dropdownParent||t),o=e("<div>").addClass(_.dropdownClass).addClass(d).hide().appendTo(u),c=e("<div>").addClass(_.dropdownContentClass).appendTo(o),(f=k.attr("id"))&&(n.attr("id",f+"-selectized"),e("label[for='"+f+"']").attr("for",f+"-selectized")),C.settings.copyClassesToDropdown&&o.addClass(h),t.css({width:k[0].style.width}),C.plugins.names.length&&(p="plugin-"+C.plugins.names.join(" plugin-"),t.addClass(p),o.addClass(p)),(null===_.maxItems||_.maxItems>1)&&1===C.tagType&&k.attr("multiple","multiple"),C.settings.placeholder&&n.attr("placeholder",_.placeholder),!C.settings.splitOn&&C.settings.delimiter){var E=C.settings.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");C.settings.splitOn=new RegExp("\\s*"+E+"+\\s*")}k.attr("autocorrect")&&n.attr("autocorrect",k.attr("autocorrect")),k.attr("autocapitalize")&&n.attr("autocapitalize",k.attr("autocapitalize")),n[0].type=k[0].type,C.$wrapper=t,C.$control=i,C.$control_input=n,C.$dropdown=o,C.$dropdown_content=c,o.on("mouseenter mousedown click","[data-disabled]>[data-selectable]",function(e){e.stopImmediatePropagation()}),o.on("mouseenter","[data-selectable]",function(){return C.onOptionHover.apply(C,arguments)}),o.on("mousedown click","[data-selectable]",function(){return C.onOptionSelect.apply(C,arguments)}),v="mousedown",y="*:not(input)",b=function(){return C.onItemSelect.apply(C,arguments)},(g=i).on(v,y,function(e){for(var t=e.target;t&&t.parentNode!==g[0];)t=t.parentNode;return e.currentTarget=t,b.apply(this,[e])}),m(n),i.on({mousedown:function(){return C.onMouseDown.apply(C,arguments)},click:function(){return C.onClick.apply(C,arguments)}}),n.on({mousedown:function(e){e.stopPropagation()},keydown:function(){return C.onKeyDown.apply(C,arguments)},keyup:function(){return C.onKeyUp.apply(C,arguments)},keypress:function(){return C.onKeyPress.apply(C,arguments)},resize:function(){C.positionDropdown.apply(C,[])},blur:function(){return C.onBlur.apply(C,arguments)},focus:function(){return C.ignoreBlur=!1,C.onFocus.apply(C,arguments)},paste:function(){return C.onPaste.apply(C,arguments)}}),x.on("keydown"+D,function(e){C.isCmdDown=e[s?"metaKey":"ctrlKey"],C.isCtrlDown=e[s?"altKey":"ctrlKey"],C.isShiftDown=e.shiftKey}),x.on("keyup"+D,function(e){e.keyCode===a&&(C.isCtrlDown=!1),16===e.keyCode&&(C.isShiftDown=!1),e.keyCode===r&&(C.isCmdDown=!1)}),x.on("mousedown"+D,function(e){if(C.isFocused){if(e.target===C.$dropdown[0]||e.target.parentNode===C.$dropdown[0])return!1;C.$control.has(e.target).length||e.target===C.$control[0]||C.blur(e.target)}}),w.on(["scroll"+D,"resize"+D].join(" "),function(){C.isOpen&&C.positionDropdown.apply(C,arguments)}),w.on("mousemove"+D,function(){C.ignoreHover=!1}),this.revertSettings={$children:k.children().detach(),tabindex:k.attr("tabindex")},k.attr("tabindex",-1).hide().after(C.$wrapper),e.isArray(_.items)&&(C.setValue(_.items),delete _.items),l&&k.on("invalid"+D,function(e){e.preventDefault(),C.isInvalid=!0,C.refreshState()}),C.updateOriginalInput(),C.refreshItems(),C.refreshState(),C.updatePlaceholder(),C.isSetup=!0,k.is(":disabled")&&C.disable(),C.on("change",this.onChange),k.data("selectize",C),k.addClass("selectized"),C.trigger("initialize"),!0===_.preload&&C.onSearchChange("")},setupTemplates:function(){var t=this.settings.labelField,i=this.settings.optgroupLabelField,n={optgroup:function(e){return'<div class="optgroup">'+e.html+"</div>"},optgroup_header:function(e,t){return'<div class="optgroup-header">'+t(e[i])+"</div>"},option:function(e,i){return'<div class="option">'+i(e[t])+"</div>"},item:function(e,i){return'<div class="item">'+i(e[t])+"</div>"},option_create:function(e,t){return'<div class="create">Add <strong>'+t(e.input)+"</strong>&hellip;</div>"}};this.settings.render=e.extend({},n,this.settings.render)},setupCallbacks:function(){var e,t,i={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(e in i)i.hasOwnProperty(e)&&(t=this.settings[i[e]])&&this.on(e,t)},onClick:function(e){this.isFocused&&this.isOpen||(this.focus(),e.preventDefault())},onMouseDown:function(t){var i=this,n=t.isDefaultPrevented();e(t.target);if(i.isFocused){if(t.target!==i.$control_input[0])return"single"===i.settings.mode?i.isOpen?i.close():i.open():n||i.setActiveItem(null),!1}else n||window.setTimeout(function(){i.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(t){var i=this;i.isFull()||i.isInputHidden||i.isLocked?t.preventDefault():i.settings.splitOn&&setTimeout(function(){var t=i.$control_input.val();if(t.match(i.settings.splitOn))for(var n=e.trim(t).split(i.settings.splitOn),o=0,s=n.length;o<s;o++)i.createItem(n[o])},0)},onKeyPress:function(e){if(this.isLocked)return e&&e.preventDefault();var t=String.fromCharCode(e.keyCode||e.which);return this.settings.create&&"multi"===this.settings.mode&&t===this.settings.delimiter?(this.createItem(),e.preventDefault(),!1):void 0},onKeyDown:function(e){e.target,this.$control_input[0];if(this.isLocked)9!==e.keyCode&&e.preventDefault();else{switch(e.keyCode){case 65:if(this.isCmdDown)return void this.selectAll();break;case 27:return void(this.isOpen&&(e.preventDefault(),e.stopPropagation(),this.close()));case 78:if(!e.ctrlKey||e.altKey)break;case 40:if(!this.isOpen&&this.hasOptions)this.open();else if(this.$activeOption){this.ignoreHover=!0;var t=this.getAdjacentOption(this.$activeOption,1);t.length&&this.setActiveOption(t,!0,!0)}return void e.preventDefault();case 80:if(!e.ctrlKey||e.altKey)break;case 38:if(this.$activeOption){this.ignoreHover=!0;var i=this.getAdjacentOption(this.$activeOption,-1);i.length&&this.setActiveOption(i,!0,!0)}return void e.preventDefault();case 13:return void(this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),e.preventDefault()));case 37:return void this.advanceSelection(-1,e);case 39:return void this.advanceSelection(1,e);case 9:return this.settings.selectOnTab&&this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),this.isFull()||e.preventDefault()),void(this.settings.create&&this.createItem()&&e.preventDefault());case 8:case 46:return void this.deleteSelection(e)}!this.isFull()&&!this.isInputHidden||(s?e.metaKey:e.ctrlKey)||e.preventDefault()}},onKeyUp:function(e){if(this.isLocked)return e&&e.preventDefault();var t=this.$control_input.val()||"";this.lastValue!==t&&(this.lastValue=t,this.onSearchChange(t),this.refreshOptions(),this.trigger("type",t))},onSearchChange:function(e){var t=this,i=t.settings.load;i&&(t.loadedSearches.hasOwnProperty(e)||(t.loadedSearches[e]=!0,t.load(function(n){i.apply(t,[e,n])})))},onFocus:function(e){var t=this.isFocused;if(this.isDisabled)return this.blur(),e&&e.preventDefault(),!1;this.ignoreFocus||(this.isFocused=!0,"focus"===this.settings.preload&&this.onSearchChange(""),t||this.trigger("focus"),this.$activeItems.length||(this.showInput(),this.setActiveItem(null),this.refreshOptions(!!this.settings.openOnFocus)),this.refreshState())},onBlur:function(e,t){var i=this;if(i.isFocused&&(i.isFocused=!1,!i.ignoreFocus)){if(!i.ignoreBlur&&document.activeElement===i.$dropdown_content[0])return i.ignoreBlur=!0,void i.onFocus(e);var n=function(){i.close(),i.setTextboxValue(""),i.setActiveItem(null),i.setActiveOption(null),i.setCaret(i.items.length),i.refreshState(),t&&t.focus&&t.focus(),i.isBlurring=!1,i.ignoreFocus=!1,i.trigger("blur")};i.isBlurring=!0,i.ignoreFocus=!0,i.settings.create&&i.settings.createOnBlur?i.createItem(null,!1,n):n()}},onOptionHover:function(e){this.ignoreHover||this.setActiveOption(e.currentTarget,!1)},onOptionSelect:function(t){var i,n,o=this;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),(n=e(t.currentTarget)).hasClass("create")?o.createItem(null,function(){o.settings.closeAfterSelect&&o.close()}):void 0!==(i=n.attr("data-value"))&&(o.lastQuery=null,o.setTextboxValue(""),o.addItem(i),o.settings.closeAfterSelect?o.close():!o.settings.hideSelected&&t.type&&/mouse/.test(t.type)&&o.setActiveOption(o.getOption(i)))},onItemSelect:function(e){this.isLocked||"multi"===this.settings.mode&&(e.preventDefault(),this.setActiveItem(e.currentTarget,e))},load:function(e){var t=this,i=t.$wrapper.addClass(t.settings.loadingClass);t.loading++,e.apply(t,[function(e){t.loading=Math.max(t.loading-1,0),e&&e.length&&(t.addOption(e),t.refreshOptions(t.isFocused&&!t.isInputHidden)),t.loading||i.removeClass(t.settings.loadingClass),t.trigger("load",e)}])},setTextboxValue:function(e){var t=this.$control_input;t.val()!==e&&(t.val(e).triggerHandler("update"),this.lastValue=e)},getValue:function(){return 1===this.tagType&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(e,t){p(this,t?[]:["change"],function(){this.clear(t),this.addItems(e,t)})},setActiveItem:function(t,i){var n,o,s,r,a,l,c,u;if("single"!==this.settings.mode){if(!(t=e(t)).length)return e(this.$activeItems).removeClass("active"),this.$activeItems=[],void(this.isFocused&&this.showInput());if("mousedown"===(n=i&&i.type.toLowerCase())&&this.isShiftDown&&this.$activeItems.length){for(u=this.$control.children(".active:last"),(r=Array.prototype.indexOf.apply(this.$control[0].childNodes,[u[0]]))>(a=Array.prototype.indexOf.apply(this.$control[0].childNodes,[t[0]]))&&(c=r,r=a,a=c),o=r;o<=a;o++)l=this.$control[0].childNodes[o],-1===this.$activeItems.indexOf(l)&&(e(l).addClass("active"),this.$activeItems.push(l));i.preventDefault()}else"mousedown"===n&&this.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("active")?(s=this.$activeItems.indexOf(t[0]),this.$activeItems.splice(s,1),t.removeClass("active")):this.$activeItems.push(t.addClass("active")[0]):(e(this.$activeItems).removeClass("active"),this.$activeItems=[t.addClass("active")[0]]);this.hideInput(),this.isFocused||this.focus()}},setActiveOption:function(t,i,n){var o,s,r,a,l;this.$activeOption&&this.$activeOption.removeClass("active"),this.$activeOption=null,(t=e(t)).length&&(this.$activeOption=t.addClass("active"),!i&&c(i)||(o=this.$dropdown_content.height(),s=this.$activeOption.outerHeight(!0),i=this.$dropdown_content.scrollTop()||0,a=r=this.$activeOption.offset().top-this.$dropdown_content.offset().top+i,l=r-o+s,r+s>o+i?this.$dropdown_content.stop().animate({scrollTop:l},n?this.settings.scrollDuration:0):r<i&&this.$dropdown_content.stop().animate({scrollTop:a},n?this.settings.scrollDuration:0)))},selectAll:function(){"single"!==this.settings.mode&&(this.$activeItems=Array.prototype.slice.apply(this.$control.children(":not(input)").addClass("active")),this.$activeItems.length&&(this.hideInput(),this.close()),this.focus())},hideInput:function(){this.setTextboxValue(""),this.$control_input.css({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var e=this;e.isDisabled||(e.ignoreFocus=!0,e.$control_input[0].focus(),window.setTimeout(function(){e.ignoreFocus=!1,e.onFocus()},0))},blur:function(e){this.$control_input[0].blur(),this.onBlur(null,e)},getScoreFunction:function(e){return this.sifter.getScoreFunction(e,this.getSearchOptions())},getSearchOptions:function(){var e=this.settings,t=e.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:e.searchField,conjunction:e.searchConjunction,sort:t,nesting:e.nesting}},search:function(t){var i,n,o,s=this.settings,r=this.getSearchOptions();if(s.score&&"function"!=typeof(o=this.settings.score.apply(this,[t])))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==this.lastQuery?(this.lastQuery=t,n=this.sifter.search(t,e.extend(r,{score:o})),this.currentResults=n):n=e.extend(!0,{},this.currentResults),s.hideSelected)for(i=n.items.length-1;i>=0;i--)-1!==this.items.indexOf(u(n.items[i].id))&&n.items.splice(i,1);return n},refreshOptions:function(t){var i,o,s,r,a,l,c,d,h,p,f,m,g,v,y,b;void 0===t&&(t=!0);var C,_,D=this,w=e.trim(D.$control_input.val()),x=D.search(w),k=D.$dropdown_content,E=D.$activeOption&&u(D.$activeOption.attr("data-value"));for(r=x.items.length,"number"==typeof D.settings.maxOptions&&(r=Math.min(r,D.settings.maxOptions)),a={},l=[],i=0;i<r;i++)for(c=D.options[x.items[i].id],d=D.render("option",c),h=c[D.settings.optgroupField]||"",o=0,s=(p=e.isArray(h)?h:[h])&&p.length;o<s;o++)h=p[o],D.optgroups.hasOwnProperty(h)||(h=""),a.hasOwnProperty(h)||(a[h]=document.createDocumentFragment(),l.push(h)),a[h].appendChild(d);for(this.settings.lockOptgroupOrder&&l.sort(function(e,t){return(D.optgroups[e].$order||0)-(D.optgroups[t].$order||0)}),f=document.createDocumentFragment(),i=0,r=l.length;i<r;i++)h=l[i],D.optgroups.hasOwnProperty(h)&&a[h].childNodes.length?((m=document.createDocumentFragment()).appendChild(D.render("optgroup_header",D.optgroups[h])),m.appendChild(a[h]),f.appendChild(D.render("optgroup",e.extend({},D.optgroups[h],{html:(C=m,_=void 0,_=document.createElement("div"),_.appendChild(C.cloneNode(!0)),_.innerHTML),dom:m})))):f.appendChild(a[h]);if(k.html(f),D.settings.highlight&&(k.removeHighlight(),x.query.length&&x.tokens.length))for(i=0,r=x.tokens.length;i<r;i++)n(k,x.tokens[i].regex);if(!D.settings.hideSelected)for(i=0,r=D.items.length;i<r;i++)D.getOption(D.items[i]).addClass("selected");(g=D.canCreate(w))&&(k.prepend(D.render("option_create",{input:w})),b=e(k[0].childNodes[0])),D.hasOptions=x.items.length>0||g,D.hasOptions?(x.items.length>0?((y=E&&D.getOption(E))&&y.length?v=y:"single"===D.settings.mode&&D.items.length&&(v=D.getOption(D.items[0])),v&&v.length||(v=b&&!D.settings.addPrecedence?D.getAdjacentOption(b,1):k.find("[data-selectable]:first"))):v=b,D.setActiveOption(v),t&&!D.isOpen&&D.open()):(D.setActiveOption(null),t&&D.isOpen&&D.close())},addOption:function(t){var i,n,o;if(e.isArray(t))for(i=0,n=t.length;i<n;i++)this.addOption(t[i]);else(o=this.registerOption(t))&&(this.userOptions[o]=!0,this.lastQuery=null,this.trigger("option_add",o,t))},registerOption:function(e){var t=u(e[this.settings.valueField]);return void 0!==t&&null!==t&&!this.options.hasOwnProperty(t)&&(e.$order=e.$order||++this.order,this.options[t]=e,t)},registerOptionGroup:function(e){var t=u(e[this.settings.optgroupValueField]);return!!t&&(e.$order=e.$order||++this.order,this.optgroups[t]=e,t)},addOptionGroup:function(e,t){t[this.settings.optgroupValueField]=e,(e=this.registerOptionGroup(t))&&this.trigger("optgroup_add",e,t)},removeOptionGroup:function(e){this.optgroups.hasOwnProperty(e)&&(delete this.optgroups[e],this.renderCache={},this.trigger("optgroup_remove",e))},clearOptionGroups:function(){this.optgroups={},this.renderCache={},this.trigger("optgroup_clear")},updateOption:function(t,i){var n,o,s,r,a,l,c;if(t=u(t),s=u(i[this.settings.valueField]),null!==t&&this.options.hasOwnProperty(t)){if("string"!=typeof s)throw new Error("Value must be set in option data");c=this.options[t].$order,s!==t&&(delete this.options[t],-1!==(r=this.items.indexOf(t))&&this.items.splice(r,1,s)),i.$order=i.$order||c,this.options[s]=i,a=this.renderCache.item,l=this.renderCache.option,a&&(delete a[t],delete a[s]),l&&(delete l[t],delete l[s]),-1!==this.items.indexOf(s)&&(n=this.getItem(t),o=e(this.render("item",i)),n.hasClass("active")&&o.addClass("active"),n.replaceWith(o)),this.lastQuery=null,this.isOpen&&this.refreshOptions(!1)}},removeOption:function(e,t){e=u(e);var i=this.renderCache.item,n=this.renderCache.option;i&&delete i[e],n&&delete n[e],delete this.userOptions[e],delete this.options[e],this.lastQuery=null,this.trigger("option_remove",e),this.removeItem(e,t)},clearOptions:function(){var t=this;t.loadedSearches={},t.userOptions={},t.renderCache={};var i=t.options;e.each(t.options,function(e,n){-1==t.items.indexOf(e)&&delete i[e]}),t.options=t.sifter.items=i,t.lastQuery=null,t.trigger("option_clear")},getOption:function(e){return this.getElementWithValue(e,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(t,i){var n=this.$dropdown.find("[data-selectable]"),o=n.index(t)+i;return o>=0&&o<n.length?n.eq(o):e()},getElementWithValue:function(t,i){if(void 0!==(t=u(t))&&null!==t)for(var n=0,o=i.length;n<o;n++)if(i[n].getAttribute("data-value")===t)return e(i[n]);return e()},getItem:function(e){return this.getElementWithValue(e,this.$control.children())},addItems:function(t,i){this.buffer=document.createDocumentFragment();for(var n=this.$control[0].childNodes,o=0;o<n.length;o++)this.buffer.appendChild(n[o]);for(var s=e.isArray(t)?t:[t],r=(o=0,s.length);o<r;o++)this.isPending=o<r-1,this.addItem(s[o],i);var a=this.$control[0];a.insertBefore(this.buffer,a.firstChild),this.buffer=null},addItem:function(t,i){p(this,i?[]:["change"],function(){var n,o,s,r,a,l=this.settings.mode;t=u(t),-1===this.items.indexOf(t)?this.options.hasOwnProperty(t)&&("single"===l&&this.clear(i),"multi"===l&&this.isFull()||(n=e(this.render("item",this.options[t])),a=this.isFull(),this.items.splice(this.caretPos,0,t),this.insertAtCaret(n),(!this.isPending||!a&&this.isFull())&&this.refreshState(),this.isSetup&&(s=this.$dropdown_content.find("[data-selectable]"),this.isPending||(o=this.getOption(t),r=this.getAdjacentOption(o,1).attr("data-value"),this.refreshOptions(this.isFocused&&"single"!==l),r&&this.setActiveOption(this.getOption(r))),!s.length||this.isFull()?this.close():this.isPending||this.positionDropdown(),this.updatePlaceholder(),this.trigger("item_add",t,n),this.isPending||this.updateOriginalInput({silent:i})))):"single"===l&&this.close()})},removeItem:function(t,i){var n,o,s;n=t instanceof e?t:this.getItem(t),t=u(n.attr("data-value")),-1!==(o=this.items.indexOf(t))&&(n.remove(),n.hasClass("active")&&(s=this.$activeItems.indexOf(n[0]),this.$activeItems.splice(s,1)),this.items.splice(o,1),this.lastQuery=null,!this.settings.persist&&this.userOptions.hasOwnProperty(t)&&this.removeOption(t,i),o<this.caretPos&&this.setCaret(this.caretPos-1),this.refreshState(),this.updatePlaceholder(),this.updateOriginalInput({silent:i}),this.positionDropdown(),this.trigger("item_remove",t,n))},createItem:function(t,i){var n=this,o=n.caretPos;t=t||e.trim(n.$control_input.val()||"");var s=arguments[arguments.length-1];if("function"!=typeof s&&(s=function(){}),"boolean"!=typeof i&&(i=!0),!n.canCreate(t))return s(),!1;n.lock();var r,a,l="function"==typeof n.settings.create?this.settings.create:function(e){var t={};return t[n.settings.labelField]=e,t[n.settings.valueField]=e,t},c=(r=function(e){if(n.unlock(),!e||"object"!=typeof e)return s();var t=u(e[n.settings.valueField]);if("string"!=typeof t)return s();n.setTextboxValue(""),n.addOption(e),n.setCaret(o),n.addItem(t),n.refreshOptions(i&&"single"!==n.settings.mode),s(e)},a=!1,function(){a||(a=!0,r.apply(this,arguments))}),d=l.apply(this,[t,c]);return void 0!==d&&c(d),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.refreshValidityState(),this.refreshClasses()},refreshValidityState:function(){if(!this.isRequired)return!1;var e=!this.items.length;this.isInvalid=e,this.$control_input.prop("required",e),this.$input.prop("required",!e)},refreshClasses:function(){var t=this.isFull(),i=this.isLocked;this.$wrapper.toggleClass("rtl",this.rtl),this.$control.toggleClass("focus",this.isFocused).toggleClass("disabled",this.isDisabled).toggleClass("required",this.isRequired).toggleClass("invalid",this.isInvalid).toggleClass("locked",i).toggleClass("full",t).toggleClass("not-full",!t).toggleClass("input-active",this.isFocused&&!this.isInputHidden).toggleClass("dropdown-active",this.isOpen).toggleClass("has-options",!e.isEmptyObject(this.options)).toggleClass("has-items",this.items.length>0),this.$control_input.data("grow",!t&&!i)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(e){var t,i,n,o;if(e=e||{},1===this.tagType){for(n=[],t=0,i=this.items.length;t<i;t++)o=this.options[this.items[t]][this.settings.labelField]||"",n.push('<option value="'+d(this.items[t])+'" selected="selected">'+d(o)+"</option>");n.length||this.$input.attr("multiple")||n.push('<option value="" selected="selected"></option>'),this.$input.html(n.join(""))}else this.$input.val(this.getValue()),this.$input.attr("value",this.$input.val());this.isSetup&&(e.silent||this.trigger("change",this.$input.val()))},updatePlaceholder:function(){if(this.settings.placeholder){var e=this.$control_input;this.items.length?e.removeAttr("placeholder"):e.attr("placeholder",this.settings.placeholder),e.triggerHandler("update",{force:!0})}},open:function(){this.isLocked||this.isOpen||"multi"===this.settings.mode&&this.isFull()||(this.focus(),this.isOpen=!0,this.refreshState(),this.$dropdown.css({visibility:"hidden",display:"block"}),this.positionDropdown(),this.$dropdown.css({visibility:"visible"}),this.trigger("dropdown_open",this.$dropdown))},close:function(){var e=this.isOpen;"single"===this.settings.mode&&this.items.length&&(this.hideInput(),this.isBlurring||this.$control_input.blur()),this.isOpen=!1,this.$dropdown.hide(),this.setActiveOption(null),this.refreshState(),e&&this.trigger("dropdown_close",this.$dropdown)},positionDropdown:function(){var e=this.$control,t="body"===this.settings.dropdownParent?e.offset():e.position();t.top+=e.outerHeight(!0),this.$dropdown.css({width:e[0].getBoundingClientRect().width,top:t.top,left:t.left})},clear:function(e){this.items.length&&(this.$control.children(":not(input)").remove(),this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(null),this.updatePlaceholder(),this.updateOriginalInput({silent:e}),this.refreshState(),this.showInput(),this.trigger("clear"))},insertAtCaret:function(e){var t=Math.min(this.caretPos,this.items.length),i=e[0],n=this.buffer||this.$control[0];0===t?n.insertBefore(i,n.firstChild):n.insertBefore(i,n.childNodes[t]),this.setCaret(t+1)},deleteSelection:function(t){var i,n,o,s,r,a,l,c,u;if(o=t&&8===t.keyCode?-1:1,s=f(this.$control_input[0]),this.$activeOption&&!this.settings.hideSelected&&(l=this.getAdjacentOption(this.$activeOption,-1).attr("data-value")),r=[],this.$activeItems.length){for(u=this.$control.children(".active:"+(o>0?"last":"first")),a=this.$control.children(":not(input)").index(u),o>0&&a++,i=0,n=this.$activeItems.length;i<n;i++)r.push(e(this.$activeItems[i]).attr("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(this.isFocused||"single"===this.settings.mode)&&this.items.length&&(o<0&&0===s.start&&0===s.length?r.push(this.items[this.caretPos-1]):o>0&&s.start===this.$control_input.val().length&&r.push(this.items[this.caretPos]));if(!r.length||"function"==typeof this.settings.onDelete&&!1===this.settings.onDelete.apply(this,[r]))return!1;for(void 0!==a&&this.setCaret(a);r.length;)this.removeItem(r.pop());return this.showInput(),this.positionDropdown(),this.refreshOptions(!0),l&&(c=this.getOption(l)).length&&this.setActiveOption(c),!0},advanceSelection:function(e,t){var i,n,o,s,r;0!==e&&(this.rtl&&(e*=-1),i=e>0?"last":"first",n=f(this.$control_input[0]),this.isFocused&&!this.isInputHidden?(s=this.$control_input.val().length,(e<0?0===n.start&&0===n.length:n.start===s)&&!s&&this.advanceCaret(e,t)):(r=this.$control.children(".active:"+i)).length&&(o=this.$control.children(":not(input)").index(r),this.setActiveItem(null),this.setCaret(e>0?o+1:o)))},advanceCaret:function(e,t){var i,n;0!==e&&(i=e>0?"next":"prev",this.isShiftDown?(n=this.$control_input[i]()).length&&(this.hideInput(),this.setActiveItem(n),t&&t.preventDefault()):this.setCaret(this.caretPos+e))},setCaret:function(t){var i,n,o,s;if(t="single"===this.settings.mode?this.items.length:Math.max(0,Math.min(this.items.length,t)),!this.isPending)for(i=0,n=(o=this.$control.children(":not(input)")).length;i<n;i++)s=e(o[i]).detach(),i<t?this.$control_input.before(s):this.$control.append(s);this.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.$input.prop("disabled",!0),this.$control_input.prop("disabled",!0).prop("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){this.$input.prop("disabled",!1),this.$control_input.prop("disabled",!1).prop("tabindex",this.tabIndex),this.isDisabled=!1,this.unlock()},destroy:function(){var t=this.eventNS,i=this.revertSettings;this.trigger("destroy"),this.off(),this.$wrapper.remove(),this.$dropdown.remove(),this.$input.html("").append(i.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:i.tabindex}).show(),this.$control_input.removeData("grow"),this.$input.removeData("selectize"),0==--g.count&&g.$testInput&&(g.$testInput.remove(),g.$testInput=void 0),e(window).off(t),e(document).off(t),e(document.body).off(t),delete this.$input[0].selectize},render:function(t,i){var n,o,s="",r=!1;return"option"!==t&&"item"!==t||(r=!!(n=u(i[this.settings.valueField]))),r&&(c(this.renderCache[t])||(this.renderCache[t]={}),this.renderCache[t].hasOwnProperty(n))?this.renderCache[t][n]:(s=e(this.settings.render[t].apply(this,[i,d])),"option"===t||"option_create"===t?i[this.settings.disabledField]||s.attr("data-selectable",""):"optgroup"===t&&(o=i[this.settings.optgroupValueField]||"",s.attr("data-group",o),i[this.settings.disabledField]&&s.attr("data-disabled","")),"option"!==t&&"item"!==t||s.attr("data-value",n||""),r&&(this.renderCache[t][n]=s[0]),s[0])},clearCache:function(e){void 0===e?this.renderCache={}:delete this.renderCache[e]},canCreate:function(e){if(!this.settings.create)return!1;var t=this.settings.createFilter;return e.length&&("function"!=typeof t||t.apply(this,[e]))&&("string"!=typeof t||new RegExp(t).test(e))&&(!(t instanceof RegExp)||t.test(e))}}),g.count=0,g.defaults={options:[],optgroups:[],plugins:[],delimiter:",",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,scrollDuration:60,loadThrottle:300,loadingClass:"loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",disabledField:"disabled",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},e.fn.selectize=function(t){var i=e.fn.selectize.defaults,n=e.extend({},i,t),o=n.dataAttr,s=n.labelField,r=n.valueField,a=n.disabledField,l=n.optgroupField,c=n.optgroupLabelField,d=n.optgroupValueField;return this.each(function(){if(!this.selectize){var h=e(this),p=this.tagName.toLowerCase(),f=h.attr("placeholder")||h.attr("data-placeholder");f||n.allowEmptyOption||(f=h.children('option[value=""]').text());var m={placeholder:f,options:[],optgroups:[],items:[]};"select"===p?function(t,i){var h,p,f,m,g=i.options,v={},y=function(e){var t=o&&e.attr(o);return"string"==typeof t&&t.length?JSON.parse(t):null},b=function(t,o){t=e(t);var c=u(t.val());if(c||n.allowEmptyOption)if(v.hasOwnProperty(c)){if(o){var d=v[c][l];d?e.isArray(d)?d.push(o):v[c][l]=[d,o]:v[c][l]=o}}else{var h=y(t)||{};h[s]=h[s]||t.text(),h[r]=h[r]||c,h[a]=h[a]||t.prop("disabled"),h[l]=h[l]||o,v[c]=h,g.push(h),t.is(":selected")&&i.items.push(c)}},C=function(t){var n,o,s,r,l;for((s=(t=e(t)).attr("label"))&&((r=y(t)||{})[c]=s,r[d]=s,r[a]=t.prop("disabled"),i.optgroups.push(r)),n=0,o=(l=e("option",t)).length;n<o;n++)b(l[n],s)};for(i.maxItems=t.attr("multiple")?null:1,h=0,p=(m=t.children()).length;h<p;h++)"optgroup"===(f=m[h].tagName.toLowerCase())?C(m[h]):"option"===f&&b(m[h])}(h,m):function(t,i){var a,l,c,u,d=t.attr(o);if(d)for(i.options=JSON.parse(d),a=0,l=i.options.length;a<l;a++)i.items.push(i.options[a][r]);else{var h=e.trim(t.val()||"");if(!n.allowEmptyOption&&!h.length)return;for(a=0,l=(c=h.split(n.delimiter)).length;a<l;a++)(u={})[s]=c[a],u[r]=c[a],i.options.push(u);i.items=c}}(h,m),new g(h,e.extend(!0,{},i,m,t))}})},e.fn.selectize.defaults=g.defaults,e.fn.selectize.support={validity:l},g.define("drag_drop",function(t){if(!e.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var i,n=this;n.lock=(i=n.lock,function(){var e=n.$control.data("sortable");return e&&e.disable(),i.apply(n,arguments)}),n.unlock=function(){var e=n.unlock;return function(){var t=n.$control.data("sortable");return t&&t.enable(),e.apply(n,arguments)}}(),n.setup=function(){var t=n.setup;return function(){t.apply(this,arguments);var i=n.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:n.isLocked,start:function(e,t){t.placeholder.css("width",t.helper.css("width")),i.css({overflow:"visible"})},stop:function(){i.css({overflow:"hidden"});var t=n.$activeItems?n.$activeItems.slice():null,o=[];i.children("[data-value]").each(function(){o.push(e(this).attr("data-value"))}),n.setValue(o),n.setActiveItem(t)}})}}()}}),g.define("dropdown_header",function(t){var i,n=this;t=e.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(e){return'<div class="'+e.headerClass+'"><div class="'+e.titleRowClass+'"><span class="'+e.labelClass+'">'+e.title+'</span><a href="javascript:void(0)" class="'+e.closeClass+'">&times;</a></div></div>'}},t),n.setup=(i=n.setup,function(){i.apply(n,arguments),n.$dropdown_header=e(t.html(t)),n.$dropdown.prepend(n.$dropdown_header)})}),g.define("optgroup_columns",function(t){var i,n=this;t=e.extend({equalizeWidth:!0,equalizeHeight:!0},t),this.getAdjacentOption=function(t,i){var n=t.closest("[data-group]").find("[data-selectable]"),o=n.index(t)+i;return o>=0&&o<n.length?n.eq(o):e()},this.onKeyDown=(i=n.onKeyDown,function(e){var t,o,s,r;return!this.isOpen||37!==e.keyCode&&39!==e.keyCode?i.apply(this,arguments):(n.ignoreHover=!0,t=(r=this.$activeOption.closest("[data-group]")).find("[data-selectable]").index(this.$activeOption),void((o=(s=(r=37===e.keyCode?r.prev("[data-group]"):r.next("[data-group]")).find("[data-selectable]")).eq(Math.min(s.length-1,t))).length&&this.setActiveOption(o)))});var o=function(){var e,t=o.width,i=document;return void 0===t&&((e=i.createElement("div")).innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',e=e.firstChild,i.body.appendChild(e),t=o.width=e.offsetWidth-e.clientWidth,i.body.removeChild(e)),t},s=function(){var i,s,r,a,l,c,u;if((s=(u=e("[data-group]",n.$dropdown_content)).length)&&n.$dropdown_content.width()){if(t.equalizeHeight){for(r=0,i=0;i<s;i++)r=Math.max(r,u.eq(i).height());u.css({height:r})}t.equalizeWidth&&(c=n.$dropdown_content.innerWidth()-o(),a=Math.round(c/s),u.css({width:a}),s>1&&(l=c-a*(s-1),u.eq(s-1).css({width:l})))}};(t.equalizeHeight||t.equalizeWidth)&&(h.after(this,"positionDropdown",s),h.after(this,"refreshOptions",s))}),g.define("remove_button",function(t){t=e.extend({label:"&times;",title:"Remove",className:"remove",append:!0},t);"single"!==this.settings.mode?function(t,i){var n,o=t,s='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+d(i.title)+'">'+i.label+"</a>";t.setup=(n=o.setup,function(){if(i.append){var r=o.settings.render.item;o.settings.render.item=function(e){return i=r.apply(t,arguments),n=s,o=i.search(/(<\/[^>]+>\s*)$/),i.substring(0,o)+n+i.substring(o);var i,n,o}}n.apply(t,arguments),t.$control.on("click","."+i.className,function(t){if(t.preventDefault(),!o.isLocked){var i=e(t.currentTarget).parent();o.setActiveItem(i),o.deleteSelection()&&o.setCaret(o.items.length)}})})}(this,t):function(t,i){i.className="remove-single";var n,o=t,s='<a href="javascript:void(0)" class="'+i.className+'" tabindex="-1" title="'+d(i.title)+'">'+i.label+"</a>";t.setup=(n=o.setup,function(){if(i.append){var r=e(o.$input.context).attr("id"),a=(e("#"+r),o.settings.render.item);o.settings.render.item=function(i){return n=a.apply(t,arguments),o=s,e("<span>").append(n).append(o);var n,o}}n.apply(t,arguments),t.$control.on("click","."+i.className,function(e){e.preventDefault(),o.isLocked||o.clear()})})}(this,t)}),g.define("restore_on_backspace",function(e){var t,i=this;e.text=e.text||function(e){return e[this.settings.labelField]},this.onKeyDown=(t=i.onKeyDown,function(i){var n,o;return 8===i.keyCode&&""===this.$control_input.val()&&!this.$activeItems.length&&(n=this.caretPos-1)>=0&&n<this.items.length?(o=this.options[this.items[n]],this.deleteSelection(i)&&(this.setTextboxValue(e.text.apply(this,[o])),this.refreshOptions(!0)),void i.preventDefault()):t.apply(this,arguments)})}),g},o=[i(1),i(100),i(101)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)},function(e,t,i){var n,o;void 0===(o="function"==typeof(n=function(){var e=function(e,t){this.items=e,this.settings=t||{diacritics:!0}};e.prototype.tokenize=function(e){if(!(e=o(String(e||"").toLowerCase()))||!e.length)return[];var t,i,n,r,l=[],c=e.split(/ +/);for(t=0,i=c.length;t<i;t++){if(n=s(c[t]),this.settings.diacritics)for(r in a)a.hasOwnProperty(r)&&(n=n.replace(new RegExp(r,"g"),a[r]));l.push({string:c[t],regex:new RegExp(n,"i")})}return l},e.prototype.iterator=function(e,t){(r(e)?Array.prototype.forEach||function(e){for(var t=0,i=this.length;t<i;t++)e(this[t],t,this)}:function(e){for(var t in this)this.hasOwnProperty(t)&&e(this[t],t,this)}).apply(e,[t])},e.prototype.getScoreFunction=function(e,t){var i,o,s,r;e=this.prepareSearch(e,t),o=e.tokens,i=e.options.fields,s=o.length,r=e.options.nesting;var a,l=function(e,t){var i,n;return e?-1===(n=(e=String(e||"")).search(t.regex))?0:(i=t.string.length/e.length,0===n&&(i+=.5),i):0},c=(a=i.length)?1===a?function(e,t){return l(n(t,i[0],r),e)}:function(e,t){for(var o=0,s=0;o<a;o++)s+=l(n(t,i[o],r),e);return s/a}:function(){return 0};return s?1===s?function(e){return c(o[0],e)}:"and"===e.options.conjunction?function(e){for(var t,i=0,n=0;i<s;i++){if((t=c(o[i],e))<=0)return 0;n+=t}return n/s}:function(e){for(var t=0,i=0;t<s;t++)i+=c(o[t],e);return i/s}:function(){return 0}},e.prototype.getSortFunction=function(e,i){var o,s,r,a,l,c,u,d,h,p,f;if(f=!(e=(r=this).prepareSearch(e,i)).query&&i.sort_empty||i.sort,h=function(e,t){return"$score"===e?t.score:n(r.items[t.id],e,i.nesting)},l=[],f)for(o=0,s=f.length;o<s;o++)(e.query||"$score"!==f[o].field)&&l.push(f[o]);if(e.query){for(p=!0,o=0,s=l.length;o<s;o++)if("$score"===l[o].field){p=!1;break}p&&l.unshift({field:"$score",direction:"desc"})}else for(o=0,s=l.length;o<s;o++)if("$score"===l[o].field){l.splice(o,1);break}for(d=[],o=0,s=l.length;o<s;o++)d.push("desc"===l[o].direction?-1:1);return(c=l.length)?1===c?(a=l[0].field,u=d[0],function(e,i){return u*t(h(a,e),h(a,i))}):function(e,i){var n,o,s;for(n=0;n<c;n++)if(s=l[n].field,o=d[n]*t(h(s,e),h(s,i)))return o;return 0}:null},e.prototype.prepareSearch=function(e,t){if("object"==typeof e)return e;var n=(t=i({},t)).fields,o=t.sort,s=t.sort_empty;return n&&!r(n)&&(t.fields=[n]),o&&!r(o)&&(t.sort=[o]),s&&!r(s)&&(t.sort_empty=[s]),{options:t,query:String(e||"").toLowerCase(),tokens:this.tokenize(e),total:0,items:[]}},e.prototype.search=function(e,t){var i,n,o,s;return n=this.prepareSearch(e,t),t=n.options,e=n.query,s=t.score||this.getScoreFunction(n),e.length?this.iterator(this.items,function(e,o){i=s(e),(!1===t.filter||i>0)&&n.items.push({score:i,id:o})}):this.iterator(this.items,function(e,t){n.items.push({score:1,id:t})}),(o=this.getSortFunction(n,t))&&n.items.sort(o),n.total=n.items.length,"number"==typeof t.limit&&(n.items=n.items.slice(0,t.limit)),n};var t=function(e,t){return"number"==typeof e&&"number"==typeof t?e>t?1:e<t?-1:0:(e=l(String(e||"")))>(t=l(String(t||"")))?1:t>e?-1:0},i=function(e,t){var i,n,o,s;for(i=1,n=arguments.length;i<n;i++)if(s=arguments[i])for(o in s)s.hasOwnProperty(o)&&(e[o]=s[o]);return e},n=function(e,t,i){if(e&&t){if(!i)return e[t];for(var n=t.split(".");n.length&&(e=e[n.shift()]););return e}},o=function(e){return(e+"").replace(/^\s+|\s+$|/g,"")},s=function(e){return(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},r=Array.isArray||"undefined"!=typeof $&&$.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},a={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},l=function(){var e,t,i,n,o="",s={};for(i in a)if(a.hasOwnProperty(i))for(o+=n=a[i].substring(2,a[i].length-1),e=0,t=n.length;e<t;e++)s[n.charAt(e)]=i;var r=new RegExp("["+o+"]","g");return function(e){return e.replace(r,function(e){return s[e]}).toLowerCase()}}();return e})?n.call(t,i,t,e):n)||(e.exports=o)},function(e,t,i){var n,o;void 0===(o="function"==typeof(n=function(){var e={mixin:function(e){e.plugins={},e.prototype.initializePlugins=function(e){var i,n,o,s=[];if(this.plugins={names:[],settings:{},requested:{},loaded:{}},t.isArray(e))for(i=0,n=e.length;i<n;i++)"string"==typeof e[i]?s.push(e[i]):(this.plugins.settings[e[i].name]=e[i].options,s.push(e[i].name));else if(e)for(o in e)e.hasOwnProperty(o)&&(this.plugins.settings[o]=e[o],s.push(o));for(;s.length;)this.require(s.shift())},e.prototype.loadPlugin=function(t){var i=this.plugins,n=e.plugins[t];if(!e.plugins.hasOwnProperty(t))throw new Error('Unable to find "'+t+'" plugin');i.requested[t]=!0,i.loaded[t]=n.fn.apply(this,[this.plugins.settings[t]||{}]),i.names.push(t)},e.prototype.require=function(e){var t=this.plugins;if(!this.plugins.loaded.hasOwnProperty(e)){if(t.requested[e])throw new Error('Plugin has circular dependency ("'+e+'")');this.loadPlugin(e)}return t.loaded[e]},e.define=function(t,i){e.plugins[t]={name:t,fn:i}}}},t={isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}};return e})?n.call(t,i,t,e):n)||(e.exports=o)},function(e,t,i){var n,o,s;!function(r){"use strict";o=[i(1)],void 0===(s="function"==typeof(n=r)?n.apply(t,o):n)||(e.exports=s)}(function(e,t){"use strict";var i={beforeShow:u,move:u,change:u,show:u,hide:u,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},n=[],o=!!/msie/i.exec(window.navigator.userAgent),s=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div").style;return t.cssText="background-color:rgba(0,0,0,.5)",e(t.backgroundColor,"rgba")||e(t.backgroundColor,"hsla")}(),r=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),a=function(){var e="";if(o)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}();function l(t,i,n,o){for(var r=[],a=0;a<t.length;a++){var l=t[a];if(l){var c=tinycolor(l),u=c.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=tinycolor.equals(i,l)?" sp-thumb-active":"";var d=c.toString(o.preferredFormat||"rgb"),h=s?"background-color:"+c.toRgbString():"filter:"+c.toFilter();r.push('<span title="'+d+'" data-color="'+c.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+h+';" /></span>')}else{r.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="sp-clear-display"></span>').attr("title",o.noColorSelectedText)).html())}}return"<div class='sp-cf "+n+"'>"+r.join("")+"</div>"}function c(c,u){var m,g,v,y,b=function(t,n){var o=e.extend({},i,t);return o.callbacks={move:h(o.move,n),change:h(o.change,n),show:h(o.show,n),hide:h(o.hide,n),beforeShow:h(o.beforeShow,n)},o}(u,c),C=b.flat,_=b.showSelectionPalette,D=b.localStorageKey,w=b.theme,x=b.callbacks,k=(m=We,g=10,function(){var e=this,t=arguments;v&&clearTimeout(y),!v&&y||(y=setTimeout(function(){y=null,m.apply(e,t)},g))}),E=!1,S=!1,A=0,T=0,F=0,I=0,P=0,M=0,$=0,N=0,O=0,B=0,L=1,z=[],H=[],R={},j=b.selectionPalette.slice(0),W=b.maxSelectionSize,U="sp-dragging",q=null,V=c.ownerDocument,K=(V.body,e(c)),Y=!1,Q=e(a,V).addClass(w),G=Q.find(".sp-picker-container"),X=Q.find(".sp-color"),J=Q.find(".sp-dragger"),Z=Q.find(".sp-hue"),ee=Q.find(".sp-slider"),te=Q.find(".sp-alpha-inner"),ie=Q.find(".sp-alpha"),ne=Q.find(".sp-alpha-handle"),oe=Q.find(".sp-input"),se=Q.find(".sp-palette"),re=Q.find(".sp-initial"),ae=Q.find(".sp-cancel"),le=Q.find(".sp-clear"),ce=Q.find(".sp-choose"),ue=Q.find(".sp-palette-toggle"),de=K.is("input"),he=de&&"color"===K.attr("type")&&f(),pe=de&&!C,fe=pe?e(r).addClass(w).addClass(b.className).addClass(b.replacerClassName):e([]),me=pe?fe:K,ge=fe.find(".sp-preview-inner"),ve=b.color||de&&K.val(),ye=!1,be=b.preferredFormat,Ce=!b.showButtons||b.clickoutFiresChange,_e=!ve,De=b.allowEmpty&&!he;function we(){if(b.showPaletteOnly&&(b.showPalette=!0),ue.text(b.showPaletteOnly?b.togglePaletteMoreText:b.togglePaletteLessText),b.palette){z=b.palette.slice(0),H=e.isArray(z[0])?z:[z],R={};for(var t=0;t<H.length;t++)for(var i=0;i<H[t].length;i++){var n=tinycolor(H[t][i]).toRgbString();R[n]=!0}}Q.toggleClass("sp-flat",C),Q.toggleClass("sp-input-disabled",!b.showInput),Q.toggleClass("sp-alpha-enabled",b.showAlpha),Q.toggleClass("sp-clear-enabled",De),Q.toggleClass("sp-buttons-disabled",!b.showButtons),Q.toggleClass("sp-palette-buttons-disabled",!b.togglePaletteOnly),Q.toggleClass("sp-palette-disabled",!b.showPalette),Q.toggleClass("sp-palette-only",b.showPaletteOnly),Q.toggleClass("sp-initial-disabled",!b.showInitial),Q.addClass(b.className).addClass(b.containerClassName),We()}function xe(){if(D&&window.localStorage){try{var t=window.localStorage[D].split(",#");t.length>1&&(delete window.localStorage[D],e.each(t,function(e,t){ke(t)}))}catch(e){}try{j=window.localStorage[D].split(";")}catch(e){}}}function ke(t){if(_){var i=tinycolor(t).toRgbString();if(!R[i]&&-1===e.inArray(i,j))for(j.push(i);j.length>W;)j.shift();if(D&&window.localStorage)try{window.localStorage[D]=j.join(";")}catch(e){}}}function Ee(){var t=Le(),i=e.map(H,function(e,i){return l(e,t,"sp-palette-row sp-palette-row-"+i,b)});xe(),j&&i.push(l(function(){var e=[];if(b.showPalette)for(var t=0;t<j.length;t++){var i=tinycolor(j[t]).toRgbString();R[i]||e.push(j[t])}return e.reverse().slice(0,b.maxSelectionSize)}(),t,"sp-palette-row sp-palette-row-selection",b)),se.html(i.join(""))}function Se(){if(b.showInitial){var e=ye,t=Le();re.html(l([e,t],t,"sp-palette-row-initial",b))}}function Ae(){(T<=0||A<=0||I<=0)&&We(),S=!0,Q.addClass(U),q=null,K.trigger("dragstart.spectrum",[Le()])}function Te(){S=!1,Q.removeClass(U),K.trigger("dragstop.spectrum",[Le()])}function Fe(){var e=oe.val();if(null!==e&&""!==e||!De){var t=tinycolor(e);t.isValid()?(Be(t),je(!0)):oe.addClass("sp-validation-error")}else Be(null),je(!0)}function Ie(){E?Ne():Pe()}function Pe(){var t=e.Event("beforeShow.spectrum");E?We():(K.trigger(t,[Le()]),!1===x.beforeShow(Le())||t.isDefaultPrevented()||(!function(){for(var e=0;e<n.length;e++)n[e]&&n[e].hide()}(),E=!0,e(V).bind("keydown.spectrum",Me),e(V).bind("click.spectrum",$e),e(window).bind("resize.spectrum",k),fe.addClass("sp-active"),Q.removeClass("sp-hidden"),We(),He(),ye=Le(),Se(),x.show(ye),K.trigger("show.spectrum",[ye])))}function Me(e){27===e.keyCode&&Ne()}function $e(e){2!=e.button&&(S||(Ce?je(!0):Oe(),Ne()))}function Ne(){E&&!C&&(E=!1,e(V).unbind("keydown.spectrum",Me),e(V).unbind("click.spectrum",$e),e(window).unbind("resize.spectrum",k),fe.removeClass("sp-active"),Q.addClass("sp-hidden"),x.hide(Le()),K.trigger("hide.spectrum",[Le()]))}function Oe(){Be(ye,!0)}function Be(e,t){var i,n;tinycolor.equals(e,Le())?He():(!e&&De?_e=!0:(_e=!1,n=(i=tinycolor(e)).toHsv(),N=n.h%360/360,O=n.s,B=n.v,L=n.a),He(),i&&i.isValid()&&!t&&(be=b.preferredFormat||i.getFormat()))}function Le(e){return e=e||{},De&&_e?null:tinycolor.fromRatio({h:N,s:O,v:B,a:Math.round(100*L)/100},{format:e.format||be})}function ze(){He(),x.move(Le()),K.trigger("move.spectrum",[Le()])}function He(){oe.removeClass("sp-validation-error"),Re();var e=tinycolor.fromRatio({h:N,s:1,v:1});X.css("background-color",e.toHexString());var t=be;L<1&&(0!==L||"name"!==t)&&("hex"!==t&&"hex3"!==t&&"hex6"!==t&&"name"!==t||(t="rgb"));var i=Le({format:t}),n="";if(ge.removeClass("sp-clear-display"),ge.css("background-color","transparent"),!i&&De)ge.addClass("sp-clear-display");else{var r=i.toHexString(),a=i.toRgbString();if(s||1===i.alpha?ge.css("background-color",a):(ge.css("background-color","transparent"),ge.css("filter",i.toFilter())),b.showAlpha){var l=i.toRgb();l.a=0;var c=tinycolor(l).toRgbString(),u="linear-gradient(left, "+c+", "+r+")";o?te.css("filter",tinycolor(c).toFilter({gradientType:1},r)):(te.css("background","-webkit-"+u),te.css("background","-moz-"+u),te.css("background","-ms-"+u),te.css("background","linear-gradient(to right, "+c+", "+r+")"))}n=i.toString(t)}b.showInput&&oe.val(n),b.showPalette&&Ee(),Se()}function Re(){var e=O,t=B;if(De&&_e)ne.hide(),ee.hide(),J.hide();else{ne.show(),ee.show(),J.show();var i=e*A,n=T-t*T;i=Math.max(-F,Math.min(A-F,i-F)),n=Math.max(-F,Math.min(T-F,n-F)),J.css({top:n+"px",left:i+"px"});var o=L*P;ne.css({left:o-M/2+"px"});var s=N*I;ee.css({top:s-$+"px"})}}function je(e){var t=Le(),i="",n=!tinycolor.equals(t,ye);t&&(i=t.toString(be),ke(t)),de&&K.val(i),e&&n&&(x.change(t),K.trigger("change",[t]))}function We(){var t,i,n,o,s,r,a,l,c,u;E&&(A=X.width(),T=X.height(),F=J.height(),Z.width(),I=Z.height(),$=ee.height(),P=ie.width(),M=ne.width(),C||(Q.css("position","absolute"),b.offset?Q.offset(b.offset):Q.offset((i=me,n=(t=Q).outerWidth(),o=t.outerHeight(),s=i.outerHeight(),r=t[0].ownerDocument,a=r.documentElement,l=a.clientWidth+e(r).scrollLeft(),c=a.clientHeight+e(r).scrollTop(),(u=i.offset()).top+=s,u.left-=Math.min(u.left,u.left+n>l&&l>n?Math.abs(u.left+n-l):0),u.top-=Math.min(u.top,u.top+o>c&&c>o?Math.abs(o+s-0):0),u))),Re(),b.showPalette&&Ee(),K.trigger("reflow.spectrum"))}function Ue(){Ne(),Y=!0,K.attr("disabled",!0),me.addClass("sp-disabled")}!function(){if(o&&Q.find("*:not(input)").attr("unselectable","on"),we(),pe&&K.after(fe).hide(),De||le.hide(),C)K.after(Q).hide();else{var t="parent"===b.appendTo?K.parent():e(b.appendTo);1!==t.length&&(t=e("body")),t.append(Q)}function i(t){return t.data&&t.data.ignore?(Be(e(t.target).closest(".sp-thumb-el").data("color")),ze()):(Be(e(t.target).closest(".sp-thumb-el").data("color")),ze(),je(!0),b.hideAfterPaletteSelect&&Ne()),!1}xe(),me.bind("click.spectrum touchstart.spectrum",function(t){Y||Ie(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()}),(K.is(":disabled")||!0===b.disabled)&&Ue(),Q.click(d),oe.change(Fe),oe.bind("paste",function(){setTimeout(Fe,1)}),oe.keydown(function(e){13==e.keyCode&&Fe()}),ae.text(b.cancelText),ae.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Oe(),Ne()}),le.attr("title",b.clearText),le.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),_e=!0,ze(),C&&je(!0)}),ce.text(b.chooseText),ce.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),o&&oe.is(":focus")&&oe.trigger("change"),oe.hasClass("sp-validation-error")||(je(!0),Ne())}),ue.text(b.showPaletteOnly?b.togglePaletteMoreText:b.togglePaletteLessText),ue.bind("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),b.showPaletteOnly=!b.showPaletteOnly,b.showPaletteOnly||C||Q.css("left","-="+(G.outerWidth(!0)+5)),we()}),p(ie,function(e,t,i){L=e/P,_e=!1,i.shiftKey&&(L=Math.round(10*L)/10),ze()},Ae,Te),p(Z,function(e,t){N=parseFloat(t/I),_e=!1,b.showAlpha||(L=1),ze()},Ae,Te),p(X,function(e,t,i){if(i.shiftKey){if(!q){var n=O*A,o=T-B*T,s=Math.abs(e-n)>Math.abs(t-o);q=s?"x":"y"}}else q=null;var r=!q||"y"===q;(!q||"x"===q)&&(O=parseFloat(e/A)),r&&(B=parseFloat((T-t)/T)),_e=!1,b.showAlpha||(L=1),ze()},Ae,Te),ve?(Be(ve),He(),be=b.preferredFormat||tinycolor(ve).format,ke(ve)):He(),C&&Pe();var n=o?"mousedown.spectrum":"click.spectrum touchstart.spectrum";se.delegate(".sp-thumb-el",n,i),re.delegate(".sp-thumb-el:nth-child(1)",n,{ignore:!0},i)}();var qe={show:Pe,hide:Ne,toggle:Ie,reflow:We,option:function(i,n){return i===t?e.extend({},b):n===t?b[i]:(b[i]=n,"preferredFormat"===i&&(be=b.preferredFormat),void we())},enable:function(){Y=!1,K.attr("disabled",!1),me.removeClass("sp-disabled")},disable:Ue,offset:function(e){b.offset=e,We()},set:function(e){Be(e),je()},get:Le,destroy:function(){K.show(),me.unbind("click.spectrum touchstart.spectrum"),Q.remove(),fe.remove(),n[qe.id]=null},container:Q};return qe.id=n.push(qe)-1,qe}function u(){}function d(e){e.stopPropagation()}function h(e,t){var i=Array.prototype.slice,n=i.call(arguments,2);return function(){return e.apply(t,n.concat(i.call(arguments)))}}function p(t,i,n,s){i=i||function(){},n=n||function(){},s=s||function(){};var r=document,a=!1,l={},c=0,u=0,d="ontouchstart"in window,h={};function p(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function f(e){if(a){if(o&&r.documentMode<9&&!e.button)return m();var n=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0],s=n&&n.pageX||e.pageX,h=n&&n.pageY||e.pageY,f=Math.max(0,Math.min(s-l.left,u)),g=Math.max(0,Math.min(h-l.top,c));d&&p(e),i.apply(t,[f,g,e])}}function m(){a&&(e(r).unbind(h),e(r.body).removeClass("sp-dragging"),setTimeout(function(){s.apply(t,arguments)},0)),a=!1}h.selectstart=p,h.dragstart=p,h["touchmove mousemove"]=f,h["touchend mouseup"]=m,e(t).bind("touchstart mousedown",function(i){(i.which?3==i.which:2==i.button)||a||!1!==n.apply(t,arguments)&&(a=!0,c=e(t).height(),u=e(t).width(),l=e(t).offset(),e(r).bind(h),e(r.body).addClass("sp-dragging"),f(i),p(i))})}function f(){return e.fn.spectrum.inputTypeColorSupport()}e.fn.spectrum=function(t,i){if("string"==typeof t){var o=this,s=Array.prototype.slice.call(arguments,1);return this.each(function(){var i=n[e(this).data("spectrum.id")];if(i){var r=i[t];if(!r)throw new Error("Spectrum: no such method: '"+t+"'");"get"==t?o=i.get():"container"==t?o=i.container:"option"==t?o=i.option.apply(i,s):"destroy"==t?(i.destroy(),e(this).removeData("spectrum.id")):r.apply(i,s)}}),o}return this.spectrum("destroy").each(function(){var i=c(this,e.extend({},t,e(this).data()));e(this).data("spectrum.id",i.id)})},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=p,e.fn.spectrum.defaults=i,e.fn.spectrum.inputTypeColorSupport=function t(){if(void 0===t._cachedResult){var i=e("<input type='color'/>")[0];t._cachedResult="color"===i.type&&""!==i.value}return t._cachedResult},e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){var t=e("input[type=color]");t.length&&!f()&&t.spectrum({preferredFormat:"hex6"})},function(){var e=/^[\s,#]+/,t=/\s+$/,i=0,n=Math,o=n.round,s=n.min,r=n.max,a=n.random,l=function(a,c){if(a=a||"",c=c||{},a instanceof l)return a;if(!(this instanceof l))return new l(a,c);var u=function(i){var o={r:0,g:0,b:0},a=1,l=!1,c=!1;"string"==typeof i&&(i=function(i){i=i.replace(e,"").replace(t,"").toLowerCase();var n,o=!1;if(E[i])i=E[i],o=!0;else if("transparent"==i)return{r:0,g:0,b:0,a:0,format:"name"};if(n=B.rgb.exec(i))return{r:n[1],g:n[2],b:n[3]};if(n=B.rgba.exec(i))return{r:n[1],g:n[2],b:n[3],a:n[4]};if(n=B.hsl.exec(i))return{h:n[1],s:n[2],l:n[3]};if(n=B.hsla.exec(i))return{h:n[1],s:n[2],l:n[3],a:n[4]};if(n=B.hsv.exec(i))return{h:n[1],s:n[2],v:n[3]};if(n=B.hsva.exec(i))return{h:n[1],s:n[2],v:n[3],a:n[4]};if(n=B.hex8.exec(i))return{a:(s=n[1],I(s)/255),r:I(n[2]),g:I(n[3]),b:I(n[4]),format:o?"name":"hex8"};var s;if(n=B.hex6.exec(i))return{r:I(n[1]),g:I(n[2]),b:I(n[3]),format:o?"name":"hex"};if(n=B.hex3.exec(i))return{r:I(n[1]+""+n[1]),g:I(n[2]+""+n[2]),b:I(n[3]+""+n[3]),format:o?"name":"hex"};return!1}(i));"object"==typeof i&&(i.hasOwnProperty("r")&&i.hasOwnProperty("g")&&i.hasOwnProperty("b")?(u=i.r,d=i.g,h=i.b,o={r:255*T(u,255),g:255*T(d,255),b:255*T(h,255)},l=!0,c="%"===String(i.r).substr(-1)?"prgb":"rgb"):i.hasOwnProperty("h")&&i.hasOwnProperty("s")&&i.hasOwnProperty("v")?(i.s=M(i.s),i.v=M(i.v),o=function(e,t,i){e=6*T(e,360),t=T(t,100),i=T(i,100);var o=n.floor(e),s=e-o,r=i*(1-t),a=i*(1-s*t),l=i*(1-(1-s)*t),c=o%6;return{r:255*[i,a,r,r,l,i][c],g:255*[l,i,i,a,r,r][c],b:255*[r,r,l,i,i,a][c]}}(i.h,i.s,i.v),l=!0,c="hsv"):i.hasOwnProperty("h")&&i.hasOwnProperty("s")&&i.hasOwnProperty("l")&&(i.s=M(i.s),i.l=M(i.l),o=function(e,t,i){var n,o,s;function r(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}if(e=T(e,360),t=T(t,100),i=T(i,100),0===t)n=o=s=i;else{var a=i<.5?i*(1+t):i+t-i*t,l=2*i-a;n=r(l,a,e+1/3),o=r(l,a,e),s=r(l,a,e-1/3)}return{r:255*n,g:255*o,b:255*s}}(i.h,i.s,i.l),l=!0,c="hsl"),i.hasOwnProperty("a")&&(a=i.a));var u,d,h;return a=A(a),{ok:l,format:i.format||c,r:s(255,r(o.r,0)),g:s(255,r(o.g,0)),b:s(255,r(o.b,0)),a:a}}(a);this._originalInput=a,this._r=u.r,this._g=u.g,this._b=u.b,this._a=u.a,this._roundA=o(100*this._a)/100,this._format=c.format||u.format,this._gradientType=c.gradientType,this._r<1&&(this._r=o(this._r)),this._g<1&&(this._g=o(this._g)),this._b<1&&(this._b=o(this._b)),this._ok=u.ok,this._tc_id=i++};function c(e,t,i){e=T(e,255),t=T(t,255),i=T(i,255);var n,o,a=r(e,t,i),l=s(e,t,i),c=(a+l)/2;if(a==l)n=o=0;else{var u=a-l;switch(o=c>.5?u/(2-a-l):u/(a+l),a){case e:n=(t-i)/u+(t<i?6:0);break;case t:n=(i-e)/u+2;break;case i:n=(e-t)/u+4}n/=6}return{h:n,s:o,l:c}}function u(e,t,i){e=T(e,255),t=T(t,255),i=T(i,255);var n,o,a=r(e,t,i),l=s(e,t,i),c=a,u=a-l;if(o=0===a?0:u/a,a==l)n=0;else{switch(a){case e:n=(t-i)/u+(t<i?6:0);break;case t:n=(i-e)/u+2;break;case i:n=(e-t)/u+4}n/=6}return{h:n,s:o,v:c}}function d(e,t,i,n){var s=[P(o(e).toString(16)),P(o(t).toString(16)),P(o(i).toString(16))];return n&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function h(e,t,i,n){var s;return[P((s=n,Math.round(255*parseFloat(s)).toString(16))),P(o(e).toString(16)),P(o(t).toString(16)),P(o(i).toString(16))].join("")}function p(e,t){t=0===t?0:t||10;var i=l(e).toHsl();return i.s-=t/100,i.s=F(i.s),l(i)}function f(e,t){t=0===t?0:t||10;var i=l(e).toHsl();return i.s+=t/100,i.s=F(i.s),l(i)}function m(e){return l(e).desaturate(100)}function g(e,t){t=0===t?0:t||10;var i=l(e).toHsl();return i.l+=t/100,i.l=F(i.l),l(i)}function v(e,t){t=0===t?0:t||10;var i=l(e).toRgb();return i.r=r(0,s(255,i.r-o(-t/100*255))),i.g=r(0,s(255,i.g-o(-t/100*255))),i.b=r(0,s(255,i.b-o(-t/100*255))),l(i)}function y(e,t){t=0===t?0:t||10;var i=l(e).toHsl();return i.l-=t/100,i.l=F(i.l),l(i)}function b(e,t){var i=l(e).toHsl(),n=(o(i.h)+t)%360;return i.h=n<0?360+n:n,l(i)}function C(e){var t=l(e).toHsl();return t.h=(t.h+180)%360,l(t)}function _(e){var t=l(e).toHsl(),i=t.h;return[l(e),l({h:(i+120)%360,s:t.s,l:t.l}),l({h:(i+240)%360,s:t.s,l:t.l})]}function D(e){var t=l(e).toHsl(),i=t.h;return[l(e),l({h:(i+90)%360,s:t.s,l:t.l}),l({h:(i+180)%360,s:t.s,l:t.l}),l({h:(i+270)%360,s:t.s,l:t.l})]}function w(e){var t=l(e).toHsl(),i=t.h;return[l(e),l({h:(i+72)%360,s:t.s,l:t.l}),l({h:(i+216)%360,s:t.s,l:t.l})]}function x(e,t,i){t=t||6,i=i||30;var n=l(e).toHsl(),o=360/i,s=[l(e)];for(n.h=(n.h-(o*t>>1)+720)%360;--t;)n.h=(n.h+o)%360,s.push(l(n));return s}function k(e,t){t=t||6;for(var i=l(e).toHsv(),n=i.h,o=i.s,s=i.v,r=[],a=1/t;t--;)r.push(l({h:n,s:o,v:s})),s=(s+a)%1;return r}l.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=A(e),this._roundA=o(100*this._a)/100,this},toHsv:function(){var e=u(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=u(this._r,this._g,this._b),t=o(360*e.h),i=o(100*e.s),n=o(100*e.v);return 1==this._a?"hsv("+t+", "+i+"%, "+n+"%)":"hsva("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=c(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=c(this._r,this._g,this._b),t=o(360*e.h),i=o(100*e.s),n=o(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+n+"%)":"hsla("+t+", "+i+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return d(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return h(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:o(this._r),g:o(this._g),b:o(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+o(this._r)+", "+o(this._g)+", "+o(this._b)+")":"rgba("+o(this._r)+", "+o(this._g)+", "+o(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:o(100*T(this._r,255))+"%",g:o(100*T(this._g,255))+"%",b:o(100*T(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+o(100*T(this._r,255))+"%, "+o(100*T(this._g,255))+"%, "+o(100*T(this._b,255))+"%)":"rgba("+o(100*T(this._r,255))+"%, "+o(100*T(this._g,255))+"%, "+o(100*T(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(S[d(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+h(this._r,this._g,this._b,this._a),i=t,n=this._gradientType?"GradientType = 1, ":"";e&&(i=l(e).toHex8String());return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+i+")"},toString:function(e){var t=!!e;e=e||this._format;var i=!1,n=this._a<1&&this._a>=0;return t||!n||"hex"!==e&&"hex6"!==e&&"hex3"!==e&&"name"!==e?("rgb"===e&&(i=this.toRgbString()),"prgb"===e&&(i=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(i=this.toHexString()),"hex3"===e&&(i=this.toHexString(!0)),"hex8"===e&&(i=this.toHex8String()),"name"===e&&(i=this.toName()),"hsl"===e&&(i=this.toHslString()),"hsv"===e&&(i=this.toHsvString()),i||this.toHexString()):"name"===e&&0===this._a?this.toName():this.toRgbString()},_applyModification:function(e,t){var i=e.apply(null,[this].concat([].slice.call(t)));return this._r=i._r,this._g=i._g,this._b=i._b,this.setAlpha(i._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(v,arguments)},darken:function(){return this._applyModification(y,arguments)},desaturate:function(){return this._applyModification(p,arguments)},saturate:function(){return this._applyModification(f,arguments)},greyscale:function(){return this._applyModification(m,arguments)},spin:function(){return this._applyModification(b,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(x,arguments)},complement:function(){return this._applyCombination(C,arguments)},monochromatic:function(){return this._applyCombination(k,arguments)},splitcomplement:function(){return this._applyCombination(w,arguments)},triad:function(){return this._applyCombination(_,arguments)},tetrad:function(){return this._applyCombination(D,arguments)}},l.fromRatio=function(e,t){if("object"==typeof e){var i={};for(var n in e)e.hasOwnProperty(n)&&(i[n]="a"===n?e[n]:M(e[n]));e=i}return l(e,t)},l.equals=function(e,t){return!(!e||!t)&&l(e).toRgbString()==l(t).toRgbString()},l.random=function(){return l.fromRatio({r:a(),g:a(),b:a()})},l.mix=function(e,t,i){i=0===i?0:i||50;var n,o=l(e).toRgb(),s=l(t).toRgb(),r=i/100,a=2*r-1,c=s.a-o.a,u=1-(n=((n=a*c==-1?a:(a+c)/(1+a*c))+1)/2),d={r:s.r*n+o.r*u,g:s.g*n+o.g*u,b:s.b*n+o.b*u,a:s.a*r+o.a*(1-r)};return l(d)},l.readability=function(e,t){var i=l(e),n=l(t),o=i.toRgb(),s=n.toRgb(),r=i.getBrightness(),a=n.getBrightness(),c=Math.max(o.r,s.r)-Math.min(o.r,s.r)+Math.max(o.g,s.g)-Math.min(o.g,s.g)+Math.max(o.b,s.b)-Math.min(o.b,s.b);return{brightness:Math.abs(r-a),color:c}},l.isReadable=function(e,t){var i=l.readability(e,t);return i.brightness>125&&i.color>500},l.mostReadable=function(e,t){for(var i=null,n=0,o=!1,s=0;s<t.length;s++){var r=l.readability(e,t[s]),a=r.brightness>125&&r.color>500,c=r.brightness/125*3+r.color/500;(a&&!o||a&&o&&c>n||!a&&!o&&c>n)&&(o=a,n=c,i=l(t[s]))}return i};var E=l.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},S=l.hexNames=function(e){var t={};for(var i in e)e.hasOwnProperty(i)&&(t[e[i]]=i);return t}(E);function A(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function T(e,t){(function(e){return"string"==typeof e&&-1!=e.indexOf(".")&&1===parseFloat(e)})(e)&&(e="100%");var i=function(e){return"string"==typeof e&&-1!=e.indexOf("%")}(e);return e=s(t,r(0,parseFloat(e))),i&&(e=parseInt(e*t,10)/100),n.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function F(e){return s(1,r(0,e))}function I(e){return parseInt(e,16)}function P(e){return 1==e.length?"0"+e:""+e}function M(e){return e<=1&&(e=100*e+"%"),e}var $,N,O,B=(N="[\\s|\\(]+("+($="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+$+")[,|\\s]+("+$+")\\s*\\)?",O="[\\s|\\(]+("+$+")[,|\\s]+("+$+")[,|\\s]+("+$+")[,|\\s]+("+$+")\\s*\\)?",{rgb:new RegExp("rgb"+N),rgba:new RegExp("rgba"+O),hsl:new RegExp("hsl"+N),hsla:new RegExp("hsla"+O),hsv:new RegExp("hsv"+N),hsva:new RegExp("hsva"+O),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});window.tinycolor=l}(),e(function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()})})},function(e,t){!function(e,t){"use strict";var i={change:void 0,checked:void 0,indeterminate:void 0,init:void 0,state:void 0,unchecked:void 0,value:void 0},n=e.fn.val;function o(t,n){e(t).is(":checkbox")&&(this.element=e(t),this.settings=e.extend({},i,n),this._create())}e.extend(o.prototype,{_create:function(){var t,i=this;return window.navigator.userAgent.indexOf("Trident")>=0&&this.element.click(function(t){!this.indeterminate&&e(this).attr("indeterminate")&&e(this).trigger("change")}),this.element.change(function(e){switch(!e.isTrigger&&e.hasOwnProperty("which")||e.preventDefault(),i.settings.state){case!0:i.settings.state=null;break;case!1:i.settings.state=!0;break;default:i.settings.state=!1}i._refresh(i.settings.change)}),this.settings.checked=this.element.attr("checkedvalue")||this.settings.checked,this.settings.unchecked=this.element.attr("uncheckedvalue")||this.settings.unchecked,this.settings.indeterminate=this.element.attr("indeterminatevalue")||this.settings.indeterminate,void 0===this.settings.state&&(this.settings.state=void 0!==this.element.attr("indeterminate")?null:this.element.is(":checked")),void 0!==this.settings.value&&void 0!==(t=this._parseValue(this.settings.value))&&(this.settings.state=t),this._refresh(this.settings.init),this},_refresh:function(t){var i=this.value();this.element.data("vanderlee.tristate",i),this.element[null===this.settings.state?"attr":"removeAttr"]("indeterminate","indeterminate"),this.element.prop("indeterminate",null===this.settings.state),this.element.get(0).indeterminate=null===this.settings.state,this.element[this.settings.state?"attr":"removeAttr"]("checked",!0),this.element.prop("checked",!0===this.settings.state),e.isFunction(t)&&t.call(this.element,this.settings.state,this.value())},state:function(e){return void 0===e?this.settings.state:(!0!==e&&!1!==e&&null!==e||(this.settings.state=e,this._refresh(this.settings.change)),this)},_parseValue:function(e){return e===this.settings.checked||e!==this.settings.unchecked&&(e===this.settings.indeterminate?null:void 0)},value:function(e){if(void 0===e){switch(this.settings.state){case!0:e=this.settings.checked;break;case!1:e=this.settings.unchecked;break;case null:e=this.settings.indeterminate}return void 0===e?this.element.attr("value"):e}var t=this._parseValue(e);void 0!==t&&(this.settings.state=t,this._refresh(this.settings.change))}}),e.fn.tristate=function(t,i){var n=this;return this.each(function(){if(e.data(this,"plugin.vanderlee.tristate")){if("string"==typeof t){if(void 0===i)return n=e(this).data("plugin.vanderlee.tristate")[t](),!1;e(this).data("plugin.vanderlee.tristate")[t](i)}}else e.data(this,"plugin.vanderlee.tristate",new o(this,t))}),n},e.fn.val=function(e){var t=this.data("vanderlee.tristate");return void 0===t?void 0===e?n.call(this):n.call(this,e):void 0===e?t:(this.data("vanderlee.tristate",e),this)},e.expr.filters.indeterminate=function(t){var i=e(t);return void 0!==i.data("vanderlee.tristate")&&i.prop("indeterminate")},e.expr.filters.determinate=function(t){return!e.expr.filters.indeterminate(t)},e.expr.filters.tristate=function(t){return void 0!==e(t).data("vanderlee.tristate")}}(jQuery)},function(e,t){var i;(i=jQuery).textcounter=function(e,t){var n=this;n.$el=i(e),n.el=e,n.$el.data("textcounter",n),n.init=function(){n.options=i.extend({},i.textcounter.defaultOptions,t);var e=n.options.countDown?n.options.countDownText:n.options.counterText,o=n.options.countDown?n.options.max:0,s=i("<div/>").addClass(n.options.textCountMessageClass).html(e.replace("%d",'<span class="'+n.options.textCountClass+'">'+o+"</span>")),r=i("<div/>").addClass(n.options.countOverflowContainerClass);n.hideMessage(r),n.$container=i("<"+n.options.countContainerElement+"/>").addClass(n.options.countContainerClass).append(s).append(r),n.$text_counter=n.$container.find("span"),n.$el.after(n.$container),n.$el.bind("keyup.textcounter click.textcounter blur.textcounter focus.textcounter change.textcounter paste.textcounter",n.checkLimits).trigger("click.textcounter"),n.options.init(n.el)},n.checkLimits=function(e){var t=n.$el,o=(n.$container,t.val()),s=0,r=0,a=void 0!==e.originalEvent;if(i.isEmptyObject(o)||(s=n.textCount(o)),"auto"==n.options.max){var l=n.$el.attr("maxlength");void 0!==l&&!1!==l?n.options.max=l:n.$container.text("error: [maxlength] attribute not set")}if(r=n.options.countDown?n.options.max-s:s,n.setCount(r),n.options.min>0&&a&&(s<n.options.min?(n.setErrors("min"),n.options.minunder(n.el)):s>=n.options.min&&(n.options.mincount(n.el),n.clearErrors("min"))),-1!==n.options.max)if(s===n.options.max&&0!==n.options.max)n.options.maxcount(n.el),n.clearErrors("max");else if(s>n.options.max&&0!==n.options.max)if(n.options.stopInputAtMaximum){var c="";if("word"==n.options.type)for(var u=o.split(/[^\S\n]/g),d=0;d<u.length&&!(d>=n.options.max);)void 0!==u[d]&&(c+=u[d]+" ",d++);else{var h=n.options.twoCharCarriageReturn?n.options.max-n.twoCharCarriageReturnCount(o):n.options.max;if(n.options.countSpaces)c=o.substring(0,h);else{var p=o.split(""),f=p.length,m=0;for(d=0;m<h&&d<f;)" "!==p[d]&&m++,c+=p[d++]}}t.val(c.trim()),s=n.textCount(t.val()),r=n.options.countDown?n.options.max-s:s,n.setCount(r)}else n.setErrors("max");else n.options.maxunder(n.el),n.clearErrors("max");-1==n.options.minDisplayCutoff&&-1==n.options.maxDisplayCutoff?n.$container.show():s<=n.options.min+n.options.minDisplayCutoff?n.$container.show():-1!==n.options.max&&s>=n.options.max-n.options.maxDisplayCutoff?n.$container.show():n.$container.hide()},n.textCount=function(e){return"word"==n.options.type?n.wordCount(e):n.characterCount(e)},n.wordCount=function(e){return e.trim().replace(/\s+/gi," ").split(" ").length},n.characterCount=function(e){var t=0,i=0;if(n.options.twoCharCarriageReturn&&(i=n.twoCharCarriageReturnCount(e)),t=n.options.countSpaces?e.replace(/[^\S\n|\r|\r\n]/g," ").length:e.replace(/\s/g,"").length,n.options.countExtendedCharacters){var o=e.match(/[^\x00-\xff]/gi);t=null==o?e.length:e.length+o.length}return n.options.twoCharCarriageReturn&&(t+=i),t},n.twoCharCarriageReturnCount=function(e){var t=e.match(/(\r\n|\n|\r)/g),i=0;return null!==t&&(i=t.length),i},n.setCount=function(e){n.$text_counter.text(e)},n.setErrors=function(e){var t=n.$el,i=n.$container,o="";switch(t.addClass(n.options.inputErrorClass),i.addClass(n.options.counterErrorClass),e){case"min":o=n.options.minimumErrorText;break;case"max":o=n.options.maximumErrorText,n.options.countOverflow&&n.setOverflowMessage()}n.options.displayErrorText&&(i.children(".error-text-"+e).length||i.append("<"+n.options.errorTextElement+' class="error-text error-text-'+e+'">'+o+"</"+n.options.errorTextElement+">"))},n.setOverflowMessage=function(){n.hideMessage(n.$container.find("."+n.options.textCountMessageClass)),n.removeOverflowMessage();var e=n.options.countOverflowText.replace("%d",n.textCount(n.$el.val())-n.options.max).replace("%type",n.options.type+"s"),t=n.$container.find("."+n.options.countOverflowContainerClass).append(e);n.showMessage(t)},n.removeOverflowMessage=function(){n.$container.find("."+n.options.countOverflowContainerClass).empty()},n.showMessage=function(e){e.css("display","inline")},n.hideMessage=function(e){e.css("display","none")},n.clearErrors=function(e){var t=n.$el,i=n.$container;i.children(".error-text-"+e).remove(),0==i.children(".error-text").length&&(n.removeOverflowMessage(),n.showMessage(n.$container.find("."+n.options.textCountMessageClass)),t.removeClass(n.options.inputErrorClass),i.removeClass(n.options.counterErrorClass))},n.init()},i.textcounter.defaultOptions={type:"character",min:0,max:200,countContainerElement:"div",countContainerClass:"text-count-wrapper",textCountMessageClass:"text-count-message",textCountClass:"text-count",inputErrorClass:"error",counterErrorClass:"error",counterText:"Total Count: %d",errorTextElement:"div",minimumErrorText:"Minimum not met",maximumErrorText:"Maximum exceeded",displayErrorText:!0,stopInputAtMaximum:!0,countSpaces:!1,countDown:!1,countDownText:"Remaining: %d",countExtendedCharacters:!1,twoCharCarriageReturn:!1,countOverflow:!1,countOverflowText:"Maximum %type exceeded by %d",countOverflowContainerClass:"text-count-overflow-wrapper",minDisplayCutoff:-1,maxDisplayCutoff:-1,maxunder:function(e){},minunder:function(e){},maxcount:function(e){},mincount:function(e){},init:function(e){}},i.fn.textcounter=function(e){return this.each(function(){new i.textcounter(this,e)})}},function(e,t,i){(function(e){(function(){var e,t;e=jQuery,t=function(e,t){return t?e.removeClass("fa-star-o").addClass("fa-star"):e.removeClass("fa-star").addClass("fa-star-o")},e.fn.awesomeStarRating=function(i){var n,o,s,r,a,l,c,u,d,h;for(null==i&&(i=[]),o=this,a=i.name||o.attr("data-name")||"rating_score",c=parseInt(i.score||o.attr("data-score")||0),l=i.onChange,n=e("<input />",{type:"hidden",value:c,name:a}),o.append(n),u=[],h=[],r=d=1;d<=5;r=++d)s=e('<i class="fa"></i>'),t(s,r<=c),o.append(s),u[r]=s,h.push(s.on("click",{idx:r},function(e){var i,s,r;for(i=e.data.idx,n.val(i),s=r=1;r<=5;s=++r)t(u[s],s<=i);if(l)return l.call(o,i)}));return h}}).call(e)}).call(t,i(2))},function(e,t){String.prototype.score=function(e,t){if(t=t||0,0==e.length)return.9;if(e.length>this.length)return 0;for(var i=e.length;i>0;i--){var n=e.substring(0,i),o=this.indexOf(n);if(!(o<0)&&!(o+e.length>this.length+t)){var s=this.substring(o+n.length),r=null;r=i>=e.length?"":e.substring(i);var a=s.score(r,t+o);if(a>0){var l=this.length-s.length;if(0!=o){var c=0,u=this.charCodeAt(o-1);if(32==u||9==u)for(c=o-2;c>=0;c--)l-=32==(u=this.charCodeAt(c))||9==u?1:.15;else l-=o}return l+=a*s.length,l/=this.length}}}return 0}},function(e,t){var i,n;i=jQuery,n=null,i.fn.liveUpdate=function(e,t){return this.each(function(){new i.liveUpdate(this,e,t)})},i.liveUpdate=function(e,t,n){this.field=i(e),i(e).data("liveUpdate",this),this.list=i("#"+t),this.lutype="blocktypes",void 0!==n&&(this.lutype=n),this.list.length>0&&this.init()},i.liveUpdate.prototype={init:function(){var e=this;this.setupCache(),this.field.parents("form").on("submit.liveupdate",function(){return!1}),this.field.keyup(function(){e.filter()}),e.filter()},filter:function(){if(this.field.val()!=n){if(""==i.trim(this.field.val()))return void("blocktypes"==this.lutype?(this.list.find("li").show(),this.list.find(".ccm-panel-add-block-set").show()):"attributes"==this.lutype?(this.list.find("h5").show(),this.list.find("li").show()):"stacks"==this.lutype?(this.list.children("li").addClass("ccm-stack-available"),this.list.children("li").removeClass("ccm-stack-selected")):"intelligent-search"==this.lutype?this.list.is(":visible")&&this.list.hide():this.list.children("li,div.li").show());"intelligent-search"!=this.lutype||this.field.val().length>2?this.displayResults(this.getScores(this.field.val().toLowerCase())):"intelligent-search"==this.lutype&&this.list.is(":visible")&&this.list.hide()}""==(n=this.field.val())&&"intelligent-search"==this.lutype&&this.list.is(":visible")&&this.list.hide()},setupCache:function(){var e=this;this.cache=[],this.rows=[];var t=this.lutype;this.list.find("li,div.li").each(function(){if("blocktypes"==t)e.cache.push(i(this).find("span").html().toLowerCase());else if("attributes"==t){var n=i(this).find("a,span").html().toLowerCase();e.cache.push(n)}else if("stacks"==t)n=i(this).find("a,span").html().toLowerCase(),e.cache.push(n);else if("fileset"==t)e.cache.push(i(this).find("span[data-label=file-set-name]").html().toLowerCase());else if("folder"==t)e.cache.push(i(this).find("span[data-label=folder-name]").html().toLowerCase());else if("intelligent-search"==t){var o=i(this).find("span").html();o&&e.cache.push(o.toLowerCase())}e.rows.push(i(this))}),this.cache_length=this.cache.length},displayResults:function(e){var t=this;"blocktypes"==this.lutype?(this.list.find(".ccm-panel-add-block-set").hide(),this.list.find("li,div.li").hide(),i.each(e,function(e,i){t.rows[i[1]].show(),t.rows[i[1]].closest(".ccm-panel-add-block-set").show()})):"attributes"==this.lutype?(this.list.find("h5").hide(),this.list.find("li").hide(),i.each(e,function(e,i){t.rows[i[1]].show()})):"stacks"==this.lutype?(this.list.children("li").removeClass("ccm-stack-available"),this.list.children("li").removeClass("ccm-stack-selected"),this.list.children("li").removeClass("ccm-item-selected"),i.each(e,function(e,i){t.rows[i[1]].addClass("ccm-stack-available")}),this.list.children("li.item-select-list-header").removeClass("ccm-stack-available"),i(this.list.find("li.ccm-stack-available")[0]).addClass("ccm-item-selected")):"intelligent-search"==this.lutype?(this.list.is(":visible")||this.list.fadeIn(160,"easeOutExpo"),this.list.find(".ccm-intelligent-search-results-module-onsite").hide(),this.list.find("li").hide(),i.each(e,function(e,i){$li=t.rows[i[1]],i[0]>.75&&($li.parent().parent().is(":visible")||$li.parent().parent().show(),$li.show())}),this.list.find("li a").removeClass("ccm-intelligent-search-result-selected"),this.list.find("li:visible a:first").addClass("ccm-intelligent-search-result-selected")):(this.list.children("li,div.li").hide(),i.each(e,function(e,i){t.rows[i[1]].show()}))},getScores:function(e){for(var t=[],i=0;i<this.cache_length;i++){var n=this.cache[i].score(e);n>0&&t.push([n,i])}return t.sort(function(e,t){return t[0]-e[0]})}}},function(e,t,i){var n,o;!function(s,r){n=[i(1)],void 0!==(o=function(e){return s.Tour=r(e)}.apply(t,n))&&(e.exports=o)}(window,function(e){var t,i,n;return t=window.document,function(){function o(t){var o;try{o=window.localStorage}catch(e){o=!1}if(n={prevButton:"Prev",nextButton:"Next",pauseButton:"Pause",resumeButton:"Resume",endTourButton:"End Tour"},this._options=e.extend(!0,{name:"tour",steps:[],container:"body",autoscroll:!0,keyboard:!0,storage:o,debug:!1,backdrop:!1,backdropContainer:"body",backdropPadding:0,redirect:!0,orphan:!1,duration:!1,delay:!1,basePath:"",template:null,localization:{buttonTexts:n},framework:"bootstrap3",sanitizeWhitelist:[],sanitizeFunction:null,showProgressBar:!0,showProgressText:!0,getProgressBarHTML:null,getProgressTextHTML:null,afterSetState:function(e,t){},afterGetState:function(e,t){},afterRemoveState:function(e){},onStart:function(e){},onEnd:function(e){},onShow:function(e){},onShown:function(e){},onHide:function(e){},onHidden:function(e){},onNext:function(e){},onPrev:function(e){},onPause:function(e,t){},onResume:function(e,t){},onRedirectError:function(e){},onElementUnavailable:null,onPreviouslyEnded:null,onModalHidden:null},t),"bootstrap3"!==this._options.framework&&"bootstrap4"!==this._options.framework)throw this._debug("Invalid framework specified: "+this._options.framework),"Bootstrap Tourist: Invalid framework specified";if(i={bootstrap3:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title"></h3> <div class="popover-content"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-default" data-role="prev">&laquo; '+this._options.localization.buttonTexts.prevButton+'</button> <button class="btn btn-sm btn-default" data-role="next">'+this._options.localization.buttonTexts.nextButton+' &raquo;</button> <button class="btn btn-sm btn-default" data-role="pause-resume" data-pause-text="'+this._options.localization.buttonTexts.pauseButton+'" data-resume-text="'+this._options.localization.buttonTexts.resumeButton+'">'+this._options.localization.buttonTexts.pauseButton+'</button> </div> <button class="btn btn-sm btn-default" data-role="end">'+this._options.localization.buttonTexts.endTourButton+"</button> </div> </div>",bootstrap4:'<div class="popover" role="tooltip"> <div class="arrow"></div> <h3 class="popover-header"></h3> <div class="popover-body"></div> <div class="popover-navigation"> <div class="btn-group"> <button class="btn btn-sm btn-outline-secondary" data-role="prev">&laquo; '+this._options.localization.buttonTexts.prevButton+'</button> <button class="btn btn-sm btn-outline-secondary" data-role="next">'+this._options.localization.buttonTexts.nextButton+' &raquo;</button> <button class="btn btn-sm btn-outline-secondary" data-role="pause-resume" data-pause-text="'+this._options.localization.buttonTexts.pauseButton+'" data-resume-text="'+this._options.localization.buttonTexts.resumeButton+'">'+this._options.localization.buttonTexts.pauseButton+'</button> </div> <button class="btn btn-sm btn-outline-secondary" data-role="end">'+this._options.localization.buttonTexts.endTourButton+"</button> </div> </div>"},null===this._options.template?null!=i[this._options.framework]&&void 0!=i[this._options.framework]?(this._options.template=i[this._options.framework],this._debug("Using framework template: "+this._options.framework)):this._debug("Warning: "+this._options.framework+" specified for template (no template option set), but framework is unknown. Tour will not work!"):this._debug("Using custom template"),"function"==typeof this._options.sanitizeFunction)this._debug("Using custom sanitize function in place of bootstrap - security implications, be careful");else{this._options.sanitizeFunction=null,this._debug("Extending Bootstrap sanitize options");var s=[];"bootstrap4"==this._options.framework&&void 0!==e.fn.popover.Constructor.Default.whiteList&&(s=e.fn.popover.Constructor.Default.whiteList),"bootstrap3"==this._options.framework&&void 0!==e.fn.popover.Constructor.DEFAULTS.whiteList&&(s=e.fn.popover.Constructor.DEFAULTS.whiteList);var r=e.extend(!0,{},s);e.each({button:["data-role","style"],img:["style"],div:["style"]},function(t,i){void 0==r[t]&&(r[t]=[]),e.merge(r[t],i)}),e.each(this._options.sanitizeWhitelist,function(t,i){void 0==r[t]&&(r[t]=[]),e.merge(r[t],i)}),this._options.sanitizeWhitelist=r}return this._current=null,this.backdrops=[],this}return o.prototype.addSteps=function(e){var t,i,n;for(t=0,i=e.length;t<i;t++)n=e[t],this.addStep(n);return this},o.prototype.addStep=function(e){return this._options.steps.push(e),this},o.prototype.getStepCount=function(){return this._options.steps.length},o.prototype.getStep=function(t){if(null!=this._options.steps[t])return"function"==typeof this._options.steps[t].element&&(this._options.steps[t].element=this._options.steps[t].element()),this._options.steps[t]=e.extend(!0,{id:"step-"+t,path:"",host:"",placement:"right",title:"",content:"<p></p>",next:t===this._options.steps.length-1?-1:t+1,prev:t-1,animation:!0,container:this._options.container,autoscroll:this._options.autoscroll,backdrop:this._options.backdrop,backdropContainer:this._options.backdropContainer,backdropPadding:this._options.backdropPadding,redirect:this._options.redirect,reflexElement:this._options.steps[t].element,preventInteraction:!1,orphan:this._options.orphan,duration:this._options.duration,delay:this._options.delay,template:this._options.template,showProgressBar:this._options.showProgressBar,showProgressText:this._options.showProgressText,getProgressBarHTML:this._options.getProgressBarHTML,getProgressTextHTML:this._options.getProgressTextHTML,onShow:this._options.onShow,onShown:this._options.onShown,onHide:this._options.onHide,onHidden:this._options.onHidden,onNext:this._options.onNext,onPrev:this._options.onPrev,onPause:this._options.onPause,onResume:this._options.onResume,onRedirectError:this._options.onRedirectError,onElementUnavailable:this._options.onElementUnavailable,onModalHidden:this._options.onModalHidden,internalFlags:{elementModal:null,elementModalOriginal:null,elementBootstrapSelectpicker:null}},this._options.steps[t]),this._options.steps[t]},o.prototype._setStepFlag=function(e,t,i){null!=this._options.steps[e]&&(this._options.steps[e].internalFlags[t]=i)},o.prototype._getStepFlag=function(e,t){if(null!=this._options.steps[e])return this._options.steps[e].internalFlags[t]},o.prototype.init=function(){console.log("You should remove Tour.init() from your code. It's not required with Bootstrap Tourist")},o.prototype.start=function(){if(this.ended())return null!=this._options.onPreviouslyEnded&&"function"==typeof this._options.onPreviouslyEnded?(this._debug("Tour previously ended, exiting. Call tour.restart() to force restart. Firing onPreviouslyEnded()"),this._options.onPreviouslyEnded(this)):this._debug("Tour previously ended, exiting. Call tour.restart() to force restart"),this;this.setCurrentStep(),this._initMouseNavigation(),this._initKeyboardNavigation();var t=this;e(window).on("resize.tour-"+t._options.name,function(){t.reshowCurrentStep()});var i=this._makePromise(null!=this._options.onStart?this._options.onStart(this):void 0);return this._callOnPromiseDone(i,this.showStep,this._current),this},o.prototype.next=function(){var e;return e=this.hideStep(),this._callOnPromiseDone(e,this._showNextStep)},o.prototype.prev=function(){var e;return e=this.hideStep(),this._callOnPromiseDone(e,this._showPrevStep)},o.prototype.goTo=function(e){var t;return this._debug("goTo step "+e),t=this.hideStep(),this._callOnPromiseDone(t,this.showStep,e)},o.prototype.end=function(){var i,n,o;return o=this,i=function(i){if(e(t).off("click.tour-"+o._options.name),e(t).off("keyup.tour-"+o._options.name),e(window).off("resize.tour-"+o._options.name),e(window).off("scroll.tour-"+o._options.name),o._setState("end","yes"),o._clearTimer(),null!=o._options.onEnd)return o._options.onEnd(o)},n=this.hideStep(),this._callOnPromiseDone(n,i)},o.prototype.ended=function(){return"yes"==this._getState("end")},o.prototype.restart=function(){return this._removeState("current_step"),this._removeState("end"),this._removeState("redirect_to"),this.start()},o.prototype.pause=function(){var e;return(e=this.getStep(this._current))&&e.duration?(this._paused=!0,this._duration-=(new Date).getTime()-this._start,window.clearTimeout(this._timer),this._debug("Paused/Stopped step "+(this._current+1)+" timer ("+this._duration+" remaining)."),null!=e.onPause?e.onPause(this,this._duration):void 0):this},o.prototype.resume=function(){var e,t;return(e=this.getStep(this._current))&&e.duration?(this._paused=!1,this._start=(new Date).getTime(),this._duration=this._duration||e.duration,this._timer=window.setTimeout((t=this,function(){return t._isLast()?t.next():t.end()}),this._duration),this._debug("Started step "+(this._current+1)+" timer with duration "+this._duration),null!=e.onResume&&this._duration!==e.duration?e.onResume(this,this._duration):void 0):this},o.prototype.reshowCurrentStep=function(){var e;return this._debug("Reshowing current step "+this.getCurrentStepIndex()),e=this.hideStep(),this._callOnPromiseDone(e,this.showStep,this._current)},o.prototype.hideStep=function(){var t,i,n,o,s;if(o=this.getStep(this.getCurrentStepIndex()))return this._clearTimer(),n=this._makePromise(null!=o.onHide?o.onHide(this,this.getCurrentStepIndex()):void 0),s=this,i=function(t){var i;(i=e(o.element)).data("bs.popover")||i.data("popover")||(i=e("body")),"bootstrap3"==s._options.framework&&i.popover("destroy"),"bootstrap4"==s._options.framework&&i.popover("dispose"),i.removeClass("tour-"+s._options.name+"-element tour-"+s._options.name+"-"+s.getCurrentStepIndex()+"-element").removeData("bs.popover"),o.reflex&&e(o.reflexElement).removeClass("tour-step-element-reflex").off(s._reflexEvent(o.reflex)+".tour-"+s._options.name),s._hideOverlayElement(o),s._unfixBootstrapSelectPickerZindex(o);var n=s._getStepFlag(s.getCurrentStepIndex(),"elementModalOriginal");if(null!=n&&(s._setStepFlag(s.getCurrentStepIndex(),"elementModalOriginal",null),o.element=n),null!=o.onHidden)return o.onHidden(s)},t=o.delay.hide||o.delay,"[object Number]"==={}.toString.call(t)&&t>0?(this._debug("Wait "+t+" milliseconds to hide the step "+(this._current+1)),window.setTimeout(function(e){return function(){return e._callOnPromiseDone(n,i)}}(this),t)):this._callOnPromiseDone(n,i),n},o.prototype.showStep=function(i){var n,o,s,r,a,l,c;if(this.ended())return this._debug("Tour ended, showStep prevented."),null!=this._options.onEnd&&this._options.onEnd(this),this;if((l=this.getStep(i))&&(a=i<this._current,o=this._makePromise(null!=l.onShow?l.onShow(this,i):void 0),this.setCurrentStep(i),n=function(){switch({}.toString.call(l.path)){case"[object Function]":return l.path();case"[object String]":return this._options.basePath+l.path;default:return l.path}}.call(this),!l.redirect||!this._isRedirect(l.host,n,t.location)||(this._redirect(l,i,n),this._isJustPathHashDifferent(l.host,n,t.location)))){if($modalObject=null,!1===l.orphan&&(e(l.element).hasClass("modal")||e(l.element).data("bs.modal"))&&($modalObject=e(l.element),this._setStepFlag(this.getCurrentStepIndex(),"elementModalOriginal",l.element),l.element=e(l.element).find(".modal-content:first")),c=e(l.element),null===$modalObject&&c.parents(".modal:first").length&&($modalObject=c.parents(".modal:first")),$modalObject&&$modalObject.length>0){this._debug("Modal identified, onModalHidden callback available"),this._setStepFlag(i,"elementModal",$modalObject);var u=function(e,t){return function(){if(e._debug("Modal close triggered"),"function"==typeof l.onModalHidden){var n;if(!1===(n=l.onModalHidden(e,i)))return void e._debug("onModalHidden returned exactly false, tour step unchanged");if(Number.isInteger(n))return e._debug("onModalHidden returned int, tour moving to step "+n+1),t.off("hidden.bs.modal",u),e.goTo(n);e._debug("onModalHidden did not return false or int, continuing tour")}return t.off("hidden.bs.modal",u),e._isLast()?e.next():e.end()}}(this,$modalObject);$modalObject.off("hidden.bs.modal",u).on("hidden.bs.modal",u)}if(r=function(e){return function(t){if(e._isOrphan(l)){if(!1===l.orphan)return e._debug("Skip the orphan step "+(e._current+1)+".\nOrphan option is false and the element "+l.element+" does not exist or is hidden."),"function"==typeof l.onElementUnavailable&&(e._debug("Calling onElementUnavailable callback"),l.onElementUnavailable(e,e._current)),void(a?e._showPrevStep(!0):e._showNextStep(!0));e._debug("Show the orphan step "+(e._current+1)+". Orphans option is true.")}if(l.autoscroll&&!e._isOrphan(l)?e._scrollIntoView(i):e._showPopoverAndOverlay(i),l.duration)return e.resume()}}(this),s=l.delay.show||l.delay,"[object Number]"==={}.toString.call(s)&&s>0)this._debug("Wait "+s+" milliseconds to show the step "+(this._current+1)),window.setTimeout(function(e){return function(){return e._callOnPromiseDone(o,r)}}(this),s);else if(l.delayOnElement){var d=null,h=null,p=this,f=function(){return"function"==typeof l.delayOnElement.delayElement?l.delayOnElement.delayElement():"element"==l.delayOnElement.delayElement?e(l.element):e(l.delayOnElement.delayElement)},m=(d=f()).length>0?d[0].tagName:l.delayOnElement.delayElement,g=l.delayOnElement.maxDelay?l.delayOnElement.maxDelay:2e3;this._debug("Wait for element "+m+" visible or max "+g+" milliseconds to show the step "+(this._current+1)),h=window.setInterval(function(){if(p._debug("Wait for element "+m+": checking..."),0===d.length&&(d=f()),d.is(":visible"))return p._debug("Wait for element "+m+": found, showing step"),window.clearInterval(h),h=null,p._callOnPromiseDone(o,r)},250),g<250&&(g=251),window.setTimeout(function(){if(h)return p._debug("Wait for element "+m+": max timeout reached without element found"),window.clearInterval(h),p._callOnPromiseDone(o,r)},g)}else this._callOnPromiseDone(o,r);return o}},o.prototype.getCurrentStepIndex=function(){return this._current},o.prototype.setCurrentStep=function(e){return null!=e?(this._current=e,this._setState("current_step",e)):(this._current=this._getState("current_step"),this._current=null===this._current?0:parseInt(this._current,10)),this},o.prototype._setState=function(e,t){var i;if(this._options.storage){i=this._options.name+"_"+e;try{this._options.storage.setItem(i,t)}catch(e){e.code===DOMException.QUOTA_EXCEEDED_ERR&&this._debug("LocalStorage quota exceeded. State storage failed.")}return this._options.afterSetState(i,t)}return null==this._state&&(this._state={}),this._state[e]=t},o.prototype._removeState=function(e){var t;return this._options.storage?(t=this._options.name+"_"+e,this._options.storage.removeItem(t),this._options.afterRemoveState(t)):null!=this._state?delete this._state[e]:void 0},o.prototype._getState=function(e){var t,i;return this._options.storage?(t=this._options.name+"_"+e,i=this._options.storage.getItem(t)):null!=this._state&&(i=this._state[e]),void 0!==i&&"null"!==i||(i=null),this._options.afterGetState(e,i),i},o.prototype._showNextStep=function(e){var t,i,n,o;e=e||!1;if(o=this,i=function(e){return o.showStep(o._current+1)},t=void 0,n=this.getStep(this._current),!1===e&&null!=n.onNext){if(rslt=n.onNext(this),!1===rslt)return this._debug("onNext callback returned false, preventing move to next step"),this.showStep(this._current);t=this._makePromise(rslt)}return this._callOnPromiseDone(t,i)},o.prototype._showPrevStep=function(e){var t,i,n,o;e=e||!1;if(o=this,i=function(e){return o.showStep(n.prev)},t=void 0,n=this.getStep(this._current),!1===e&&null!=n.onPrev){if(rslt=n.onPrev(this),!1===rslt)return this._debug("onPrev callback returned false, preventing move to previous step"),this.showStep(this._current);t=this._makePromise(rslt)}return this._callOnPromiseDone(t,i)},o.prototype._debug=function(e){if(this._options.debug)return window.console.log("[ Bootstrap Tour: '"+this._options.name+"' ] "+e)},o.prototype._isRedirect=function(e,t,i){var n;return!(null==e||""===e||!("[object RegExp]"==={}.toString.call(e)&&!e.test(i.origin)||"[object String]"==={}.toString.call(e)&&this._isHostDifferent(e,i)))||(n=[i.pathname,i.search,i.hash].join(""),null!=t&&""!==t&&("[object RegExp]"==={}.toString.call(t)&&!t.test(n)||"[object String]"==={}.toString.call(t)&&this._isPathDifferent(t,n)))},o.prototype._isHostDifferent=function(e,t){switch({}.toString.call(e)){case"[object RegExp]":return!e.test(t.origin);case"[object String]":return this._getProtocol(e)!==this._getProtocol(t.href)||this._getHost(e)!==this._getHost(t.href);default:return!0}},o.prototype._isPathDifferent=function(e,t){return this._getPath(e)!==this._getPath(t)||!this._equal(this._getQuery(e),this._getQuery(t))||!this._equal(this._getHash(e),this._getHash(t))},o.prototype._isJustPathHashDifferent=function(e,t,i){var n;return(null==e||""===e||!this._isHostDifferent(e,i))&&(n=[i.pathname,i.search,i.hash].join(""),"[object String]"==={}.toString.call(t)&&(this._getPath(t)===this._getPath(n)&&this._equal(this._getQuery(t),this._getQuery(n))&&!this._equal(this._getHash(t),this._getHash(n))))},o.prototype._redirect=function(i,n,o){var s;return e.isFunction(i.redirect)?i.redirect.call(this,o):(s="[object String]"==={}.toString.call(i.host)?""+i.host+o:o,this._debug("Redirect to "+s),this._getState("redirect_to")!==""+n?(this._setState("redirect_to",""+n),t.location.href=s):(this._debug("Error redirection loop to "+o),this._removeState("redirect_to"),null!=i.onRedirectError?i.onRedirectError(this):void 0))},o.prototype._isOrphan=function(t){return 1==t.orphan||null==t.element||!e(t.element).length||e(t.element).is(":hidden")&&"http://www.w3.org/2000/svg"!==e(t.element)[0].namespaceURI},o.prototype._isLast=function(){return this._current<this._options.steps.length-1},o.prototype._showPopoverAndOverlay=function(e){var t;if(this.getCurrentStepIndex()===e&&!this.ended())return(t=this.getStep(e)).backdrop&&this._showOverlayElements(t),this._fixBootstrapSelectPickerZindex(t),this._showPopover(t,e),null!=t.onShown&&t.onShown(this),this},o.prototype._showPopover=function(i,n){var o,s,r,a,l,c,u;if(r=this._isOrphan(i),0==e(t).find(".popover.tour-"+this._options.name+".tour-"+this._options.name+"-"+this.getCurrentStepIndex()).length){e(".tour-"+this._options.name).remove(),i.template=this._template(i,n),r&&(i.element="body",i.placement="top"),(o=e(i.element)).addClass("tour-"+this._options.name+"-element tour-"+this._options.name+"-"+n+"-element"),i.reflex&&!r&&e(i.reflexElement).addClass("tour-step-element-reflex").off(this._reflexEvent(i.reflex)+".tour-"+this._options.name).on(this._reflexEvent(i.reflex)+".tour-"+this._options.name,(u=this,function(){return u._isLast()?u.next():u.end()})),a=i.title,l=i.content,c=parseInt((n+1)/this.getStepCount()*100),i.showProgressBar&&(l="function"==typeof i.getProgressBarHTML?i.getProgressBarHTML(c)+l:'<div class="progress"><div class="progress-bar progress-bar-striped" role="progressbar" style="width: '+c+'%;"></div></div>'+l),i.showProgressText&&("function"==typeof i.getProgressTextHTML?a+=i.getProgressTextHTML(n,c,this.getStepCount()):("bootstrap3"==this._options.framework&&(a+='<span class="pull-right">'+(n+1)+"/"+this.getStepCount()+"</span>"),"bootstrap4"==this._options.framework&&(a+='<span class="float-right">'+(n+1)+"/"+this.getStepCount()+"</span>")));var d={placement:i.placement,trigger:"manual",title:a,content:l,html:!0,whiteList:this._options.sanitizeWhitelist,sanitizeFn:this._options.sanitizeFunction,animation:i.animation,container:i.container,template:i.template,selector:i.element};"bootstrap4"==this._options.framework&&(r?d.offset=function(t){var i=Math.max(0,(e(window).height()-t.popper.height)/2),n=Math.max(0,(e(window).width()-t.popper.width)/2);return t.popper.position="fixed",t.popper.top=i,t.popper.bottom=i+t.popper.height,t.popper.left=n,t.popper.right=i+t.popper.width,t}:d.selector="#"+i.element[0].id),"bootstrap4"==this._options.framework&&0==r&&(d.selector="#"+i.element[0].id),o.popover(d),o.popover("show"),"bootstrap3"==this._options.framework&&(s=o.data("bs.popover")?o.data("bs.popover").tip():o.data("popover").tip(),"fixed"===o.css("position")&&s.css("position","fixed"),r?(this._center(s),s.css("position","fixed")):this._reposition(s,i)),"bootstrap4"==this._options.framework&&(s=e(o.data("bs.popover")?o.data("bs.popover").getTipElement():o.data("popover").getTipElement())),s.attr("id",i.id),this._debug("Step "+(this._current+1)+" of "+this._options.steps.length)}},o.prototype._template=function(t,i){var n,o,s,r,a,l;return l=t.template,this._isOrphan(t)&&"[object Boolean]"!=={}.toString.call(t.orphan)&&(l=t.orphan),s=(n=(a=e.isFunction(l)?e(l(i,t)):e(l)).find(".popover-navigation")).find('[data-role="prev"]'),o=n.find('[data-role="next"]'),r=n.find('[data-role="pause-resume"]'),this._isOrphan(t)&&a.addClass("orphan"),a.addClass("tour-"+this._options.name+" tour-"+this._options.name+"-"+i),t.reflex&&a.addClass("tour-"+this._options.name+"-reflex"),t.prev<0&&s.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),t.next<0&&o.addClass("disabled").prop("disabled",!0).prop("tabindex",-1),t.reflexOnly&&o.hide(),t.duration||r.remove(),a.clone().wrap("<div>").parent().html()},o.prototype._reflexEvent=function(e){return"[object Boolean]"==={}.toString.call(e)?"click":e},o.prototype._reposition=function(i,n){var o,s,r,a,l,c,u;if(a=i[0].offsetWidth,s=i[0].offsetHeight,l=(u=i.offset()).left,c=u.top,(o=e(t).height()-u.top-i.outerHeight())<0&&(u.top=u.top+o),(r=e("html").outerWidth()-u.left-i.outerWidth())<0&&(u.left=u.left+r),u.top<0&&(u.top=0),u.left<0&&(u.left=0),i.offset(u),"bottom"===n.placement||"top"===n.placement){if(l!==u.left)return this._replaceArrow(i,2*(u.left-l),a,"left")}else if(c!==u.top)return this._replaceArrow(i,2*(u.top-c),s,"top")},o.prototype._center=function(t){return t.css("top",e(window).outerHeight()/2-t.outerHeight()/2),t.css("left",e(window).outerWidth()/2-t.outerWidth()/2)},o.prototype._replaceArrow=function(e,t,i,n){return e.find(".arrow").css(n,t?50*(1-t/i)+"%":"")},o.prototype._scrollIntoView=function(t){var i,n,o,s,r,a,l,c,u;if(l=this.getStep(t),i=e(l.element),this._isOrphan(l))return this._showPopoverAndOverlay(t);if(!i.length)return this._showPopoverAndOverlay(t);switch(n=e(window),r=i.offset().top,s=i.outerHeight(),c=n.height(),a=0,l.placement){case"top":a=Math.max(0,r-c/2);break;case"left":case"right":a=Math.max(0,r+s/2-c/2);break;case"bottom":a=Math.max(0,r+s-c/2)}return this._debug("Scroll into view. ScrollTop: "+a+". Element offset: "+r+". Window height: "+c+"."),o=0,e("body, html").stop(!0,!0).animate({scrollTop:Math.ceil(a)},(u=this,function(){if(2==++o)return u._showPopoverAndOverlay(t),u._debug("Scroll into view.\nAnimation end element offset: "+i.offset().top+".\nWindow height: "+n.height()+".")}))},o.prototype._onScroll=function(t,i){return e(window).on("scroll.tour-"+this._options.name,function(){return clearTimeout(i),i=setTimeout(t,100)})},o.prototype._initMouseNavigation=function(){var i;return i=this,e(t).off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']").off("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']").on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='next']",function(e){return function(t){return t.preventDefault(),e.next()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='prev']",function(e){return function(t){if(t.preventDefault(),e._current>0)return e.prev()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='end']",function(e){return function(t){return t.preventDefault(),e.end()}}(this)).on("click.tour-"+this._options.name,".popover.tour-"+this._options.name+" *[data-role='pause-resume']",function(t){var n;return t.preventDefault(),(n=e(this)).text(i._paused?n.data("pause-text"):n.data("resume-text")),i._paused?i.resume():i.pause()})},o.prototype._initKeyboardNavigation=function(){var i;if(this._options.keyboard)return e(t).on("keyup.tour-"+this._options.name,(i=this,function(e){if(e.which)switch(e.which){case 39:return e.preventDefault(),i._isLast()?i.next():i.end();case 37:if(e.preventDefault(),i._current>0)return i.prev()}}))},o.prototype._makePromise=function(t){return t&&e.isFunction(t.then)?t:null},o.prototype._callOnPromiseDone=function(e,t,i){return e?e.then((n=this,function(e){return t.call(n,i)})):t.call(this,i);var n},o.prototype._fixBootstrapSelectPickerZindex=function(i){var n;this._isOrphan(i)||0==e(t).find(".popover.tour-"+this._options.name+".tour-"+this._options.name+"-"+this.getCurrentStepIndex()).length&&(n="select"==e(i.element)[0].tagName.toLowerCase()?e(i.element):e(i.element).find("select:first")).length>0&&n.parent().hasClass("bootstrap-select")&&(this._debug("Fixing Bootstrap SelectPicker"),n.parent().css("z-index","1101"),this._setStepFlag(this.getCurrentStepIndex(),"elementBootstrapSelectpicker",n))},o.prototype._unfixBootstrapSelectPickerZindex=function(e){var t=this._getStepFlag(this.getCurrentStepIndex(),"elementBootstrapSelectpicker");t&&(this._debug("Unfixing Bootstrap SelectPicker"),t.parent().css("z-index","auto"))},o.prototype._showOverlayElements=function(i){var n,o;if(0==e(t).find(".popover.tour-"+this._options.name+".tour-"+this._options.name+"-"+this.getCurrentStepIndex()).length)if(o=!1,i.preventInteraction&&!o&&(e(i.backdropContainer).append("<div class='tour-prevent' id='tourPrevent'></div>"),e("#tourPrevent").width(e(i.element).outerWidth()),e("#tourPrevent").height(e(i.element).outerHeight()),e("#tourPrevent").offset(e(i.element).offset())),docHeight=e(t).height(),docWidth=e(t).width(),0===e(i.element).length||this._isOrphan(i)){var s=e('<div class="tour-backdrop tour-backdrop-orphan"></div>');s.offset({top:0,left:0}),s.width(docWidth),s.height(docHeight),e("body").append(s)}else{n={width:e(i.element).innerWidth(),height:e(i.element).innerHeight(),offset:e(i.element).offset()},i.backdropPadding&&(n=this._applyBackdropPadding(i.backdropPadding,n));var r=e('<div class="tour-backdrop top"></div>');r.offset({top:0,left:0}),r.width(docWidth),r.height(n.offset.top);var a=e('<div class="tour-backdrop left"></div>');a.width(n.offset.left),a.height(n.height),a.offset({top:n.offset.top,left:0});var l=e('<div class="tour-backdrop right"></div>');l.width(docWidth-(n.width+n.offset.left)),l.height(n.height),l.offset({top:n.offset.top,left:n.offset.left+n.width});var c=e('<div class="tour-backdrop bottom"></div>');c.width(docWidth),c.height(docHeight-n.offset.top-n.height),c.offset({top:n.offset.top+n.height,left:0}),e(i.backdropContainer).append(r),e(i.backdropContainer).append(a),e(i.backdropContainer).append(l),e(i.backdropContainer).append(c)}else o=!0},o.prototype._hideOverlayElement=function(t){e("#tourPrevent").length&&e("#tourPrevent").remove(),e(".tour-backdrop").remove()},o.prototype._applyBackdropPadding=function(e,t){return"object"==typeof e?(null==e.top&&(e.top=0),null==e.right&&(e.right=0),null==e.bottom&&(e.bottom=0),null==e.left&&(e.left=0),t.offset.top=t.offset.top-e.top,t.offset.left=t.offset.left-e.left,t.width=t.width+e.left+e.right,t.height=t.height+e.top+e.bottom):(t.offset.top=t.offset.top-e,t.offset.left=t.offset.left-e,t.width=t.width+2*e,t.height=t.height+2*e),t},o.prototype._clearTimer=function(){return window.clearTimeout(this._timer),this._timer=null,this._duration=null},o.prototype._getProtocol=function(e){return(e=e.split("://")).length>1?e[0]:"http"},o.prototype._getHost=function(e){return(e=(e=e.split("//")).length>1?e[1]:e[0]).split("/")[0]},o.prototype._getPath=function(e){return e.replace(/\/?$/,"").split("?")[0].split("#")[0]},o.prototype._getQuery=function(e){return this._getParams(e,"?")},o.prototype._getHash=function(e){return this._getParams(e,"#")},o.prototype._getParams=function(e,t){var i,n,o,s,r;if(1===(s=e.split(t)).length)return{};for(r={},i=0,n=(s=s[1].split("&")).length;i<n;i++)r[(o=(o=s[i]).split("="))[0]]=o[1]||"";return r},o.prototype._equal=function(e,t){var i,n,o,s,r,a;if("[object Object]"==={}.toString.call(e)&&"[object Object]"==={}.toString.call(t)){if(s=Object.keys(e),r=Object.keys(t),s.length!==r.length)return!1;for(n in e)if(a=e[n],!this._equal(t[n],a))return!1;return!0}if("[object Array]"==={}.toString.call(e)&&"[object Array]"==={}.toString.call(t)){if(e.length!==t.length)return!1;for(n=i=0,o=e.length;i<o;n=++i)if(a=e[n],!this._equal(a,t[n]))return!1;return!0}return e===t},o}()})},function(e,t){!function(e,t){"use strict";function i(e,n){var o=this;n=n||{},n=t.extend({},n),o.$element=e,o.options=n;var s=o.options.element?o.options.element:t("div[data-help-notification='"+o.$element.attr("data-help-notification-toggle")+"']");s.find("a[data-launch-guide]").on("click.concreteHelp",function(e){e.preventDefault(),ConcreteHelpGuideManager.getGuide(t(this).attr("data-launch-guide")).start()}),o.$element.on("click",function(e){e.preventDefault(),t(this).addClass("animated fadeOut"),s.addClass("animated fadeIn").show(),s.on("click","a[data-dismiss=help-single]",function(e){e.preventDefault(),i.close(s)})})}i.close=function(e){if(e||(e=t("div[data-help-notification]")),!e||!e.is(":visible"))return!1;var i=t("[data-help-notification-toggle='"+e.attr("data-help-notification")+"']");e.addClass("animated fadeOut"),i.removeClass("fadeOut").addClass("fadeIn"),e.clearQueue().delay(250).queue(function(){t(this).hide(),t(this).removeClass("animated fadeOut"),t(this).dequeue()})},t.fn.concreteHelpLauncher=function(e){return t.each(t(this),function(n,o){new i(t(this),e)})},e.ConcreteHelpLauncher=i}(window,jQuery)},function(e,t){!function(e,t){"use strict";function i(e){e=e||{},e=t.extend({width:800,height:450,title:"Help",dialogClass:"ccm-dialog-slim ccm-dialog-help-wrapper"},e),this.options=e}i.prototype={open:function(){t("#ccm-dialog-help").length?this.options.element="#ccm-dialog-help":this.options.href=CCM_DISPATCHER_FILENAME+"/ccm/system/dialogs/help/introduction",t.fn.dialog.open(this.options)}},e.ConcreteHelpDialog=i}(window,jQuery)},function(e,t){!function(e,t){"use strict";var i={guides:{},register:function(e,t){this.guides[e]=t},getGuide:function(e){return this.guides[e]},enterToolbarGuideMode:function(){ConcreteHelpLauncher.close(),t(".ccm-dialog-help-wrapper").hide(),this.showOverlay(),this.raiseToolbar()},showOverlay:function(){t(".ui-widget-overlay").length<1&&t('<div class="ui-widget-overlay"></div>').hide().appendTo("body"),t(".ui-widget-overlay").addClass("animated fadeIn").show()},raiseToolbar:function(){t("#ccm-toolbar").addClass("ccm-toolbar-tour-guide")},lowerToolbar:function(){t("#ccm-toolbar").removeClass("ccm-toolbar-tour-guide")},hideOverlay:function(){t(".ui-widget-overlay").addClass("animated fadeOut"),t(".ui-widget-overlay").delay(250).queue(function(){t(this).remove(),t(this).dequeue()})},exitToolbarGuideMode:function(){t(".ccm-dialog-help-wrapper").length?t(".ccm-dialog-help-wrapper").show():this.hideOverlay(),this.lowerToolbar()},launchGuideOnRefresh:function(e){t.cookie("ConcreteHelpActiveGuide",e,{path:CCM_REL+"/"})},clearGuideToLaunchOnRefresh:function(e){t.cookie("ConcreteHelpActiveGuide",null,{path:CCM_REL+"/"})},getGuideToLaunchOnRefresh:function(){return t.cookie("ConcreteHelpActiveGuide")},get:function(){return i}};e.ConcreteHelpGuideManager=i}(window,jQuery)},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,i){(function(e){function t(e,t){var i=this;t=$.extend({chooseText:"Choose Event",loadingText:ccmi18n.loadingText,inputName:"eventID",calendarID:0,closeOnComplete:!0,eventID:0},t),i.$element=e,i.options=t,i._chooseTemplate=_.template(i.chooseTemplate,{options:i.options}),i._loadingTemplate=_.template(i.loadingTemplate),i._eventLoadedTemplate=_.template(i.eventLoadedTemplate),i.$element.append(i._chooseTemplate),i.$element.unbind(".calendarEventSelector").on("click.calendarEventSelector","a[data-calendar-event-selector-link=choose]",function(e){e.preventDefault(),$.fn.dialog.open({title:t.chooseText,href:CCM_DISPATCHER_FILENAME+"/ccm/calendar/dialogs/choose_event?caID="+t.calendarID,width:"90%",modal:!0,height:"70%"})}),i.options.eventID&&i.loadEvent(i.options.eventID),ConcreteEvent.unsubscribe("CalendarEventSearchDialogSelectEvent"),ConcreteEvent.subscribe("CalendarEventSearchDialogSelectEvent",function(e,t){i.options.closeOnComplete&&$.fn.dialog.closeTop(),i.loadEvent(t.id)})}t.prototype={chooseTemplate:'<div class="ccm-item-selector"><input type="hidden" name="<%=options.inputName%>" value="0" /><a href="#" data-calendar-event-selector-link="choose"><%=options.chooseText%></a></div>',loadingTemplate:'<div class="ccm-item-selector"><div class="ccm-item-selector-choose"><input type="hidden" name="<%=options.inputName%>" value="<%=eventID%>"><i class="fa fa-spin fa-spinner"></i> <%=options.loadingText%></div></div>',eventLoadedTemplate:'<div class="ccm-item-selector"><div class="ccm-item-selector-item-selected"><input type="hidden" name="<%=inputName%>" value="<%=event.id%>" /><a data-calendar-event-selector-action="clear" href="#" class="ccm-item-selector-clear"><i class="fa fa-close"></i></a><div class="ccm-item-selector-item-selected-title"><%=event.title%></div></div></div>',loadEvent:function(e){var t=this;t.$element.html(t._loadingTemplate({options:t.options,eventID:e})),$.ajax({type:"post",dataType:"json",url:CCM_DISPATCHER_FILENAME+"/ccm/calendar/event/get_json",data:{eventID:e},error:function(e){ConcreteAlert.dialog("Error",e.responseText)},success:function(e){t.$element.html(t._eventLoadedTemplate({inputName:t.options.inputName,event:e})),t.$element.on("click.calendarEventSelector","a[data-calendar-event-selector-action=clear]",function(e){e.preventDefault(),t.$element.html(t._chooseTemplate)})}})}},$.fn.concreteCalendarEventSelector=function(e){return $.each($(this),function(i,n){new t($(this),e)})},e.ConcreteCalendarEventSelector=t}).call(t,i(2))},function(e,t,i){var n;n=function(e){"use strict";var t="transitionend";function i(t){var i=this,o=!1;return e(this).one(n.TRANSITION_END,function(){o=!0}),setTimeout(function(){o||n.triggerTransitionEnd(i)},t),this}var n={TRANSITION_END:"bsTransitionEnd",getUID:function(e){do{e+=~~(1e6*Math.random())}while(document.getElementById(e));return e},getSelectorFromElement:function(e){var t=e.getAttribute("data-target");if(!t||"#"===t){var i=e.getAttribute("href");t=i&&"#"!==i?i.trim():""}try{return document.querySelector(t)?t:null}catch(e){return null}},getTransitionDurationFromElement:function(t){if(!t)return 0;var i=e(t).css("transition-duration"),n=e(t).css("transition-delay"),o=parseFloat(i),s=parseFloat(n);return o||s?(i=i.split(",")[0],n=n.split(",")[0],1e3*(parseFloat(i)+parseFloat(n))):0},reflow:function(e){return e.offsetHeight},triggerTransitionEnd:function(i){e(i).trigger(t)},supportsTransitionEnd:function(){return Boolean(t)},isElement:function(e){return(e[0]||e).nodeType},typeCheckConfig:function(e,t,i){for(var o in i)if(Object.prototype.hasOwnProperty.call(i,o)){var s=i[o],r=t[o],a=r&&n.isElement(r)?"element":(l=r,{}.toString.call(l).match(/\s([a-z]+)/i)[1].toLowerCase());if(!new RegExp(s).test(a))throw new Error(e.toUpperCase()+': Option "'+o+'" provided type "'+a+'" but expected type "'+s+'".')}var l},findShadowRoot:function(e){if(!document.documentElement.attachShadow)return null;if("function"==typeof e.getRootNode){var t=e.getRootNode();return t instanceof ShadowRoot?t:null}return e instanceof ShadowRoot?e:e.parentNode?n.findShadowRoot(e.parentNode):null}};return(e=e&&e.hasOwnProperty("default")?e.default:e).fn.emulateTransitionEnd=i,e.event.special[n.TRANSITION_END]={bindType:t,delegateType:t,handle:function(t){if(e(t.target).is(this))return t.handleObj.handler.apply(this,arguments)}},n},e.exports=n(i(1))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){var n;n=function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function o(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function s(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),n.forEach(function(t){o(e,t,i[t])})}return e}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t,i=i&&i.hasOwnProperty("default")?i.default:i;var r=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],a={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},l=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,c=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function u(e,t,i){if(0===e.length)return e;if(i&&"function"==typeof i)return i(e);for(var n=(new window.DOMParser).parseFromString(e,"text/html"),o=Object.keys(t),s=[].slice.call(n.body.querySelectorAll("*")),a=function(e,i){var n=s[e],a=n.nodeName.toLowerCase();if(-1===o.indexOf(n.nodeName.toLowerCase()))return n.parentNode.removeChild(n),"continue";var u=[].slice.call(n.attributes),d=[].concat(t["*"]||[],t[a]||[]);u.forEach(function(e){(function(e,t){var i=e.nodeName.toLowerCase();if(-1!==t.indexOf(i))return-1===r.indexOf(i)||Boolean(e.nodeValue.match(l)||e.nodeValue.match(c));for(var n=t.filter(function(e){return e instanceof RegExp}),o=0,s=n.length;o<s;o++)if(i.match(n[o]))return!0;return!1})(e,d)||n.removeAttribute(e.nodeName)})},u=0,d=s.length;u<d;u++)a(u);return n.body.innerHTML}var d="tooltip",h=".bs.tooltip",p=e.fn[d],f=new RegExp("(^|\\s)bs-tooltip\\S+","g"),m=["sanitize","whiteList","sanitizeFn"],g={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object"},v={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},y={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:0,container:!1,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:!0,sanitizeFn:null,whiteList:a},b="show",C="out",_={HIDE:"hide"+h,HIDDEN:"hidden"+h,SHOW:"show"+h,SHOWN:"shown"+h,INSERTED:"inserted"+h,CLICK:"click"+h,FOCUSIN:"focusin"+h,FOCUSOUT:"focusout"+h,MOUSEENTER:"mouseenter"+h,MOUSELEAVE:"mouseleave"+h},D="fade",w="show",x=".tooltip-inner",k=".arrow",E="hover",S="focus",A="click",T="manual",F=function(){function o(e,i){if(void 0===t)throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)");this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._popper=null,this.element=e,this.config=this._getConfig(i),this.tip=null,this._setListeners()}var r,a,l,c=o.prototype;return c.enable=function(){this._isEnabled=!0},c.disable=function(){this._isEnabled=!1},c.toggleEnabled=function(){this._isEnabled=!this._isEnabled},c.toggle=function(t){if(this._isEnabled)if(t){var i=this.constructor.DATA_KEY,n=e(t.currentTarget).data(i);n||(n=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(i,n)),n._activeTrigger.click=!n._activeTrigger.click,n._isWithActiveTrigger()?n._enter(null,n):n._leave(null,n)}else{if(e(this.getTipElement()).hasClass(w))return void this._leave(null,this);this._enter(null,this)}},c.dispose=function(){clearTimeout(this._timeout),e.removeData(this.element,this.constructor.DATA_KEY),e(this.element).off(this.constructor.EVENT_KEY),e(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&e(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,null!==this._popper&&this._popper.destroy(),this._popper=null,this.element=null,this.config=null,this.tip=null},c.show=function(){var n=this;if("none"===e(this.element).css("display"))throw new Error("Please use show on visible elements");var o=e.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){e(this.element).trigger(o);var s=i.findShadowRoot(this.element),r=e.contains(null!==s?s:this.element.ownerDocument.documentElement,this.element);if(o.isDefaultPrevented()||!r)return;var a=this.getTipElement(),l=i.getUID(this.constructor.NAME);a.setAttribute("id",l),this.element.setAttribute("aria-describedby",l),this.setContent(),this.config.animation&&e(a).addClass(D);var c="function"==typeof this.config.placement?this.config.placement.call(this,a,this.element):this.config.placement,u=this._getAttachment(c);this.addAttachmentClass(u);var d=this._getContainer();e(a).data(this.constructor.DATA_KEY,this),e.contains(this.element.ownerDocument.documentElement,this.tip)||e(a).appendTo(d),e(this.element).trigger(this.constructor.Event.INSERTED),this._popper=new t(this.element,a,{placement:u,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:k},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function(e){e.originalPlacement!==e.placement&&n._handlePopperPlacementChange(e)},onUpdate:function(e){return n._handlePopperPlacementChange(e)}}),e(a).addClass(w),"ontouchstart"in document.documentElement&&e(document.body).children().on("mouseover",null,e.noop);var h=function(){n.config.animation&&n._fixTransition();var t=n._hoverState;n._hoverState=null,e(n.element).trigger(n.constructor.Event.SHOWN),t===C&&n._leave(null,n)};if(e(this.tip).hasClass(D)){var p=i.getTransitionDurationFromElement(this.tip);e(this.tip).one(i.TRANSITION_END,h).emulateTransitionEnd(p)}else h()}},c.hide=function(t){var n=this,o=this.getTipElement(),s=e.Event(this.constructor.Event.HIDE),r=function(){n._hoverState!==b&&o.parentNode&&o.parentNode.removeChild(o),n._cleanTipClass(),n.element.removeAttribute("aria-describedby"),e(n.element).trigger(n.constructor.Event.HIDDEN),null!==n._popper&&n._popper.destroy(),t&&t()};if(e(this.element).trigger(s),!s.isDefaultPrevented()){if(e(o).removeClass(w),"ontouchstart"in document.documentElement&&e(document.body).children().off("mouseover",null,e.noop),this._activeTrigger[A]=!1,this._activeTrigger[S]=!1,this._activeTrigger[E]=!1,e(this.tip).hasClass(D)){var a=i.getTransitionDurationFromElement(o);e(o).one(i.TRANSITION_END,r).emulateTransitionEnd(a)}else r();this._hoverState=""}},c.update=function(){null!==this._popper&&this._popper.scheduleUpdate()},c.isWithContent=function(){return Boolean(this.getTitle())},c.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-tooltip-"+t)},c.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},c.setContent=function(){var t=this.getTipElement();this.setElementContent(e(t.querySelectorAll(x)),this.getTitle()),e(t).removeClass(D+" "+w)},c.setElementContent=function(t,i){"object"!=typeof i||!i.nodeType&&!i.jquery?this.config.html?(this.config.sanitize&&(i=u(i,this.config.whiteList,this.config.sanitizeFn)),t.html(i)):t.text(i):this.config.html?e(i).parent().is(t)||t.empty().append(i):t.text(e(i).text())},c.getTitle=function(){var e=this.element.getAttribute("data-original-title");return e||(e="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),e},c._getOffset=function(){var e=this,t={};return"function"==typeof this.config.offset?t.fn=function(t){return t.offsets=s({},t.offsets,e.config.offset(t.offsets,e.element)||{}),t}:t.offset=this.config.offset,t},c._getContainer=function(){return!1===this.config.container?document.body:i.isElement(this.config.container)?e(this.config.container):e(document).find(this.config.container)},c._getAttachment=function(e){return v[e.toUpperCase()]},c._setListeners=function(){var t=this;this.config.trigger.split(" ").forEach(function(i){if("click"===i)e(t.element).on(t.constructor.Event.CLICK,t.config.selector,function(e){return t.toggle(e)});else if(i!==T){var n=i===E?t.constructor.Event.MOUSEENTER:t.constructor.Event.FOCUSIN,o=i===E?t.constructor.Event.MOUSELEAVE:t.constructor.Event.FOCUSOUT;e(t.element).on(n,t.config.selector,function(e){return t._enter(e)}).on(o,t.config.selector,function(e){return t._leave(e)})}}),e(this.element).closest(".modal").on("hide.bs.modal",function(){t.element&&t.hide()}),this.config.selector?this.config=s({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},c._fixTitle=function(){var e=typeof this.element.getAttribute("data-original-title");(this.element.getAttribute("title")||"string"!==e)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},c._enter=function(t,i){var n=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(n))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,i)),t&&(i._activeTrigger["focusin"===t.type?S:E]=!0),e(i.getTipElement()).hasClass(w)||i._hoverState===b?i._hoverState=b:(clearTimeout(i._timeout),i._hoverState=b,i.config.delay&&i.config.delay.show?i._timeout=setTimeout(function(){i._hoverState===b&&i.show()},i.config.delay.show):i.show())},c._leave=function(t,i){var n=this.constructor.DATA_KEY;(i=i||e(t.currentTarget).data(n))||(i=new this.constructor(t.currentTarget,this._getDelegateConfig()),e(t.currentTarget).data(n,i)),t&&(i._activeTrigger["focusout"===t.type?S:E]=!1),i._isWithActiveTrigger()||(clearTimeout(i._timeout),i._hoverState=C,i.config.delay&&i.config.delay.hide?i._timeout=setTimeout(function(){i._hoverState===C&&i.hide()},i.config.delay.hide):i.hide())},c._isWithActiveTrigger=function(){for(var e in this._activeTrigger)if(this._activeTrigger[e])return!0;return!1},c._getConfig=function(t){var n=e(this.element).data();return Object.keys(n).forEach(function(e){-1!==m.indexOf(e)&&delete n[e]}),"number"==typeof(t=s({},this.constructor.Default,n,"object"==typeof t&&t?t:{})).delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),i.typeCheckConfig(d,t,this.constructor.DefaultType),t.sanitize&&(t.template=u(t.template,t.whiteList,t.sanitizeFn)),t},c._getDelegateConfig=function(){var e={};if(this.config)for(var t in this.config)this.constructor.Default[t]!==this.config[t]&&(e[t]=this.config[t]);return e},c._cleanTipClass=function(){var t=e(this.getTipElement()),i=t.attr("class").match(f);null!==i&&i.length&&t.removeClass(i.join(""))},c._handlePopperPlacementChange=function(e){var t=e.instance;this.tip=t.popper,this._cleanTipClass(),this.addAttachmentClass(this._getAttachment(e.placement))},c._fixTransition=function(){var t=this.getTipElement(),i=this.config.animation;null===t.getAttribute("x-placement")&&(e(t).removeClass(D),this.config.animation=!1,this.hide(),this.show(),this.config.animation=i)},o._jQueryInterface=function(t){return this.each(function(){var i=e(this).data("bs.tooltip"),n="object"==typeof t&&t;if((i||!/dispose|hide/.test(t))&&(i||(i=new o(this,n),e(this).data("bs.tooltip",i)),"string"==typeof t)){if(void 0===i[t])throw new TypeError('No method named "'+t+'"');i[t]()}})},r=o,l=[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return y}},{key:"NAME",get:function(){return d}},{key:"DATA_KEY",get:function(){return"bs.tooltip"}},{key:"Event",get:function(){return _}},{key:"EVENT_KEY",get:function(){return h}},{key:"DefaultType",get:function(){return g}}],(a=null)&&n(r.prototype,a),l&&n(r,l),o}();return e.fn[d]=F._jQueryInterface,e.fn[d].Constructor=F,e.fn[d].noConflict=function(){return e.fn[d]=p,F._jQueryInterface},F},e.exports=n(i(1),i(9),i(122))},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){e.exports=i(298)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});i(33);var n=i(253),o=(i.n(n),i(299)),s=(i.n(o),i(300)),r=(i.n(s),i(301));i.n(r)},function(e,t,i){var n;n=function(e,t){"use strict";function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function o(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),o.forEach(function(t){n(e,t,i[t])})}return e}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var s="popover",r=".bs.popover",a=e.fn[s],l=new RegExp("(^|\\s)bs-popover\\S+","g"),c=o({},t.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>'}),u=o({},t.DefaultType,{content:"(string|element|function)"}),d="fade",h="show",p=".popover-header",f=".popover-body",m={HIDE:"hide"+r,HIDDEN:"hidden"+r,SHOW:"show"+r,SHOWN:"shown"+r,INSERTED:"inserted"+r,CLICK:"click"+r,FOCUSIN:"focusin"+r,FOCUSOUT:"focusout"+r,MOUSEENTER:"mouseenter"+r,MOUSELEAVE:"mouseleave"+r},g=function(t){var n,o;function a(){return t.apply(this,arguments)||this}o=t,(n=a).prototype=Object.create(o.prototype),n.prototype.constructor=n,n.__proto__=o;var g,v,y,b=a.prototype;return b.isWithContent=function(){return this.getTitle()||this._getContent()},b.addAttachmentClass=function(t){e(this.getTipElement()).addClass("bs-popover-"+t)},b.getTipElement=function(){return this.tip=this.tip||e(this.config.template)[0],this.tip},b.setContent=function(){var t=e(this.getTipElement());this.setElementContent(t.find(p),this.getTitle());var i=this._getContent();"function"==typeof i&&(i=i.call(this.element)),this.setElementContent(t.find(f),i),t.removeClass(d+" "+h)},b._getContent=function(){return this.element.getAttribute("data-content")||this.config.content},b._cleanTipClass=function(){var t=e(this.getTipElement()),i=t.attr("class").match(l);null!==i&&i.length>0&&t.removeClass(i.join(""))},a._jQueryInterface=function(t){return this.each(function(){var i=e(this).data("bs.popover"),n="object"==typeof t?t:null;if((i||!/dispose|hide/.test(t))&&(i||(i=new a(this,n),e(this).data("bs.popover",i)),"string"==typeof t)){if(void 0===i[t])throw new TypeError('No method named "'+t+'"');i[t]()}})},g=a,y=[{key:"VERSION",get:function(){return"4.3.1"}},{key:"Default",get:function(){return c}},{key:"NAME",get:function(){return s}},{key:"DATA_KEY",get:function(){return"bs.popover"}},{key:"Event",get:function(){return m}},{key:"EVENT_KEY",get:function(){return r}},{key:"DefaultType",get:function(){return u}}],(v=null)&&i(g.prototype,v),y&&i(g,y),a}(t);return e.fn[s]=g._jQueryInterface,e.fn[s].Constructor=g,e.fn[s].noConflict=function(){return e.fn[s]=a,g._jQueryInterface},g},e.exports=n(i(1),i(253))},function(e,t,i){var n;n=function(e,t){"use strict";function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var n=e.fn.tab,o={HIDE:"hide.bs.tab",HIDDEN:"hidden.bs.tab",SHOW:"show.bs.tab",SHOWN:"shown.bs.tab",CLICK_DATA_API:"click.bs.tab.data-api"},s="dropdown-menu",r="active",a="disabled",l="fade",c="show",u=".dropdown",d=".nav, .list-group",h=".active",p="> li > .active",f='[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',m=".dropdown-toggle",g="> .dropdown-menu .active",v=function(){function n(e){this._element=e}var f,v,y,b=n.prototype;return b.show=function(){var i=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&e(this._element).hasClass(r)||e(this._element).hasClass(a))){var n,s,l=e(this._element).closest(d)[0],c=t.getSelectorFromElement(this._element);if(l){var u="UL"===l.nodeName||"OL"===l.nodeName?p:h;s=(s=e.makeArray(e(l).find(u)))[s.length-1]}var f=e.Event(o.HIDE,{relatedTarget:this._element}),m=e.Event(o.SHOW,{relatedTarget:s});if(s&&e(s).trigger(f),e(this._element).trigger(m),!m.isDefaultPrevented()&&!f.isDefaultPrevented()){c&&(n=document.querySelector(c)),this._activate(this._element,l);var g=function(){var t=e.Event(o.HIDDEN,{relatedTarget:i._element}),n=e.Event(o.SHOWN,{relatedTarget:s});e(s).trigger(t),e(i._element).trigger(n)};n?this._activate(n,n.parentNode,g):g()}}},b.dispose=function(){e.removeData(this._element,"bs.tab"),this._element=null},b._activate=function(i,n,o){var s=this,r=(!n||"UL"!==n.nodeName&&"OL"!==n.nodeName?e(n).children(h):e(n).find(p))[0],a=o&&r&&e(r).hasClass(l),u=function(){return s._transitionComplete(i,r,o)};if(r&&a){var d=t.getTransitionDurationFromElement(r);e(r).removeClass(c).one(t.TRANSITION_END,u).emulateTransitionEnd(d)}else u()},b._transitionComplete=function(i,n,o){if(n){e(n).removeClass(r);var a=e(n.parentNode).find(g)[0];a&&e(a).removeClass(r),"tab"===n.getAttribute("role")&&n.setAttribute("aria-selected",!1)}if(e(i).addClass(r),"tab"===i.getAttribute("role")&&i.setAttribute("aria-selected",!0),t.reflow(i),i.classList.contains(l)&&i.classList.add(c),i.parentNode&&e(i.parentNode).hasClass(s)){var d=e(i).closest(u)[0];if(d){var h=[].slice.call(d.querySelectorAll(m));e(h).addClass(r)}i.setAttribute("aria-expanded",!0)}o&&o()},n._jQueryInterface=function(t){return this.each(function(){var i=e(this),o=i.data("bs.tab");if(o||(o=new n(this),i.data("bs.tab",o)),"string"==typeof t){if(void 0===o[t])throw new TypeError('No method named "'+t+'"');o[t]()}})},f=n,y=[{key:"VERSION",get:function(){return"4.3.1"}}],(v=null)&&i(f.prototype,v),y&&i(f,y),n}();return e(document).on(o.CLICK_DATA_API,f,function(t){t.preventDefault(),v._jQueryInterface.call(e(this),"show")}),e.fn.tab=v._jQueryInterface,e.fn.tab.Constructor=v,e.fn.tab.noConflict=function(){return e.fn.tab=n,v._jQueryInterface},v},e.exports=n(i(1),i(122))},function(e,t,i){var n;n=function(e,t){"use strict";function i(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var o="toast",s=e.fn.toast,r={CLICK_DISMISS:"click.dismiss.bs.toast",HIDE:"hide.bs.toast",HIDDEN:"hidden.bs.toast",SHOW:"show.bs.toast",SHOWN:"shown.bs.toast"},a="fade",l="hide",c="show",u="showing",d={animation:"boolean",autohide:"boolean",delay:"number"},h={animation:!0,autohide:!0,delay:500},p='[data-dismiss="toast"]',f=function(){function s(e,t){this._element=e,this._config=this._getConfig(t),this._timeout=null,this._setListeners()}var f,m,g,v=s.prototype;return v.show=function(){var i=this;e(this._element).trigger(r.SHOW),this._config.animation&&this._element.classList.add(a);var n=function(){i._element.classList.remove(u),i._element.classList.add(c),e(i._element).trigger(r.SHOWN),i._config.autohide&&i.hide()};if(this._element.classList.remove(l),this._element.classList.add(u),this._config.animation){var o=t.getTransitionDurationFromElement(this._element);e(this._element).one(t.TRANSITION_END,n).emulateTransitionEnd(o)}else n()},v.hide=function(t){var i=this;this._element.classList.contains(c)&&(e(this._element).trigger(r.HIDE),t?this._close():this._timeout=setTimeout(function(){i._close()},this._config.delay))},v.dispose=function(){clearTimeout(this._timeout),this._timeout=null,this._element.classList.contains(c)&&this._element.classList.remove(c),e(this._element).off(r.CLICK_DISMISS),e.removeData(this._element,"bs.toast"),this._element=null,this._config=null},v._getConfig=function(i){return i=function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{},o=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),o.forEach(function(t){n(e,t,i[t])})}return e}({},h,e(this._element).data(),"object"==typeof i&&i?i:{}),t.typeCheckConfig(o,i,this.constructor.DefaultType),i},v._setListeners=function(){var t=this;e(this._element).on(r.CLICK_DISMISS,p,function(){return t.hide(!0)})},v._close=function(){var i=this,n=function(){i._element.classList.add(l),e(i._element).trigger(r.HIDDEN)};if(this._element.classList.remove(c),this._config.animation){var o=t.getTransitionDurationFromElement(this._element);e(this._element).one(t.TRANSITION_END,n).emulateTransitionEnd(o)}else n()},s._jQueryInterface=function(t){return this.each(function(){var i=e(this),n=i.data("bs.toast");if(n||(n=new s(this,"object"==typeof t&&t),i.data("bs.toast",n)),"string"==typeof t){if(void 0===n[t])throw new TypeError('No method named "'+t+'"');n[t](this)}})},f=s,g=[{key:"VERSION",get:function(){return"4.3.1"}},{key:"DefaultType",get:function(){return d}},{key:"Default",get:function(){return h}}],(m=null)&&i(f.prototype,m),g&&i(f,g),s}();return e.fn.toast=f._jQueryInterface,e.fn.toast.Constructor=f,e.fn.toast.noConflict=function(){return e.fn.toast=s,f._jQueryInterface},f},e.exports=n(i(1),i(122))}]);